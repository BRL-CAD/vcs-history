K 10
svn:author
V 6
brlcad
K 8
svn:date
V 27
2016-10-03T07:26:43.876966Z
K 7
svn:log
V 1098
after MUCH thrashing, here is a rewrite the add_test() wrapper that fixes a problem with the previous version.  previous was not actually handling empty strings, which are used by a significant number of our tests.  it was silently not passing them to the test program.  turns out that cmake really does not like consistently dealing with empty string/list elements and loses it once we're in the wrapper. once it's processed into list form (e.g., ARGV/ARGN), it gets ignored by _add_test().  this may be due to cmake_parse_arguments() being used within _add_test() which also unexpectedly ignores empty list elements.  reported behavior as bug to upstream.

after much trial and error (more error than trial), a workaround was finally found and is implemented here.  basically, we reconstruct an invocation of add_test() in the wrapper so empty strings are passed as such, not via a list.  this is fugly and inane and would be fragile, but there are a couple protections included that greatly help future-proof the wrapper.  other comments should also help the next dev figure out what's going on.
END
