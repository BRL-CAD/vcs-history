K 10
svn:author
V 11
indianlarry
K 8
svn:date
V 27
2015-07-31T15:57:11.649266Z
K 7
svn:log
V 412
Function bu_semaphore_init() does a quick unlocked read of global "bu_nsemaphores" and returns if "nsemaphores <= bu_nsemaphores"  otherwise it wait for lock and initialize what it thinks are uninitialized semaphores. There looks to be a race condition that could lead to possible re-initializing of semaphores. Fixed by checking bu_semaphores again under lock(bu_init_lock) to make sure not already initialized.
END
