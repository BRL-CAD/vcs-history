K 10
svn:author
V 6
brlcad
K 8
svn:date
V 27
2008-09-25T02:56:48.829587Z
K 7
svn:log
V 686
fix the problem that daniel ran into with the db_dump snippet he sent to the brlcad-users list.  his program opened an inmem and dumped it to disk, but was crashing during the dump.  there were several problems I found (after 10 freaking hours of debugging and testing...), one being a bug in wdb_export_external() that was 8 years old.  the routine erroneously allowed a disk dp to be marked as an inmem dp.  that caused a crash since the (union sharing) datastores for the two are rather different.  the second more innocuous problem was db_sync() not checking that there is no fp to flush/sync or call fileno on (which is called during db_close().  his program now works as expected.
END
