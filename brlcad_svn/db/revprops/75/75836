K 10
svn:author
V 10
starseeker
K 8
svn:date
V 27
2020-05-19T03:34:33.947117Z
K 7
svn:log
V 860
Use of fbserv_obj isn't as widespread as I thought - the actual 'fbserv' command doesn't appear to use it.  It's used by Archer through libtclcad, and 4 libged commands reference the data structure - fb2pix, fbclear, pix2fb, and png2fb.  Need to examine those in more detail to see how to achieve what they are doing without recourse to ged_fbsp, but temporarily commenting those out it is possible to move fbserv_obj to libtclcad.  It's referencing the internal details of libdm/fb, so the API separation isn't clean in that sense, but it does push all use of Tcl associated with that object up into libtclcad.  That in turn lets us remove all remaining inclusions of tcl.h and friends from the core libdm/fb library.  Most of the backends still use it, but we can now (sans the four previously mentioned commands) do a libged build completely without Tcl/Tk.
END
