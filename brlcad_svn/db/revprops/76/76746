K 10
svn:author
V 10
starseeker
K 8
svn:date
V 27
2020-08-14T12:11:13.173855Z
K 7
svn:log
V 969
The same thing that made OpenBSD such a pain for bu_dir works against the GED plugins - we need bu_setprogname for the initialization to work reliably, but at library load we don't have the program name.  Handle it by having the two accessor commands - ged_cmd_valid and ged_exec - check to make sure the command map is populated before trying anything, and if it is not re-attempt the initialization.  By the time we're calling those functions bu_setprogname should be set and the initialization should now succeed.  The regression test that checks for bu_setprogname should ensure this will work across all BRL-CAD commands - any program that does NOT call bu_setprogname and attempts to use a GED command will now fail on OpenBSD.  In some sense knowing the BRL-CAD root path has always been integral to BRL-CAD's design, but the conversion of GED commands to plugins elevates not knowing the path from an obscure source of occasional problems to immediate breakage.
END
