K 10
svn:author
V 6
n_reed
K 8
svn:date
V 27
2016-12-07T23:26:11.998141Z
K 7
svn:log
V 588
Fix an xpush bug. We must stash dp->d_forw when iterating through entries in a dbip hash bin, because if dp is passed to db_dirdelete, dp->d_forw will be redirected to the next item of the directory free-list. Failure to do this meant that xpush was iterating over the directory free-list every time it deleted an original object. In most cases this was merely a waste of time. However, in the case where another original object scheduled for deletion happened to hash to the same bin, the latter object was skipped, leaving a stray top-level object in the database on return from xpush.

END
