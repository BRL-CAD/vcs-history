K 10
svn:author
V 6
n_reed
K 8
svn:date
V 27
2020-02-27T15:38:12.687886Z
K 7
svn:log
V 1099
Notional fix of transparency in MGED.

This makes the -x [0.0,1.0] option to "e" work in MGED, provided lighting and
transparency are enabled (dm set lighting 2, dm set transparency 1).

To implement transparency, MGED draws opaque stuff first, then does a second
pass of transparent stuff with the depth mask disabled so back faces are
blended instead of culled.

The current implementation has the two passes done using the same function with
different transparency thresholds, first 1, then ~.999 (nextafter(1.0, 0.0)).

The first problem is that only objects >= threshold are being drawn, so the
second call should be ~0, not ~.999 in order to draw transparent stuff.

The second problem is that using a one-sided threshold would seem to
technically draw all the opaque objects twice, though there may be some
implementation detail I'm missing that prevents this.

I corrected the threshold value for the second pass. I also changed the draw
function to operate in two modes based on the threshold, which feels like the
original intention, but also doesn't seem like the correct way to do this.

END
