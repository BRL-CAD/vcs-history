K 10
svn:author
V 10
starseeker
K 8
svn:date
V 27
2018-04-17T17:09:22.044814Z
K 7
svn:log
V 1042
It turns out str_dbl was calculating the floating point value by doing an accumulation sum and multiplication, which can result in an observed accumulated numerical delta on the order of 1e-10 between str_dbl and the standard function strtod.  The standard function is unsurprisingly correct (comparing it to the input string buffer) so the new behavior actually fixes a bug in nirt. However, using any typical units a delta of 1e-10 is way below BN_TOL_DIST.  An argument might be made that the old conversions were 'close enough' according to our supported tolerances and in practical use the small input perturbations do sometimes manifest in macroscopic differences in raytracing results.  So what we'll do is go with the correct strtod conversion in the new nirt code and restore the str_dbl input method for the --old behavior of nirt.  This is primarily being done to make it easier to compare outputs against older BRL-CAD versions during the transition period - str_dbl will be removed when the rest of the --old code can be removed.
END
