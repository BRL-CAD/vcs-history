K 10
svn:author
V 10
starseeker
K 8
svn:date
V 27
2018-04-19T19:39:33.203828Z
K 7
svn:log
V 893
The INFINITY assignments in shoot.c lines 993-1025 reach the rt_in_rpp calculations, and in cases where these values are multiplied by 0 a multiplication using an actual C99 inf results in a nan that causes all subsequent comparisons to return false.  However, when falling back to our C89 compatibility definitions for INFINITY we get typical numerical behavior (0*INFINITY == 0, not nan) which results in different behavior of the comparisons.  For specific grazing cases, this results in different raytracing behavor as boxes reject and accept different rays.  This needs a conceptual fix, but for the moment use additional checks to avoid doing comparisons in rt_in_rpp that will produce different results using the C89 numerical version of INFINITY (since all of those tests would fail in the C99 case, we can achieve the same result if we just skip them when we have the INFINITY value).
END
