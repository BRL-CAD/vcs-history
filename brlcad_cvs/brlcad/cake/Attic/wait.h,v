head	11.4;
access;
symbols
	ansi-20040405-merged:11.1.6.1
	postmerge-20040405-ansi:11.3
	premerge-20040404-ansi:11.3
	postmerge-autoconf:11.3
	premerge-autoconf:11.3
	ansi-20040316-freeze:11.1
	postmerge-20040315-windows:11.3
	premerge-20040315-windows:11.3
	windows-20040315-freeze:11.1.8.1
	autoconf-20031203:11.1.14.1
	autoconf-20031202:11.1
	phong-branch:11.1.0.12
	photonmap-branch:11.1.0.10
	rel-6-1-DP:11.1
	windows-branch:11.1.0.8
	rel-6-0-2:11.1
	ansi-branch:11.1.0.6
	rel-6-0-1-branch:11.1.0.4
	hartley-6-0-post:11.1
	hartley-6-0-pre:11.1
	rel-6-0-1:11.1
	rel-6-0:11.1
	rel-5-4:11.1
	offsite-5-3-pre:11.1
	rel-5-3:11.1
	rel-5-2:11.1
	rel-5-1-branch:11.1.0.2
	rel-5-1:11.1
	rel-5-0:11.1
	rel-5-0-beta:11.1
	rel-4-5:11.1
	ctj-4-5-post:11.1
	ctj-4-5-pre:11.1
	rel-4-4:1.2
	rel-4-0:1.2
	rel-3-5:1.1
	rel-3-0:1.1
	AUTOCONF:11.1.0.14;
locks; strict;
comment	@ * @;


11.4
date	2004.05.19.15.45.58;	author morrison;	state dead;
branches;
next	11.3;

11.3
date	2004.03.01.15.37.43;	author morrison;	state Exp;
branches;
next	11.2;

11.2
date	2003.11.07.14.00.17;	author erikg;	state Exp;
branches;
next	11.1;

11.1
date	95.01.05.06.00.02;	author mike;	state Rel4_4;
branches
	11.1.6.1
	11.1.8.1
	11.1.14.1;
next	1.2;

1.2
date	91.07.03.22.09.06;	author mike;	state Exp;
branches;
next	1.1;

1.1
date	88.06.11.00.56.35;	author mike;	state Original;
branches;
next	;

11.1.6.1
date	2004.03.17.21.15.52;	author morrison;	state Exp;
branches;
next	;

11.1.8.1
date	2004.03.11.23.40.27;	author morrison;	state Exp;
branches;
next	;

11.1.14.1
date	2003.12.03.17.44.53;	author erikg;	state Exp;
branches;
next	11.1.14.2;

11.1.14.2
date	2004.02.12.19.40.41;	author erikg;	state Exp;
branches;
next	11.1.14.3;

11.1.14.3
date	2004.03.15.14.06.05;	author erikg;	state Exp;
branches;
next	11.1.14.4;

11.1.14.4
date	2004.03.18.18.10.24;	author erikg;	state dead;
branches;
next	;


desc
@cake source file 
@


11.4
log
@cake is no more and theres no incentive to maintain it any more so .. buh bye.
@
text
@/*
**	Compatibility for ATT versions of Unix
**	with Berkeley's wait system calls.
**
**	$Header: /cvs/brlcad/cake/wait.h,v 11.3 2004/03/01 15:37:43 morrison Exp $
*/

#if defined(ATT) || ( defined(__MACHINETYPE__fbsd) && defined(__FreeBSD__) && __FreeBSD__ >= 5)
/*
 * Copyright (c) 1982 Regents of the University of California.
 * All rights reserved.  The Berkeley software License Agreement
 * specifies the terms and conditions for redistribution.
 *
 *	@@(#)wait.h	6.2 (Berkeley) 6/8/85
 */

/*
 * This file holds definitions relevent to the wait system call.
 * Some of the options here are available only through the ``wait3''
 * entry point; the old entry point with one argument has more fixed
 * semantics, never returning status of unstopped children, hanging until
 * a process terminates if any are outstanding, and never returns
 * detailed information about process resource utilization (<vtimes.h>).
 */

/*
 * Structure of the information in the first word returned by both
 * wait and wait3.  If w_stopval==WSTOPPED, then the second structure
 * describes the information returned, else the first.  See WUNTRACED below.
 */
union wait	{
	int	w_status;		/* used in syscall */
	/*
	 * Terminated process status.
	 */
	struct {
		unsigned int	w_Termsig:7;	/* termination signal */
		unsigned int	w_Coredump:1;	/* core dump indicator */
		unsigned int	w_Retcode:8;	/* exit code if w_termsig==0 */
	} w_T;
	/*
	 * Stopped process status.  Returned
	 * only for traced children unless requested
	 * with the WUNTRACED option bit.
	 */
	struct {
		unsigned int	w_Stopval:8;	/* == W_STOPPED if stopped */
		unsigned int	w_Stopsig:8;	/* signal that stopped us */
	} w_S;
};
#define	w_termsig	w_T.w_Termsig
#define w_coredump	w_T.w_Coredump
#define w_retcode	w_T.w_Retcode
#define w_stopval	w_S.w_Stopval
#define w_stopsig	w_S.w_Stopsig


#define	WSTOPPED	0177	/* value of s.stopval if process is stopped */

/*
 * Option bits for the second argument of wait3.  WNOHANG causes the
 * wait to not hang if there are no stopped or terminated processes, rather
 * returning an error indication in this case (pid==0).  WUNTRACED
 * indicates that the caller should receive status about untraced children
 * which stop due to signals.  If children are stopped and a wait without
 * this option is done, it is as though they were still running... nothing
 * about them is returned.
 */
#define WNOHANG		1	/* dont hang in wait */
#define WUNTRACED	2	/* tell about stopped, untraced children */

#define WIFSTOPPED(x)	((x).w_stopval == WSTOPPED)
#define WIFSIGNALED(x)	((x).w_stopval != WSTOPPED && (x).w_termsig != 0)
#define WIFEXITED(x)	((x).w_stopval != WSTOPPED && (x).w_termsig == 0)
#else
#include	<sys/wait.h>

#define mask(s)	(1 << ((s)-1))
#endif

typedef	union wait	Wait;
@


11.3
log
@make sure we check for our platform inside of cake
@
text
@d5 1
a5 1
**	$Header: /c/CVS/brlcad/cake/wait.h,v 11.2 2003/11/07 14:00:17 erikg Exp $
@


11.2
log
@fix for fbsd5
@
text
@d5 1
a5 1
**	$Header: /c/CVS/brlcad/cake/wait.h,v 11.1 1995/01/05 06:00:02 mike Rel4_4 $
d8 1
a8 1
#if defined(ATT) || ( defined(__FreeBSD__) && __FreeBSD__ >= 5)
@


11.1
log
@Release_4_4
@
text
@d5 1
a5 1
**	$Header: /m/cad/cake/RCS/wait.h,v 1.2 91/07/03 22:09:06 mike Exp $
d8 1
a8 1
#ifdef	ATT
@


11.1.6.1
log
@sync branch with HEAD
@
text
@d5 1
a5 1
**	$Header$
d8 1
a8 1
#if defined(ATT) || ( defined(__MACHINETYPE__fbsd) && defined(__FreeBSD__) && __FreeBSD__ >= 5)
@


11.1.8.1
log
@sync to HEAD...
@
text
@d5 1
a5 1
**	$Header: /n/cad/c/CVS/brlcad/cake/wait.h,v 11.3 2004/03/01 15:37:43 morrison Exp $
d8 1
a8 1
#if defined(ATT) || ( defined(__MACHINETYPE__fbsd) && defined(__FreeBSD__) && __FreeBSD__ >= 5)
@


11.1.14.1
log
@updates from HEAD
@
text
@d5 1
a5 1
**	$Header: /c/CVS/brlcad/cake/wait.h,v 11.2 2003/11/07 14:00:17 erikg Exp $
d8 1
a8 1
#if defined(ATT) || ( defined(__FreeBSD__) && __FreeBSD__ >= 5)
@


11.1.14.2
log
@merge from HEAD
@
text
@@


11.1.14.3
log
@merge from head
@
text
@d5 1
a5 1
**	$Header: /c/CVS/brlcad/cake/wait.h,v 11.1.14.2 2004/02/12 19:40:41 erikg Exp $
d8 1
a8 1
#if defined(ATT) || ( defined(__MACHINETYPE__fbsd) && defined(__FreeBSD__) && __FreeBSD__ >= 5)
@


11.1.14.4
log
@merge from head
@
text
@d5 1
a5 1
**	$Header: /cvs/brlcad/cake/wait.h,v 11.1.14.3 2004/03/15 14:06:05 erikg Exp $
@


1.2
log
@Made a minor modification for the IBM RS/6000, which is fussy about
short bitfields.
@
text
@d5 1
a5 1
**	$Header: /m/cad/cake/RCS/wait.h,v 1.1 88/06/11 00:56:35 mike Original $
@


1.1
log
@Original CAKE version from net.sources
@
text
@d5 1
a5 1
**	$Header: /mip/zs/src/sys/cake/RCS/wait.h,v 1.14 86/07/19 12:24:22 zs Exp $
d37 3
a39 3
		unsigned short	w_Termsig:7;	/* termination signal */
		unsigned short	w_Coredump:1;	/* core dump indicator */
		unsigned short	w_Retcode:8;	/* exit code if w_termsig==0 */
d47 2
a48 2
		unsigned short	w_Stopval:8;	/* == W_STOPPED if stopped */
		unsigned short	w_Stopsig:8;	/* signal that stopped us */
@
