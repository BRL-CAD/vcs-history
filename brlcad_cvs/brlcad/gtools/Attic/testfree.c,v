head	1.5;
access;
symbols
	ansi-20040405-merged:1.3.2.1
	postmerge-20040405-ansi:1.4
	premerge-20040404-ansi:1.3
	postmerge-autoconf:1.3
	autoconf-freeze:1.3
	premerge-autoconf:1.3
	ansi-20040316-freeze:1.3.2.1
	postmerge-20040315-windows:1.3
	premerge-20040315-windows:1.3
	windows-20040315-freeze:1.3
	autoconf-20031203:1.3
	autoconf-20031202:1.3
	autoconf-branch:1.3.0.10
	phong-branch:1.3.0.8
	photonmap-branch:1.3.0.6
	rel-6-1-DP:1.3
	windows-branch:1.3.0.4
	rel-6-0-2:1.1
	ansi-branch:1.3.0.2
	rel-6-0-1-branch:1.1.0.4
	hartley-6-0-post:1.2
	hartley-6-0-pre:1.1
	rel-6-0-1:1.1
	rel-6-0:1.1
	rel-5-4:1.1
	offsite-5-3-pre:1.1
	rel-5-3:1.1
	rel-5-2:1.1
	rel-5-1-branch:1.1.0.2
	rel-5-1:1.1
	rel-5-0:1.1
	rel-5-0-beta:1.1;
locks; strict;
comment	@ * @;


1.5
date	2004.05.24.04.12.34;	author morrison;	state dead;
branches;
next	1.4;

1.4
date	2004.04.05.07.48.13;	author morrison;	state Exp;
branches;
next	1.3;

1.3
date	2002.08.20.17.07.29;	author jra;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2002.08.15.20.54.42;	author hartley;	state Exp;
branches;
next	1.1;

1.1
date	99.02.12.20.44.14;	author jra;	state Exp;
branches;
next	;

1.3.2.1
date	2002.09.19.18.00.54;	author morrison;	state Exp;
branches;
next	;


desc
@@


1.5
log
@moved to src/gtools/
@
text
@#include <stdio.h>
#include <math.h>
#include "machine.h"
#include "vmath.h"
#include "rtstring.h"
#include "raytrace.h"

struct whatsit
{
    long	w_magic;
    double	w_d;
};
#define	WHATSIT_MAGIC	0x12345678

void free_whatsit (struct whatsit *wp, char *s)
{
    RT_CKMAG(wp, WHATSIT_MAGIC, "whatsit");

    rt_free((char *) wp, "a whatsit");
}

main (void)
{
    struct whatsit	*wp;

    rt_log("allocating a whatsit...\n");
    wp = (struct whatsit *) rt_malloc(sizeof(struct whatsit), "the whatsit");

    rt_log("Before initializing, the whatsit = <%x> (%x, %g)\n",
	    wp, wp -> w_magic, wp -> w_d);
    wp -> w_magic = WHATSIT_MAGIC;
    wp -> w_d = 4.96962656372528225336310;
    rt_log("After initializing, the whatsit = <%x> (%x, %g)\n",
	    wp, wp -> w_magic, wp -> w_d);

    free_whatsit(wp, "the whatsit once");
    rt_log("Freed it once\n");

    free_whatsit(wp, "the whatsit twice");
    rt_log("Freed it again\n");
}
@


1.4
log
@merge of ansi-6-0-branch into HEAD
@
text
@@


1.3
log
@Restoration of entire source tree to Pre-Hartley state
@
text
@d15 1
a15 5
void free_whatsit (wp, s)

struct whatsit	*wp;
char		*s;

d22 1
a22 1
main ()
@


1.3.2.1
log
@Initial ANSIfication
@
text
@d15 5
a19 1
void free_whatsit (struct whatsit *wp, char *s)
d26 1
a26 1
main (void)
@


1.2
log
@Converted from K&R to ANSI C - RFH
@
text
@d15 5
a19 1
void free_whatsit (struct whatsit *wp, char *s)
d26 1
a26 1
main (void)
@


1.1
log
@changed g_lint directry to gtools
@
text
@d15 1
a15 5
void free_whatsit (wp, s)

struct whatsit	*wp;
char		*s;

d22 1
a22 1
main ()
@

