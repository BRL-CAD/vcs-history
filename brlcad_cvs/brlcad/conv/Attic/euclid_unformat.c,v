head	1.11;
access;
symbols
	ansi-20040405-merged:1.8.2.1
	postmerge-20040405-ansi:1.9
	premerge-20040404-ansi:1.8
	postmerge-autoconf:1.8
	autoconf-freeze:1.8
	premerge-autoconf:1.8
	ansi-20040316-freeze:1.8.2.1
	postmerge-20040315-windows:1.8
	premerge-20040315-windows:1.8
	windows-20040315-freeze:1.8
	autoconf-20031203:1.8
	autoconf-20031202:1.8
	autoconf-branch:1.8.0.10
	phong-branch:1.8.0.8
	photonmap-branch:1.8.0.6
	rel-6-1-DP:1.8
	windows-branch:1.8.0.4
	rel-6-0-2:1.6
	ansi-branch:1.8.0.2
	rel-6-0-1-branch:1.6.0.2
	hartley-6-0-post:1.7
	hartley-6-0-pre:1.6
	rel-6-0-1:1.6
	rel-6-0:1.6
	rel-5-4:1.4
	offsite-5-3-pre:1.6
	rel-5-3:1.4
	rel-5-2:1.4
	rel-5-1-branch:1.4.0.2
	rel-5-1:1.4
	rel-5-0:1.3
	rel-5-0-beta:1.3
	rel-4-5:1.2
	ctj-4-5-post:1.2
	ctj-4-5-pre:1.2;
locks; strict;
comment	@ * @;


1.11
date	2004.05.24.04.16.11;	author morrison;	state dead;
branches;
next	1.10;

1.10
date	2004.05.10.15.30.41;	author erikg;	state Exp;
branches;
next	1.9;

1.9
date	2004.04.05.07.49.36;	author morrison;	state Exp;
branches;
next	1.8;

1.8
date	2002.08.20.17.07.21;	author jra;	state Exp;
branches
	1.8.2.1;
next	1.7;

1.7
date	2002.08.15.20.54.33;	author hartley;	state Exp;
branches;
next	1.6;

1.6
date	2000.07.12.21.59.34;	author mike;	state Exp;
branches;
next	1.5;

1.5
date	2000.07.10.23.53.56;	author mike;	state Exp;
branches;
next	1.4;

1.4
date	99.12.30.18.27.32;	author jra;	state Exp;
branches;
next	1.3;

1.3
date	98.06.27.02.03.30;	author mike;	state Exp;
branches;
next	1.2;

1.2
date	95.04.05.13.47.37;	author jra;	state Exp;
branches;
next	1.1;

1.1
date	95.01.19.09.27.52;	author jra;	state Exp;
branches;
next	;

1.8.2.1
date	2002.09.19.18.00.35;	author morrison;	state Exp;
branches;
next	;


desc
@Routine to convert from EUCLID decoded format to EUCLID no CR format.
@


1.11
log
@moved to src/conv/
@
text
@/*	E U C L I D _ U N F O R M A T
 *
 * Converts from Euclid decoded format to no CR format
 *
 */

#ifndef lint
static const char RCSid[] = "$Header: /n/xoff/cvs/brlcad/conv/euclid_unformat.c,v 1.10 2004/05/10 15:30:41 erikg Exp $";
#endif

#ifdef HAVE_CONFIG_H
# include "config.h"
#endif



#include <stdio.h>
#include <math.h>
#ifdef USE_STRING_H
#include <string.h>
#else
#include <strings.h>
#endif

#include "machine.h"
#include "externs.h"
#include "vmath.h"
#include "nmg.h"
#include "rtgeom.h"
#include "raytrace.h"
#include "../librt/debug.h"

#define MAX_PTS	500

int
main(void)
{
	char str[1024];
	int ident,face_type,npts,face_no;
	plane_t pl;
	int i;
	float a,b,c,d;
	int old_id=(-1),e;

	printf( "$03" );

	while( fgets( str, sizeof(str), stdin ) )
	{
		sscanf( str, "%d %d %d %d %d %f", &face_no, &npts, &face_type, &e, &ident, &a );

		if( ident > 0 )
			old_id = ident;

		if( !fgets( str, sizeof(str), stdin ) )
			break;

		sscanf( str, "%f %f %f %f", &a, &b, &c, &d );
		QSET( pl, a, b, c, d )

		if( npts > 2 )
			printf( "%10d%3d%7.0f%5d%5d", old_id, face_type, 0.0, 1, npts );

		for( i=0 ; i<npts ; i++ )
		{
			if( i >= MAX_PTS )
			{
				fprintf( stderr , "Too many points, MAX is %d\n" , MAX_PTS );
				exit( 1 );
			}
			if( !fgets( str, sizeof(str), stdin ) )
			{
				fprintf( stderr, "Unexpected EOF\n" );
				break;
			}
			sscanf( str, "%f %f %f", &a, &b, &c );
			if( npts > 2 )
				printf( "%10d%8.1f%8.1f%8.1f", i+1, a, b, c );
		}
		if( npts > 2 )
			printf( "         1%15.5f%15.5f%15.5f%15.5f", V4ARGS( pl ) );
	}
	return 0;
}
@


1.10
log
@change conf.h to a wrapped config.h
@
text
@d8 1
a8 1
static const char RCSid[] = "$Header: /cvs/brlcad/conv/euclid_unformat.c,v 1.9 2004/04/05 07:49:36 morrison Exp $";
@


1.9
log
@merge of ansi-6-0-branch into HEAD
@
text
@d8 1
a8 1
static const char RCSid[] = "$Header$";
d11 5
a15 1
#include "conf.h"
@


1.8
log
@Restoration of entire source tree to Pre-Hartley state
@
text
@d8 1
a8 1
static const char RCSid[] = "$Header: /c/CVS/brlcad/conv/euclid_unformat.c,v 1.6 2000/07/12 21:59:34 mike Exp $";
d32 1
a32 1
main()
@


1.8.2.1
log
@Initial ANSIfication
@
text
@d8 1
a8 1
static const char RCSid[] = "$Header: /c/CVS/brlcad/conv/euclid_unformat.c,v 1.8 2002/08/20 17:07:21 jra Exp $";
d32 1
a32 1
main(void)
@


1.7
log
@Converted from K&R to ANSI C - RFH
@
text
@d32 1
a32 1
main(void)
@


1.6
log
@
Converted to use new version of LIBWDB
@
text
@d8 1
a8 1
static const char RCSid[] = "$Header: /c/CVS/brlcad/conv/euclid_unformat.c,v 1.5 2000/07/10 23:53:56 mike Exp $";
d32 1
a32 1
main()
@


1.5
log
@
lint
@
text
@d8 1
a8 1
static const char RCSid[] = "$Header: /c/CVS/brlcad/conv/euclid_unformat.c,v 1.4 1999/12/30 18:27:32 jra Exp $";
d31 1
d78 1
@


1.4
log
@Eliminated some unused variables
@
text
@d8 1
a8 1
static char RCSid[] = "$Header: /c/CVS/brlcad/conv/euclid_unformat.c,v 1.3 1998/06/27 02:03:30 mike Exp $";
@


1.3
log
@euclid_unformat.o: warning: this program uses gets(), which is unsafe.
Fixed.
@
text
@d8 1
a8 1
static char RCSid[] = "$Header: /c/CVS/brlcad/conv/euclid_unformat.c,v 1.2 1995/04/05 13:47:37 jra Exp $";
a33 1
	point_t pts[MAX_PTS];
a36 2
	int tmp_i;
	float tmp_a;
a38 1
	int face_count;
@


1.2
log
@Added code to eliminate loops of two vertices or less.
@
text
@d8 1
a8 1
static char RCSid[] = "$Header: /m/cad/conv/RCS/euclid_unformat.c,v 1.1 1995/01/19 09:27:52 jra Exp jra $";
d46 1
a46 1
	while( gets( str ) )
d53 1
a53 1
		if( !gets( str ) )
d69 1
a69 1
			if( !gets( str ) )
@


1.1
log
@Initial revision
@
text
@d8 1
a8 1
static char RCSid[] = "$Header: /m/cad/conv/RCS/euclid_format.c,v 11.1 95/01/04 09:59:26 mike Rel4_4 $";
d59 2
a60 1
		printf( "%10d%3d%7.0f%5d%5d", old_id, face_type, 0.0, 1, npts );
d75 2
a76 1
			printf( "%10d%8.1f%8.1f%8.1f", i+1, a, b, c );
d78 2
a79 1
		printf( "         1%15.5f%15.5f%15.5f%15.5f", V4ARGS( pl ) );
@
