head	11.11;
access;
symbols
	ansi-20040405-merged:11.8.2.1
	postmerge-20040405-ansi:11.9
	premerge-20040404-ansi:11.8
	postmerge-autoconf:11.8
	autoconf-freeze:11.8
	premerge-autoconf:11.8
	ansi-20040316-freeze:11.8.2.1
	postmerge-20040315-windows:11.8
	premerge-20040315-windows:11.8
	windows-20040315-freeze:11.8
	autoconf-20031203:11.8
	autoconf-20031202:11.8
	autoconf-branch:11.8.0.10
	phong-branch:11.8.0.8
	photonmap-branch:11.8.0.6
	rel-6-1-DP:11.8
	windows-branch:11.8.0.4
	rel-6-0-2:11.6
	ansi-branch:11.8.0.2
	rel-6-0-1-branch:11.6.0.2
	hartley-6-0-post:11.7
	hartley-6-0-pre:11.6
	rel-6-0-1:11.6
	rel-6-0:11.6
	rel-5-4:11.3
	offsite-5-3-pre:11.6
	rel-5-3:11.3
	rel-5-2:11.3
	rel-5-1-branch:11.3.0.2
	rel-5-1:11.3
	rel-5-0:11.3
	rel-5-0-beta:11.2
	rel-4-5:11.2
	ctj-4-5-post:11.2
	ctj-4-5-pre:11.2
	rel-4-4:11.1;
locks; strict;
comment	@ * @;


11.11
date	2004.05.24.04.16.11;	author morrison;	state dead;
branches;
next	11.10;

11.10
date	2004.05.10.15.30.41;	author erikg;	state Exp;
branches;
next	11.9;

11.9
date	2004.04.05.07.49.36;	author morrison;	state Exp;
branches;
next	11.8;

11.8
date	2002.08.20.17.07.21;	author jra;	state Exp;
branches
	11.8.2.1;
next	11.7;

11.7
date	2002.08.15.20.54.33;	author hartley;	state Exp;
branches;
next	11.6;

11.6
date	2000.09.13.12.53.23;	author jra;	state Exp;
branches;
next	11.5;

11.5
date	2000.08.24.03.14.54;	author mike;	state Exp;
branches;
next	11.4;

11.4
date	2000.07.10.23.53.56;	author mike;	state Exp;
branches;
next	11.3;

11.3
date	99.06.03.21.54.19;	author mike;	state Exp;
branches;
next	11.2;

11.2
date	95.04.05.13.47.37;	author jra;	state Exp;
branches;
next	11.1;

11.1
date	95.01.04.09.59.26;	author mike;	state Rel4_4;
branches;
next	1.5;

1.5
date	94.11.08.16.14.53;	author jra;	state Exp;
branches;
next	1.4;

1.4
date	94.08.10.23.50.36;	author gdurf;	state Exp;
branches;
next	1.3;

1.3
date	94.04.20.15.59.31;	author jra;	state Exp;
branches;
next	1.2;

1.2
date	94.03.19.21.27.19;	author jra;	state Exp;
branches;
next	1.1;

1.1
date	94.03.18.12.41.41;	author jra;	state Exp;
branches;
next	;

11.8.2.1
date	2002.09.19.18.00.35;	author morrison;	state Exp;
branches;
next	;


desc
@Code to convert from the no CR format to the Euclid decoded format.
@


11.11
log
@moved to src/conv/
@
text
@/*	E U C L I D _ F O R M A T
 *
 * Converts from no CR format to Euclid decoded format
 *
 */

#ifndef lint
static const char RCSid[] = "$Header: /n/xoff/cvs/brlcad/conv/euclid_format.c,v 11.10 2004/05/10 15:30:41 erikg Exp $";
#endif

#ifdef HAVE_CONFIG_H
# include "config.h"
#endif



#include <stdio.h>
#include <math.h>
#ifdef USE_STRING_H
#include <string.h>
#else
#include <strings.h>
#endif

#include "machine.h"
#include "externs.h"
#include "vmath.h"
#include "nmg.h"
#include "rtgeom.h"
#include "raytrace.h"
#include "../librt/debug.h"

int
main(void)
{
	char str[1024];
	point_t *pts=NULL;
	int ident,face_type,npts,face_no;
	plane_t pl;
	int tmp_i;
	float tmp_a;
	float a,b,c,d;
	int old_id=(-1);
	int face_count=0;

	if( scanf( "%s" , str ) == EOF )
		rt_bomb( "Unexpected EOF\n" );

	while( scanf( "%d %d %f %d %d" , &ident , &face_type , &tmp_a , &tmp_i , &npts ) != EOF )
	{
		int i;

		if( npts > 0 )
			pts = (point_t *)bu_calloc( npts , sizeof( point_t ) , "pts" );

		for( i=0 ; i<npts ; i++ )
		{
			int j;

			if( scanf( "%d %f %f %f" , &j , &a , &b , &c ) == EOF )
				rt_bomb( "Unexpected EOF\n" );

			if( j != i+1 )
			{
				rt_bomb( "Points out of order\n" );
			}

			VSET( pts[i] , a , b , c );
		}

		if( scanf( "%d %f %f %f %f" , &face_no , &a , &b , &c , &d ) == EOF )
			rt_bomb( "Unexpected EOF\n" );
		VSET( pl , a , b , c );
		pl[3] = d;

		if( ident != old_id )
		{
			if( npts > 2 )
			{
				face_count = 1;
				printf( "%5d%5d%5d    0    %8d      %5.2f               \n" ,
					face_count , npts , face_type , ident , 0.0 );
			}
			old_id = ident;
		}
		else
		{
			if( npts > 2 )
			{
				face_count++;
				printf( "%5d%5d%5d    0                                              \n" ,
					face_count , npts , face_type );
			}
		}

		if( npts > 2 )
		{
			printf( "%11.6f%11.6f%11.6f%13.6f\n" , V4ARGS( pl ) );

			for( i=0 ; i<npts ; i++ )
				printf( "%8f  %8f  %8f  \n" , V3ARGS( pts[i] ) );
		}

		if( npts > 0 )
			bu_free( (char *)pts , "pts" );
	}
	return 0;
}
@


11.10
log
@change conf.h to a wrapped config.h
@
text
@d8 1
a8 1
static const char RCSid[] = "$Header: /cvs/brlcad/conv/euclid_format.c,v 11.9 2004/04/05 07:49:36 morrison Exp $";
@


11.9
log
@merge of ansi-6-0-branch into HEAD
@
text
@d8 1
a8 1
static const char RCSid[] = "$Header$";
d11 5
a15 1
#include "conf.h"
@


11.8
log
@Restoration of entire source tree to Pre-Hartley state
@
text
@d8 1
a8 1
static const char RCSid[] = "$Header: /c/CVS/brlcad/conv/euclid_format.c,v 11.6 2000/09/13 12:53:23 jra Exp $";
d30 1
a30 1
main()
@


11.8.2.1
log
@Initial ANSIfication
@
text
@d8 1
a8 1
static const char RCSid[] = "$Header: /c/CVS/brlcad/conv/euclid_format.c,v 11.8 2002/08/20 17:07:21 jra Exp $";
d30 1
a30 1
main(void)
@


11.7
log
@Converted from K&R to ANSI C - RFH
@
text
@d30 1
a30 1
main(void)
@


11.6
log
@lint
@
text
@d8 1
a8 1
static const char RCSid[] = "$Header: /c/CVS/brlcad/conv/euclid_format.c,v 11.5 2000/08/24 03:14:54 mike Exp $";
d30 1
a30 1
main()
@


11.5
log
@
lint
@
text
@d8 1
a8 1
static const char RCSid[] = "$Header: /c/CVS/brlcad/conv/euclid_format.c,v 11.4 2000/07/10 23:53:56 mike Exp $";
d33 1
a33 1
	point_t *pts;
d40 1
a40 1
	int face_count;
@


11.4
log
@
lint
@
text
@d8 1
a8 1
static const char RCSid[] = "$Header: /c/CVS/brlcad/conv/euclid_format.c,v 11.3 1999/06/03 21:54:19 mike Exp $";
d29 1
@


11.3
log
@
sed4
@
text
@d8 1
a8 1
static char RCSid[] = "$Header: /c/CVS/brlcad/conv/euclid_format.c,v 11.2 1995/04/05 13:47:37 jra Exp $";
@


11.2
log
@Added code to eliminate loops of two vertices or less.
@
text
@d8 1
a8 1
static char RCSid[] = "$Header: /m/cad/conv/RCS/euclid_format.c,v 11.1 1995/01/04 09:59:26 mike Rel4_4 jra $";
d49 1
a49 1
			pts = (point_t *)rt_calloc( npts , sizeof( point_t ) , "pts" );
d100 1
a100 1
			rt_free( (char *)pts , "pts" );
@


11.1
log
@Release_4.4
@
text
@d8 1
a8 1
static char RCSid[] = "$Header: /m/cad/conv/RCS/euclid_format.c,v 1.5 94/11/08 16:14:53 jra Exp $";
d48 2
a49 1
		pts = (point_t *)rt_calloc( npts , sizeof( point_t ) , "pts" );
d73 6
a78 3
			face_count = 1;
			printf( "%5d%5d%5d    0    %8d      %5.2f               \n" ,
				face_count , npts , face_type , ident , 0.0 );
d83 6
a88 3
			face_count++;
			printf( "%5d%5d%5d    0                                              \n" ,
				face_count , npts , face_type );
d91 3
a93 1
		printf( "%11.6f%11.6f%11.6f%13.6f\n" , V4ARGS( pl ) );
d95 3
a97 2
		for( i=0 ; i<npts ; i++ )
			printf( "%8f  %8f  %8f  \n" , V3ARGS( pts[i] ) );
d99 2
a100 1
		rt_free( (char *)pts , "pts" );
@


1.5
log
@Mods for Irix 6.0
@
text
@d8 1
a8 1
static char RCSid[] = "$Header: /n/wolf/m/cad/conv/RCS/euclid_format.c,v 1.4 1994/08/10 23:50:36 gdurf Exp jra $";
@


1.4
log
@Factored ifdefs
@
text
@d8 1
a8 1
static char RCSid[] = "$Header: /m/cad/conv/RCS/euclid_format.c,v 1.3 1994/04/20 15:59:31 jra Exp gdurf $";
a52 1
			float x,y,z;
@


1.3
log
@minor formatting change for more precision
@
text
@d8 1
a8 1
static char RCSid[] = "$Header: /m/cad/conv/RCS/euclid_format.c,v 1.2 94/03/19 21:27:19 jra Exp Locker: jra $";
d11 2
d15 1
d17 4
d92 1
@


1.2
log
@Added face counting.
@
text
@d8 1
a8 1
static char RCSid[] = "$Header: /m/cad/conv/RCS/euclid_format.c,v 1.1 94/03/18 12:41:41 jra Exp Locker: jra $";
d81 1
a81 1
			printf( "%8.1f  %8.1f  %8.1f  \n" , V3ARGS( pts[i] ) );
@


1.1
log
@Initial revision
@
text
@d8 1
a8 1
static char RCSid[] = "$Header: /m/cad/conv/RCS/g-euclid.c,v 1.2 94/01/07 12:59:58 jra Exp $";
d32 1
d66 1
d68 1
a68 1
				face_no , npts , face_type , ident , 0.0 );
d72 2
d75 2
a76 1
				face_no , npts , face_type );
@
