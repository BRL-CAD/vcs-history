head	11.10;
access;
symbols
	ansi-20040405-merged:11.7.4.1
	postmerge-20040405-ansi:11.8
	premerge-20040404-ansi:11.8
	postmerge-autoconf:11.8
	autoconf-freeze:11.7.12.2
	premerge-autoconf:11.8
	postmerge-20040315-windows:11.8
	premerge-20040315-windows:11.8
	windows-20040315-freeze:11.7.6.1
	autoconf-20031203:11.7
	autoconf-20031202:11.7
	autoconf-branch:11.7.0.12
	phong-branch:11.7.0.10
	photonmap-branch:11.7.0.8
	rel-6-1-DP:11.7
	windows-branch:11.7.0.6
	rel-6-0-2:11.7
	ansi-branch:11.7.0.4
	rel-6-0-1-branch:11.7.0.2
	hartley-6-0-post:11.7
	hartley-6-0-pre:11.7
	rel-6-0-1:11.7
	rel-6-0:11.7
	rel-5-4:11.2
	offsite-5-3-pre:11.7
	rel-5-3:11.2
	rel-5-2:11.2
	rel-5-1-branch:11.2.0.2
	rel-5-1:11.2;
locks; strict;
comment	@ * @;


11.10
date	2004.05.21.18.07.37;	author morrison;	state dead;
branches;
next	11.9;

11.9
date	2004.05.10.15.30.47;	author erikg;	state Exp;
branches;
next	11.8;

11.8
date	2004.02.02.17.39.30;	author morrison;	state Exp;
branches;
next	11.7;

11.7
date	2000.08.09.20.46.26;	author mike;	state Exp;
branches
	11.7.4.1
	11.7.6.1
	11.7.12.1;
next	11.6;

11.6
date	2000.07.12.21.58.03;	author mike;	state Exp;
branches;
next	11.5;

11.5
date	2000.07.12.00.13.52;	author cjohnson;	state Exp;
branches;
next	11.4;

11.4
date	2000.07.08.04.01.10;	author mike;	state Exp;
branches;
next	11.3;

11.3
date	2000.07.08.01.41.21;	author mike;	state Exp;
branches;
next	11.2;

11.2
date	2000.03.16.13.38.42;	author jra;	state Exp;
branches;
next	11.1;

11.1
date	2000.02.02.21.14.32;	author jra;	state Exp;
branches;
next	;

11.7.4.1
date	2004.03.17.21.21.47;	author morrison;	state Exp;
branches;
next	;

11.7.6.1
date	2004.03.11.23.45.47;	author morrison;	state Exp;
branches;
next	;

11.7.12.1
date	2004.02.12.19.41.24;	author erikg;	state Exp;
branches;
next	11.7.12.2;

11.7.12.2
date	2004.03.15.14.07.33;	author erikg;	state Exp;
branches;
next	;


desc
@@


11.10
log
@moved to src/
@
text
@/*
 *			E X T R . C
 *
 * Support for extrusion solids
 *
 *  Author -
 *	John Anderson
 *
 *  Source -
 *	The U. S. Army Research Laboratory
 *	Aberdeen Proving Ground, Maryland  21005-5068  USA
 *  
 *  Distribution Notice -
 *	Re-distribution of this software is restricted, as described in
 *	your "Statement of Terms and Conditions for the Release of
 *	The BRL-CAD Package" agreement.
 *
 *  Copyright Notice -
 *	This software is Copyright (C) 2000-2004 by the United States Army
 *	in all countries except the USA.  All rights reserved.
 */
#ifndef lint
static const char extr_RCSid[] = "@@(#)$Header: /n/xoff/cvs/brlcad/libwdb/extr.c,v 11.9 2004/05/10 15:30:47 erikg Exp $ (BRL)";
#endif

#ifdef HAVE_CONFIG_H
# include "config.h"
#endif



#include <stdio.h>
#include <math.h>
#ifdef HAVE_STRING_H
#include <string.h>
#else
#include <strings.h>
#endif
#include "machine.h"
#include "bu.h"
#include "db.h"
#include "vmath.h"
#include "bn.h"
#include "rtgeom.h"
#include "raytrace.h"
#include "wdb.h"

int
mk_extrusion(
	struct rt_wdb *fp,
	const char *name,
	const char *sketch_name,
	const point_t V,
	const vect_t h,
	const vect_t u_vec,
	const vect_t v_vec,
	int keypoint )
{
	struct rt_extrude_internal *extr;

	BU_GETSTRUCT( extr, rt_extrude_internal );
	extr->magic = RT_EXTRUDE_INTERNAL_MAGIC;
	extr->sketch_name = bu_strdup( sketch_name );
	VMOVE( extr->V, V );
	VMOVE( extr->h, h );
	VMOVE( extr->u_vec, u_vec );
	VMOVE( extr->v_vec, v_vec );
	extr->keypoint = keypoint;
	extr->skt = (struct rt_sketch_internal *)NULL;

	return wdb_export( fp, name, (genptr_t)extr, ID_EXTRUDE, mk_conv2mm );
}
@


11.9
log
@change conf.h to a wrapped config.h
@
text
@d23 1
a23 1
static const char extr_RCSid[] = "@@(#)$Header: /cvs/brlcad/libwdb/extr.c,v 11.8 2004/02/02 17:39:30 morrison Exp $ (BRL)";
@


11.8
log
@update copyright to include span through 2003
@
text
@d23 1
a23 1
static const char extr_RCSid[] = "@@(#)$Header: /c/CVS/brlcad/libwdb/extr.c,v 11.7 2000/08/09 20:46:26 mike Exp $ (BRL)";
d26 5
a30 1
#include "conf.h"
@


11.7
log
@
Fixed copying name for extrusion solid.
@
text
@d19 1
a19 1
 *	This software is Copyright (C) 2000 by the United States Army
d23 1
a23 1
static const char extr_RCSid[] = "@@(#)$Header: /c/CVS/brlcad/libwdb/extr.c,v 11.6 2000/07/12 21:58:03 mike Exp $ (BRL)";
@


11.7.4.1
log
@sync branch with HEAD
@
text
@d19 1
a19 1
 *	This software is Copyright (C) 2000-2004 by the United States Army
d23 1
a23 1
static const char extr_RCSid[] = "@@(#)$Header$ (BRL)";
@


11.7.6.1
log
@sync to HEAD...
@
text
@d19 1
a19 1
 *	This software is Copyright (C) 2000-2004 by the United States Army
d23 1
a23 1
static const char extr_RCSid[] = "@@(#)$Header: /n/cad/c/CVS/brlcad/libwdb/extr.c,v 11.8 2004/02/02 17:39:30 morrison Exp $ (BRL)";
@


11.7.12.1
log
@merge from HEAD
@
text
@d19 1
a19 1
 *	This software is Copyright (C) 2000-2004 by the United States Army
d23 1
a23 1
static const char extr_RCSid[] = "@@(#)$Header: /c/CVS/brlcad/libwdb/extr.c,v 11.8 2004/02/02 17:39:30 morrison Exp $ (BRL)";
@


11.7.12.2
log
@merge from head
@
text
@d23 1
a23 1
static const char extr_RCSid[] = "@@(#)$Header: /c/CVS/brlcad/libwdb/extr.c,v 11.7.12.1 2004/02/12 19:41:24 erikg Exp $ (BRL)";
@


11.6
log
@
New version of LIBWDB which takes a (struct rt_wdb *) rather than a
(FILE *) as the first parameter.
@
text
@d23 1
a23 1
static const char extr_RCSid[] = "@@(#)$Header: /c/CVS/brlcad/libwdb/extr.c,v 11.5 2000/07/12 00:13:52 cjohnson Exp $ (BRL)";
d59 1
a59 1
	NAMEMOVE( sketch_name, extr->sketch_name );
@


11.5
log
@LINT picking from gcc -Wall
@
text
@d23 1
a23 1
static const char extr_RCSid[] = "@@(#)$Header: /c/CVS/brlcad/libwdb/extr.c,v 11.4 2000/07/08 04:01:10 mike Exp $ (BRL)";
d45 9
a53 5
mk_extrusion( fp, name, sketch_name, V, h, u_vec, v_vec, keypoint )
FILE *fp;
char *name, *sketch_name;
point_t V;
vect_t h, u_vec, v_vec;
a54 1
	struct rt_db_internal intern;
d67 1
a67 6
	RT_INIT_DB_INTERNAL( &intern );
	intern.idb_ptr = (genptr_t)extr;
	intern.idb_type = ID_EXTRUDE;
	intern.idb_meth = &rt_functab[ID_EXTRUDE];

	return mk_fwrite_internal( fp, name, &intern );
@


11.4
log
@
Modified to allow mk_fwrite_internal() to free the objects.
Added flag variable mk_version to indicate what database version to be written.
@
text
@d23 1
a23 1
static const char extr_RCSid[] = "@@(#)$Header: /c/CVS/brlcad/libwdb/extr.c,v 11.3 2000/07/08 01:41:21 mike Exp $ (BRL)";
d30 5
@


11.3
log
@
const RCSid
@
text
@d23 1
a23 1
static const char extr_RCSid[] = "@@(#)$Header: /c/CVS/brlcad/libwdb/extr.c,v 11.2 2000/03/16 13:38:42 jra Exp $ (BRL)";
a47 1
	int ret;
d49 1
a49 1
	extr = (struct rt_extrude_internal *)bu_malloc( sizeof( struct rt_extrude_internal ), "extrusion" );
a58 2
	ret = mk_export_fwrite( fp, name, (genptr_t)extr, ID_EXTRUDE );

d62 1
d64 1
a64 3
	rt_extrude_ifree( &intern );

	return( ret );
@


11.2
log
@Sketch solid can only have one  curve now
@
text
@d23 1
a23 1
static char extr_RCSid[] = "@@(#)$Header: /c/CVS/brlcad/libwdb/extr.c,v 11.1 2000/02/02 21:14:32 jra Exp $ (BRL)";
@


11.1
log
@SUpport for exrusion solid
@
text
@d23 1
a23 1
static char extr_RCSid[] = "@@(#)$Header: /c/CVS/brlcad/libwdb/skt.c,v 1.1 2000/01/31 13:42:04 jra Exp $ (BRL)";
d40 1
a40 1
mk_extrusion( fp, name, sketch_name, curve_name, V, h, u_vec, v_vec, keypoint )
d42 1
a42 1
char *name, *sketch_name, *curve_name;
a52 1
	NAMEMOVE( curve_name, extr->curve_name );
@

