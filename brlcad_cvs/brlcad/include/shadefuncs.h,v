head	14.13;
access;
symbols
	rel-7-10-4:14.13
	STABLE:14.13.0.2
	stable-branch:14.4
	rel-7-10-2:14.13
	rel-7-10-0:14.12
	rel-7-8-4:14.8
	rel-7-8-2:14.7
	rel-7-8-0:14.7
	trimnurbs-branch:14.7.0.2
	help:14.7
	temp_tag:14.6
	bobWinPort-20051223-freeze:14.5
	postmerge-20051223-bobWinPort:14.6
	premerge-20051223-bobWinPort:14.6
	rel-7-6-6:14.6
	rel-7-6-4:14.6
	rel-7-6-2:14.5
	rel-7-6-branch:14.5.0.6
	rel-7-6-0:14.5
	rel-7-4-2:14.5
	rel-7-4-branch:14.5.0.4
	bobWinPort:14.5.0.2
	rel-7-4-0:14.5
	rel-7-2-6:14.5
	rel-7-2-4:14.4
	rel-7-2-2:14.4
	rel-7-2-0:14.3
	rel-7-0-4:14.2
	rel-7-0-2:14.2
	rel-7-0-1:14.1
	opensource-post:14.1
	opensource-pre:1.1
	rel-7-0-branch:1.1.0.2
	rel-7-0:1.1;
locks; strict;
comment	@ * @;


14.13
date	2007.05.26.01.45.04;	author brlcad;	state Exp;
branches;
next	14.12;

14.12
date	2007.01.27.01.01.40;	author brlcad;	state Exp;
branches;
next	14.11;

14.11
date	2007.01.23.01.13.20;	author brlcad;	state Exp;
branches;
next	14.10;

14.10
date	2007.01.21.04.45.40;	author brlcad;	state Exp;
branches;
next	14.9;

14.9
date	2007.01.20.14.36.40;	author brlcad;	state Exp;
branches;
next	14.8;

14.8
date	2006.09.18.05.24.07;	author lbutler;	state Exp;
branches;
next	14.7;

14.7
date	2006.01.18.06.46.10;	author brlcad;	state Exp;
branches;
next	14.6;

14.6
date	2005.10.23.04.44.26;	author brlcad;	state Exp;
branches;
next	14.5;

14.5
date	2005.05.28.02.14.49;	author brlcad;	state Exp;
branches
	14.5.6.1;
next	14.4;

14.4
date	2005.03.28.06.31.27;	author bob1961;	state Exp;
branches;
next	14.3;

14.3
date	2005.01.30.20.30.11;	author brlcad;	state Exp;
branches;
next	14.2;

14.2
date	2004.12.22.03.39.01;	author lbutler;	state Exp;
branches;
next	14.1;

14.1
date	2004.11.16.19.42.10;	author morrison;	state Exp;
branches;
next	1.1;

1.1
date	2004.05.24.04.10.51;	author morrison;	state Exp;
branches;
next	;

14.5.6.1
date	2005.11.13.13.46.10;	author brlcad;	state Exp;
branches;
next	;


desc
@@


14.13
log
@get rid of RCS variables from the public header files.  this is done in part to reduce recompilation during interface changes, but also to move towards not relying on or publishing the information contained in the variables interface-wise. (they're fine for c sources and private headers)
@
text
@/*			S H A D E F U N C S . H
 * BRL-CAD
 *
 * Copyright (c) 1993-2007 United States Government as represented by
 * the U.S. Army Research Laboratory.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public License
 * version 2.1 as published by the Free Software Foundation.
 *
 * This library is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this file; see the file named COPYING for more
 * information.
 */
/** @@addtogroup rt */
/** @@{ */
/** @@file shadefuncs.h
 *
 *  @@par Source
 *	The U. S. Army Research Laboratory
 *	Aberdeen Proving Ground, Maryland  21005-5068  USA
 */
#ifndef SHADEFUNCS
#define SHADEFUNCS

#ifndef OPTICAL_EXPORT
#   if defined(_WIN32) && !defined(__CYGWIN__) && defined(BRLCAD_DLL)
#      ifdef OPTICAL_EXPORT_DLL
#         define OPTICAL_EXPORT __declspec(dllexport)
#      else
#         define OPTICAL_EXPORT __declspec(dllimport)
#      endif
#   else
#      define OPTICAL_EXPORT
#   endif
#endif

/**
 *			M F U N C S
 *
 *  The interface to the various material property & texture routines.
 */
struct mfuncs {
	long		mf_magic;	/**< @@brief  To validate structure */
	char		*mf_name;	/**< @@brief  Keyword for material */
	struct mfuncs	*mf_forw;	/**< @@brief  Forward link */
	int		mf_inputs;	/**< @@brief  shadework inputs needed */
	int		mf_flags;	/**< @@brief  Flags describing shader */
	int		(*mf_setup)();	/**< @@brief  Routine for preparing */
	int		(*mf_render)();	/**< @@brief  Routine for rendering */
	void		(*mf_print)();	/**< @@brief  Routine for printing */
	void		(*mf_free)();	/**< @@brief  Routine for releasing storage */
};
#define MF_MAGIC	0x55968058
#define MF_NULL		((struct mfuncs *)0)
#define RT_CK_MF(_p)	BU_CKMAG(_p, MF_MAGIC, "mfuncs")

/*
 *  mf_inputs lists what optional shadework fields are needed.
 *  dist, point, color, & default(trans,reflect,ri) are always provided
 */
#define MFI_NORMAL	0x01		/**< @@brief  Need normal */
#define MFI_UV		0x02		/**< @@brief  Need uv */
#define MFI_LIGHT	0x04		/**< @@brief  Need light visibility */
#define MFI_HIT		0x08		/**< @@brief  Need just hit point */

/** for bu_printb() */
#define MFI_FORMAT	"\020\4HIT\3LIGHT\2UV\1NORMAL"


/* mf_flags lists important details about individual shaders */
#define MFF_PROC	0x01		/**< @@brief  shader is procedural, computes tr/re/hits */

/* defined in material.c */
OPTICAL_EXPORT BU_EXTERN(void mlib_add_shader,
			 (struct mfuncs **headp,
			  struct mfuncs *mfp1));

OPTICAL_EXPORT BU_EXTERN(int mlib_setup,
			 (struct mfuncs **headp,
			  struct region *rp,
			  struct rt_i *rtip));

OPTICAL_EXPORT BU_EXTERN(void mlib_free,
			 (struct region *rp));

OPTICAL_EXPORT BU_EXTERN(struct mfuncs *load_dynamic_shader,
			 (const char *material,
			  const int mlen));

#endif
/** @@} */
/*
 * Local Variables:
 * mode: C
 * tab-width: 8
 * c-basic-offset: 4
 * indent-tabs-mode: t
 * End:
 * ex: shiftwidth=4 tabstop=8
 */
@


14.12
log
@ws, test three
@
text
@a26 2
 *
 *  $Header: /cvsroot/brlcad/brlcad/include/shadefuncs.h,v 14.11 2007/01/23 01:13:20 brlcad Exp $
@


14.11
log
@Sweeping license updates.  Documentation is fully relicensed to the BSD Documentation License (a minor variant of the FreeBSD Documentation License and BSD License).  All GPL code (mostly application code) is converted to the LGPL and now also specifically declares version 2.1, revoking the blank check to the FSF.  The intent of these sweeping changes are to simplify the licensing terms and increase overall flexibility of use, both externally (to users for their purposes) and internally (to allow application code to be migrated to libraries without creating GPL libraries).  As a collective work, BRL-CAD is now LGPL.
@
text
@d28 1
a28 1
 *  $Header: /cvsroot/brlcad/brlcad/include/shadefuncs.h,v 14.10 2007/01/21 04:45:40 brlcad Exp $
a108 1

@


14.10
log
@ugh, what tedium.  put some effort towards cleaning up the doxygen labels and making the headers more consistent.  also exclusively using @@ for doxygen instead of \ to try to keep things more consistent.
@
text
@d9 1
a9 2
 * as published by the Free Software Foundation; either version 2.1 of
 * the License, or (at your option) any later version.
d14 1
a14 1
 * Library General Public License for more details.
d28 1
a28 1
 *  $Header: /cvsroot/brlcad/brlcad/include/shadefuncs.h,v 14.9 2007/01/20 14:36:40 brlcad Exp $
@


14.9
log
@update copyright to 2007
@
text
@d22 1
a22 1
/*@@{*/
d29 1
a29 1
 *  $Header: /cvsroot/brlcad/brlcad/include/shadefuncs.h,v 14.8 2006/09/18 05:24:07 lbutler Exp $
d100 1
a100 1
/*@@}*/
@


14.8
log
@Doxygen updates
@
text
@d4 1
a4 1
 * Copyright (c) 1993-2006 United States Government as represented by
d29 1
a29 1
 *  $Header: /cvsroot/brlcad/brlcad/include/shadefuncs.h,v 14.7 2006/01/18 06:46:10 brlcad Exp $
@


14.7
log
@update copyright to 2006
@
text
@d21 2
d25 1
a25 1
 *  Source -
d29 1
a29 1
 *  $Header: /cvsroot/brlcad/brlcad/include/shadefuncs.h,v 14.6 2005/10/23 04:44:26 brlcad Exp $
d46 1
a46 1
/*
d52 9
a60 9
	long		mf_magic;	/* To validate structure */
	char		*mf_name;	/* Keyword for material */
	struct mfuncs	*mf_forw;	/* Forward link */
	int		mf_inputs;	/* shadework inputs needed */
	int		mf_flags;	/* Flags describing shader */
	int		(*mf_setup)();	/* Routine for preparing */
	int		(*mf_render)();	/* Routine for rendering */
	void		(*mf_print)();	/* Routine for printing */
	void		(*mf_free)();	/* Routine for releasing storage */
d70 4
a73 4
#define MFI_NORMAL	0x01		/* Need normal */
#define MFI_UV		0x02		/* Need uv */
#define MFI_LIGHT	0x04		/* Need light visibility */
#define MFI_HIT		0x08		/* Need just hit point */
d75 1
a75 1
/* for bu_printb() */
d80 1
a80 1
#define MFF_PROC	0x01		/* shader is procedural, computes tr/re/hits */
d100 1
a100 1

d110 1
@


14.6
log
@trailing ws
@
text
@d4 1
a4 1
 * Copyright (C) 1993-2005 United States Government as represented by
d27 1
a27 1
 *  $Header: /cvsroot/brlcad/brlcad/include/shadefuncs.h,v 14.5 2005/05/28 02:14:49 brlcad Exp $
@


14.5
log
@convert WIN32 define checks to _WIN32 since the latter is one of the defaults provided by MSVC whereas the prior is not.  remove some of them related to header inclusions using HAVE_ defines instead.
@
text
@d22 1
a22 1
 *  
d27 1
a27 1
 *  $Header: /cvsroot/brlcad/brlcad/include/shadefuncs.h,v 14.4 2005/03/28 06:31:27 bob1961 Exp $
d29 1
a29 1
#ifndef SHADEFUNCS 
@


14.5.6.1
log
@merge changes from HEAD aka rel-7-6-4 to the rel-7-6-branch just in case someone peeks a gander or tries to continue/build the branch
@
text
@d22 1
a22 1
 *
d27 1
a27 1
 *  $Header$
d29 1
a29 1
#ifndef SHADEFUNCS
@


14.4
log
@Add code to allow liboptical to be a Windows DLL
@
text
@d27 1
a27 1
 *  $Header: /cvsroot/brlcad/brlcad/include/shadefuncs.h,v 14.3 2005/01/30 20:30:11 brlcad Exp $
d33 1
a33 1
#   if defined(WIN32) && !defined(__CYGWIN__) && defined(BRLCAD_DLL)
@


14.3
log
@update copyright to 2005
@
text
@d27 1
a27 1
 *  $Header: /cvsroot/brlcad/brlcad/include/shadefuncs.h,v 14.2 2004/12/22 03:39:01 lbutler Exp $
d32 12
d80 17
a96 6
BU_EXTERN(void		mlib_add_shader, (struct mfuncs **headp,
				struct mfuncs *mfp1));
BU_EXTERN(int		mlib_setup, (struct mfuncs **headp,
				struct region *rp,
				struct rt_i *rtip));
BU_EXTERN(void		mlib_free, (struct region *rp));
@


14.2
log
@missed getting the LGPL on these two
@
text
@d4 1
a4 1
 * Copyright (c) 1993-2004 United States Government as represented by
d27 1
a27 1
 *  $Header: /cvsroot/brlcad/brlcad/include/shadefuncs.h,v 14.1 2004/11/16 19:42:10 morrison Exp $
@


14.1
log
@dawn of a new revision.  it shall be numbered 14 to match release 7.  begin the convergence by adding emacs/vi local variable footer blocks to encourage consistent formatting.
@
text
@d1 21
a21 4
#ifndef SHADEFUNCS 
#define SHADEFUNCS
/*
 *			S H A D E F U N C S . H
d27 1
a27 1
 *  $Header: /cvs/brlcad/include/shadefuncs.h,v 1.1 2004/05/24 04:10:51 morrison Exp $
d29 2
@


1.1
log
@moved/renamed from top-level h/ to top-level include/
@
text
@d10 1
a10 1
 *  $Header$
d56 10
@

