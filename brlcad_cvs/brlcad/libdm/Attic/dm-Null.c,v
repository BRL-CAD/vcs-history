head	1.26;
access;
symbols
	ansi-20040405-merged:1.21.2.3
	postmerge-20040405-ansi:1.23
	premerge-20040404-ansi:1.22
	postmerge-autoconf:1.22
	autoconf-freeze:1.21.10.1
	premerge-autoconf:1.22
	ansi-20040316-freeze:1.21.2.1
	postmerge-20040315-windows:1.22
	premerge-20040315-windows:1.21
	windows-20040315-freeze:1.21.4.1
	autoconf-20031203:1.21
	autoconf-20031202:1.21
	autoconf-branch:1.21.0.10
	phong-branch:1.21.0.8
	photonmap-branch:1.21.0.6
	rel-6-1-DP:1.21
	windows-branch:1.21.0.4
	rel-6-0-2:1.19
	ansi-branch:1.21.0.2
	rel-6-0-1-branch:1.19.0.2
	hartley-6-0-post:1.20
	hartley-6-0-pre:1.19
	rel-6-0-1:1.19
	rel-6-0:1.19
	rel-5-4:1.17.2.1
	offsite-5-3-pre:1.19
	rel-5-3:1.17.2.1
	rel-5-2:1.17.2.1
	rel-5-1-branch:1.17.0.2
	rel-5-1:1.17
	rel-5-0:1.14
	rel-5-0-beta:1.14
	rel-4-5:1.11
	ctj-4-5-post:1.9
	ctj-4-5-pre:1.9;
locks; strict;
comment	@ * @;


1.26
date	2004.05.21.18.06.25;	author morrison;	state dead;
branches;
next	1.25;

1.25
date	2004.05.10.15.30.44;	author erikg;	state Exp;
branches;
next	1.24;

1.24
date	2004.05.10.15.25.26;	author morrison;	state Exp;
branches;
next	1.23;

1.23
date	2004.04.05.07.45.07;	author morrison;	state Exp;
branches;
next	1.22;

1.22
date	2004.03.16.19.41.54;	author morrison;	state Exp;
branches;
next	1.21;

1.21
date	2002.08.20.17.07.44;	author jra;	state Exp;
branches
	1.21.2.1
	1.21.4.1
	1.21.10.1;
next	1.20;

1.20
date	2002.08.15.20.54.57;	author hartley;	state Exp;
branches;
next	1.19;

1.19
date	2000.08.31.18.16.42;	author bparker;	state Exp;
branches;
next	1.18;

1.18
date	2000.07.12.03.24.43;	author cjohnson;	state Exp;
branches;
next	1.17;

1.17
date	99.12.27.21.10.48;	author bparker;	state Exp;
branches
	1.17.2.1;
next	1.16;

1.16
date	99.12.17.16.39.49;	author bparker;	state Exp;
branches;
next	1.15;

1.15
date	99.12.01.13.30.20;	author bparker;	state Exp;
branches;
next	1.14;

1.14
date	98.06.15.18.55.05;	author bparker;	state Exp;
branches;
next	1.13;

1.13
date	98.06.12.19.48.16;	author bparker;	state Exp;
branches;
next	1.12;

1.12
date	98.02.26.15.25.17;	author bparker;	state Exp;
branches;
next	1.11;

1.11
date	97.10.10.12.56.28;	author bparker;	state Exp;
branches;
next	1.10;

1.10
date	97.09.23.21.18.34;	author bparker;	state Exp;
branches;
next	1.9;

1.9
date	97.05.21.13.04.39;	author bparker;	state Exp;
branches;
next	1.8;

1.8
date	97.05.08.14.22.30;	author bparker;	state Exp;
branches;
next	1.7;

1.7
date	97.03.03.18.28.16;	author bparker;	state Exp;
branches;
next	1.6;

1.6
date	97.01.17.22.58.41;	author bparker;	state Exp;
branches;
next	1.5;

1.5
date	96.12.04.21.29.06;	author bparker;	state Exp;
branches;
next	1.4;

1.4
date	96.10.23.20.28.49;	author bparker;	state Exp;
branches;
next	1.3;

1.3
date	96.09.30.19.40.38;	author bparker;	state Exp;
branches;
next	1.2;

1.2
date	96.09.25.20.28.52;	author bparker;	state Exp;
branches;
next	1.1;

1.1
date	96.09.23.17.59.12;	author bparker;	state Exp;
branches;
next	;

1.17.2.1
date	2000.09.01.17.24.42;	author bparker;	state Exp;
branches;
next	;

1.21.2.1
date	2002.09.19.18.01.17;	author morrison;	state Exp;
branches;
next	1.21.2.2;

1.21.2.2
date	2004.03.17.21.16.57;	author morrison;	state Exp;
branches;
next	1.21.2.3;

1.21.2.3
date	2004.04.02.16.03.26;	author morrison;	state Exp;
branches;
next	;

1.21.4.1
date	2002.09.26.23.03.53;	author morrison;	state Exp;
branches;
next	;

1.21.10.1
date	2004.03.18.18.10.27;	author erikg;	state Exp;
branches;
next	;


desc
@Null Display Manager
@


1.26
log
@moved to src/
@
text
@#ifdef HAVE_CONFIG_H
# include "config.h"
#endif


#include "tcl.h"

#define PLOTBOUND       1000.0  /* Max magnification in Rot matrix */
#include <stdio.h>
#ifndef WIN32
#include <sys/time.h>
#endif
#include "machine.h"
#include "bu.h"
#include "vmath.h"
#include "dm.h"
#include "dm-Null.h"

void	Nu_void(void);
int	Nu_int0(void);
struct dm *Nu_open(void);
unsigned Nu_unsign(void);
static int     Nu_fg(struct dm *, unsigned char, unsigned char, unsigned char, int strict);
static int     Nu_bg(struct dm *, unsigned char, unsigned char, unsigned char);

struct dm dm_Null = {
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_fg,
  Nu_bg,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  Nu_int0,
  0,
  0,				/* no displaylist */
  0,				/* no stereo */
  PLOTBOUND,			/* zoom-in limit */
  1,				/* bound flag */
  "nu",
  "Null Display",
  DM_TYPE_NULL,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  {0, 0},
  {0, 0, 0, 0, 0},		/* bu_vls path name*/
  {0, 0, 0, 0, 0},		/* bu_vls full name drawing window */
  {0, 0, 0, 0, 0},		/* bu_vls short name drawing window */
  {0, 0, 0},			/* bg color */
  {0, 0, 0},			/* fg color */
  {0.0, 0.0, 0.0},		/* clipmin */
  {0.0, 0.0, 0.0},		/* clipmax */
  0,				/* no debugging */
  0,				/* no perspective */
  0,				/* no lighting */
  0,				/* no transparency */
  0,				/* no zbuffer */
  0,				/* no zclipping */
  1,                            /* clear back buffer after drawing and swap */
  0				/* Tcl interpreter */
};

int Nu_int0(void) { return TCL_OK; }
void Nu_void(void) { ; }
struct dm *Nu_open(void) { return DM_NULL; }
unsigned Nu_unsign(void) { return TCL_OK; }
static int Nu_fg(struct dm *dmp, unsigned char r, unsigned char g, unsigned char b, int strict) { return TCL_OK; }
static int Nu_bg(struct dm *dmp, unsigned char r, unsigned char g, unsigned char b) { return TCL_OK; }
@


1.25
log
@change conf.h to a wrapped config.h
@
text
@@


1.24
log
@Bob Parker's view modifications, png framebuffer support, shaded drawing mode
@
text
@d1 5
a5 1
#include "conf.h"
@


1.23
log
@merge of ansi-6-0-branch into HEAD
@
text
@d44 2
d72 1
d75 1
@


1.22
log
@merge of windows-6-0-branch into head
@
text
@d15 6
a20 4
void	Nu_void();
int	Nu_int0();
struct dm *Nu_open();
unsigned Nu_unsign();
d32 2
a33 2
  Nu_int0,
  Nu_int0,
d75 6
a80 4
int Nu_int0() { return TCL_OK; }
void Nu_void() { ; }
struct dm *Nu_open(){ return DM_NULL; }
unsigned Nu_unsign() { return TCL_OK; }
@


1.21
log
@Restoration of entire source tree to Pre-Hartley state
@
text
@d6 1
d8 1
@


1.21.10.1
log
@merge from head
@
text
@a5 1
#ifndef WIN32
a6 1
#endif
@


1.21.4.1
log
@Modifications (on a 6.0 source distribution) for initial port to windows (merged with sources close to 6.0.2)
@
text
@a5 1
#ifndef WIN32
a6 1
#endif
@


1.21.2.1
log
@Initial ANSIfication
@
text
@d13 4
a16 4
void	Nu_void(void);
int	Nu_int0(void);
struct dm *Nu_open(void);
unsigned Nu_unsign(void);
d71 4
a74 4
int Nu_int0(void) { return TCL_OK; }
void Nu_void(void) { ; }
struct dm *Nu_open(void) { return DM_NULL; }
unsigned Nu_unsign(void) { return TCL_OK; }
@


1.21.2.2
log
@sync branch with HEAD
@
text
@a5 1
#ifndef WIN32
a6 1
#endif
@


1.21.2.3
log
@need to match the fg/bg function sig to quell warning
@
text
@a18 2
static int     Nu_fg(struct dm *, unsigned char, unsigned char, unsigned char, int strict);
static int     Nu_bg(struct dm *, unsigned char, unsigned char, unsigned char);
d30 2
a31 2
  Nu_fg,
  Nu_bg,
a76 2
static int Nu_fg(struct dm *dmp, unsigned char r, unsigned char g, unsigned char b, int strict) { return TCL_OK; }
static int Nu_bg(struct dm *dmp, unsigned char r, unsigned char g, unsigned char b) { return TCL_OK; }
@


1.20
log
@Converted from K&R to ANSI C - RFH
@
text
@d13 4
a16 4
void	Nu_void(void);
int	Nu_int0(void);
struct dm *Nu_open(void);
unsigned Nu_unsign(void);
d71 4
a74 4
int Nu_int0(void) { return TCL_OK; }
void Nu_void(void) { ; }
struct dm *Nu_open(void) { return DM_NULL; }
unsigned Nu_unsign(void) { return TCL_OK; }
@


1.19
log
@Mods to rid libdm of two globals: tkwin and interp
@
text
@d13 4
a16 4
void	Nu_void();
int	Nu_int0();
struct dm *Nu_open();
unsigned Nu_unsign();
d71 4
a74 4
int Nu_int0() { return TCL_OK; }
void Nu_void() { ; }
struct dm *Nu_open(){ return DM_NULL; }
unsigned Nu_unsign() { return TCL_OK; }
@


1.18
log
@LINT from gcc -Wall.  Includes some modifications to bu.h and fb.h
@
text
@d67 2
a68 1
  0				/* no zclipping */
@


1.17
log
@*- mods reflecting new members of "struct dm"
@
text
@a12 1
static void	Nu_input();
d56 7
a62 7
  0,
  0,
  0,
  0,
  0,
  0,				/* clipmin */
  0,				/* clipmax */
@


1.17.2.1
log
@Removed two globals: interp and tkwin
@
text
@d13 1
d57 7
a63 7
  {0, 0, 0, 0, 0},		/* bu_vls path name*/
  {0, 0, 0, 0, 0},		/* bu_vls full name drawing window */
  {0, 0, 0, 0, 0},		/* bu_vls short name drawing window */
  {0, 0, 0},			/* bg color */
  {0, 0, 0},			/* fg color */
  {0.0, 0.0, 0.0},		/* clipmin */
  {0.0, 0.0, 0.0},		/* clipmax */
d68 1
a68 2
  0,				/* no zclipping */
  0				/* Tcl interpreter */
@


1.16
log
@*- struct dm has new member
@
text
@d38 3
d66 2
@


1.15
log
@*- mods to reflect changes to struct dm
@
text
@d62 1
@


1.14
log
@*- add support for new routines:
	dm_setFGColor(), dm_setBGColor(), dm_getBGColor()
@
text
@d9 1
a37 1
  Nu_int0,
d39 4
a42 3
  0,			/* no displaylist */
  0,                    /* no stereo */
  PLOTBOUND,
d56 7
a62 1
  0
@


1.13
log
@*- change _setColor() to _setFGColor()
*- add _setBGColor()
@
text
@d37 1
@


1.12
log
@*- use new dm_vars structure
@
text
@d36 1
@


1.11
log
@got rid of eventHandler
@
text
@d50 1
a50 1
  0,
@


1.10
log
@mods to reflect changes in "struct dm"
@
text
@d36 1
a36 1
  Nu_int0,
@


1.9
log
@*** empty log message ***
@
text
@a29 2
  Nu_unsign,
  Nu_unsign,
d33 4
d38 1
a42 1
  0,
@


1.8
log
@*- mods to reflect change in "struct dm" --- added dm_type
                                         removed dm_open, dm_initWinProc
@
text
@d49 2
@


1.7
log
@mods to struct dm
@
text
@a18 1
  Nu_open,
d37 3
a39 2
  "nu", "Null Display",
  0,
@


1.6
log
@mods to dm_bound initial value
@
text
@d15 1
d19 1
a30 1
  Nu_int0,
d44 5
d54 1
@


1.5
log
@*** empty log message ***
@
text
@d4 1
d36 1
a36 1
  0.0,
@


1.4
log
@.
@
text
@a28 1
  Nu_int0,
d37 1
@


1.3
log
@more pruning
@
text
@d18 17
a34 13
  Nu_int0, Nu_void,
  Nu_input,
  Nu_void, Nu_void,
  Nu_void, Nu_void,
  Nu_void,
  Nu_void, Nu_void,
  Nu_void,
  Nu_int0,
  Nu_unsign, Nu_unsign,
  Nu_void,
  Nu_void,
  Nu_void,
  Nu_void, Nu_void, Nu_int0, Nu_int0,
a47 38

/*
 *
 * Implicit Return -
 *	If any files are ready for input, their bits will be set in 'input'.
 *	Otherwise, 'input' will be all zeros.
 */
static void
Nu_input( input, noblock )
fd_set		*input;
int		noblock;
{
	struct timeval	tv;
	int		width;
	int		cnt;

	if( !isatty(fileno(stdin)) )  return;	/* input awaits! */

#if defined(_SC_OPEN_MAX)
	if( (width = sysconf(_SC_OPEN_MAX)) <= 0 || width > 32)
#endif
		width = 32;

	if( noblock )  {
		/* 1/20th second */
		tv.tv_sec = 0;
		tv.tv_usec = 50000;
	} else {
		/* Wait a VERY long time for user to type something */
		tv.tv_sec = 9999999;
		tv.tv_usec = 0;
	}
	cnt = select( width, input, (fd_set *)0,  (fd_set *)0, &tv );
	if( cnt < 0 )  {
		perror("Nu_input/select()");
	}
}

@


1.2
log
@added initial values for new members of "struct dm"
@
text
@a31 1
  0,			/* no display to release */
a33 2
  0,
  0,
@


1.1
log
@Initial revision
@
text
@d38 3
@
