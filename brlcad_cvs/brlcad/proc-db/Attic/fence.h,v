head	11.9;
access;
symbols
	ansi-20040405-merged:11.5.4.1
	postmerge-20040405-ansi:11.7
	premerge-20040404-ansi:11.7
	postmerge-autoconf:11.7
	autoconf-freeze:11.7
	premerge-autoconf:11.7
	postmerge-20040315-windows:11.7
	premerge-20040315-windows:11.7
	windows-20040315-freeze:11.5.6.1
	autoconf-20031203:11.7
	autoconf-20031202:11.7
	autoconf-branch:11.7.0.4
	phong-branch:11.7.0.2
	photonmap-branch:11.5.0.8
	rel-6-1-DP:11.5
	windows-branch:11.5.0.6
	rel-6-0-2:11.5
	ansi-branch:11.5.0.4
	rel-6-0-1-branch:11.5.0.2
	hartley-6-0-post:11.5
	hartley-6-0-pre:11.5
	rel-6-0-1:11.5
	rel-6-0:11.5
	rel-5-4:11.1.2.1
	offsite-5-3-pre:11.4
	rel-5-3:11.1
	rel-5-2:11.1
	rel-5-1-branch:11.1.0.2
	rel-5-1:11.1
	rel-5-0:11.1
	rel-5-0-beta:11.1;
locks; strict;
comment	@ * @;


11.9
date	2004.05.21.17.33.44;	author morrison;	state dead;
branches;
next	11.8;

11.8
date	2004.05.10.15.30.49;	author erikg;	state Exp;
branches;
next	11.7;

11.7
date	2003.09.09.16.35.33;	author morrison;	state Exp;
branches;
next	11.6;

11.6
date	2003.09.09.16.33.51;	author morrison;	state Exp;
branches;
next	11.5;

11.5
date	2001.03.19.22.20.11;	author butler;	state Exp;
branches
	11.5.4.1
	11.5.6.1;
next	11.4;

11.4
date	2001.03.09.22.16.53;	author morrison;	state Exp;
branches;
next	11.3;

11.3
date	2000.07.12.21.59.07;	author mike;	state Exp;
branches;
next	11.2;

11.2
date	2000.07.10.23.35.38;	author mike;	state Exp;
branches;
next	11.1;

11.1
date	99.01.15.18.17.34;	author morrison;	state Exp;
branches
	11.1.2.1;
next	;

11.1.2.1
date	2001.03.09.21.45.21;	author morrison;	state Exp;
branches;
next	;

11.5.4.1
date	2004.03.17.21.22.54;	author morrison;	state Exp;
branches;
next	;

11.5.6.1
date	2004.03.10.15.06.36;	author morrison;	state Exp;
branches;
next	;


desc
@@


11.9
log
@moved to src/proc-db/
@
text
@/*
 *                      F E N C E . H
 *
 *      This is the header file to the program that generages a 
 *      chain-link fence.  Every parameter of the fence may be adjusted
 *      by changing the #defined macros below.
 *
 *  Author -
 *      Christopher Sean Morrison
 *  
 *  Source -
 *      The U. S. Army Research Laboratory
 *      Aberdeen Proving Ground, Maryland  21005-5068  USA
 *  
 *  Distribution Notice -
 *      Re-distribution of this software is restricted, as described in
 *      your "Statement of Terms and Conditions for the Release of
 *      The BRL-CAD Package" agreement.
 *
 *  Copyright Notice -
 *      This software is Copyright (C) 1998 & 1999 by the United States
 *      Army in all countries except the USA.  All rights reserved.
 */

#ifndef __FENCE_H__
#define __FENCE_H__

#ifdef HAVE_CONFIG_H
# include "config.h"
#endif

#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#ifdef USE_STRING_H
#include <string.h>
#else
#include <strings.h>
#endif

#include "machine.h"
#include "bu.h"
#include "vmath.h"
#include "bn.h"
#include "raytrace.h"
#include "wdb.h"

/* these variables control the "behavior" of this program's output
 *   if debug is set, debug information (extra "useful" output is given) is
 *     displayed on stdout.
 *   if verbose is set, then all prompting and output that may be shown 
 *     (such as results and errors) will be sent to stderr.  this should
 *     probably be switched with debug (maybe) but convention was taken
 *     from another db program.
 *   if interactive is set, then the user will be prompted for values from
 *     stdin.
 *
 *   the default output files for debug and verbose modes may be
 *     adjusted by providing standard file pointers (like stdout or
 *     stderr)
 */
#define DEFAULT_DEBUG 0
#define DEFAULT_VERBOSE 0
#define DEFAULT_INTERACTIVE 0

#define DEFAULT_DEBUG_OUTPUT stdout
#define DEFAULT_VERBOSE_OUTPUT stderr

/* this is the name of the default output file name
 */
#define DEFAULT_OUTPUTFILENAME "fence.g"

/* this is the default measuring units for the database file
 */
#define DEFAULT_UNITS "mm"

/* this is the identifying title or name for the database file
 */
#define DEFAULT_ID "Untitled"

/* for all of the default names that are specified, a `.s' or `.r' suffix
 * will automatically get appended where needed for the solid and 
 * region objects that are generated, respectively, and do not need 
 * to be added.
 */

/* the fence generation is broken into four main parts, consisting of
 * one of the wires of the fence mesh, the mesh as a whole, the poles
 * that may attach to the mesh, and the fence as a whole (poles and
 * mesh).
 */

/* these are the parameters for the main fence object that gets
 * generated.
 *   the name of the entire resulting fence object may be set as a string.
 *   the point at which the fence starts is where the first pole, and 
 *     the mesh will begin at.  the fence is generated bottom-up (first
 *     quadrant).
 *   the width and height settings here may be overridden by the pole
 *     and/or mesh width and height settings if they are given.  default
 *     fence generation, however, generates the poles based on the
 *     default fence height and width.
 *   mateial and material params are the two defaults that set the
 *     material properties of the fence poles and wires (not separate at
 *     this time)
 *   fence, poles, mesh, and wire are all truth values (1 == TRUE,
 *     0 == FALSE) that indicate whether or not the user will be prompted
 *     for respective values when the program is running in interactive
 *     mode.  that is to say that if the values are (1,1,1,0) respectively,
 *     then the user will be prompted (if in interactive mode) for the
 *     height and width of the fence, poles, and mesh, but will not be
 *     prompted for values for the wire (such as wire radius).  default
 *     values or command-line values are used if not in interactive mode.
 *   the generate fence, poles, and mesh defaults are truth values that
 *     determine whether or not the fence pole and mesh object collections
 *     get generated.  the default is to generate all objects, but this
 *     may be changed through a command-line value
 */
#define DEFAULT_FENCENAME "fence"
#define DEFAULT_FENCESTARTPOSITION {0.0,0.0,0.0}
#define DEFAULT_FENCEENDPOSITION {3000.0,0.0,0.0}
#define DEFAULT_FENCEWIDTH {3000.0,0.0,0.0}
#define DEFAULT_FENCEHEIGHT {0.0,0.0,2000.0}
#define DEFAULT_FENCEPOLESPACING 3000.0
#define DEFAULT_FENCEMATERIAL "plastic"
#define DEFAULT_FENCEMATERIALPARAMS "sh=16 sp=.5 di=.5"
#define DEFAULT_FENCEMATERIALCOLOR {128,128,128}

#define DEFAULT_FENCEFENCE 1
#define DEFAULT_FENCEPOLES 0
#define DEFAULT_FENCEMESH 0
#define DEFAULT_FENCEWIRE 0
#define DEFAULT_GENERATEFENCE 1
#define DEFAULT_GENERATEPOLES 1
#define DEFAULT_GENERATEMESH 1

/* these are the parameters for the pole objects that get generated. 
 * every pole object is a separate object and may be individually
 * addressed.
 *   all of the poles are named with the name given plus a numerical
 *     identifier (i.e. "poles4.r").  the format of the name may be
 *     adjusted below under the polebasicparam setting.
 *   the poles may have their material properties set through the 
 *     settings of the type, parameters, and color.
 *   the pole's height and radius may also be respectively set
 */
#define DEFAULT_POLENAME "poles"
#define DEFAULT_POLEHEIGHT 2000.0
#define DEFAULT_POLERADIUS 30.0
#define DEFAULT_POLEMATERIAL "plastic"
#define DEFAULT_POLEMATERIALPARAMS "sh=16 sp=.5 di=.5"
#define DEFAULT_POLEMATERIALCOLOR {128,128,128}

/* these are the parameters for the mesh object that gets generated.
 * there is only one mesh object, consisting of two wires translated
 * across a region to form a mesh.
 *   the name, height and width of the mesh may be respectively set.
 *   the material properties of material type, parameters, and color
 *     may also be set.
 */
#define DEFAULT_MESHNAME "mesh"
#define DEFAULT_MESHHEIGHT DEFAULT_POLEHEIGHT
#define DEFAULT_MESHWIDTH DEFAULT_FENCEPOLESPACING
#define DEFAULT_MESHMATERIAL "plastic"
#define DEFAULT_MESHMATERIALPARAMS "sh=16 sp=.5 di=.5"
#define DEFAULT_MESHMATERIALCOLOR {128,128,128}

/*   the mesh piece count is a count of the number of actual wire segments
 *     that form a single mesh cell.  this value should not be changed (20)
 */
#define DEFAULT_MESHPIECECOUNT 20

/* these are the parameters for the basic wires (2) that form the mesh 
 * object.  there are only two wires, and it is translated across the
 * span of the mesh when the mesh is generated.
 *   the name and radius of the wire may be set.
 *   the wire is composed of twisting segments that twist based on some
 *     given angle.
 *   this angle may be respectively set, as may the name of the wire
 *     segments.
 *   the material properties of the wire be specified by material, 
 *     parameters, and color
 *   the length of the wire segments and the amount of distance that
 *     that the wire twists back may also be adjusted through segment
 *     length and segment separation.
 */
#define DEFAULT_WIRENAME "wire"
#define DEFAULT_SEGMENTNAME "seg"
#define DEFAULT_WIRERADIUS 2.0
#define DEFAULT_WIREANGLE 45.0
#define DEFAULT_WIREMATERIAL "plastic"
#define DEFAULT_WIREMATERIALPARAMS "sh=16 sp=.5 di=.5"
#define DEFAULT_WIREMATERIALCOLOR {128,128,128}
#define DEFAULT_WIRESEGMENTLENGTH 50.0
#define DEFAULT_WIRESEGMENTSEPARATION DEFAULT_WIRERADIUS
/* the max wire segments should not be changed as it is mearly a max
 * upper bound on the maximum number of segments that may be generated
 * for any wire pair.  it is provided as a saveguard against having an
 * "out-of-control" program if invalid wire values are entered.
 */
#define DEFAULT_MAXWIRESEGMENTS 1234567890L

/* these are the format specifiers that get set for the pole and wire
 * names that get generated.  the format of the parameter specifier is
 * the same as "C" stdio specifications and should not usually need to
 * be changed.
 */
#define DEFAULT_POLEBASICPARAM "%s%d"
#define DEFAULT_WIREBASICPARAM "%s%d"
#define DEFAULT_REGIONSUFFIX ".r"
/* this is an upper bounds restriction placed on the length of any and
 * all names in the database.
 */
#define DEFAULT_MAXNAMELENGTH 64

/* use a high precision value for pi if it is available, otherwise
 * use the standard value (if available).  last resort, use mine
 */
#ifdef M_PIl
#define _PI M_PIl
#else
#ifdef M_PI
#define _PI M_PI
#else
#define _PI            3.14159265358979323846
#endif
#endif

/* this macro does the standard conversion of an angle to a radian
 * value.  the value of pi defined in _PI is pulled from math.h if
 * available
 */
#define RADIAN(x) (((x)*_PI)/180.0)

/*****************/

#ifdef __cplusplus
extern "C" {
#endif


BU_EXTERN(void argumentHelp, (FILE *fp, char *progname, char *message));
BU_EXTERN(void argumentExamples, (FILE *fp, char *progname));
BU_EXTERN(void defaultSettings, (FILE *fp));
BU_EXTERN(int parseArguments, (int argc, char *argv[]));
BU_EXTERN(void printMatrix, (FILE *fp, char *n, mat_t m));
BU_EXTERN(char *getName, (char *base, int id, char *suffix));
BU_EXTERN(char *getPrePostName, (char *prefix, char *base, char *suffix));

BU_EXTERN(int generateFence_s, (struct rt_wdb *fp, char *fencename, point_t startpostion, point_t endposition));
BU_EXTERN(int generateFence, (struct rt_wdb *fp, char *fencename, point_t startpostion, vect_t heightvector, vect_t widthvector));

BU_EXTERN(int generatePoles_s, (struct rt_wdb *fp, char *polename));
BU_EXTERN(int generatePoles, (struct rt_wdb *fp, char *polename, point_t startposition, vect_t heightvector, vect_t widthvector, double radius));

BU_EXTERN(int generateMesh_s, (struct rt_wdb *fp, char *meshname));
BU_EXTERN(int generateMesh, (struct rt_wdb *fp, char *meshname, point_t startposition, vect_t heightvector, vect_t widthvector));

BU_EXTERN(int generateWire_s, (struct rt_wdb *fp, char *wirename, point_t position));
BU_EXTERN(int generateWire, (struct rt_wdb *fp, char *wirename, point_t position, vect_t heightvector, vect_t widthvector, double radius, double angle, double wiresegmentlength));

BU_EXTERN(int createWire, (struct rt_wdb *fp, char *segmentname, vect_t heightvector, vect_t widthvector, double radius, double angle, double segmentlength, double segmentdepthseparation));


#ifdef __cplusplus
}
#endif

#endif /* __FENCE_H__ */

@


11.8
log
@change conf.h to a wrapped config.h
@
text
@@


11.7
log
@commit test
@
text
@d28 3
a30 2

#include "conf.h"
@


11.6
log
@renamed preprocessor collision detector
@
text
@d24 1
@


11.5
log
@patches to merge 5.3 into 6.0
@
text
@d24 3
a26 2
#ifndef FENCE_H
#define FENCE_H
d267 2
a268 1
#endif
@


11.5.4.1
log
@sync branch with HEAD
@
text
@d24 2
a25 4

#ifndef __FENCE_H__
#define __FENCE_H__

d266 1
a266 2
#endif /* __FENCE_H__ */

@


11.5.6.1
log
@merge in updates from HEAD
@
text
@d24 2
a25 4

#ifndef __FENCE_H__
#define __FENCE_H__

d266 1
a266 2
#endif /* __FENCE_H__ */

@


11.4
log
@minor bug fix that caused a core dump with a bad command-line parameter; cleaned up some of the code; improved the PI setting; added more error checking
@
text
@d68 1
a68 1
#define DEFAULT_OUTPUTFILENAME "untitled.csg"
d227 2
a228 1
 * value.  the value of pi defined in M_PI is pulled from math.h
@


11.3
log
@
Converted to use new version of LIBWDB.
@
text
@d213 13
d229 1
a229 1
#define RADIAN(x) (((x)*M_PI)/180.0)
@


11.2
log
@
raytrace.h before wdb.h
Eliminated use of db.h
@
text
@d233 2
a234 2
BU_EXTERN(int generateFence_s, (FILE *fp, char *fencename, point_t startpostion, point_t endposition));
BU_EXTERN(int generateFence, (FILE *fp, char *fencename, point_t startpostion, vect_t heightvector, vect_t widthvector));
d236 2
a237 2
BU_EXTERN(int generatePoles_s, (FILE *fp, char *polename));
BU_EXTERN(int generatePoles, (FILE *fp, char *polename, point_t startposition, vect_t heightvector, vect_t widthvector, double radius));
d239 2
a240 2
BU_EXTERN(int generateMesh_s, (FILE *fp, char *meshname));
BU_EXTERN(int generateMesh, (FILE *fp, char *meshname, point_t startposition, vect_t heightvector, vect_t widthvector));
d242 2
a243 2
BU_EXTERN(int generateWire_s, (FILE *fp, char *wirename, point_t position));
BU_EXTERN(int generateWire, (FILE *fp, char *wirename, point_t position, vect_t heightvector, vect_t widthvector, double radius, double angle, double wiresegmentlength));
d245 1
a245 1
BU_EXTERN(int createWire, (FILE *fp, char *segmentname, vect_t heightvector, vect_t widthvector, double radius, double angle, double segmentlength, double segmentdepthseparation));
@


11.1
log
@moved from ../h to proc-db
@
text
@d39 1
a39 2
/*#include "bu.h"
 */
d41 2
a42 3
/*#include "bn.h"
 */
#include "db.h"
@


11.1.2.1
log
@minor patches to clean up the code and fix a minor bug in the argument processing
@
text
@d70 1
a70 1
#define DEFAULT_OUTPUTFILENAME "fence.g"
a214 13
/* use a high precision value for pi if it is available, otherwise
 * use the standard value (if available).  last resort, use mine
 */
#ifdef M_PIl
#define _PI M_PIl
#else
#ifdef M_PI
#define _PI M_PI
#else
#define _PI            3.14159265358979323846
#endif
#endif

d216 1
a216 2
 * value.  the value of pi defined in _PI is pulled from math.h if
 * available
d218 1
a218 1
#define RADIAN(x) (((x)*_PI)/180.0)
@


