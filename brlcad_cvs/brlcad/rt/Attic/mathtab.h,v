head	11.2;
access;
symbols
	rel-5-0:11.1
	rel-5-0-beta:11.1
	rel-4-5:11.1
	ctj-4-5-post:11.1
	ctj-4-5-pre:11.1
	rel-4-4:11.1
	rel-4-0:10.1
	rel-3-5:9.1
	rel-3-0:8.1
	rel-2-3:7.1
	rel-2-0:6.1
	rel-1-24:5.1
	rel-1-20:4.2
	rel-1-10:4.1;
locks; strict;
comment	@ * @;


11.2
date	99.10.30.03.06.27;	author butler;	state dead;
branches;
next	11.1;

11.1
date	95.01.04.10.00.44;	author mike;	state Rel4_4;
branches;
next	10.1;

10.1
date	91.10.12.06.41.49;	author mike;	state Rel4_0;
branches;
next	9.1;

9.1
date	89.05.19.05.59.03;	author mike;	state Rel3_5;
branches;
next	8.3;

8.3
date	89.04.30.21.26.09;	author mike;	state Exp;
branches;
next	8.2;

8.2
date	89.04.27.22.22.39;	author phil;	state Exp;
branches;
next	8.1;

8.1
date	88.10.05.00.32.56;	author mike;	state Rel3_0;
branches;
next	7.1;

7.1
date	87.11.02.23.54.16;	author mike;	state Rel;
branches;
next	6.2;

6.2
date	87.10.16.03.29.03;	author mike;	state Exp;
branches;
next	6.1;

6.1
date	87.07.11.07.58.46;	author mike;	state Rel;
branches;
next	5.2;

5.2
date	87.06.26.03.39.32;	author phil;	state Exp;
branches;
next	5.1;

5.1
date	87.06.24.22.14.48;	author mike;	state Rel;
branches;
next	4.3;

4.3
date	87.05.28.21.00.05;	author mike;	state Exp;
branches;
next	4.2;

4.2
date	87.02.13.00.01.36;	author mike;	state Exp;
branches;
next	4.1;

4.1
date	86.12.29.03.48.27;	author mike;	state Rel1;
branches;
next	1.3;

1.3
date	86.10.11.22.55.59;	author mike;	state Exp;
branches;
next	1.2;

1.2
date	86.10.11.06.22.06;	author mike;	state Exp;
branches;
next	1.1;

1.1
date	86.07.28.23.15.47;	author mike;	state Exp;
branches;
next	;


desc
@Header file to describe functions in mathtab.c
@


11.2
log
@Moved mathtab/rand_half from rt into libbn
Expanded structparse to include description and default
@
text
@/*
 *			M A T H T A B . H
 *
 *  Definitions to implement fast (but approximate) math library functions
 *  using table lookups.
 *
 *  Authors -
 *	Phillip Dykstra
 *	Michael John Muuss
 *  
 *  Source -
 *	SECAD/VLD Computing Consortium, Bldg 394
 *	The U. S. Army Ballistic Research Laboratory
 *	Aberdeen Proving Ground, Maryland  21005
 *  
 *  Copyright Notice -
 *	This software is Copyright (C) 1985 by the United States Army.
 *	All rights reserved.
 *
 *  $Header: /c/CVS/brlcad/rt/mathtab.h,v 11.1 1995/01/04 10:00:44 mike Rel4_4 $
 */

#define RANDTABSIZE	2047	/* Powers of two give streaking */
#define	SINTABSIZE	2048

extern float rand_tab[];

extern double sin_scale;
extern float sin_table[];

#define rand_half(_p)	\
	( (++(_p) >= &rand_tab[RANDTABSIZE] || (_p) < rand_tab) ? \
		*((_p) = rand_tab) : *(_p))

#define rand_init(_p, _seed)	\
	(_p) = &rand_tab[(int)((rand_tab[(_seed)%RANDTABSIZE] + \
		0.5)*(RANDTABSIZE-1))]

#define rand0to1(_q)	(rand_half(_q)+0.5)

#define tab_sin(_a)	(((_a) > 0) ? \
	( sin_table[(int)((0.5 + (_a) * sin_scale))&(SINTABSIZE-1)] ) :\
	(-sin_table[(int)((0.5 - (_a) * sin_scale))&(SINTABSIZE-1)] ) )
@


11.1
log
@Release_4.4
@
text
@d20 1
a20 1
 *  $Header: /m/cad/rt/RCS/mathtab.h,v 10.1 91/10/12 06:41:49 mike Rel4_0 $
@


10.1
log
@Release_4.0
@
text
@d20 1
a20 1
 *  $Header: mathtab.h,v 9.1 89/05/19 05:59:03 mike Rel3_5 $
@


9.1
log
@Release_3.5
@
text
@d20 1
a20 1
 *  $Header: mathtab.h,v 8.3 89/04/30 21:26:09 mike Exp $
@


8.3
log
@The rand() macros now require a parameter which is the random number
table pointer to be used.  This provides perfectly "safe" access to
the random number tables in a parallel processing environment.
Each processor is seeded differently in worker.c
@
text
@d20 1
a20 1
 *  $Header: mathtab.h,v 8.2 89/04/27 22:22:39 mike Locked $
@


8.2
log
@Now use rt_pi, rt_twopi, rt_halfpi from librt
@
text
@d20 1
a20 1
 *  $Header: mathtab.h,v 8.1 88/10/05 00:32:56 phil Locked $
a25 1
extern float *rand_ptr;
d31 3
a33 3
#define rand_half()	\
	(++rand_ptr >= &rand_tab[RANDTABSIZE] ? \
		*(rand_ptr = rand_tab) : *rand_ptr)
d35 3
a37 1
#define rand0to1()	(rand_half()+0.5)
d39 5
a43 3
#define tab_sin(a)	(((a) > 0) ? \
	( sin_table[(int)((0.5 + (a) * sin_scale))&(SINTABSIZE-1)] ) :\
	(-sin_table[(int)((0.5 - (a) * sin_scale))&(SINTABSIZE-1)] ) )
@


8.1
log
@Release_3.0
@
text
@d20 1
a20 1
 *  $Header: mathtab.h,v 7.1 87/11/02 23:54:16 mike Rel $
a21 1
extern double pi, twopi, halfpi;
@


7.1
log
@Release 2.3
@
text
@d20 1
a20 1
 *  $Header: mathtab.h,v 6.2 87/10/16 03:29:03 mike Exp $
@


6.2
log
@Powers of two for randtabsize give streaking
@
text
@d20 1
a20 1
 *  $Header: mathtab.h,v 6.1 87/07/11 07:58:46 mike Locked $
@


6.1
log
@Release 2.0
@
text
@d20 1
a20 1
 *  $Header: mathtab.h,v 5.2 87/06/26 03:39:32 phil Exp $
d24 1
a24 1
#define RANDTABSIZE	2048
@


5.2
log
@sin_table indexing optimization (mod became and)
@
text
@d20 1
a20 1
 *  $Header: mathtab.h,v 5.1 87/06/24 22:14:48 phil Locked $
@


5.1
log
@Release 1.24
@
text
@d8 1
a8 1
 *	Philip Dykstra
d20 1
a20 1
 *  $Header: mathtab.h,v 4.3 87/05/28 21:00:05 mike Exp $
d40 2
a41 2
	( sin_table[(int)((0.5 + (a) * sin_scale))%SINTABSIZE] ) :\
	(-sin_table[(int)((0.5 - (a) * sin_scale))%SINTABSIZE] ) )
@


4.3
log
@Changed BENCHMARK flag from a compile-time option to a run-time
option (-B).
@
text
@d20 1
a20 1
 *  $Header: mathtab.h,v 4.2 87/02/13 00:01:36 mike Locked $
@


4.2
log
@Release 1.20 -- First Formal Release
@
text
@d20 1
a20 1
 *  $Header: mathtab.h,v 4.1 86/12/29 03:48:27 mike Rel1 $
a32 4
#ifdef BENCHMARK
#define rand_half()	0
#define rand0to1()	0.5
#else
a37 1
#endif
@


4.1
log
@BRL CAD Distribution Release 1.10
@
text
@d20 1
a20 1
 *  $Header: mathtab.h,v 1.3 86/10/11 22:55:59 mike Locked $
@


1.3
log
@Put back provisions for benchmarking
@
text
@d20 1
a20 1
 *  $Header: mathtab.h,v 1.2 86/10/11 06:22:06 mike Locked $
d22 2
@


1.2
log
@Finally, tabular versions
@
text
@d20 1
a20 1
 *  $Header: mathtab.h,v 1.1 86/07/28 23:15:47 mike Exp $
d31 4
d40 1
a40 1

@


1.1
log
@Initial revision
@
text
@d20 1
a20 1
 *  $Header: raytrace.h,v 3.9 86/07/24 06:01:45 mike Exp $
d22 2
d25 16
a40 4
/* All these should become inline-macros */
extern double tab_sin();
extern double rand0to1();
extern double rand_half();
@
