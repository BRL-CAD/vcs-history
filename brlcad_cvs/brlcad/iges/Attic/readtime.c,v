head	11.11;
access;
symbols
	ansi-20040405-merged:11.9.6.1
	postmerge-20040405-ansi:11.10
	premerge-20040404-ansi:11.10
	postmerge-autoconf:11.10
	autoconf-freeze:11.9.14.1
	premerge-autoconf:11.10
	ansi-20040316-freeze:11.9
	postmerge-20040315-windows:11.10
	premerge-20040315-windows:11.10
	windows-20040315-freeze:11.9.8.1
	autoconf-20031203:11.9
	autoconf-20031202:11.9
	autoconf-branch:11.9.0.14
	phong-branch:11.9.0.12
	photonmap-branch:11.9.0.10
	rel-6-1-DP:11.9
	windows-branch:11.9.0.8
	rel-6-0-2:11.9
	ansi-branch:11.9.0.6
	rel-6-0-1-branch:11.9.0.4
	hartley-6-0-post:11.9
	hartley-6-0-pre:11.9
	rel-6-0-1:11.9
	rel-6-0:11.9
	rel-5-4:11.9
	offsite-5-3-pre:11.9
	rel-5-3:11.9
	rel-5-2:11.9
	rel-5-1-branch:11.9.0.2
	rel-5-1:11.9
	rel-5-0:11.7
	rel-5-0-beta:11.7
	rel-4-5:11.6
	ctj-4-5-post:11.6
	ctj-4-5-pre:11.6
	rel-4-4:11.4
	rel-4-0:10.1;
locks; strict;
comment	@ * @;


11.11
date	2004.05.24.04.01.09;	author morrison;	state dead;
branches;
next	11.10;

11.10
date	2004.02.02.17.39.05;	author morrison;	state Exp;
branches;
next	11.9;

11.9
date	2000.03.29.18.42.49;	author mike;	state Exp;
branches
	11.9.6.1
	11.9.8.1
	11.9.14.1;
next	11.8;

11.8
date	99.10.04.18.39.09;	author jra;	state Exp;
branches;
next	11.7;

11.7
date	98.11.29.03.16.17;	author jra;	state Exp;
branches;
next	11.6;

11.6
date	95.12.06.13.25.06;	author jra;	state Exp;
branches;
next	11.5;

11.5
date	95.11.28.21.35.45;	author jra;	state Exp;
branches;
next	11.4;

11.4
date	95.01.04.10.08.08;	author mike;	state Rel4_4;
branches;
next	11.3;

11.3
date	94.08.22.19.13.43;	author gdurf;	state Exp;
branches;
next	11.2;

11.2
date	93.12.16.08.49.12;	author jra;	state Exp;
branches;
next	11.1;

11.1
date	93.06.28.10.10.36;	author jra;	state Exp;
branches;
next	10.1;

10.1
date	91.10.12.06.45.30;	author mike;	state Rel4_0;
branches;
next	1.3;

1.3
date	91.06.21.22.18.43;	author mike;	state Exp;
branches;
next	1.2;

1.2
date	91.06.12.20.27.55;	author mike;	state Exp;
branches;
next	1.1;

1.1
date	91.06.12.19.59.40;	author mike;	state Exp;
branches;
next	;

11.9.6.1
date	2004.03.17.21.16.34;	author morrison;	state Exp;
branches;
next	;

11.9.8.1
date	2004.03.11.23.41.16;	author morrison;	state Exp;
branches;
next	;

11.9.14.1
date	2004.02.12.19.41.39;	author erikg;	state Exp;
branches;
next	;


desc
@IGES converter
@


11.11
log
@moved to src/iges/
@
text
@/*
 *  Authors -
 *	John R. Anderson
 *	Susanne L. Muuss
 *	Earl P. Weaver
 *
 *  Source -
 *	VLD/ASB Building 1065
 *	The U. S. Army Ballistic Research Laboratory
 *	Aberdeen Proving Ground, Maryland  21005
 *  
 *  Copyright Notice -
 *	This software is Copyright (C) 1990-2004 by the United States Army.
 *	All rights reserved.
 */

/* This routine reads the next field in "card" buffer
	It expects the field to contain a string of the form:
		13HYYMMDD.HHNNSS or 15YYYYMMDD.HHNNSS
		where:
			YY is the year (last 2 digits) or YYYY is the year (all 4 digits)
			MM is the month (01 - 12)
			DD is the day (01 - 31)
			HH is the hour (00 -23 )
			NN is the minute (00 - 59)
			SS is the second (00 - 59)
	The string is read and printed out in the form:
		/MM/DD/YYYY at HH:NN:SS

	"eof" is the "end-of-field" delimiter
	"eor" is the "end-of-record" delimiter	*/

#include "./iges_struct.h"
#include "./iges_extern.h"

void
Readtime( id )
char *id;
{
	int i=(-1),length=0,lencard,done=0,year;
	char num[80];
	char year_str[5];

	if( card[counter] == eof ) /* This is an empty field */
	{
		counter++;
		return;
	}
	else if( card[counter] == eor ) /* Up against the end of record */
		return;

	if( *id != '\0' )
		bu_log( "%s" , id );

	if( card[72] == 'P' )
		lencard = PARAMLEN;
	else
		lencard = CARDLEN;

	if( counter > lencard )
		Readrec( ++currec );

	while( !done )
	{
		while( (counter <= lencard) &&
			((num[++i] = card[counter++]) != 'H'));
		if( counter > lencard )
			Readrec( ++currec );
		else
			done = 1;
	}

	num[++i] = '\0';
	length = atoi( num );
	if( length != 13 && length != 15 )
	{
		bu_log( "\tError in time stamp\n" );
		bu_log( "\tlength of string=%s (should be 13 or 15)\n" , num );
	}

	for( i=0 ; i<length ; i++ )
	{
		if( counter > lencard )
			Readrec( ++currec );
		num[i] = card[counter++];
	}

	year_str[0] = num[0];
	year_str[1] = num[1];
	if( length == 13 )
	{
		year_str[2] = '\0';
		year = atoi( year_str );
		year += 1900;
		bu_log( "%c%c/%c%c/%d" , num[2],num[3],num[4],num[5],
			year );
		if( length > 12 && length < 16 )
		bu_log( " at %c%c:%c%c:%c%c\n" , num[7],num[8],num[9],
			num[10],num[11],num[12] );

	}
	else
	{
		year_str[2] = num[2];
		year_str[3] = num[3];
		year_str[4] = '\0';
		year = atoi( year_str );
		bu_log( "%c%c/%c%c/%d" , num[4],num[5],num[6],num[7],
			year );
		bu_log( " at %c%c:%c%c:%c%c\n" , num[9],num[10],num[11],
			num[12],num[13],num[14] );
	}

	while( card[counter] != eof && card[counter] != eor )
	{
		if( counter < lencard )
			counter++;
		else
			Readrec( ++currec );
	}

	if( card[counter] == eof )
	{
		counter++;
		if( counter > lencard )
			Readrec( ++ currec );
	}
}
@


11.10
log
@update copyright to include span through 2003
@
text
@@


11.9
log
@
Converted from Release 4 names to know about libbu and libbn
@
text
@d13 1
a13 1
 *	This software is Copyright (C) 1990 by the United States Army.
@


11.9.6.1
log
@sync branch with HEAD
@
text
@d13 1
a13 1
 *	This software is Copyright (C) 1990-2004 by the United States Army.
@


11.9.8.1
log
@sync to HEAD...
@
text
@d13 1
a13 1
 *	This software is Copyright (C) 1990-2004 by the United States Army.
@


11.9.14.1
log
@merge from HEAD
@
text
@d13 1
a13 1
 *	This software is Copyright (C) 1990-2004 by the United States Army.
@


11.8
log
@Y2K update
@
text
@d53 1
a53 1
		rt_log( "%s" , id );
d77 2
a78 2
		rt_log( "\tError in time stamp\n" );
		rt_log( "\tlength of string=%s (should be 13 or 15)\n" , num );
d95 1
a95 1
		rt_log( "%c%c/%c%c/%d" , num[2],num[3],num[4],num[5],
d98 1
a98 1
		rt_log( " at %c%c:%c%c:%c%c\n" , num[7],num[8],num[9],
d108 1
a108 1
		rt_log( "%c%c/%c%c/%d" , num[4],num[5],num[6],num[7],
d110 1
a110 1
		rt_log( " at %c%c:%c%c:%c%c\n" , num[9],num[10],num[11],
@


11.7
log
@Y2K compliancy. Now dates are printed using 4 digits. Ok till 2050 :-)
@
text
@d19 1
a19 1
		13HYYMMDD.HHNNSS
d21 1
a21 1
			YY is the year (last 2 digits)
a29 3
	If the year is less than 50, 2000 is added to it, otherwise 1900
	is added (Y2K compliancy??)

d41 2
a42 1
	char num[80],year_str[3];
d75 1
a75 1
	if( length != 13 )
d78 1
a78 1
		rt_log( "\tlength of string=%s (should be 13)\n" , num );
d88 3
a90 1
	if( length > 5 && length < 16 )
a91 5
		char year_str[3];
		int year;

		year_str[0] = num[0];
		year_str[1] = num[1];
d94 1
a94 4
		if( year < 50 )
			year += 2000;
		else
			year += 1900;
d97 1
a97 3
	}

	if( length > 12 && length < 16 )
d101 12
a112 2
	if( length > 15 )
		rt_log( "%s\n" , num );
@


11.6
log
@All logging done via rt_log
@
text
@d28 1
a28 1
		/MM/DD/YY at HH:NN:SS
d30 3
d43 2
a44 2
	int i=(-1),length=0,lencard,done=0;
	char num[80];
d91 15
a105 2
		rt_log( "%c%c/%c%c/%c%c" , num[2],num[3],num[4],num[5],
			num[0],num[1] );
@


11.5
log
@Mods to handle TNURB BREP. Also added RT_EXTERNS to iges_struct.h.
@
text
@d52 1
a52 1
		printf( "%s" , id );
d76 2
a77 2
		fprintf( stderr , "\tError in time stamp\n" );
		fprintf( stderr , "\tlength of string=%s (should be 13)\n" , num );
d88 1
a88 1
		printf( "%c%c/%c%c/%c%c" , num[2],num[3],num[4],num[5],
d92 1
a92 1
		printf( " at %c%c:%c%c:%c%c\n" , num[7],num[8],num[9],
d96 1
a96 1
		printf( "%s\n" , num );
@


11.4
log
@Release_4.4
@
text
@a32 5
#include "conf.h"

#include <stdio.h>
#include "machine.h"
#include "vmath.h"
@


11.3
log
@Added include of conf.h
@
text
@@


11.2
log
@changed function declaration to void
@
text
@d33 2
@


11.1
log
@Major Upgrade to IGES 5.1
@
text
@d39 1
d90 1
a90 1
	if( length > 5 )
a92 2
	else
		printf( "\n" );
d94 1
a94 1
	if( length > 12 )
a96 2
	else
		printf( "\n" );
d98 17
a114 1
	counter++;
@


10.1
log
@Release_4.0
@
text
@d39 2
a40 1
Readtime()
d53 2
a54 1
	printf( "File Created on: " );
d90 1
a90 2
	{
		sprintf( crdate , "%c%c/%c%c/%c%c" , num[2],num[3],num[4],num[5],
a91 2
		printf( "%s" , crdate );
	}
d96 1
a96 2
	{
		sprintf( crtime , "%c%c:%c%c:%c%c" , num[7],num[8],num[9],
a97 2
		printf( " at %s\n" , crtime );
	}
@


1.3
log
@Fixed from JRA
@
text
@@


1.2
log
@Modified for Release 4.0
@
text
@d80 7
a86 2
	i = counter;
	counter = counter + length;
d89 2
a90 2
		sprintf( crdate , "%c%c/%c%c/%c%c" , card[i+2],card[i+3],card[i+4],card[i+5],
			card[i],card[i+1] );
d98 2
a99 2
		sprintf( crtime , "%c%c:%c%c:%c%c" , card[i+7],card[i+8],card[i+9],
			card[i+10],card[i+11],card[i+12] );
a106 1

@


1.1
log
@Initial revision
@
text
@d34 2
@
