head	11.9;
access;
symbols
	ansi-20040405-merged:11.5.2.2
	postmerge-20040405-ansi:11.7
	premerge-20040404-ansi:11.6
	postmerge-autoconf:11.6
	autoconf-freeze:11.5.10.2
	premerge-autoconf:11.6
	postmerge-20040315-windows:11.6
	premerge-20040315-windows:11.6
	windows-20040315-freeze:11.5.4.4
	autoconf-20031203:11.5
	autoconf-20031202:11.5
	autoconf-branch:11.5.0.10
	phong-branch:11.5.0.8
	photonmap-branch:11.5.0.6
	rel-6-1-DP:11.5
	windows-branch:11.5.0.4
	rel-6-0-2:11.3
	ansi-branch:11.5.0.2
	rel-6-0-1-branch:11.3.0.2
	hartley-6-0-post:11.4
	hartley-6-0-pre:11.3
	rel-6-0-1:11.3
	rel-6-0:11.3
	rel-5-4:11.1
	offsite-5-3-pre:11.3
	rel-5-3:11.1
	rel-5-2:11.1
	rel-5-1-branch:11.1.0.2
	rel-5-1:11.1
	rel-5-0:11.1
	rel-5-0-beta:11.1
	rel-4-5:11.1
	ctj-4-5-post:11.1
	ctj-4-5-pre:11.1
	rel-4-4:11.1
	rel-4-0:10.1
	rel-3-5:9.1
	rel-3-0:8.1
	rel-2-3:7.1
	rel-2-0:5.1
	rel-1-24:5.1
	rel-1-20:4.2
	rel-1-10:4.1;
locks; strict;
comment	@ * @;


11.9
date	2004.05.21.13.49.17;	author morrison;	state dead;
branches;
next	11.8;

11.8
date	2004.05.10.15.30.51;	author erikg;	state Exp;
branches;
next	11.7;

11.7
date	2004.04.05.05.46.03;	author morrison;	state Exp;
branches;
next	11.6;

11.6
date	2004.02.02.17.39.52;	author morrison;	state Exp;
branches;
next	11.5;

11.5
date	2002.08.20.17.09.13;	author jra;	state Exp;
branches
	11.5.2.1
	11.5.4.1
	11.5.10.1;
next	11.4;

11.4
date	2002.08.15.20.56.24;	author hartley;	state Exp;
branches;
next	11.3;

11.3
date	2000.11.02.02.21.36;	author mike;	state Exp;
branches;
next	11.2;

11.2
date	2000.08.24.22.56.19;	author mike;	state Exp;
branches;
next	11.1;

11.1
date	95.01.04.10.18.36;	author mike;	state Rel4_4;
branches;
next	10.2;

10.2
date	94.08.23.14.51.28;	author gdurf;	state Exp;
branches;
next	10.1;

10.1
date	91.10.12.06.50.31;	author mike;	state Rel4_0;
branches;
next	9.3;

9.3
date	91.06.13.05.51.44;	author mike;	state Exp;
branches;
next	9.2;

9.2
date	91.06.01.22.46.49;	author mike;	state Exp;
branches;
next	9.1;

9.1
date	89.05.19.06.14.06;	author mike;	state Rel3_5;
branches;
next	8.1;

8.1
date	88.10.05.00.53.00;	author mike;	state Rel3_0;
branches;
next	7.1;

7.1
date	87.11.03.00.28.01;	author mike;	state Rel;
branches;
next	6.1;

6.1
date	87.07.11.08.16.57;	author mike;	state Rel;
branches;
next	5.1;

5.1
date	87.06.24.22.48.50;	author mike;	state Rel;
branches;
next	4.2;

4.2
date	87.02.13.00.55.07;	author mike;	state Exp;
branches;
next	4.1;

4.1
date	86.12.29.02.53.08;	author mike;	state Rel1;
branches;
next	1.3;

1.3
date	86.11.10.19.49.12;	author mike;	state Exp;
branches;
next	1.2;

1.2
date	86.08.13.09.13.18;	author mike;	state Exp;
branches;
next	1.1;

1.1
date	86.08.13.08.01.43;	author mike;	state Exp;
branches;
next	;

11.5.2.1
date	2002.09.19.18.02.53;	author morrison;	state Exp;
branches;
next	11.5.2.2;

11.5.2.2
date	2004.03.17.21.23.38;	author morrison;	state Exp;
branches;
next	;

11.5.4.1
date	2004.03.11.23.52.42;	author morrison;	state Exp;
branches;
next	11.5.4.2;

11.5.4.2
date	2004.03.12.07.02.34;	author morrison;	state Exp;
branches;
next	11.5.4.3;

11.5.4.3
date	2004.03.12.07.03.37;	author morrison;	state Exp;
branches;
next	11.5.4.4;

11.5.4.4
date	2004.03.12.07.04.39;	author morrison;	state Exp;
branches;
next	;

11.5.10.1
date	2004.02.12.19.43.51;	author erikg;	state Exp;
branches;
next	11.5.10.2;

11.5.10.2
date	2004.03.15.14.08.22;	author erikg;	state Exp;
branches;
next	;


desc
@@


11.9
log
@moved to src/vdeck/
@
text
@/*
 *			M A T C H . C
 *
 *  Author:		Gary S. Moss
 *  
 *  Source -
 *	SECAD/VLD Computing Consortium, Bldg 394
 *	The U. S. Army Ballistic Research Laboratory
 *	Aberdeen Proving Ground, Maryland  21005-5066
 *  
 *  Copyright Notice -
 *	This software is Copyright (C) 1986-2004 by the United States Army.
 *	All rights reserved.
 */
#ifndef lint
static const char RCSid[] = "@@(#)$Header: /n/xoff/cvs/brlcad/vdeck/match.c,v 11.8 2004/05/10 15:30:51 erikg Exp $ (BRL)";
#endif

#ifdef HAVE_CONFIG_H
# include "config.h"
#endif



#include <stdio.h>
#ifdef USE_STRING_H
#include <string.h>
#else
#include <strings.h>
#endif
#include <setjmp.h>

#include "machine.h"
#include "externs.h"

#define NUL	'\0'

/*	m a t c h ( )
	if string matches pattern, return 1, else return 0
	special characters:
		*	Matches any string including the null string.
		?	Matches any single character.
		[...]	Matches any one of the characters enclosed.
		[!..]	Matches any character NOT enclosed.
		-	May be used inside brackets to specify range
			(i.e. str[1-58] matches str1, str2, ... str5, str8)
		\	Escapes special characters.
 */
int
match(register char *pattern, register char *string)
{
	do
		{
		switch( pattern[0] )
		{
		case '*': /* Match any string including null string.	*/
			if( pattern[1] == NUL || string[0] == NUL )
				return	1;
			while( string[0] != NUL )
				{
				if( match( &pattern[1], string ) )
					return	1;
				++string;
				}
			return	0;
		case '?': /* Match any character.			*/
			break;
		case '[': /* Match one of the characters in brackets
				unless first is a '!', then match
				any character not inside brackets.
			   */
			{ register char	*rgtBracket;
			  static int	negation;

			++pattern; /* Skip over left bracket.		*/
			/* Find matching right bracket.			*/
			if( (rgtBracket = strchr( pattern, ']' )) == NULL )
				{
				(void) fprintf( stderr, "Unmatched '['." );
				return	0;
				}
			/* Check for negation operator.			*/
			if( pattern[0] == '!' )
				{
				++pattern;
				negation = 1;
				}
			else	{
				negation = 0;
				}	
			/* Traverse pattern inside brackets.		*/
			for(	;
				pattern < rgtBracket
			     &&	pattern[0] != string[0];
				++pattern
				)
				{
				if(	pattern[ 0] == '-'
				    &&	pattern[-1] != '\\'
					)
					{
					if(	pattern[-1] <= string[0]
					    &&	pattern[-1] != '['
					    &&	pattern[ 1] >= string[0]
					    &&	pattern[ 1] != ']'
					)
						break;
					}
				}
			if( pattern == rgtBracket )
				{
				if( ! negation )
					{
					return	0;
					}
				}
			else
				{
				if( negation )
					{
					return	0;
					}
				}
			pattern = rgtBracket; /* Skip to right bracket.	*/
			break;
			}
		case '\\': /* Escape special character.			*/
			++pattern;
			/* WARNING: falls through to default case.	*/
		default:  /* Compare characters.			*/
			if( pattern[0] != string[0] )
				return	0;
		}
		++pattern;
		++string;
		}
	while( pattern[0] != NUL && string[0]  != NUL );
	if( (pattern[0] == NUL || pattern[0] == '*' ) && string[0]  == NUL )
		{
		return	1;
		}
	else
		{
		return	0;
		}
	}
@


11.8
log
@change conf.h to a wrapped config.h
@
text
@d16 1
a16 1
static const char RCSid[] = "@@(#)$Header: /cvs/brlcad/vdeck/match.c,v 11.7 2004/04/05 05:46:03 morrison Exp $ (BRL)";
@


11.7
log
@merge of ansi-6-0-branch into head
@
text
@d16 1
a16 1
static const char RCSid[] = "@@(#)$Header$ (BRL)";
d19 5
a23 1
#include "conf.h"
@


11.6
log
@update copyright to include span through 2003
@
text
@d16 1
a16 1
static const char RCSid[] = "@@(#)$Header: /c/CVS/brlcad/vdeck/match.c,v 11.5 2002/08/20 17:09:13 jra Exp $ (BRL)";
d46 2
a47 4
match(	 pattern,  string )
register
char	*pattern, *string;
	{
@


11.5
log
@Restoration of entire source tree to Pre-Hartley state
@
text
@d12 1
a12 1
 *	This software is Copyright (C) 1986 by the United States Army.
d16 1
a16 1
static const char RCSid[] = "@@(#)$Header: /c/CVS/brlcad/vdeck/match.c,v 11.3 2000/11/02 02:21:36 mike Exp $ (BRL)";
@


11.5.4.1
log
@sync to HEAD...
@
text
@d12 1
a12 1
 *	This software is Copyright (C) 1986-2004 by the United States Army.
d16 1
a16 1
static const char RCSid[] = "@@(#)$Header: /n/cad/c/CVS/brlcad/vdeck/match.c,v 11.6 2004/02/02 17:39:52 morrison Exp $ (BRL)";
@


11.5.4.2
log
@join with HEAD
@
text
@@


11.5.4.3
log
@join with HEAD
@
text
@@


11.5.4.4
log
@join with HEAD
@
text
@@


11.5.10.1
log
@merge from HEAD
@
text
@d12 1
a12 1
 *	This software is Copyright (C) 1986-2004 by the United States Army.
d16 1
a16 1
static const char RCSid[] = "@@(#)$Header: /c/CVS/brlcad/vdeck/match.c,v 11.6 2004/02/02 17:39:52 morrison Exp $ (BRL)";
@


11.5.10.2
log
@merge from head
@
text
@d16 1
a16 1
static const char RCSid[] = "@@(#)$Header: /c/CVS/brlcad/vdeck/match.c,v 11.5.10.1 2004/02/12 19:43:51 erikg Exp $ (BRL)";
@


11.5.2.1
log
@Initial ANSIfication
@
text
@d16 1
a16 1
static const char RCSid[] = "@@(#)$Header: /c/CVS/brlcad/vdeck/match.c,v 11.5 2002/08/20 17:09:13 jra Exp $ (BRL)";
d46 4
a49 2
match(register char *pattern, register char *string)
{
@


11.5.2.2
log
@sync branch with HEAD
@
text
@d12 1
a12 1
 *	This software is Copyright (C) 1986-2004 by the United States Army.
d16 1
a16 1
static const char RCSid[] = "@@(#)$Header$ (BRL)";
@


11.4
log
@Converted from K&R to ANSI C - RFH
@
text
@d46 4
a49 2
match(register char *pattern, register char *string)
{
@


11.3
log
@
lint
@
text
@d16 1
a16 1
static const char RCSid[] = "@@(#)$Header: /c/CVS/brlcad/vdeck/match.c,v 11.2 2000/08/24 22:56:19 mike Exp $ (BRL)";
d46 2
a47 4
match(	 pattern,  string )
register
char	*pattern, *string;
	{
@


11.2
log
@
RCSid
@
text
@d16 1
a16 1
static const char RCSid[] = "@@(#)$Header: /c/CVS/brlcad/vdeck/match.c,v 11.1 1995/01/04 10:18:36 mike Rel4_4 $ (BRL)";
d45 1
@


11.1
log
@Release_4.4
@
text
@d16 1
a16 1
static char RCSid[] = "@@(#)$Header: /m/cad/vdeck/RCS/match.c,v 10.2 94/08/23 14:51:28 gdurf Exp $ (BRL)";
@


10.2
log
@Factored ifdefs
@
text
@d16 1
a16 1
static char RCSid[] = "@@(#)$Header: /m/cad/vdeck/RCS/match.c,v 10.1 1991/10/12 06:50:31 mike Rel4_0 gdurf $ (BRL)";
@


10.1
log
@Release_4.0
@
text
@d16 1
a16 1
static char RCSid[] = "@@(#)$Header: /m/cad/vdeck/RCS/match.c,v 9.3 91/06/13 05:51:44 mike Exp $ (BRL)";
d19 2
d22 3
a24 1
#ifdef BSD
a25 2
#else
#include <string.h>
@


9.3
log
@Header files
@
text
@d16 1
a16 1
static char RCSid[] = "@@(#)$Header: /m/cad/vdeck/RCS/match.c,v 9.2 91/06/01 22:46:49 mike Exp $ (BRL)";
@


9.2
log
@Moved #includes out of vextern.h into individual .c files
Trimmed out some unused variables.
@
text
@d16 1
a16 1
static char RCSid[] = "@@(#)$Header: /m/cad/vdeck/RCS/match.c,v 9.1 89/05/19 06:14:06 mike Rel3_5 $ (BRL)";
d28 1
a28 2
#include "vmath.h"
#include "./vextern.h"
@


9.1
log
@Release_3.5
@
text
@d16 1
a16 1
static char RCSid[] = "@@(#)$Header: match.c,v 8.1 88/10/05 00:53:00 mike Rel3_0 $ (BRL)";
d25 1
d27 2
@


8.1
log
@Release_3.0
@
text
@d16 1
a16 1
static char RCSid[] = "@@(#)$Header: match.c,v 7.1 87/11/03 00:28:01 mike Rel $ (BRL)";
@


7.1
log
@Release 2.3
@
text
@d16 1
a16 1
static char RCSid[] = "@@(#)$Header: match.c,v 6.1 87/07/11 08:16:57 mike Rel $ (BRL)";
@


6.1
log
@Release 2.0
@
text
@d16 1
a16 1
static char RCSid[] = "@@(#)$Header: match.c,v 5.1 87/06/24 22:48:50 mike Rel $ (BRL)";
@


5.1
log
@Release 1.24
@
text
@d16 1
a16 1
static char RCSid[] = "@@(#)$Header: match.c,v 4.2 87/02/13 00:55:07 mike Exp $ (BRL)";
@


4.2
log
@Release 1.20 -- First Formal Release
@
text
@d16 1
a16 1
static char RCSid[] = "@@(#)$Header: match.c,v 4.1 86/12/29 02:53:08 mike Rel1 $ (BRL)";
@


4.1
log
@BRL CAD Distribution Release 1.10
@
text
@d16 1
a16 1
static char RCSid[] = "@@(#)$Header: match.c,v 1.3 86/11/10 19:49:12 mike Exp $ (BRL)";
@


1.3
log
@string.h
@
text
@d16 1
a16 1
static char RCSid[] = "@@(#)$Header$ (BRL)";
@


1.2
log
@Added #include ./vextern.h
@
text
@d2 16
a17 4
	SCCS id:	@@(#) match.c	1.1
	Last edit: 	2/1/85 at 13:51:37
	Retrieved: 	6/16/86 at 20:29:40
	SCCS archive:	/vld/src/vdeck/s.match.c
a18 10
	Author:		Gary S. Moss
			U. S. Army Ballistic Research Laboratory
			Aberdeen Proving Ground
			Maryland 21005-5066
			(301)278-6647 or AV-283-6647
*/
#if ! defined( lint )
static
char	sccsTag[] = "@@(#) match.c	1.1	last edit 2/1/85 at 13:51:37";
#endif
d20 3
d24 2
@


1.1
log
@Initial revision
@
text
@d4 2
a5 2
	Retrieved: 	8/13/86 at 08:01:40
	SCCS archive:	/m/cad/vdeck/RCS/s.match.c
d19 2
@
