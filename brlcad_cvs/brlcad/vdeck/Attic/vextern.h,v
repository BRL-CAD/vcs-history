head	11.6;
access;
symbols
	ansi-20040405-merged:11.4.2.1
	postmerge-20040405-ansi:11.5
	premerge-20040404-ansi:11.4
	postmerge-autoconf:11.4
	autoconf-freeze:11.4
	premerge-autoconf:11.4
	postmerge-20040315-windows:11.4
	premerge-20040315-windows:11.4
	windows-20040315-freeze:11.4
	autoconf-20031203:11.4
	autoconf-20031202:11.4
	autoconf-branch:11.4.0.10
	phong-branch:11.4.0.8
	photonmap-branch:11.4.0.6
	rel-6-1-DP:11.4
	windows-branch:11.4.0.4
	rel-6-0-2:11.2
	ansi-branch:11.4.0.2
	rel-6-0-1-branch:11.2.0.2
	hartley-6-0-post:11.3
	hartley-6-0-pre:11.2
	rel-6-0-1:11.2
	rel-6-0:11.2
	rel-5-4:11.1.2.1
	offsite-5-3-pre:11.1
	rel-5-3:11.1
	rel-5-2:11.1
	rel-5-1-branch:11.1.0.2
	rel-5-1:11.1
	rel-5-0:11.1
	rel-5-0-beta:11.1
	rel-4-5:11.1
	ctj-4-5-post:11.1
	ctj-4-5-pre:11.1
	rel-4-4:11.1
	rel-4-0:10.1
	rel-3-5:9.1
	rel-3-0:8.1
	rel-2-3:7.1
	rel-2-0:5.1
	rel-1-24:5.1
	rel-1-20:4.2
	rel-1-10:4.1;
locks; strict;
comment	@ * @;


11.6
date	2004.05.21.13.49.18;	author morrison;	state dead;
branches;
next	11.5;

11.5
date	2004.04.05.05.46.03;	author morrison;	state Exp;
branches;
next	11.4;

11.4
date	2002.08.20.17.09.13;	author jra;	state Exp;
branches
	11.4.2.1;
next	11.3;

11.3
date	2002.08.15.20.56.24;	author hartley;	state Exp;
branches;
next	11.2;

11.2
date	2001.06.13.01.36.58;	author jra;	state Exp;
branches;
next	11.1;

11.1
date	95.01.04.10.18.40;	author mike;	state Rel4_4;
branches
	11.1.2.1;
next	10.2;

10.2
date	94.08.24.13.41.59;	author gdurf;	state Exp;
branches;
next	10.1;

10.1
date	91.10.12.06.50.34;	author mike;	state Rel4_0;
branches;
next	9.11;

9.11
date	91.07.11.22.44.52;	author butler;	state Exp;
branches;
next	9.10;

9.10
date	91.06.13.06.15.06;	author mike;	state Exp;
branches;
next	9.9;

9.9
date	91.06.13.06.03.20;	author mike;	state Exp;
branches;
next	9.8;

9.8
date	91.06.13.05.57.12;	author mike;	state Exp;
branches;
next	9.7;

9.7
date	91.06.13.05.23.47;	author mike;	state Exp;
branches;
next	9.6;

9.6
date	91.06.11.02.00.24;	author mike;	state Exp;
branches;
next	9.5;

9.5
date	91.06.01.22.46.29;	author mike;	state Exp;
branches;
next	9.4;

9.4
date	91.06.01.00.52.08;	author mike;	state Exp;
branches;
next	9.3;

9.3
date	90.11.24.01.56.22;	author mike;	state Exp;
branches;
next	9.2;

9.2
date	90.05.09.13.39.19;	author moss;	state Exp;
branches;
next	9.1;

9.1
date	89.05.19.06.14.13;	author mike;	state Rel3_5;
branches;
next	8.1;

8.1
date	88.10.05.00.53.09;	author mike;	state Rel3_0;
branches;
next	7.4;

7.4
date	88.09.27.15.37.54;	author stay;	state Exp;
branches;
next	7.3;

7.3
date	88.09.27.15.32.37;	author stay;	state Exp;
branches;
next	7.2;

7.2
date	88.03.01.19.58.36;	author mike;	state Exp;
branches;
next	7.1;

7.1
date	87.11.03.00.28.16;	author mike;	state Rel;
branches;
next	6.2;

6.2
date	87.10.26.16.14.40;	author moss;	state Exp;
branches;
next	6.1;

6.1
date	87.07.11.08.17.13;	author mike;	state Rel;
branches;
next	5.1;

5.1
date	87.06.24.22.49.10;	author mike;	state Rel;
branches;
next	4.2;

4.2
date	87.02.13.00.55.25;	author mike;	state Exp;
branches;
next	4.1;

4.1
date	86.12.29.02.53.22;	author mike;	state Rel1;
branches;
next	2.5;

2.5
date	86.08.13.09.26.30;	author mike;	state Exp;
branches;
next	2.4;

2.4
date	86.08.13.08.19.33;	author mike;	state Exp;
branches;
next	2.3;

2.3
date	86.08.13.08.19.26;	author mike;	state Exp;
branches;
next	2.2;

2.2
date	86.08.13.08.19.21;	author mike;	state Exp;
branches;
next	2.1;

2.1
date	86.08.13.08.19.14;	author mike;	state Exp;
branches;
next	1.7;

1.7
date	86.08.13.08.19.10;	author mike;	state Exp;
branches;
next	1.6;

1.6
date	86.08.13.08.19.05;	author mike;	state Exp;
branches;
next	1.5;

1.5
date	86.08.13.08.19.00;	author mike;	state Exp;
branches;
next	1.4;

1.4
date	86.08.13.08.18.55;	author mike;	state Exp;
branches;
next	1.3;

1.3
date	86.08.13.08.18.50;	author mike;	state Exp;
branches;
next	1.2;

1.2
date	86.08.13.08.18.45;	author mike;	state Exp;
branches;
next	1.1;

1.1
date	86.08.13.08.18.41;	author mike;	state Exp;
branches;
next	;

11.1.2.1
date	2001.07.11.12.32.09;	author jra;	state Exp;
branches;
next	;

11.4.2.1
date	2002.09.19.18.02.53;	author morrison;	state Exp;
branches;
next	;


desc
@@


11.6
log
@moved to src/vdeck/
@
text
@/*
	SCCS archive:	/vld/src/vdeck/s.vextern.h

	Author:		???
			U. S. Army Ballistic Research Laboratory
			Aberdeen Proving Ground
			Maryland 21005-5066
*/

/* Special characters.							*/
#define	LF		"\n"
#define BLANKS	"                                                                          "

/* Command line options.						*/
#define DECK		'd'
#define ERASE		'e'
#define INSERT		'i'
#define LIST		'l'
#define MENU		'?'
#define NUMBER		'n'
#define QUIT		'q'
#define REMOVE		'r'
#define RETURN		'\0'
#define SHELL		'!'
#define SORT_TOC	's'
#define TOC		't'
#define UNKNOWN		default

/* Prompts.								*/
#define CMD_PROMPT	"\ncommand( ? for menu )>> "
#define LST_PROMPT	"\nSOLIDS LIST( ? for menu )> "
#define PROMPT		"vdeck> "

/* Size limits.								*/
#define MAXLN	80	/* max length of input line */

#define MAXARG	20	/* max arguments on command line */

/* Standard flag settings.						*/
#define YES	1
#define NO	0

extern int	debug;
extern char	*usage[], *cmd[];
extern mat_t	identity;

extern void		abort_sig(int sig), quit(int sig);
extern void		toc(void), list_toc(char **args);
extern void		prompt(char *fmt);

extern int	curr_ct;
extern char	*arg_list[];
extern int	arg_ct;
extern int	tmp_ct;

extern char	*objfile;

extern int	solfd;		extern char	*st_file;
extern int	regfd;		extern char	*rt_file;
extern int	ridfd;		extern char	*id_file;

extern int	ndir, nns, nnr;

extern int			delsol, delreg;
extern char			buff[];
extern long			savsol;

extern jmp_buf		env;
#define EPSILON		0.0001
#define CONV_EPSILON	0.01

extern struct db_i	*dbip;		/* Database instance ptr */
@


11.5
log
@merge of ansi-6-0-branch into head
@
text
@@


11.4
log
@Restoration of entire source tree to Pre-Hartley state
@
text
@d47 3
a49 3
extern void		abort_sig(), quit();
extern void		toc(), list_toc();
extern void		prompt();
@


11.4.2.1
log
@Initial ANSIfication
@
text
@d47 3
a49 3
extern void		abort_sig(int sig), quit(int sig);
extern void		toc(void), list_toc(char **args);
extern void		prompt(char *fmt);
@


11.3
log
@Converted from K&R to ANSI C - RFH
@
text
@d47 3
a49 3
extern void		abort_sig(int sig), quit(int sig);
extern void		toc(void), list_toc(char **args);
extern void		prompt(char *fmt);
@


11.2
log
@ Fixed buffer overflow problem by converting to VLS strings for file names.
@
text
@d47 3
a49 3
extern void		abort_sig(), quit();
extern void		toc(), list_toc();
extern void		prompt();
@


11.1
log
@Release_4.4
@
text
@d58 3
a60 3
extern int	solfd;		extern char	st_file[];
extern int	regfd;		extern char	rt_file[];
extern int	ridfd;		extern char	id_file[];
@


11.1.2.1
log
@Backporting bug fixes for release 5.4
@
text
@d58 3
a60 3
extern int	solfd;		extern char	*st_file;
extern int	regfd;		extern char	*rt_file;
extern int	ridfd;		extern char	*id_file;
@


10.2
log
@Removed old index, rindex cruft
@
text
@@


10.1
log
@Release_4.0
@
text
@a71 4
#ifdef BSD
extern char *index(), *rindex();
#endif

@


9.11
log
@removed macro definition of strchr,strrchr which are now in machine.h
@
text
@@


9.10
log
@lists are now dynamically allocated
@
text
@a72 2
#define strchr(a,b)	index(a,b)
#define strrchr(a,b)	rindex(a,b)
@


9.9
log
@Removed unused #define
@
text
@a36 7
#ifndef NDIR
#ifdef sel
#define NDIR	9000	/* max objects in input */
#else
#define NDIR	20000	/* max objects in input */
#endif
#endif
a50 2
extern char	*toc_list[];
extern char	*curr_list[];
a53 1
extern char	*tmp_list[];
@


9.8
log
@Trimmed out excess
@
text
@d36 1
a36 1
#define MAXRR	100	/* max regions to remember */
a43 1
#define MAXPATH	32	/* max level of hierarchy */
a44 1
#define ARGSZ	32	/* max length of command line argument */
a46 6
#define UP	0
#define DOWN	1
#define QUIET	0
#define NOISY	1
#define UPP     1
#define DWN     0
a48 36
#define ON	1
#define OFF	0

/* Output vector fields.						*/
#define O1	ov+(1-1)*3
#define O2	ov+(2-1)*3
#define O3	ov+(3-1)*3
#define O4	ov+(4-1)*3
#define O5	ov+(5-1)*3
#define O6	ov+(6-1)*3
#define O7	ov+(7-1)*3
#define O8	ov+(8-1)*3
#define O9	ov+(9-1)*3
#define O10	ov+(10-1)*3
#define O11	ov+(11-1)*3
#define O12	ov+(12-1)*3
#define O13	ov+(13-1)*3
#define O14	ov+(14-1)*3
#define O15	ov+(15-1)*3
#define O16	ov+(16-1)*3

/* For solid parameter manipulation.					*/
#define SV0	&(rec->s.s_values[0])
#define	SV1	&(rec->s.s_values[3])
#define SV2     &(rec->s.s_values[6])
#define SV3	&(rec->s.s_values[9])
#define SV4     &(rec->s.s_values[12])
#define SV5     &(rec->s.s_values[15])
#define SV6     &(rec->s.s_values[18])
#define SV7     &(rec->s.s_values[21])


#define MAX( a, b )		if( (a) < (b) )		a = b
#define MIN( a, b )		if( (a) > (b) )		a = b
#define MINMAX( min, max, val )		MIN( min, val );\
				else	MAX( max, val )
@


9.7
log
@unit_conversion now taken from dbi
@
text
@d96 1
a96 1
extern mat_t	xform, notrans, identity;
a120 1
extern struct deck_ident	d_ident, idbuf;
@


9.6
log
@Removed union record
@
text
@a93 1
extern double	unit_conversion;
@


9.5
log
@Moved #includes out of vextern.h into individual .c files
Trimmed out some unused variables.
@
text
@a98 3
typedef union record Record;
extern Record record;

@


9.4
log
@Modernization beings
@
text
@a8 2
#include <math.h>
#include <setjmp.h>
a9 24
				/* Machine.h use to be here
				 * and seemed to break everything 
				 * for vdeck since it wanted 
				 * to use only floats so here is
				 * a quick fix to make things work
				 * since we should really not be 
			 	 * supporting this anyways.
				 */

#if 1
#include "machine.h"
#else
typedef float	fastf_t;	/* double|float, "Fastest" float type */
#define LOCAL	static		/* static|auto, for serial|parallel cpu */
#define FAST	LOCAL		/* LOCAL|register, for fastest floats */
typedef long	bitv_t;		/* largest integer type */
#define BITV_SHIFT	5	/* log2( bits_wide(bitv_t) ) */
#endif

#include "vmath.h"
#include "db.h"
#include "raytrace.h"
#include "externs.h"

a13 9
/* Colors.								*/
#define RED	'1'
#define GREEN	'2'
#define YELLOW	'3'
#define BLUE	'4'
#define MAGENTA	'5'
#define CYAN	'6'
#define WHITE	'7'

a36 7
#ifndef MAXSOL
#ifdef sel
#define MAXSOL	4000	/* max solids in description */
#else
#define MAXSOL	10000	/* max solids in description */
#endif
#endif
a93 13
/* Region names to find comgeom numbers for.				*/
struct findrr {
	char rr_name[16];    /* name to find comgeom number for */
	long rr_pos;         /* position in regfd to add the comgeom # */
};

/* Identification structure for final discrimination of solids.		*/
struct deck_ident {
	short	i_index;
	char	i_name[16];
	mat_t	i_mat;    /* homogeneous transformation matrix */
};

a100 1
extern struct findrr findrr[];
a101 4
extern char	dir_names[], *dir_last;

extern int	discr[];

d114 2
a115 1
extern int	objfd;		extern char	*objfile;
a118 2
extern int	idfd, rd_idfd;	extern char	disc_file[];
extern int	rrfd, rd_rrfd;	extern char	reg_file[];
d120 1
a120 1
extern int	ndir, nns, nnr, numrr;
d122 2
a123 4
extern int			regflag, orflag, delsol, delreg;
extern int			isave;
extern char			buff[],	name[];
extern char			operate;
@


9.3
log
@Fixed NDIR problem, and redefinition of lseek().
@
text
@d21 3
d29 1
d33 1
d130 1
a130 1
/* Dot product of vector a and vector b.				*/
a135 7
/* Object directory structure.						*/
typedef struct directory {
	char	*d_namep;	/* pointer to name string */
	long	d_addr;		/* disk address in object file */
} Directory;
#define	DIR_NULL	((Directory *)NULL)

a161 1
extern char		*emalloc();
a162 1
extern Directory	*lookup(), *diradd();
d199 2
@


9.2
log
@Increased MAXSOL and NDIR on non-Gould machines.  The Gould can't handle
arrays of this size, the loader gives 'no base' errors.
@
text
@d29 1
d74 1
a75 1
#ifndef NDIR
a163 1
extern char		*strcpy(), *strcat(), *mktemp();
a164 1
extern long		lseek();
a168 1
extern void		exit(), free(), perror();
@


9.1
log
@Release_3.5
@
text
@a1 3
	SCCS id:	@@(#) vextern.h	2.4
	Last edit: 	12/20/85 at 19:03:47
	Retrieved: 	6/16/86 at 20:29:50
d4 1
a4 1
	Author:		Gary S. Moss
a7 1
			(301)278-6647 or AV-298-6647
d66 2
d69 6
d76 4
@


8.1
log
@Release_3.0
@
text
@@


7.4
log
@need a few more of machine.h to make things work
@
text
@@


7.3
log
@took out macine.h since it needed to only use floats for some reason.
@
text
@d16 1
a16 1
typedef float fastf_t		/* Machine.h use to be here
d24 7
@


7.2
log
@Changed to use regular machine.h.
This may break code that assumed that vect_t has 4 elements.
@
text
@d16 8
a23 1
#include "machine.h"
@


7.1
log
@Release 2.3
@
text
@d16 1
a16 1
#include "../mged/machine.h"	/* WARNING:  Special for MGED, for now */
@


6.2
log
@Upped NDIR to 9000 from 8000.  Barf me out.
@
text
@@


6.1
log
@Release 2.0
@
text
@d57 1
a57 1
#define NDIR	8000	/* max objects in input */
@


5.1
log
@Release 1.24
@
text
@@


4.2
log
@Release 1.20 -- First Formal Release
@
text
@@


4.1
log
@BRL CAD Distribution Release 1.10
@
text
@@


2.5
log
@Absorbed vdeck.h and SGI fixes
@
text
@@


2.4
log
@Fixed buffer size in cgobj(), linted quite a bit.
@
text
@d4 2
a5 2
	Retrieved: 	8/13/86 at 08:19:29
	SCCS archive:	/m/cad/vdeck/RCS/s.vextern.h
d14 1
a14 3
#include "./ged_types.h"
#include "./3d.h"
#include "./vdeck.h"
d16 112
d133 1
a173 1
#include <setjmp.h>
d177 6
@


2.3
log
@Loosened up epsilon value in discriminating between solid types 
in vproc.c and cgarbs.c .
@
text
@d2 11
a12 6
 *	@@(#) vextern.h			retrieved: 8/13/86 at 08:19:24,
 *	@@(#) version 2.3		last edit: 3/18/85 at 14:25:44.
 *
 *	Written by Gary S. Moss.
 *	All rights reserved, Ballistic Research Laboratory.
 */
a22 1
extern Directory	directory[], *dp;
d30 2
a31 1
extern char		*malloc();
d33 1
a33 1
extern int		abort(), quit();
d36 2
d43 1
a43 1
extern int	arg_ct, max_args;
d56 6
a61 7
extern int		regflag, orflag, item, space, delsol, delreg;
extern Directory	*path[];
extern int		isave;
extern char		buff[],	name[];
extern char		operate;
extern long		savsol;
extern struct		deck_ident d_ident, idbuf;
a66 1

@


2.2
log
@Added support for new database format, ident and free records,
 and unit conversions.  Now puts title and units on first card.  Title 
version number and units are printed out when building the directory.
@
text
@d2 2
a3 2
 *	@@(#) vextern.h			retrieved: 8/13/86 at 08:19:19,
 *	@@(#) version 2.2		last edit: 1/31/85 at 15:00:12.
d59 2
@


2.1
log
@Just bumped version number to 2.1, no changes.
@
text
@d2 2
a3 2
 *	@@(#) vextern.h			retrieved: 8/13/86 at 08:19:13,
 *	@@(#) version 2.1		last edit: 6/1/84 at 14:05:13.
d13 1
d26 1
d30 1
a32 1
extern int	toc_ct;
d55 1
a55 1
extern struct		ident ident, idbuf;
@


1.7
log
@*** empty log message ***
@
text
@d2 2
a3 2
 *	@@(#) vextern.h			retrieved: 8/13/86 at 08:19:08,
 *	@@(#) version 1.7		last edit: 11/29/83 at 08:15:02.
@


1.6
log
@*** empty log message ***
@
text
@d2 2
a3 2
 *	@@(#) vextern.h			retrieved: 8/13/86 at 08:19:03,
 *	@@(#) version 1.6		last edit: 10/11/83 at 10:57:41.
@


1.5
log
@*** empty log message ***
@
text
@d2 2
a3 2
 *	@@(#) vextern.h			retrieved: 8/13/86 at 08:18:58,
 *	@@(#) version 1.5		last edit: 10/11/83 at 09:31:55.
d8 6
d17 1
a17 1
extern Directory	directory[], *dp, *lookup();
d25 3
a27 3
extern long	lseek();
extern int	abort(), quit();
extern double	atof();
d53 3
d57 1
a57 1
extern struct		ident ident, idbuf;
@


1.4
log
@*** empty log message ***
@
text
@d2 2
a3 2
 *	@@(#) vextern.h			retrieved: 8/13/86 at 08:18:54,
 *	@@(#) version 1.4		last edit: 10/11/83 at 09:04:02.
d8 1
d41 8
a48 8
extern int	regflag, orflag, item, space, delsol, delreg;
extern int	path[];
extern int	isave;
extern char	buff[],	name[];
extern char	operate;
extern long	savsol;
extern jmp_buf	env;

@


1.3
log
@*** empty log message ***
@
text
@d2 2
a3 2
 *	@@(#) vextern.h		retrieved 8/13/86 at 08:18:48,
 *	@@(#) version 1.3		  created 3/29/83 at 10:54:39.
d28 1
a28 1
extern int	*tmp_list[];
@


1.2
log
@Removed terminal-independent stuff, added register variables and documentation.
@
text
@d2 2
a3 2
 *	@@(#) vextern.h		retrieved 8/13/86 at 08:18:43,
 *	@@(#) version 1.2		  created 2/23/83 at 14:49:07.
@


1.1
log
@Initial revision
@
text
@d2 5
a6 2
 *	d e c k _ p r o c . h
 *	Externals defined in deck_glob.h
a7 1

d43 1
a43 1
extern char	buff[],	name[], filter[], *term;
@
