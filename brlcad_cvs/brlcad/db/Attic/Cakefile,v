head	11.11;
access;
symbols
	ansi-20040405-merged:11.9.4.1
	premerge-autoconf:11.10
	ansi-20040316-freeze:11.9
	postmerge-20040315-windows:11.10
	premerge-20040315-windows:11.10
	windows-20040315-freeze:11.9.6.1
	autoconf-20031203:11.10
	autoconf-20031202:11.10
	phong-branch:11.10.0.4
	photonmap-branch:11.10.0.2
	rel-6-1-DP:11.10
	windows-branch:11.9.0.6
	rel-6-0-2:11.9
	ansi-branch:11.9.0.4
	rel-6-0-1-branch:11.9.0.2
	hartley-6-0-post:11.9
	hartley-6-0-pre:11.9
	rel-6-0-1:11.9
	rel-6-0:11.9
	rel-5-4:11.7
	offsite-5-3-pre:11.9
	rel-5-3:11.7
	rel-5-2:11.7
	rel-5-1-branch:11.7.0.2
	rel-5-1:11.7
	rel-5-0:11.6
	rel-5-0-beta:11.6
	rel-4-5:11.3
	ctj-4-5-post:11.3
	ctj-4-5-pre:11.3
	rel-4-4:11.1
	rel-4-0:10.1
	rel-3-5:9.1
	rel-3-0:8.1
	AUTOCONF:11.10.0.6;
locks; strict;
comment	@# @;


11.11
date	2004.03.18.18.15.14;	author erikg;	state dead;
branches;
next	11.10;

11.10
date	2002.10.11.08.30.55;	author kermit;	state Exp;
branches
	11.10.6.1;
next	11.9;

11.9
date	2000.08.31.21.22.22;	author mike;	state Exp;
branches
	11.9.4.1
	11.9.6.1;
next	11.8;

11.8
date	2000.07.18.17.10.13;	author butler;	state Exp;
branches;
next	11.7;

11.7
date	99.11.29.14.02.53;	author jra;	state Exp;
branches;
next	11.6;

11.6
date	99.04.26.21.42.52;	author butler;	state Exp;
branches;
next	11.5;

11.5
date	98.12.31.07.15.25;	author morrison;	state Exp;
branches;
next	11.4;

11.4
date	98.12.30.21.51.07;	author mike;	state Exp;
branches;
next	11.3;

11.3
date	97.01.02.20.57.43;	author jra;	state Exp;
branches;
next	11.2;

11.2
date	96.12.31.17.24.35;	author jra;	state Exp;
branches;
next	11.1;

11.1
date	95.01.04.09.59.59;	author mike;	state Rel4_4;
branches;
next	10.4;

10.4
date	94.12.02.05.26.24;	author mike;	state Exp;
branches;
next	10.3;

10.3
date	94.10.18.16.33.17;	author mike;	state Exp;
branches;
next	10.2;

10.2
date	94.09.22.03.50.34;	author mike;	state Exp;
branches;
next	10.1;

10.1
date	91.10.12.06.41.23;	author mike;	state Rel4_0;
branches;
next	9.4;

9.4
date	91.08.27.22.46.24;	author butler;	state Exp;
branches;
next	9.3;

9.3
date	91.07.10.22.48.02;	author mike;	state Exp;
branches;
next	9.2;

9.2
date	91.07.02.23.24.25;	author mike;	state Exp;
branches;
next	9.1;

9.1
date	89.05.19.05.46.30;	author mike;	state Rel3_5;
branches;
next	8.2;

8.2
date	89.05.17.03.32.53;	author mike;	state Exp;
branches;
next	8.1;

8.1
date	88.10.05.00.25.45;	author mike;	state Rel3_0;
branches;
next	1.6;

1.6
date	88.10.04.21.28.11;	author mike;	state Exp;
branches;
next	1.5;

1.5
date	88.10.01.10.14.24;	author mike;	state Exp;
branches;
next	1.4;

1.4
date	88.10.01.07.12.20;	author mike;	state Exp;
branches;
next	1.3;

1.3
date	88.09.24.01.50.42;	author mike;	state Exp;
branches;
next	1.2;

1.2
date	88.06.11.02.01.27;	author mike;	state Exp;
branches;
next	1.1;

1.1
date	88.05.16.01.23.06;	author mike;	state Exp;
branches;
next	;

11.9.4.1
date	2004.03.17.21.16.02;	author morrison;	state Exp;
branches;
next	;

11.9.6.1
date	2004.03.11.23.40.32;	author morrison;	state Exp;
branches;
next	;

11.10.6.1
date	2004.03.18.18.10.24;	author erikg;	state dead;
branches;
next	;


desc
@Cakefile
@


11.11
log
@merge of AUTOCONF branch in to HEAD
@
text
@/*
 *			db/Cakefile
 *
 *  This Cakefile is for a recipient machine.
 *  The function is to take the distributed .asc files, and
 *  create the local binary form in .g files.
 *
 *  The STATIC_PRODUCTS definition will cause special things to
 *  happen in the "inst-dist" rule, so that the ASCII files
 *  get into the distribution directory.
 *  What is still missing is some automation to generate the
 *  .asc files from updated binary .g files on the master machine,
 *  but of course, it is hard to know which directory to look in,
 *  so for now this will remain a manual process.
 */

#define PRODUCTS	\
	boolean-ops.g \
	bldg391.g crod.g demo.g \
	ktank.g moss.g prim.g \
	star.g truck.g world.g \
	cube.g axis.g woodsman.g \
	m35.g lgt-test.g havoc.g \
	tank_car.g sphflake.g xmp.g \
	wave.g pic.g galileo.g castle.g cray.g kman.g terra.g

#define STATIC_PRODUCTS		\
	../SRCDIR/boolean-ops.asc \
	../SRCDIR/bldg391.asc ../SRCDIR/crod.asc ../SRCDIR/demo.asc \
	../SRCDIR/ktank.asc ../SRCDIR/moss.asc ../SRCDIR/prim.asc \
	../SRCDIR/star.asc ../SRCDIR/truck.asc ../SRCDIR/world.asc \
	../SRCDIR/cube.asc ../SRCDIR/axis.asc ../SRCDIR/woodsman.asc \
	../SRCDIR/m35.asc ../SRCDIR/lgt-test.asc ../SRCDIR/lgt-test.ldb \
	../SRCDIR/lgt-test.mdb ../SRCDIR/lgt-test.key ../SRCDIR/havoc.asc \
	../SRCDIR/tank_car.asc ../SRCDIR/sphflake.asc ../SRCDIR/xmp.asc \
	../SRCDIR/wave.asc ../SRCDIR/pic.asc ../SRCDIR/galileo.asc \
	../SRCDIR/castle.asc ../SRCDIR/cray.asc  ../SRCDIR/kman.asc \
	../SRCDIR/terra.asc \


#define SRCDIR	db
#define FILES	/**/
#define	SRCSUFF	.asc
#define MANSECTION	9

#include "../Cakefile.defs"

/* Prevent actual installation */
#define DONT_INSTALL	1
#undef BINDIR
#define BINDIR	/tmp
#define AFTERINSTALL	rm

/* Default rule */
everything&::	PRODUCTS

/*
 *  Because it may be necessary to run this command long before
 *  a "cake install" could be done, on an SGI the "rld" loader has
 *  no idea where to find the shared libraries necessary.
 *  So we tell it.  Ugh.  Stupid SGI software.  Sun got it right.
 */
#if defined(NFS)
#	if defined(__CAKE__sun3) || defined(__CAKE__sun4)
#		define	CONV	../.conv.MTYPE/asc2g
#	else
#		if defined(__CAKE__sp3)
#			define	CONV	\
			LIBPATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBITCL_DIR:LIBSYSV_DIR:$LIBPATH \
			../.conv.MTYPE/asc2g
#		else
#			define	CONV	\
			LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBITCL_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
			../.conv.MTYPE/asc2g
#		endif
#	endif
#	define	CONV_EX	../.conv.MTYPE/asc2g
#else
#	if defined(__CAKE__sun3) || defined(__CAKE__sun4)
#		define	CONV	../conv/asc2g
#	else
#		if defined(__CAKE__sp3)
#			define	CONV	\
			LIBPATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBITCL_DIR:LIBSYSV_DIR:$LIBPATH \
			../.conv.MTYPE/asc2g
#		else
#			define	CONV	\
			LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBITCL_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
			../conv/asc2g
#		endif
#	endif
#	define	CONV_EX	../conv/asc2g
#endif

/* If converter program changed, be sure to re-convert the .g files */
%.g:	../SRCDIR/%.asc CONV_EX			if exist ../SRCDIR/%.asc
	rm -f %.g; CONV ../SRCDIR/%.asc %.g

#include "../Cakefile.rules"
@


11.10
log
@Added initial support for IBM SP "Scalable Parallel" system running AIX.
Static build fully functional, still needs more work on shared build.
OpenGL support works, but there are issues communicatiing with mged.
@
text
@@


11.10.6.1
log
@merge from head
@
text
@@


11.9
log
@
If executable has changed, remove .g file and re-run conversion.
@
text
@a65 1
#		define	CONV_EX	../.conv.MTYPE/asc2g
d67 9
a75 4
#		define	CONV	\
		LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBITCL_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
		../.conv.MTYPE/asc2g
#		define	CONV_EX	../.conv.MTYPE/asc2g
d77 1
a80 1
#		define	CONV_EX	../conv/asc2g
d82 9
a90 4
#		define	CONV	\
		LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBITCL_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
		../conv/asc2g
#		define	CONV_EX	../conv/asc2g
d92 1
@


11.9.4.1
log
@sync branch with HEAD
@
text
@d66 1
d68 4
a71 9
#		if defined(__CAKE__sp3)
#			define	CONV	\
			LIBPATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBITCL_DIR:LIBSYSV_DIR:$LIBPATH \
			../.conv.MTYPE/asc2g
#		else
#			define	CONV	\
			LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBITCL_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
			../.conv.MTYPE/asc2g
#		endif
a72 1
#	define	CONV_EX	../.conv.MTYPE/asc2g
d76 1
d78 4
a81 9
#		if defined(__CAKE__sp3)
#			define	CONV	\
			LIBPATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBITCL_DIR:LIBSYSV_DIR:$LIBPATH \
			../.conv.MTYPE/asc2g
#		else
#			define	CONV	\
			LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBITCL_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
			../conv/asc2g
#		endif
a82 1
#	define	CONV_EX	../conv/asc2g
@


11.9.6.1
log
@sync to HEAD...
@
text
@d66 1
d68 4
a71 9
#		if defined(__CAKE__sp3)
#			define	CONV	\
			LIBPATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBITCL_DIR:LIBSYSV_DIR:$LIBPATH \
			../.conv.MTYPE/asc2g
#		else
#			define	CONV	\
			LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBITCL_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
			../.conv.MTYPE/asc2g
#		endif
a72 1
#	define	CONV_EX	../.conv.MTYPE/asc2g
d76 1
d78 4
a81 9
#		if defined(__CAKE__sp3)
#			define	CONV	\
			LIBPATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBITCL_DIR:LIBSYSV_DIR:$LIBPATH \
			../.conv.MTYPE/asc2g
#		else
#			define	CONV	\
			LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBITCL_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
			../conv/asc2g
#		endif
a82 1
#	define	CONV_EX	../conv/asc2g
@


11.8
log
@Added terrain geometry to databases
@
text
@d66 1
d71 1
d76 1
d81 1
d85 3
a87 2
%.g:	../SRCDIR/%.asc				if exist ../SRCDIR/%.asc
	CONV ../SRCDIR/%.asc %.g
@


11.7
log
@
Added LIBITCL_DIR to LD_LIBRARY_PATH.
@
text
@d25 1
a25 1
	wave.g pic.g galileo.g castle.g cray.g kman.g
d38 2
@


11.6
log
@Removed files not slated for distribution
@
text
@d66 1
a66 1
		LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
d74 1
a74 1
		LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBTCL_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
@


11.5
log
@The ascii file for the sphere flake is added to the database
and is added to the cake and make files.
@
text
@d18 1
d24 3
a26 1
	tank_car.g sphflake.g
d28 1
d35 3
a37 1
	../SRCDIR/tank_car.asc ../SRCDIR/sphflake.asc
@


11.4
log
@Need to provide path to TCL libraries
@
text
@d17 2
a18 1
#define PRODUCTS	bldg391.g crod.g demo.g \
d20 4
a23 2
	star.g truck.g world.g cube.g axis.g \
	woodsman.g m35.g lgt-test.g havoc.g tank_car.g
d27 5
a31 6
	../SRCDIR/star.asc ../SRCDIR/truck.asc \
	../SRCDIR/world.asc ../SRCDIR/cube.asc ../SRCDIR/axis.asc \
	../SRCDIR/woodsman.asc ../SRCDIR/m35.asc \
	../SRCDIR/lgt-test.asc ../SRCDIR/lgt-test.ldb \
	../SRCDIR/lgt-test.mdb ../SRCDIR/lgt-test.key \
	../SRCDIR/havoc.asc ../SRCDIR/tank_car.asc
@


11.3
log
@Added LIBBU_DIR to LIBRARY_LD_PATH.
@
text
@d58 1
a58 1
		LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
d66 1
a66 1
		LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBBU_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
@


11.2
log
@Added LIBBN_DIR to LD_LIBRARY_PATH.
@
text
@d58 1
a58 1
		LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
d66 1
a66 1
		LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBBN_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
@


11.1
log
@Release_4.4
@
text
@d58 1
a58 1
		LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
d66 1
a66 1
		LD_LIBRARY_PATH=LIBWDB_DIR:LIBRT_DIR:LIBSYSV_DIR:$LD_LIBRARY_PATH \
@


10.4
log
@SunOS 4 machines are decent, and don't need the crap to do it right.
@
text
@@


10.3
log
@Don't use shell redirection.
Prevents creating empty files when asc2g is not executable
@
text
@d54 4
a57 1
#	define	CONV	\
d60 1
d62 4
a65 1
#	define	CONV	\
d68 1
@


10.2
log
@Fix to shared library problem on Irix 5.
@
text
@d64 1
a64 1
	CONV < ../SRCDIR/%.asc > %.g
@


10.1
log
@Release_4.0
@
text
@d47 6
d54 3
a56 1
#	define	CONV	../.conv.MTYPE/asc2g
d58 3
a60 1
#	define	CONV	../conv/asc2g
@


9.4
log
@added Harry Reed's havoc and tank_car models
@
text
@@


9.3
log
@Typo in woodsman
@
text
@d20 1
a20 1
	woodsman.g m35.g lgt-test.g
d28 2
a29 1
	../SRCDIR/lgt-test.mdb ../SRCDIR/lgt-test.key
@


9.2
log
@Fixed problem with STATIC_PRODUCTS
@
text
@d26 1
a26 1
	../SRCDIR/pwoodsman.asc ../SRCDIR/m35.asc \
@


9.1
log
@Release_3.5
@
text
@d21 8
a28 5
#define STATIC_PRODUCTS	bldg391.asc crod.asc demo.asc \
	ktank.asc moss.asc prim.asc \
	star.asc truck.asc world.asc cube.asc axis.asc \
	woodsman.asc m35.asc \
	lgt-test.asc lgt-test.ldb lgt-test.mdb lgt-test.key
@


8.2
log
@added lgt-test
@
text
@d24 2
a25 1
	woodsman.asc m35.asc lgt-test.asc
@


8.1
log
@Release_3.0
@
text
@d20 1
a20 1
	woodsman.g
d24 1
a24 1
	woodsman.asc
@


1.6
log
@Minor fix, overlooked when eliminating /tmp copy.
@
text
@@


1.5
log
@Removed Alliant foolishness
@
text
@d48 1
a48 1
%.g:	../SRCDIR/%.asc	/tmp/asc2g		if exist ../SRCDIR/%.asc
@


1.4
log
@Added woodsman
@
text
@d43 1
a43 3
/tmp/asc2g:	../.conv.MTYPE/asc2g
	rm -f /tmp/asc2g
	cp ../.conv.MTYPE/asc2g /tmp/asc2g
d45 1
a45 3
/tmp/asc2g:	../conv/asc2g
	rm -f /tmp/asc2g
	cp ../conv/asc2g /tmp/asc2g
d49 1
a49 1
	/tmp/asc2g < ../SRCDIR/%.asc > %.g
@


1.3
log
@Added NFS case.
Added DONT_INSTALL flag
@
text
@d19 2
a20 1
	star.g truck.g world.g cube.g axis.g
d23 2
a24 1
	star.asc truck.asc world.asc cube.asc axis.asc
@


1.2
log
@Added stuff for inst-dist rule
@
text
@d32 1
d40 12
a51 2
%.g:	../SRCDIR/%.asc			if exist ../SRCDIR/%.asc
	asc2g < ../SRCDIR/%.asc > %.g
@


1.1
log
@Initial revision
@
text
@a3 5
XXXXX -- wrong
 *  This Cakefile is for the master source machine.
 *  The function is take the existing .g files, and
 *  create updated .asc files as required.
XXXXX
d6 9
a14 1
 *  create the local binary form in .g files
a16 1
#define SRCDIR	db
d20 3
d24 2
@
