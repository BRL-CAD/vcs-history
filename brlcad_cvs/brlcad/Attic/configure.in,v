head	11.2;
access;
symbols
	postmerge-autoconf:11.1
	autoconf-freeze:1.1.2.43
	autoconf-20031203:1.1.2.3
	autoconf-20031202:1.1.2.3
	autoconf-branch:1.1.0.2;
locks; strict;
comment	@# @;


11.2
date	2004.03.19.12.35.32;	author erikg;	state dead;
branches;
next	11.1;

11.1
date	2004.03.18.18.15.13;	author erikg;	state Exp;
branches;
next	1.1;

1.1
date	2003.10.08.16.54.51;	author erikg;	state dead;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2003.10.08.16.54.51;	author erikg;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	2003.11.14.19.30.18;	author erikg;	state Exp;
branches;
next	1.1.2.3;

1.1.2.3
date	2003.12.02.19.33.51;	author erikg;	state Exp;
branches;
next	1.1.2.4;

1.1.2.4
date	2003.12.04.14.21.34;	author erikg;	state Exp;
branches;
next	1.1.2.5;

1.1.2.5
date	2003.12.04.16.00.11;	author erikg;	state Exp;
branches;
next	1.1.2.6;

1.1.2.6
date	2003.12.04.19.19.51;	author erikg;	state Exp;
branches;
next	1.1.2.7;

1.1.2.7
date	2003.12.05.18.41.43;	author erikg;	state Exp;
branches;
next	1.1.2.8;

1.1.2.8
date	2003.12.05.19.17.05;	author erikg;	state Exp;
branches;
next	1.1.2.9;

1.1.2.9
date	2003.12.08.21.10.04;	author erikg;	state Exp;
branches;
next	1.1.2.10;

1.1.2.10
date	2003.12.10.16.03.14;	author erikg;	state Exp;
branches;
next	1.1.2.11;

1.1.2.11
date	2003.12.11.15.36.44;	author erikg;	state Exp;
branches;
next	1.1.2.12;

1.1.2.12
date	2003.12.15.20.01.33;	author erikg;	state Exp;
branches;
next	1.1.2.13;

1.1.2.13
date	2003.12.15.22.03.59;	author erikg;	state Exp;
branches;
next	1.1.2.14;

1.1.2.14
date	2003.12.17.14.25.16;	author erikg;	state Exp;
branches;
next	1.1.2.15;

1.1.2.15
date	2003.12.17.16.28.58;	author erikg;	state Exp;
branches;
next	1.1.2.16;

1.1.2.16
date	2003.12.23.16.13.40;	author erikg;	state Exp;
branches;
next	1.1.2.17;

1.1.2.17
date	2003.12.23.21.30.40;	author erikg;	state Exp;
branches;
next	1.1.2.18;

1.1.2.18
date	2003.12.24.19.19.26;	author erikg;	state Exp;
branches;
next	1.1.2.19;

1.1.2.19
date	2003.12.29.13.42.57;	author erikg;	state Exp;
branches;
next	1.1.2.20;

1.1.2.20
date	2003.12.29.15.51.14;	author erikg;	state Exp;
branches;
next	1.1.2.21;

1.1.2.21
date	2003.12.29.19.54.11;	author erikg;	state Exp;
branches;
next	1.1.2.22;

1.1.2.22
date	2003.12.31.13.16.32;	author erikg;	state Exp;
branches;
next	1.1.2.23;

1.1.2.23
date	2003.12.31.15.22.17;	author erikg;	state Exp;
branches;
next	1.1.2.24;

1.1.2.24
date	2003.12.31.16.17.24;	author erikg;	state Exp;
branches;
next	1.1.2.25;

1.1.2.25
date	2003.12.31.18.23.07;	author erikg;	state Exp;
branches;
next	1.1.2.26;

1.1.2.26
date	2003.12.31.18.37.14;	author erikg;	state Exp;
branches;
next	1.1.2.27;

1.1.2.27
date	2004.01.06.14.24.04;	author erikg;	state Exp;
branches;
next	1.1.2.28;

1.1.2.28
date	2004.01.06.19.20.50;	author erikg;	state Exp;
branches;
next	1.1.2.29;

1.1.2.29
date	2004.01.07.21.05.14;	author erikg;	state Exp;
branches;
next	1.1.2.30;

1.1.2.30
date	2004.01.13.14.52.03;	author erikg;	state Exp;
branches;
next	1.1.2.31;

1.1.2.31
date	2004.01.13.14.55.44;	author erikg;	state Exp;
branches;
next	1.1.2.32;

1.1.2.32
date	2004.01.13.15.04.43;	author erikg;	state Exp;
branches;
next	1.1.2.33;

1.1.2.33
date	2004.01.13.16.19.55;	author erikg;	state Exp;
branches;
next	1.1.2.34;

1.1.2.34
date	2004.01.13.18.41.09;	author erikg;	state Exp;
branches;
next	1.1.2.35;

1.1.2.35
date	2004.02.25.15.23.50;	author erikg;	state Exp;
branches;
next	1.1.2.36;

1.1.2.36
date	2004.03.03.15.36.45;	author erikg;	state Exp;
branches;
next	1.1.2.37;

1.1.2.37
date	2004.03.03.19.29.01;	author erikg;	state Exp;
branches;
next	1.1.2.38;

1.1.2.38
date	2004.03.03.19.30.18;	author erikg;	state Exp;
branches;
next	1.1.2.39;

1.1.2.39
date	2004.03.05.11.59.02;	author erikg;	state Exp;
branches;
next	1.1.2.40;

1.1.2.40
date	2004.03.15.14.17.59;	author erikg;	state Exp;
branches;
next	1.1.2.41;

1.1.2.41
date	2004.03.15.15.41.10;	author erikg;	state Exp;
branches;
next	1.1.2.42;

1.1.2.42
date	2004.03.16.12.57.43;	author erikg;	state Exp;
branches;
next	1.1.2.43;

1.1.2.43
date	2004.03.16.13.09.58;	author erikg;	state Exp;
branches;
next	;


desc
@@


11.2
log
@moved configure.in to configure.ac (the "new" way...)
@
text
@dnl $Id: configure.in,v 11.1 2004/03/18 18:15:13 erikg Exp $

AC_INIT
AC_CANONICAL_TARGET([])
AM_CONFIG_HEADER(h/config.h)
AM_INIT_AUTOMAKE(brlcad, 6.0)

dnl progs
AC_PROG_CC
AC_PROG_INSTALL
AC_PROG_LIBTOOL
AM_PROG_LEX

AM_C_PROTOTYPES

CFLAGS="$CFLAGS "'-I$(top_srcdir)/h -fno-strict-aliasing'

case "$target" in
	*-*-linux*)
		PTHREAD_LIBS="-lpthread"
		;;
	*-*-*BSD*)
		PTHREAD_LIBS="-pthread"
		;;
esac

AC_DEFINE(EXTERN_STDOUT,,[Stdout is extern])

dnl libs

dnl need curses, would prefer ncurses
SAVELIBS="${LIBS}"
LIBS=
AC_SEARCH_LIBS(initscr, ncurses curses,, AC_MSG_ERROR([Need curses!]))
CURSES="${LIBS}"
LIBS="${SAVELIBS}"

SAVELIBS="${LIBS}"
LIBS=
AC_SEARCH_LIBS(getvideo, gl, AC_DEFINE(HAS_SGIGL,1, Irix GL is present.))
SGIGL="${LIBS}"
LIBS="${SAVELIBS}"

AC_SEARCH_LIBS(mallopt,malloc)
AC_SEARCH_LIBS(matherr,mx)


dnl X
X_LIBS="-L/usr/X11R6/lib -lX11 -lXi"

TCLVER=8.4
TCL=libtcl${TCLVER}
TCL_LIBS='${top_builddir}/${TCL}/${TCL}.la ${DL} ${SOCKET} -lm'
TCL_LIBRARY="$prefix/tcl${TCLVER}"
if test "$FRAMEWORK_BUILD" = "1" ; then
	dnl this may be wrong
    TCL_BUILD_CFLAGS="-DTCL_PACKAGE_PATH=\\\"$libdir/Resources/Scripts\\\" -DTCL_LIBRARY=\\\"$TCL_LIBRARY\\\""
else
    TCL_BUILD_CFLAGS="-DTCL_PACKAGE_PATH=\\\"$libdir\\\" -DTCL_LIBRARY=\\\"$TCL_LIBRARY\\\""
fi

dnl tk
TKVER="8.4"
TK_LIBS='${top_builddir}/libtk${TKVER}/libtk${TKVER}.la ${TCL_LIBS} ${X_LIBS}'
TK_LIBRARY="$prefix/tk${TKVER}"

ITCL_VERSION="3.2"
ITCL_LIBS='${top_builddir}/libitcl/itcl/libitcl.la'
ITK_LIBS='${top_builddir}/libitcl/itk/libitk.la'

PNG_LIBS='${top_builddir}/libpng/libpng.la ${top_builddir}/libz/libz.la'

dnl headers
AC_HEADER_STDC
AC_CHECK_HEADERS(float.h getopt.h limits.h limits.h memory.h stdarg.h stdlib.h string.h sys/ioctl_compat.h sys/machd.h sys/mman.h sys/select.h sys/socket.h sys/stat.h sys/time.h sys/types.h termcap.h termios.h time.h unistd.h varargs.h xosdefs.h)
AC_CHECK_HEADER(sys/stat.h, AC_DEFINE(HAVE_UNIX_IO,, Fix this, sys/types.h and sys/stat.h ...))
AC_CHECK_HEADER(sys/time.h, AC_DEFINE(TIME_WITH_SYS_TIME,1,sys/time.h))
AC_DIAGNOSE([obsolete],[AC_STRUCT_ST_BLKSIZE:
        your code should no longer depend upon `HAVE_ST_BLKSIZE', but
        `HAVE_STRUCT_STAT_ST_BLKSIZE'.  Remove this warning and
        the `AC_DEFINE' when you adjust the code.])
AC_CHECK_MEMBERS([struct stat.st_blksize],[AC_DEFINE(HAVE_ST_BLKSIZE, 1,
                            [Define to 1 if your `struct stat' has
                             `st_blksize'.  Deprecated, use
                             `HAVE_STRUCT_STAT_ST_BLKSIZE' instead.])])


JAVA_CFLAGS=
have_java=no
AC_ARG_WITH(jdk,
        [  --with-jdk=path         Specify location of Java Development Kit],[
        JAVA_CFLAGS="-I$withval/include -I$withval/include/`uname | tr [A-Z] [a-z]`"
        have_java=yes
        ])
AM_CONDITIONAL(JAVA, test x$have_java = xyes)

dnl ============================================================
dnl union wait testing from tcl8.4's configure.in, should be revamped?
AC_MSG_CHECKING([union wait])
AC_CACHE_VAL(tcl_cv_union_wait,
    AC_TRY_LINK([#include <sys/types.h>
#include <sys/wait.h>], [
union wait x;
WIFEXITED(x);           /* Generates compiler error if WIFEXITED
                         * uses an int. */
    ], tcl_cv_union_wait=yes, tcl_cv_union_wait=no))
AC_MSG_RESULT($tcl_cv_union_wait)
if test $tcl_cv_union_wait = no; then
    AC_DEFINE(NO_UNION_WAIT,, Lacking a "union wait")
fi
dnl ============================================================


AC_DEFINE(DM_X,1,[Display for X])
GL_CFLAGS="-DUSE_MESA_GL"
LEX_CFLAGS="-Dyylex=cmd_nop"
X_CFLAGS="-I/usr/X11R6/include"

dnl TODO
AC_DEFINE(HAVE_TM_ZONE,,string in time zone)

dnl typedefs
AC_CHECK_DECL(sys_errlist, AC_DEFINE(HAVE_SYS_ERRLIST_DECL,1,sys_errlist[]), AC_DEFINE(HAVE_SYS_ERRLIST_DECL,0,don't have sys_errlist[]),[# include <stdio.h>])
AC_CHECK_DECL(re_comp, AC_DEFINE(HAVE_REGEX_DECL,, BSD regular expressions))

dnl functions
AC_CHECK_FUNC(fstatfs, , [AC_DEFINE(NO_FSTATFS,, Lacking fstatfs)])
AC_CHECK_FUNC(getopt, AC_DEFINE(HAVE_GETOPT_DECL,1,getopt))
AC_CHECK_FUNC(popen, AC_DEFINE(HAVE_POPEN_DECL,1,popen))
AC_CHECK_FUNC(strdup, AC_DEFINE(HAVE_STRDUP_DECL,1,strdup))
AC_CHECK_FUNCS(dlopen, DL="" ,[AC_CHECK_LIB(dl, dlopen, DL="-ldl", AC_CHECK_LIB(dld, dlopen, DL="-ldld", AC_MSG_ERROR([No dynamic loader found])))])
AC_CHECK_FUNCS(drand gethostname vprintf sbrk vfork dlopen bzero strdup strchr getopt writev regex strdup)
AC_CHECK_FUNCS(socket, SOCKET="" ,[AC_CHECK_LIB(socket, socket, SOCKET="-lsocket", AC_MSG_ERROR([No internet socket found]))])
AC_CHECK_FUNCS(re_comp, REGEX_LIB="", [AC_CHECK_LIB(compat, re_comp, REGEX_LIB="-lcompat",)])

dnl TODO this needs to be fixed to actually test...
case "$target" in
	i386-* | i686-* | alpha-*)
		AC_DEFINE(REVERSED_IEEE,,64b floating point storage technique)
		;;
	*)
		AC_DEFINE(NATURAL_IEEE,,64b floating point storage technique)
		;;
esac
		

AC_DEFINE(USE_PROTOTYPES,1,heh)

dnl === these are things that are defined, but don't seem to be necessary on the 4 supported platforms? ===
dnl POSIX_REGEXEC
dnl CALTECH_MALLOC
dnl DRAND
dnl DLOPEN
dnl GETHOSTNAME
dnl SHELL_ESCAPE
dnl VPRINTF
dnl SBRK
dnl VFORK
dnl SBRK_DECL
dnl POPEN_DECL
dnl GETOPT_DECL
dnl REGEX_DECL
dnl XOPEN
dnl BZERO
dnl STRCHR
dnl MATHERR
dnl UNIX_DOMAIN_SOCKETS
dnl FLOAT
dnl GETOPT
dnl OFF_T
dnl WRITEV
dnl REGEX
dnl BSDGETTIMEOFDAY

BN='${top_builddir}/libbn/libbn.la ${BU}'
BU='${top_builddir}/libbu/libbu.la ${TCL_LIBS} ${PTHREAD_LIBS} -lm ${DL}'
CURSOR='${top_builddir}/libcursor/libcursor.la ${CURSES}'
DM='${top_builddir}/libdm/libdm.la ${TK_LIBS} ${RT}'
FB='${top_builddir}/libfb/libfb.la ${X_LIBS} ${PKG} ${BU}'
FFT='${top_builddir}/libfft/libfft.la -lm'
OPTICAL='${top_builddir}/liboptical/liboptical.la'
ORLE='${top_builddir}/liborle/liborle.la'
PKG='${top_builddir}/libpkg/libpkg.la'
RLE='${top_builddir}/libutahrle/libutahrle.la -lm'
RT='${top_builddir}/librt/librt.la ${BN} ${REGEX_LIB}'
SYSV='${top_builddir}/libsysv/libsysv.la'
TERMIO='${top_builddir}/libtermio/libtermio.la'
WDB='${top_builddir}/libwdb/libwdb.la'

AC_SUBST(BN)
AC_SUBST(BU)
AC_SUBST(CURSES)
AC_SUBST(CURSOR)
AC_SUBST(DL)
AC_SUBST(DM)
AC_SUBST(FB)
AC_SUBST(FFT)
AC_SUBST(GL_CFLAGS)
AC_SUBST(ITCL_LIBS)
AC_SUBST(ITCL_VERSION)
AC_SUBST(ITK_LIBS)
AC_SUBST(JAVA_CFLAGS)
AC_SUBST(JAVARTSERVER)
AC_SUBST(LEX_CFLAGS)
AC_SUBST(OPTICAL)
AC_SUBST(ORLE)
AC_SUBST(PKG)
AC_SUBST(PNG_LIBS)
AC_SUBST(PTHREAD_LIBS)
AC_SUBST(REGEX_LIB)
AC_SUBST(RLE)
AC_SUBST(RT)
AC_SUBST(SGIGL)
AC_SUBST(SOCKET)
AC_SUBST(SYSV)
AC_SUBST(TCL)
AC_SUBST(TCLVER)
AC_SUBST(TCL_BUILD_CFLAGS)
AC_SUBST(TCL_LIBRARY)
AC_SUBST(TCL_LIBS)
AC_SUBST(TERMIO)
AC_SUBST(TKVER)
AC_SUBST(TK_LIBRARY)
AC_SUBST(TK_LIBS)
AC_SUBST(WDB)
AC_SUBST(X_CFLAGS)
AC_SUBST(X_LIBS)

AC_CONFIG_FILES([
	Makefile
	anim/Makefile
	awf/Makefile
	bench/Makefile
	brlman/Makefile
	burst/Makefile
	bwish/Makefile
	comgeom-g/Makefile
	conv/Makefile
	db/Makefile
	doc/Makefile
	fb/Makefile
	fbed/Makefile
	fbserv/Makefile
	gtools/Makefile
	h/Makefile
	halftone/Makefile
	html/Makefile
	html/ReleaseNotes/Makefile
	html/ReleaseNotes/Rel5.0/Makefile
	html/ReleaseNotes/Rel5.0/Summary/Makefile
	html/ReleaseNotes/Rel6.0/Makefile
	html/manuals/Anim_Tutorial/Makefile
	html/manuals/Makefile
	html/manuals/ReleaseNotes/Makefile
	html/manuals/cadwidgets/Makefile
	html/manuals/libbu/Makefile
	html/manuals/libdm/Makefile
	html/manuals/librt/Makefile
	html/manuals/mged/Makefile
	html/manuals/mged/animmate/Makefile
	html/manuals/shaders/Makefile
	iges/Makefile
	irprep/Makefile
	iwidgets4.0.1/Makefile
	iwidgets4.0.1/doc/Makefile
	iwidgets4.0.1/generic/Makefile
	iwidgets4.0.1/iwidgets.tcl
	iwidgets4.0.1/pkgIndex.tcl
	jack/Makefile
	lgt/Makefile
	libbn/Makefile
	libbu/Makefile
	libcursor/Makefile
	libdm/Makefile
	libfb/Makefile
	libfft/Makefile
	libitcl/Makefile
	libitcl/itcl/Makefile
	libitcl/itcl/doc/Makefile
	libitcl/itcl/generic/Makefile
	libitcl/itcl/library/Makefile
	libitcl/itk/Makefile
	libitcl/itk/doc/Makefile
	libitcl/itk/generic/Makefile
	libitcl/itk/library/Makefile
	liboptical/Makefile
	liborle/Makefile
	libpkg/Makefile
	libpng/Makefile
	librt/Makefile
	librtserver/Makefile
	libsysv/Makefile
	libtcl8.4/Makefile
	libtcl8.4/doc/Makefile
	libtcl8.4/generic/Makefile
	libtcl8.4/library/Makefile
	libtcl8.4/library/dde/Makefile
	libtcl8.4/library/encoding/Makefile
	libtcl8.4/library/http/Makefile
	libtcl8.4/library/http1.0/Makefile
	libtcl8.4/library/msgcat/Makefile
	libtcl8.4/library/opt/Makefile
	libtcl8.4/library/reg/Makefile
	libtcl8.4/library/tcltest/Makefile
	libtcl8.4/unix/Makefile
	libtcl8.4/unix/tclConfig.sh
	libtermio/Makefile
	libtk8.4/Makefile
	libtk8.4/bitmaps/Makefile
	libtk8.4/doc/Makefile
	libtk8.4/generic/Makefile
	libtk8.4/library/Makefile
	libtk8.4/library/demos/Makefile
	libtk8.4/library/demos/images/Makefile
	libtk8.4/library/images/Makefile
	libtk8.4/library/msgs/Makefile
	libtk8.4/library/pkgIndex.tcl
	libtk8.4/unix/Makefile
	libtk8.4/unix/tkConfig.sh
	libtk8.4/xlib/Makefile
	libutahrle/Makefile
	libwdb/Makefile
	libz/Makefile
	mged/Makefile
	mk/Makefile
	nirt/Makefile
	off/Makefile
	patch/Makefile
	pro-engineer/Makefile
	pro-engineer/resource/Makefile
	pro-engineer/sgi_mips4/Makefile
	pro-engineer/sgi_mips4/mk
	pro-engineer/text/Makefile
	remrt/Makefile
	rt/Makefile
	sample_applications/Makefile
	sample_applications/mk
	sh/Makefile
	sig/Makefile
	tab/Makefile
	tclscripts/Makefile
	tclscripts/geometree/Makefile
	tclscripts/lib/Makefile
	tclscripts/mged/Makefile
	tclscripts/nirt/Makefile
	tclscripts/pl-dm/Makefile
	tclscripts/rtwizard/Makefile
	tclscripts/rtwizard/examples/Makefile
	tclscripts/rtwizard/examples/PictureTypeA/Makefile
	tclscripts/rtwizard/examples/PictureTypeB/Makefile
	tclscripts/rtwizard/examples/PictureTypeC/Makefile
	tclscripts/rtwizard/examples/PictureTypeD/Makefile
	tclscripts/rtwizard/examples/PictureTypeE/Makefile
	tclscripts/rtwizard/examples/PictureTypeF/Makefile
	tclscripts/rtwizard/lib/Makefile
	tclscripts/util/Makefile
	tools/Makefile
	unigraphics/Makefile
	util/Makefile
	vas4/Makefile
	vdeck/Makefile
	vfont/Makefile
	brlcad.spec
])
AC_OUTPUT
@


11.1
log
@merge of AUTOCONF branch in to HEAD
@
text
@d1 1
a1 1
dnl $Id$
@


1.1
log
@file configure.in was initially added on branch AUTOCONF.
@
text
@d1 365
@


1.1.2.1
log
@autoconf files
@
text
@a0 203
dnl $Id$

AC_INIT()
AC_CANONICAL_SYSTEM
AM_CONFIG_HEADER(h/config.h)
AM_INIT_AUTOMAKE(brlcad, 6.0)

dnl options
dnl tcl prefix
dnl itcl prefix
dnl tk prefix

dnl progs
AC_PROG_CC
AC_PROG_INSTALL
AC_PROG_LIBTOOL
dnl AM_PROG_LEX
dnl AC_PROG_YACC

AM_C_PROTOTYPES

case "$target" in
	*-*-linux*)
		PTHREAD_LIBS="-lpthread"
		;;
	*-*-*BSD*)
		PTHREAD_LIBS="-pthread"
		;;
esac
PTHREAD_CFLAGS=
AC_SUBST(PTHREAD_CFLAGS)
AC_SUBST(PTHREAD_LIBS)

AC_DEFINE(EXTERN_STDOUT,,[Stdout is extern])

dnl libs
dnl X
X_LIBS="-L/usr/X11R6/lib -lX11 -lXi"
AC_SUBST(X_LIBS)

dnl tcl
dnl try to find a system tcl, otherwise build it?
case "$target" in
	*-*-*bsd*)
		TCL_LIBS="-L/usr/local/lib -ltcl84"
		;;
	*)
		TCL_LIBS="-ltcl8.4"
		;;
esac
dnl TCL_LIBS='$(top_builddir)'/libtcl8.4/libtcl.la
dnl TCL=libtcl8.4
TCL=
AC_SUBST(TCL)
AC_SUBST(TCL_LIBS)

dnl itcl
case "$target" in
	*-*-*bsd*)
		ITCL_LIBS="-L/usr/local/lib -litcl32"
		;;
	*)
		ITCL_LIBS="-litcl"
		;;
esac
ITCL=
AC_SUBST(ITCL_LIBS)
AC_SUBST(ITCL)

dnl tk
TK_LIBS="-ltk8.4"
TK=
AC_SUBST(TK)
AC_SUBST(TK_LIBS)

dnl itk
case "$target" in
	*-*-*bsd*)
		ITK_LIBS="-L/usr/local/lib -litk3.2"
		;;
	*)
		ITK_LIBS="-litk"
		;;
esac
AC_SUBST(ITK_LIBS)

PNG_LIBS="-lpng -lz"
AC_SUBST(PNG_LIBS)

dnl headers
AC_HEADER_STDC
AC_CHECK_HEADERS(config.h float.h getopt.h sys/ioctl_compat.h limits.h memory.h stdarg.h stdlib.h string.h sys/machd.h sys/mman.h sys/select.h sys/socket.h termcap.h termios.h unistd.h varargs.h xosdefs.h)

X_CFLAGS="-I/usr/X11R6/include"
AC_SUBST(X_CFLAGS)
AC_DEFINE(DM_X,,[Display for X])

GL_CFLAGS="-DUSE_MESA_GL"
AC_SUBST(GL_CFLAGS)

LEX_CFLAGS="-Dyylex=cmd_nop"
AC_SUBST(LEX_CFLAGS)

TCL_CFLAGS=
ITCL_CFLAGS=
TK_CFLAGS=
ITK_CFLAGS=
AC_SUBST(TCL_CFLAGS)
AC_SUBST(ITCL_CFLAGS)
AC_SUBST(TK_CFLAGS)
AC_SUBST(ITK_CFLAGS)

dnl typedefs
dnl functions
AC_CHECK_FUNCS(drand gethostname vprintf sbrk vfork dlopen bzero strdup strchr getopt writev regex)

dnl POSIX_REGEXEC
dnl CALTECH_MALLOC
dnl DRAND
dnl DLOPEN
dnl GETHOSTNAME
dnl SHELL_ESCAPE
dnl VPRINTF
dnl SBRK
dnl VFORK
dnl SBRK_DECL
dnl POPEN_DECL
dnl STRDUP_DECL
dnl GETOPT_DECL
dnl SYS_ERRLIST_DECL
dnl REGEX_DECL
dnl XOPEN
dnl UNIX_IO
dnl BZERO
dnl STRDUP
dnl STRCHR
dnl MATHERR
dnl UNIX_DOMAIN_SOCKETS
dnl FLOAT
dnl GETOPT
dnl OFF_T
dnl WRITEV
dnl REGEX
dnl BSDGETTIMEOFDAY

AC_OUTPUT([
	Makefile
	anim/Makefile
	bwish/Makefile
	doc/Makefile
	fb/Makefile
	h/Makefile
	html/Makefile
	html/ReleaseNotes/Makefile
	html/ReleaseNotes/Rel5.0/Makefile
	html/ReleaseNotes/Rel5.0/Summary/Makefile
	html/ReleaseNotes/Rel6.0/Makefile
	html/manuals/Anim_Tutorial/Makefile
	html/manuals/Makefile
	html/manuals/ReleaseNotes/Makefile
	html/manuals/cadwidgets/Makefile
	html/manuals/libbu/Makefile
	html/manuals/libdm/Makefile
	html/manuals/librt/Makefile
	html/manuals/mged/Makefile
	html/manuals/mged/animmate/Makefile
	html/manuals/shaders/Makefile
	libbn/Makefile
	libbu/Makefile
	libdm/Makefile
	libfb/Makefile
	libfft/Makefile
	liboptical/Makefile
	liborle/Makefile
	libpkg/Makefile
	librt/Makefile
	libsysv/Makefile
	libtermio/Makefile
	libutahrle/Makefile
	libwdb/Makefile
	mged/Makefile
	rt/Makefile
	sh/Makefile
	sig/Makefile
	tclscripts/Makefile
	tclscripts/geometree/Makefile
	tclscripts/lib/Makefile
	tclscripts/mged/Makefile
	tclscripts/nirt/Makefile
	tclscripts/pl-dm/Makefile
	tclscripts/rtwizard/Makefile
	tclscripts/rtwizard/examples/Makefile
	tclscripts/rtwizard/examples/PictureTypeA/Makefile
	tclscripts/rtwizard/examples/PictureTypeB/Makefile
	tclscripts/rtwizard/examples/PictureTypeC/Makefile
	tclscripts/rtwizard/examples/PictureTypeD/Makefile
	tclscripts/rtwizard/examples/PictureTypeE/Makefile
	tclscripts/rtwizard/examples/PictureTypeF/Makefile
	tclscripts/rtwizard/lib/Makefile
	tclscripts/util/Makefile
	util/Makefile
])

@


1.1.2.2
log
@starting merged autoconf of libtcl84
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.1 2003/10/08 16:54:51 erikg Exp $
d43 11
a53 10
dnl case "$target" in
dnl 	*-*-*bsd*)
dnl 		TCL_LIBS="-L/usr/local/lib -ltcl84"
dnl 		;;
dnl 	*)
dnl 		TCL_LIBS="-ltcl8.4"
dnl 		;;
dnl esac
TCL_LIBS='$(top_builddir)'/libtcl8.4/libtcl.la
TCL=libtcl8.4
a167 3
	libtcl8.4/Makefile
	libtcl8.4/generic/Makefile
	libtcl8.4/unix/Makefile
@


1.1.2.3
log
@muchos autoconf fixes, libtcl and libtk are now built with the rest of the
system, instead of trying to use the pre-installed versions
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.2 2003/11/14 19:30:18 erikg Exp $
d51 1
a51 1
TCL_LIBS='${top_builddir}'"/libtcl8.4/libtcl.la -ldl -lm"
a55 11
if test "$FRAMEWORK_BUILD" = "1" ; then
    TCL_PACKAGE_PATH="${libdir}/Resources/Scripts"
elif test "$prefix" != "$exec_prefix"; then
    TCL_PACKAGE_PATH="${libdir} ${prefix}/lib"
else
    TCL_PACKAGE_PATH="${prefix}/lib"
fi
TCL_BUILD_CFLAGS="-DTCL_PACKAGE_PATH=\\\"$(TCL_PACKAGE_PATH)\\\" -DTCL_LIBRARY=\\\"$(prefix)/lib/tcl8.4\\\""
AC_SUBST(TCL_BUILD_CFLAGS)


d70 1
a70 1
TK_LIBS='${top_builddir}'"/libtk8.4/libtk.la"
d91 1
a91 2
AC_CHECK_HEADERS(config.hfloat.h getopt.h limits.h memory.h stdarg.h stdlib.h string.h sys/ioctl_compat.h sys/machd.h sys/mman.h sys/select.h sys/socket.h sys/time.h termcap.h termios.h time.h unistd.h varargs.h xosdefs.h limits.h)
AC_DEFINE(TIME_WITH_SYS_TIME,1,sys/time.h)
a111 3
dnl ===
AC_DEFINE(HAVE_TM_ZONE,,string in time zone)

a114 1
AC_CHECK_FUNC(fstatfs, , [AC_DEFINE(NO_FSTATFS,,Lacking fstatfs)])
d153 4
d158 2
d164 1
a164 1
	html/manuals/Makefile
a165 2
	html/manuals/mged/Makefile
	html/manuals/ReleaseNotes/Makefile
d167 3
a169 4
	html/ReleaseNotes/Makefile
	html/ReleaseNotes/Rel5.0/Makefile
	html/ReleaseNotes/Rel5.0/Summary/Makefile
	html/ReleaseNotes/Rel6.0/Makefile
a179 3
	libtcl8.4/generic/Makefile
	libtcl8.4/Makefile
	libtcl8.4/unix/Makefile
a180 3
	libtk8.4/generic/Makefile
	libtk8.4/Makefile
	libtk8.4/unix/Makefile
d187 1
a189 1
	tclscripts/Makefile
d193 1
a201 1
	tclscripts/rtwizard/Makefile
@


1.1.2.4
log
@tcl scripts need to be installed
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.3 2003/12/02 19:33:51 erikg Exp $
a55 2
TCL_LIBRARY="$prefix/tcl8.4"
AC_SUBST(TCL_LIBRARY)
d57 3
a59 2
	dnl this may be wrong
    TCL_BUILD_CFLAGS="-DTCL_PACKAGE_PATH=\\\"$libdir/Resources/Scripts\\\" -DTCL_LIBRARY=\\\"$TCL_LIBRARY\\\""
d61 1
a61 1
    TCL_BUILD_CFLAGS="-DTCL_PACKAGE_PATH=\\\"$libdir\\\" -DTCL_LIBRARY=\\\"$TCL_LIBRARY\\\""
d63 1
a63 1
echo "TCL_BUILD_CFLAGS = $TCL_BUILD_CFLAGS"
d162 1
a192 1
	libtcl8.4/doc/Makefile
a193 9
	libtcl8.4/library/dde/Makefile
	libtcl8.4/library/encoding/Makefile
	libtcl8.4/library/http1.0/Makefile
	libtcl8.4/library/http/Makefile
	libtcl8.4/library/Makefile
	libtcl8.4/library/msgcat/Makefile
	libtcl8.4/library/opt/Makefile
	libtcl8.4/library/reg/Makefile
	libtcl8.4/library/tcltest/Makefile
a196 1
	libtk8.4/doc/Makefile
a201 1
	Makefile
d224 1
@


1.1.2.5
log
@fill.
added id tags where needed
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.4 2003/12/04 14:21:34 erikg Exp $
a163 2
	brlman/Makefile
	burst/Makefile
a164 1
	conv/Makefile
a166 1
	gtools/Makefile
a182 1
	irprep/Makefile
a233 1
	tools/Makefile
@


1.1.2.6
log
@adding more automake stuff
removed some files that are now generated
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.5 2003/12/04 16:00:11 erikg Exp $
d68 10
a77 1
ITCL_LIBS="${prefix}/libitcl8.4/itcl/libitcl.la"
d79 1
a83 1
TK_LIBRARY="$prefix/tk8.4"
a85 1
AC_SUBST(TK_LIBRARY)
d87 9
a95 1
ITK_LIBS="${prefix}/libitcl8.4/itk/libitk.la"
a168 1
	fbed/Makefile
a169 1
	fbserv/Makefile
a187 1
	iwidgets4.0.1/Makefile
a189 1
	libcursor/Makefile
a192 11
	libitcl3.2/itcl/doc/Makefile
	libitcl3.2/itcl/generic/Makefile
	libitcl3.2/itcl/library/Makefile
	libitcl3.2/itcl/Makefile
	libitcl3.2/itcl/unix/Makefile
	libitcl3.2/itk/doc/Makefile
	libitcl3.2/itk/generic/Makefile
	libitcl3.2/itk/library/Makefile
	libitcl3.2/itk/Makefile
	libitcl3.2/itk/unix/Makefile
	libitcl3.2/Makefile
a215 3
	libtk8.4/library/Makefile
	libtk8.4/library/demos/Makefile
	libtk8.4/library/msgs/Makefile
@


1.1.2.7
log
@iwidgets and libz
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.6 2003/12/04 19:19:51 erikg Exp $
a174 1
	iwidgets4.0.1/generic/Makefile
a219 1
	libz/Makefile
@


1.1.2.8
log
@iwidgets fixes
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.7 2003/12/05 18:41:43 erikg Exp $
d67 2
a68 2
ITCL_LIBS="${prefix}/libitcl3.2/itcl/libitcl.la"
ITCL_VERSION="3.2"
a69 1
AC_SUBST(ITCL_VERSION)
d79 1
a79 1
ITK_LIBS="${prefix}/libitcl3.2/itk/libitk.la"
d174 1
a175 3
	iwidgets4.0.1/iwidgets.tcl
	iwidgets4.0.1/Makefile
	iwidgets4.0.1/pkgIndex.tcl
@


1.1.2.9
log
@bee ess dee five point one
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.8 2003/12/05 19:17:05 erikg Exp $
d51 1
a51 1
TCL_LIBS='${top_builddir}'"/libtcl8.4/libtcl.la @@DL@@ -lm"
d67 1
a67 1
ITCL_LIBS='${top_builddir}'"/libitcl3.2/itcl/libitcl.la"
d80 1
a80 1
ITK_LIBS='${top_builddir}'"/libitcl3.2/itk/libitk.la"
d83 1
a83 1
PNG_LIBS='${top_builddir}'"/libpng/libpng.la "'${top_builddir}'"/libz/libz.la"
a89 22
AC_STRUCT_ST_BLKSIZE

dnl ============================================================
dnl union wait testing from tcl8.4's configure.in, should be revamped?
AC_MSG_CHECKING([union wait])
AC_CACHE_VAL(tcl_cv_union_wait,
    AC_TRY_LINK([#include <sys/types.h>
#include <sys/wait.h>], [
union wait x;
WIFEXITED(x);           /* Generates compiler error if WIFEXITED
                         * uses an int. */
    ], tcl_cv_union_wait=yes, tcl_cv_union_wait=no))
AC_MSG_RESULT($tcl_cv_union_wait)
if test $tcl_cv_union_wait = no; then
    AC_DEFINE(NO_UNION_WAIT,,Lacking a "union wait")
fi
dnl ============================================================

AC_CHECK_FUNCS(dlopen, DL="" ,[AC_CHECK_LIB(dl, dlopen, DL="-ldl", AC_CHECK_LIB(dld, dlopen, DL="-ldld",AC_ERROR(No dynamic loader found)))])
echo "DL is: $DL"
AC_SUBST(DL)

a147 1
	Makefile
d154 1
a155 1
	fbed/Makefile
a159 4
	html/ReleaseNotes/Makefile
	html/ReleaseNotes/Rel5.0/Makefile
	html/ReleaseNotes/Rel5.0/Summary/Makefile
	html/ReleaseNotes/Rel6.0/Makefile
a160 2
	html/manuals/Makefile
	html/manuals/ReleaseNotes/Makefile
d165 2
d168 1
a168 1
	html/manuals/mged/animmate/Makefile
d170 4
a174 1
	iwidgets4.0.1/Makefile
d177 1
a184 2
	libitcl3.2/Makefile
	libitcl3.2/itcl/Makefile
d188 1
a189 1
	libitcl3.2/itk/Makefile
d193 1
d195 1
a198 1
	libpng/Makefile
a200 1
	libtcl8.4/Makefile
a202 1
	libtcl8.4/library/Makefile
d205 1
d207 1
a207 1
	libtcl8.4/library/http1.0/Makefile
d212 1
a214 1
	libtk8.4/Makefile
d217 2
a221 1
	libtk8.4/unix/Makefile
d225 1
a229 1
	tclscripts/Makefile
d232 1
a235 1
	tclscripts/rtwizard/Makefile
d244 1
@


1.1.2.10
log
@cleanup
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.9 2003/12/08 21:10:04 erikg Exp $
d51 1
a51 1
TCL_LIBS='${top_builddir}/libtcl8.4/libtcl.la @@DL@@ -lm'
d67 1
a67 1
ITCL_LIBS='${top_builddir}/libitcl3.2/itcl/libitcl.la'
d73 1
a73 1
TK_LIBS='${top_builddir}/libtk8.4/libtk.la'
d80 1
a80 1
ITK_LIBS='${top_builddir}/libitcl3.2/itk/libitk.la'
d83 1
a83 1
PNG_LIBS='${top_builddir}/libpng/libpng.la ${top_builddir}/libz/libz.la'
a109 15
BN='${top_builddir}/libbn/libbn.la ${BU}'
BU='${top_builddir}/libbu/libbu.la ${TCL_LIBS} ${PTHREAD_LIBS} -lm ${DL}'
DM='${top_builddir}/libdm/libdm.la ${TK_LIBS} ${RT}'
FB='${top_builddir}/libfb/libfb.la ${X_LIBS} ${PKG} ${BU}'
OPTICAL='${top_builddir}/liboptical/liboptical.la'
ORLE='${top_builddir}/liborle/liborle.la'
PKG='${top_builddir}/libpkg/libpkg.la'
RLE='${top_builddir}/libutahrle/libutahrle.la -lm'
RT='${top_builddir}/librt/librt.la ${BN}'
SYSV='${top_builddir}/libsysv/libsysv.la'
TERMIO='${top_builddir}/libtermio/libtermio.la'
WDB='${top_builddir}/libwdb/libwdb.la'
AC_SUBST(BN)
AC_SUBST(BU)
AC_SUBST(DM)
d111 1
a111 9
AC_SUBST(FB)
AC_SUBST(OPTICAL)
AC_SUBST(ORLE)
AC_SUBST(PKG)
AC_SUBST(RLE)
AC_SUBST(RT)
AC_SUBST(SYSV)
AC_SUBST(TERMIO)
AC_SUBST(WDB)
@


1.1.2.11
log
@allow building and installing when builddir != srcdir (important for
multi-arch building from the same source tree)
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.10 2003/12/10 16:03:14 erikg Exp $
a20 2

CFLAGS="$CFLAGS "'-I$(top_srcdir)/h'
@


1.1.2.12
log
@added vfont
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.11 2003/12/11 15:36:44 erikg Exp $
a295 1
	vfont/Makefile
@


1.1.2.13
log
@make dist fixes
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.12 2003/12/15 20:01:33 erikg Exp $
d264 1
a264 1
	libtk8.4/bitmaps/Makefile
d267 1
a268 1
	libtk8.4/library/Makefile
a269 1
	libtk8.4/Makefile
a270 1
	libtk8.4/xlib/Makefile
@


1.1.2.14
log
@porting to irix
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.13 2003/12/15 22:03:59 erikg Exp $
a38 13

dnl need curses, would prefer ncurses
SAVELIBS="${LIBS}"
LIBS=
AC_SEARCH_LIBS(initscr, ncurses curses,,AC_ERROR(Need curses!))
CURSES="${LIBS}"
AC_SUBST(CURSES)
LIBS="${SAVELIBS}"

AC_SEARCH_LIBS(mallopt,malloc)
AC_SEARCH_LIBS(matherr,mx)


a93 2
AC_CHECK_DECL(re_comp,AC_DEFINE(HAVE_REGEX_DECL,,BSD regular expressions))

d111 1
a111 1

a113 1
CURSOR='${top_builddir}/libcursor/libcursor.la'
a125 1
AC_SUBST(CURSOR)
@


1.1.2.15
log
@seems ok on irix now
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.14 2003/12/17 14:25:16 erikg Exp $
a45 7
LIBS="${SAVELIBS}"

SAVELIBS="${LIBS}"
LIBS=
AC_SEARCH_LIBS(getvideo, gl, AC_DEFINE(HAS_SGIGL,1,Irix GL is present.))
SGIGL="${LIBS}"
AC_SUBST(SGIGL)
@


1.1.2.16
log
@cleanup/consolidation
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.15 2003/12/17 16:28:58 erikg Exp $
d136 1
a136 1
CURSOR='${top_builddir}/libcursor/libcursor.la ${CURSES}'
a138 1
FFT='${top_builddir}/libfft/libfft.la -lm'
d150 1
a151 1
AC_SUBST(DM)
a152 1
AC_SUBST(FFT)
a250 1
	lgt/Makefile
a287 1
	libtk8.4/Makefile
d291 1
a292 1
	libtk8.4/library/demos/Makefile
d294 1
a300 1
	nirt/Makefile
@


1.1.2.17
log
@normalization
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.16 2003/12/23 16:13:40 erikg Exp $
d17 1
a17 1
AM_PROG_LEX
d95 2
a96 2
TK_LIBS='${top_builddir}/libtk8.4/libtk.la ${TCL_LIBS} ${X_LIBS}'
TK
a222 1
	bench/Makefile
a225 1
	comgeom-g/Makefile
a232 1
	halftone/Makefile
a247 1
	iges/Makefile
a252 2
	jack/Makefile
	jove/Makefile
a303 1
	mk/Makefile
a304 7
	off/Makefile
	patch/Makefile
	pro-engineer/Makefile
	pro-engineer/sgi_mips4/Makefile
	pro-engineer/text/Makefile
	pro-engineer/text/resource/Makefile
	remrt/Makefile
a305 1
	sample_applications/Makefile
a307 1
	tab/Makefile
a325 2
	vas4/Makefile
	vdeck/Makefile
@


1.1.2.18
log
@more normalization
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.17 2003/12/23 21:30:40 erikg Exp $
d221 1
a222 1
	awf/Makefile
d230 1
a231 1
	fb/Makefile
d234 1
a235 1
	h/Makefile
d237 4
d242 2
d248 1
a248 1
	html/manuals/Makefile
a249 2
	html/manuals/mged/Makefile
	html/manuals/ReleaseNotes/Makefile
a250 4
	html/ReleaseNotes/Makefile
	html/ReleaseNotes/Rel5.0/Makefile
	html/ReleaseNotes/Rel5.0/Summary/Makefile
	html/ReleaseNotes/Rel6.0/Makefile
d253 1
a253 1
	iwidgets4.0.1/doc/Makefile
a255 1
	iwidgets4.0.1/Makefile
d266 2
a270 1
	libitcl3.2/itcl/Makefile
d272 1
a275 1
	libitcl3.2/itk/Makefile
a276 1
	libitcl3.2/Makefile
d283 1
d286 1
d289 1
a290 2
	libtcl8.4/library/http/Makefile
	libtcl8.4/library/Makefile
a294 1
	libtcl8.4/Makefile
d297 1
d301 1
a302 1
	libtk8.4/library/Makefile
a303 1
	libtk8.4/Makefile
a308 1
	Makefile
d324 1
a326 1
	tclscripts/Makefile
d330 1
a338 1
	tclscripts/rtwizard/Makefile
a340 1
	unigraphics/Makefile
@


1.1.2.19
log
@more normalization against the cake version
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.18 2003/12/24 19:19:26 erikg Exp $
a300 1
	libtk8.4/library/demos/images/Makefile
a301 1
	libtk8.4/library/images/Makefile
@


1.1.2.20
log
@dir no longer exists?
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.19 2003/12/29 13:42:57 erikg Exp $
d321 1
@


1.1.2.21
log
@bsd fixes
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.20 2003/12/29 15:51:14 erikg Exp $
d73 1
a73 1
TCL_LIBS='${top_builddir}/libtcl8.4/libtcl8.4.la @@DL@@ -lm'
d95 1
a95 1
TK_LIBS='${top_builddir}/libtk8.4/libtk8.4.la ${TCL_LIBS} ${X_LIBS}'
@


1.1.2.22
log
@removed superflous output
added sample app 'mk' stub (for makefile)
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.21 2003/12/29 19:54:11 erikg Exp $
d86 1
d96 1
a323 1
	sample_applications/mk
@


1.1.2.23
log
@end of missing file remediation
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.22 2003/12/31 13:16:32 erikg Exp $
a316 1
	pro-engineer/resource/Makefile
a317 1
	pro-engineer/sgi_mips4/mk
@


1.1.2.24
log
@t(cl|k)Config.sh has to be generated
and a |sort with lang unset on the output list.
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.23 2003/12/31 15:22:17 erikg Exp $
a218 1
	Makefile
d228 1
a229 1
	fbed/Makefile
d232 1
a233 1
	halftone/Makefile
a234 4
	html/ReleaseNotes/Makefile
	html/ReleaseNotes/Rel5.0/Makefile
	html/ReleaseNotes/Rel5.0/Summary/Makefile
	html/ReleaseNotes/Rel6.0/Makefile
a235 2
	html/manuals/Makefile
	html/manuals/ReleaseNotes/Makefile
d240 2
d243 1
a243 1
	html/manuals/mged/animmate/Makefile
d245 4
a250 1
	iwidgets4.0.1/Makefile
d254 1
a264 2
	libitcl3.2/Makefile
	libitcl3.2/itcl/Makefile
d268 1
a269 1
	libitcl3.2/itk/Makefile
d273 1
d275 1
a281 1
	libtcl8.4/Makefile
a283 1
	libtcl8.4/library/Makefile
d286 1
d288 1
a288 1
	libtcl8.4/library/http1.0/Makefile
d293 1
a294 1
	libtcl8.4/unix/tclConfig.sh
a295 1
	libtk8.4/Makefile
d299 1
a299 1
	libtk8.4/library/Makefile
a300 1
	libtk8.4/library/demos/images/Makefile
d302 1
d304 1
a305 1
	libtk8.4/unix/tkConfig.sh
d310 1
a327 1
	tclscripts/Makefile
d330 1
a333 1
	tclscripts/rtwizard/Makefile
d342 1
@


1.1.2.25
log
@*** empty log message ***
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.24 2003/12/31 16:17:24 erikg Exp $
a74 1
TCLVER=8.4
a75 1
AC_SUBST(TCLVER)
d96 1
a96 2
TKVER="8.4"
AC_SUBST(TKVER)
a302 1
	libtk8.4/library/pkgIndex.tcl
@


1.1.2.26
log
@beginnings of RPM fu.
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.25 2003/12/31 18:23:07 erikg Exp $
a355 1
	brlcad.spec
@


1.1.2.27
log
@more tests, more variables
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.26 2003/12/31 18:37:14 erikg Exp $
d111 1
a111 1
AC_CHECK_HEADERS(float.h getopt.h limits.h limits.h memory.h stdarg.h stdlib.h string.h sys/ioctl_compat.h sys/machd.h sys/mman.h sys/select.h sys/socket.h sys/stat.h sys/time.h sys/types.h termcap.h termios.h time.h unistd.h varargs.h xosdefs.h)
d135 29
a190 5
AC_CHECK_DECL(sys_errlist,AC_DEFINE(HAVE_SYS_ERRLIST_DECL,1,sys_errlist[]),,[# include <stdio.h>])
AC_CHECK_FUNC(popen,AC_DEFINE(HAVE_POPEN_DECL,1,popen))
AC_CHECK_FUNC(strdup,[AC_DEFINE(HAVE_STRDUP_DECL,1,strdup) AC_DEFINE(HAVE_STRDUP,1,strdup)])
AC_DEFINE(REVERSED_IEEE,,64b floating point storage technique)
AC_CHECK_HEADER(sys/stat.h, AC_DEFINE(HAVE_UNIX_IO,,Fix this, sys/types.h and sys/stat.h ...))
d203 1
d205 1
d208 1
d210 1
a219 30

BN='${top_builddir}/libbn/libbn.la ${BU}'
BU='${top_builddir}/libbu/libbu.la ${TCL_LIBS} ${PTHREAD_LIBS} -lm ${DL}'
CURSOR='${top_builddir}/libcursor/libcursor.la ${CURSES}'
DM='${top_builddir}/libdm/libdm.la ${TK_LIBS} ${RT}'
FB='${top_builddir}/libfb/libfb.la ${X_LIBS} ${PKG} ${BU}'
FFT='${top_builddir}/libfft/libfft.la -lm'
OPTICAL='${top_builddir}/liboptical/liboptical.la'
ORLE='${top_builddir}/liborle/liborle.la'
PKG='${top_builddir}/libpkg/libpkg.la'
RLE='${top_builddir}/libutahrle/libutahrle.la -lm'
RT='${top_builddir}/librt/librt.la ${BN}'
SYSV='${top_builddir}/libsysv/libsysv.la'
TERMIO='${top_builddir}/libtermio/libtermio.la'
WDB='${top_builddir}/libwdb/libwdb.la'
AC_SUBST(BN)
AC_SUBST(BU)
AC_SUBST(CURSOR)
AC_SUBST(DL)
AC_SUBST(DM)
AC_SUBST(FB)
AC_SUBST(FFT)
AC_SUBST(OPTICAL)
AC_SUBST(ORLE)
AC_SUBST(PKG)
AC_SUBST(RLE)
AC_SUBST(RT)
AC_SUBST(SYSV)
AC_SUBST(TERMIO)
AC_SUBST(WDB)
@


1.1.2.28
log
@more tests
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.27 2004/01/06 14:24:04 erikg Exp $
d162 1
a162 1
AC_CHECK_DECL(sys_errlist,AC_DEFINE(HAVE_SYS_ERRLIST_DECL,1,sys_errlist[]),AC_DEFINE(HAVE_SYS_ERRLIST_DECL,0,don't have sys_errlist[]),[# include <stdio.h>])
d165 1
a166 3

AC_DEFINE(REVERSED_IEEE,,64b floating point storage technique)
AC_DEFINE(USE_PROTOTYPES,1,heh)
@


1.1.2.29
log
@removing jove from the build cycle
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.28 2004/01/06 19:20:50 erikg Exp $
d265 1
@


1.1.2.30
log
@test for (sun style) socket lib
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.29 2004/01/07 21:05:14 erikg Exp $
d73 1
a73 1
TCL_LIBS='${top_builddir}/libtcl8.4/libtcl8.4.la @@DL@@ @@SOCKET@@ -lm'
a133 3
AC_SUBST(DL)
AC_CHECK_FUNCS(socket, SOCKET="" ,[AC_CHECK_LIB(socket, socket, SOCKET="-lsocket", AC_ERROR(No dynamic loader found)))])
AC_SUBST(SOCKET)
d212 1
@


1.1.2.31
log
@fixed parenthesis match issue on socket (oops)
fixed error description for socket
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.30 2004/01/13 14:52:03 erikg Exp $
d135 1
a135 1
AC_CHECK_FUNCS(socket, SOCKET="" ,[AC_CHECK_LIB(socket, socket, SOCKET="-lsocket", AC_ERROR(No internet socket found))])
@


1.1.2.32
log
@basic floating format detection (needs to be improved)
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.31 2004/01/13 14:55:44 erikg Exp $
d170 1
a170 11
dnl this needs to be fixed to actually test...
case "$target" in
	i386-* | i686-* | alpha-*)
		AC_DEFINE(REVERSED_IEEE,,64b floating point storage technique)
		;;
	*)
		AC_DEFINE(NATURAL_IEEE,,64b floating point storage technique)
		;;
esac
		

@


1.1.2.33
log
@added getopt function test for HAVE_GETOPT_DECL
much clean-up
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.32 2004/01/13 15:04:43 erikg Exp $
d8 5
d18 1
a21 1

d32 3
d43 1
a43 1
AC_SEARCH_LIBS(initscr, ncurses curses,, AC_ERROR(Need curses!))
d45 1
d50 1
a50 1
AC_SEARCH_LIBS(getvideo, gl, AC_DEFINE(HAS_SGIGL,1, Irix GL is present.))
d52 1
d61 1
d63 12
d76 6
a81 3
TCL=libtcl${TCLVER}
TCL_LIBS='${top_builddir}/${TCL}/${TCL}.la @@DL@@ @@SOCKET@@ -lm'
TCL_LIBRARY="$prefix/tcl${TCLVER}"
d88 6
d96 2
d99 3
a101 2
TK_LIBS='${top_builddir}/libtk${TKVER}/libtk${TKVER}.la ${TCL_LIBS} ${X_LIBS}'
TK_LIBRARY="$prefix/tk${TKVER}"
d103 2
a104 3
ITCL_VERSION="3.2"
ITCL_LIBS='${top_builddir}/libitcl${ITCL_VERSION}/itcl/libitcl.la'
ITK_LIBS='${top_builddir}/libitcl${ITCL_VERSION}/itk/libitk.la'
d107 1
d112 1
a112 2
AC_CHECK_HEADER(sys/stat.h, AC_DEFINE(HAVE_UNIX_IO,, Fix this, sys/types.h and sys/stat.h ...))
AC_CHECK_HEADER(sys/time.h, AC_DEFINE(TIME_WITH_SYS_TIME,1,sys/time.h))
d115 1
d129 1
a129 1
    AC_DEFINE(NO_UNION_WAIT,, Lacking a "union wait")
d133 5
d139 2
d142 1
d144 2
d147 10
a156 1
X_CFLAGS="-I/usr/X11R6/include"
d158 1
a158 1
dnl TODO
a161 3
AC_CHECK_DECL(sys_errlist, AC_DEFINE(HAVE_SYS_ERRLIST_DECL,1,sys_errlist[]), AC_DEFINE(HAVE_SYS_ERRLIST_DECL,0,don't have sys_errlist[]),[# include <stdio.h>])
AC_CHECK_DECL(re_comp, AC_DEFINE(HAVE_REGEX_DECL,, BSD regular expressions))

d163 6
a168 7
AC_CHECK_FUNC(fstatfs, , [AC_DEFINE(NO_FSTATFS,, Lacking fstatfs)])
AC_CHECK_FUNC(getopt, AC_DEFINE(HAVE_GETOPT_DECL,1,getopt))
AC_CHECK_FUNC(popen, AC_DEFINE(HAVE_POPEN_DECL,1,popen))
AC_CHECK_FUNC(strdup, AC_DEFINE(HAVE_STRDUP_DECL,1,strdup))
AC_CHECK_FUNCS(dlopen, DL="" ,[AC_CHECK_LIB(dl, dlopen, DL="-ldl", AC_CHECK_LIB(dld, dlopen, DL="-ldld", AC_ERROR(No dynamic loader found)))])
AC_CHECK_FUNCS(drand gethostname vprintf sbrk vfork dlopen bzero strdup strchr getopt writev regex strdup)
AC_CHECK_FUNCS(socket, SOCKET="" ,[AC_CHECK_LIB(socket, socket, SOCKET="-lsocket", AC_ERROR(No internet socket found))])
a182 1
dnl === these are things that are defined, but don't seem to be necessary on the 4 supported platforms? ===
a221 1

a223 1
AC_SUBST(CURSES)
a224 1
AC_SUBST(DL)
a227 5
AC_SUBST(GL_CFLAGS)
AC_SUBST(ITCL_LIBS)
AC_SUBST(ITCL_VERSION)
AC_SUBST(ITK_LIBS)
AC_SUBST(LEX_CFLAGS)
a230 2
AC_SUBST(PNG_LIBS)
AC_SUBST(PTHREAD_LIBS)
a232 2
AC_SUBST(SGIGL)
AC_SUBST(SOCKET)
a233 5
AC_SUBST(TCL)
AC_SUBST(TCLVER)
AC_SUBST(TCL_BUILD_CFLAGS)
AC_SUBST(TCL_LIBRARY)
AC_SUBST(TCL_LIBS)
a234 3
AC_SUBST(TKVER)
AC_SUBST(TK_LIBRARY)
AC_SUBST(TK_LIBS)
a235 2
AC_SUBST(X_CFLAGS)
AC_SUBST(X_LIBS)
@


1.1.2.34
log
@use sh vars, not m4 substs
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.33 2004/01/13 16:19:55 erikg Exp $
d54 1
a54 1
TCL_LIBS='${top_builddir}/${TCL}/${TCL}.la ${DL} ${SOCKET} -lm'
@


1.1.2.35
log
@librtserver added to build system
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.34 2004/01/13 18:41:09 erikg Exp $
a272 1
	librtserver/Makefile
@


1.1.2.36
log
@java fu
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.35 2004/02/25 15:23:50 erikg Exp $
a80 4
AC_ARG_WITH(jdk,
        [  --with-jdk=path         Specify location of Java Development Kit],[
        JAVA_CFLAGS="-I$withval/include"
        ])
a185 1
AC_SUBST(JAVA_CFLAGS)
@


1.1.2.37
log
@new style autoconf
added os subdir to java cflags (don't think it'll work on solaris, tho...)
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.36 2004/03/03 15:36:45 erikg Exp $
d3 2
a4 2
AC_INIT
AC_CANONICAL_TARGET([])
d16 1
d35 1
a35 1
AC_SEARCH_LIBS(initscr, ncurses curses,, AC_MSG_ERROR([Need curses!]))
d79 1
a79 9
AC_DIAGNOSE([obsolete],[AC_STRUCT_ST_BLKSIZE:
        your code should no longer depend upon `HAVE_ST_BLKSIZE', but
        `HAVE_STRUCT_STAT_ST_BLKSIZE'.  Remove this warning and
        the `AC_DEFINE' when you adjust the code.])
AC_CHECK_MEMBERS([struct stat.st_blksize],[AC_DEFINE(HAVE_ST_BLKSIZE, 1,
                            [Define to 1 if your `struct stat' has
                             `st_blksize'.  Deprecated, use
                             `HAVE_STRUCT_STAT_ST_BLKSIZE' instead.])])

a80 1
JAVA_CFLAGS=
d83 1
a83 1
        JAVA_CFLAGS="-I$withval/include -I$withval/include/`uname | tr [A-Z] [a-z]`"
d120 1
a120 1
AC_CHECK_FUNCS(dlopen, DL="" ,[AC_CHECK_LIB(dl, dlopen, DL="-ldl", AC_CHECK_LIB(dld, dlopen, DL="-ldld", AC_MSG_ERROR([No dynamic loader found])))])
d122 1
a122 2
AC_CHECK_FUNCS(socket, SOCKET="" ,[AC_CHECK_LIB(socket, socket, SOCKET="-lsocket", AC_MSG_ERROR([No internet socket found]))])
AC_CHECK_FUNCS(re_comp, REGEX_LIB="", [AC_CHEC_LIB(compat, re_comp, REGEX_LIB="-lcompat",)])
d124 1
a124 1
dnl TODO this needs to be fixed to actually test...
d173 1
a173 1
RT='${top_builddir}/librt/librt.la ${BN} ${REGEX_LIB}'
a196 1
AC_SUBST(REGEX_LIB)
d215 1
a215 1
AC_CONFIG_FILES([
a351 1
AC_OUTPUT
@


1.1.2.38
log
@oops, typo
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.37 2004/03/03 19:29:01 erikg Exp $
d131 1
a131 1
AC_CHECK_FUNCS(re_comp, REGEX_LIB="", [AC_CHECK_LIB(compat, re_comp, REGEX_LIB="-lcompat",)])
@


1.1.2.39
log
@impose -fno-strict-aliasing to all, not just librt.
-fno-strict-aliasing is necessary to allow the 'fake unions' to work right,
otherwise strange segfaults occur. (too much time chasing this... issue. :( )
@
text
@d1 1
a1 1
dnl $Id: configure.in,v 1.1.2.38 2004/03/03 19:30:18 erikg Exp $
d16 1
a16 1
CFLAGS="$CFLAGS "'-I$(top_srcdir)/h -fno-strict-aliasing'
@


1.1.2.40
log
@shift of libitcl3.2 -> libitcl
@
text
@d1 1
a1 1
dnl $Id$
d272 11
a282 11
	libitcl/Makefile
	libitcl/itcl/Makefile
	libitcl/itcl/doc/Makefile
	libitcl/itcl/generic/Makefile
	libitcl/itcl/library/Makefile
	libitcl/itcl/unix/Makefile
	libitcl/itk/Makefile
	libitcl/itk/doc/Makefile
	libitcl/itk/generic/Makefile
	libitcl/itk/library/Makefile
	libitcl/itk/unix/Makefile
@


1.1.2.41
log
@cope with itcl changes...
@
text
@d68 2
a69 2
ITCL_LIBS='${top_builddir}/libitcl/itcl/libitcl.la'
ITK_LIBS='${top_builddir}/libitcl/itk/libitk.la'
d111 1
a111 1
AC_DEFINE(DM_X,1,[Display for X])
d277 1
d282 1
@


1.1.2.42
log
@handle lack of java semi-intelligently...
@
text
@a88 1
have_java=no
a91 1
        have_java=yes
a92 1
AM_CONDITIONAL(JAVA, test x$have_java = xyes)
a199 1
AC_SUBST(JAVARTSERVER)
@


1.1.2.43
log
@build g files, include db dir and asc files in dist...
@
text
@a238 1
	db/Makefile
d312 1
a316 1
	libtk8.4/library/pkgIndex.tcl
@


