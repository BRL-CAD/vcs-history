head	1.2;
access;
symbols
	rel-5-0:1.1
	rel-5-0beta:1.1;
locks; strict;
comment	@ * @;


1.2
date	99.10.19.20.02.47;	author jra;	state dead;
branches;
next	1.1;

1.1
date	98.06.02.19.51.05;	author jra;	state Exp;
branches;
next	;


desc
@Original
@


1.2
log
@tk 8.2.1 update
@
text
@/* 
 * tkMacProlog.c --
 *
 *	Implements a method on the Macintosh to get the prolog
 *	from the resource fork of our application (or the shared
 *	library).
 *
 * Copyright (c) 1996-1997 Sun Microsystems, Inc.
 *
 * See the file "license.terms" for information on usage and redistribution
 * of this file, and for a DISCLAIMER OF ALL WARRANTIES.
 *
 * SCCS: @@(#) tkMacProlog.c 1.6 97/05/21 10:01:07
 */

#include "tkInt.h"
#include "tclMacInt.h"
#include <Resources.h>

/*
 *--------------------------------------------------------------
 *
 * TkGetNativeProlog --
 *
 *	Locate and load the postscript prolog from the resource
 *	fork of the application.  If it can't be found then we
 *	will try looking for the file in the system folder.
 *
 * Results:
 *	A standard Tcl Result.  If everything is OK the prolog
 *	will be located in the result string of the interpreter.
 *
 * Side effects:
 *	None.
 *
 *--------------------------------------------------------------
 */

int
TkGetNativeProlog(
    Tcl_Interp *interp)		/* Places the prolog in the result. */
{
    Handle resource;
    char *stringPtr;
    int releaseIt;
    

    resource = Tcl_MacFindResource(interp, 'TEXT', "prolog", -1,
        NULL, &releaseIt);
			    
    if (resource != NULL) {
	stringPtr = Tcl_MacConvertTextResource(resource);
	Tcl_SetResult(interp, stringPtr, TCL_DYNAMIC);
        if (releaseIt) {            
            ReleaseResource(resource);
        }
        return TCL_OK;
    } else {
	return TkGetProlog(interp);
    }
}
@


1.1
log
@Initial revision
@
text
@@

