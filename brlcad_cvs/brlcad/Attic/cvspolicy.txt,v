head	11.5;
access;
symbols
	ansi-20040405-merged:11.1.2.1
	postmerge-20040405-ansi:11.4
	premerge-20040404-ansi:11.4
	postmerge-autoconf:11.4
	autoconf-freeze:11.4
	premerge-autoconf:11.4
	ansi-20040316-freeze:11.1
	postmerge-20040315-windows:11.4
	premerge-20040315-windows:11.4
	windows-20040315-freeze:11.1.4.1
	autoconf-20031203:11.4
	autoconf-20031202:11.4
	autoconf-branch:11.4.0.6
	phong-branch:11.4.0.4
	photonmap-branch:11.4.0.2
	rel-6-1-DP:11.4
	windows-branch:11.1.0.4
	ansi-branch:11.1.0.2;
locks; strict;
comment	@# @;


11.5
date	2004.05.18.21.18.32;	author morrison;	state dead;
branches;
next	11.4;

11.4
date	2002.10.04.03.11.41;	author morrison;	state Exp;
branches;
next	11.3;

11.3
date	2002.09.26.20.17.10;	author morrison;	state Exp;
branches;
next	11.2;

11.2
date	2002.09.26.03.30.32;	author morrison;	state Exp;
branches;
next	11.1;

11.1
date	2002.09.17.20.18.35;	author morrison;	state Exp;
branches
	11.1.2.1
	11.1.4.1;
next	;

11.1.2.1
date	2004.03.17.21.15.46;	author morrison;	state Exp;
branches;
next	;

11.1.4.1
date	2004.03.11.23.40.24;	author morrison;	state Exp;
branches;
next	;


desc
@@


11.5
log
@cvs usage file moved to doc/ and renamed to cvs.txt
@
text
@PROPOSAL

        The following is a proposal for a set of guidelines

The BRL-CAD Concurrent Versions System Policy and Guidelines



OVERVIEW

    There are several development guidelines which all developers are
    expected to observe:

    1. All code development is to be done on CVS branches, not the
       trunk.

    2. Branches are not merged into the trunk until the code has been
       well tested.

    3. CVS tags follow a consistant naming convention.

    4. Merges to the trunk must be timed so that they cooperate with
       scheduled releases.


INTRODUCTION

    Since the BRL-CAD developers potentially have specific independant
    development projects, it's imperative that the check-ins which one
    developer commits does not interfere with the work of the others.
    Also, it's very important that the main BRL-CAD trunk be a stable
    code base so that users can download and use it successfully at
    any time.

    For these reasons, most code development should be done on
    branches.  Individual branches may be periodically synced with the
    main trunk over time.  

    We do make exceptions to this rule, however, when making one or
    two-line bug fixes.  It seems overkill to make a branch in order
    to commit a trivial bug fix.

    If you feel you *must* work off of the trunk for simplicity, all
    commits should be extensively tested by hand across all supported
    platforms before being committed to the tree.

    In addition to maintaining a stable tree, branches are also
    useful/used to track patches after a release and to test
    experimental changes.

    Finally, as BRL-CAD release schedules are set, developers will
    need to merge development branches, as appropriate back into the
    main trunk.  Appropriate testing, of course, needs to happen prior
    to commits for those as well.  The rest of this document explains
    in detail how branches and CVS tags are to be managed.



HOW TO CHECK OUT THE MAIN TRUNK


    FROM CAD:

    cvs -d /c/CVS checkout brlcad


    FROM ELSEWHERE:

    export CVS_RSH=ssh 
    cvs -z3 -dusername@@cad.arl.army.mil:/c/CVS checkout brlcad

    (replace "username" with you cad account name, of course)



HOW TO CHECK OUT A BRANCH

    cvs checkout -r <keyword>-<revision>-branch brlcad



TAG NAMING CONVENTIONS

    <keyword>-<revision>-<date>-<comment>

    <keyword> ::= { ansi, jra, sean, ppc, ibm, ... }

        The <keyword> is normally something short and concise.  For
        release tags, it is "rel".  Other branch keywords may indicate
        function, persons, etc.

    <revision> ::= <major>[-<minor>[-<patch>]]  (e.g., 6-0-2 and 5-2)

        The <revision> naming convention is fairly standard and common
        practice:

        <major> is the major revision number and changes very
                infrequently.  Major releases contain significant
                architectural changes and are not necessarily
                backwards compatible with existing code or data.  They
                may require data and/or code to be converted in order
                to upgrade.

                Major releases usually go through an alpha release
                where glaring problems are resolved and features are
                polished.  A lengthy beta period usually follows where
                no new features are added.  Subsequent beta releases
                may be made until the code base is deemed stable.

        <minor> is the minor revision number a usually changes on a
                fairly regular basis.  As new features are added, the
                minor revision number changes to reflect those
                additions.  Minor releases may or may not be preceeded
                by alpha and/or beta releases, depending on the extent
                of changes being made.

        <patch> is the patch revision number and is used to make bug
                fixes on an as-needed basis.  These changes are not
                usually as extensively tested as minor and major
                releases, but they should always be backwards
                compatible.

    <date> := YYYYMMDD (e.g., 20021231)
        
        When creating tags, the date a tag is made is noted.  The
        format of the date is YYYYMMDD and should correspond to tag
        creation dates.  Subsequent tags that are based off of dated
        tags should use the original date.

    <comment>
        
        For branches the comment is "branch", for patches the comment
        is "patches".  For releases, it is left blank.  For other
        miscellaneous tags, the comment is up to the person tagging.


    Note that hyphens (-) are used, not underscores.  Periods (.) are
    never used because they upset CVS's branch naming.  The revision
    should match the most relevant release tag that the branch is
    based off of. 



BRANCH TAG NAMING SCHEME

    Branches are symbolic tags that are used to anchor a branch as a
    specific tree revision.  We'll use the following format for branch
    tags:

    <keyword>-<revision>-branch


NON-BRANCH TAG NAMING SCHEME

    We use non-branch tags for three things:
        1) marking a release
        2) merging branches
        3) miscellaneous tags (e.g., to remember a specific stopping point)


    FORMAT FOR MAKING A RELEASE:

        rel-<revision>-<date>

        <revision> ::= major-minor[-<patch>]  (e.g., 6-0 and 6-0-2a)

        <date> ::= <year><month><day>   (e.g., 19991206)


    FORMAT FOR MAKING A PATCH RELEASE:

        rel-<revision>-<date>-patches


    FORMAT FOR MERGES:

        On the branch, BEFORE THE MERGE, use the following tag:

            <keyword>-<revision>-<date>

        On the main trunk, AFTER THE MERGE, use the following tag:

            <keyword>-<revision>-<date>-merge


    FORMAT FOR MISCELLANEOUS TAGS:
    
        <keyword>-<revision>-<date>-<comment>



HOW TO TAG A RELEASE

    0) Merge in any branches and hanging updates that need to be committed to
       the base trunk on a HEAD revision checkout.

    1) Test the release on multiple architectures.  Run the benchmarks
       for speed and consistency comparisons.  Run the regression
       suite.  Manually test, fix, and retest, by hand as necessary.

    2) Tag the release:

        cvs tag rel-<revision>-<date>
    


HOW TO PATCH A RELEASE

    0) Create a patch branch off of the release tag to work with:

            cvs rtag -b -r rel-<revision>-<date> rel-<revision>-<date>-patches brlcad
            cvs checkout -b rel-<revision>-<date>-patches brlcad

    1) Make source modifications and patches as needed.  Test, fix,
       and retest as needed.

    2) Commit changes to the patch branch:

        cvs update -dP
        cvs commit

    3) Commit changes to the main trunk manually. Patch branches are
       never merged back into the main trunk as it is not desireable
       to merge the main trunk into the patch branch first.

       If the patch branch contains any undesireable code (e.g., temp
       bug fixes) or any code not appropriate for the main trunk, the
       desired code must be added to a main branch checkout by hand.

       Otherwise, the patch branch, in its entirety, may be merged
       back into the main trunk via:
       
        cvs update -A
        [ test extensively ]
        cvs commit
        cvs tag rel-<revision>-<date>-patches-merge



HOW TO MAKE A BRANCH

    CASE 1: You have no checked out trees.

        If you want to use the main trunk as the anchor for your branch:

            cvs rtag -b <keyword>-<revision>-branch brlcad
            cvs checkout -b <keyword>-<revision>-branch brlcad

        If you want to use some other tag as the anchor for your branch:

            cvs rtag -b -r <tag> <keyword>-<revision>-branch brlcad
            cvs checkout -b <keyword>-<revision>-branch brlcad

    CASE 2: You have a checked out revision, and you want to tag it and start
    using it as a branch:

        cd <root-of-your-checked-out-tree>
        cvs tag -b <keyword>-<revision>-branch
        cvs update -r <keyword>-<revision>-branch

    This makes the <keyword>-<revision>-branch tag sticky.  You can verify
    this by using 'cvs status', for example, do this:

        cvs status Makefile

    or

        cvs status -v Makefile



HOW TO MERGE THE TRUNK INTO YOUR BRANCH

    Before you merge your code into the trunk you should first merge
    the latest trunk code into your branch.  After merged code has been
    tested on your branch, merging into the trunk should be simple.

    0) Be sure all the changes on your branch are checked in.

    1) Tag your branch with a 'freeze' tag:

        cvs tag <keyword>-<revision>-<date>-freeze

    2) Merge from the trunk:

        cvs update -d -j HEAD

    3) Resolve any conflicts from the merge.

    4) Recompile and build your branch.  Test it.

    5) Check in your changes from the merge.

    6) Tag your branch with a pre head-merge tag:

        cvs tag <keyword>-<revision>-<date>-merge
    


HOW TO MERGE YOUR BRANCH TO THE MAIN TRUNK

    0) Be sure your <keyword>-<revision>-<date>-merge tag (on the branch) is up
       to date (i.e., in case you changed some files from between the time you
       merged the trunk onto the branch until you merged the branch onto the
       trunk).

       You can make the tag with:

        cvs tag <keyword>-<revision>-<date>

    1) Revert your working tree to the main trunk:

        cvs update -A

       [Alternatively, you can just check out a new copy of the main
       trunk.]

    2) Merge in the changes from your branch:

        cvs update -j <keyword>-<revision>-branch

    3) Test your merged tree

    4) Check in your merged tree to the main branch;

        cvs commit -m 'Merged <keyword>-<revision>'

    5) Tag your merge so we can find it again:

        cvs tag <keyword>-<revision>-<date>-merge


    Say you keep hacking on your branch after the merge to test a few extra 
    things and you want to merge again.  You get the main trunk checked
    out, as in step (1), then you merge only those changes between your
    last merge and the most recent revision in your branch:

        cvs update -j <keyword>-<revision>-<date>
                   -j <keyword>-<revision>-branch

    If the branch being checked in an extensive set of changes,
    testing (step 3) is essential.  It is also a good idea to warn
    other developers of what you are planning to do.  You should
    indicate what parts of the system will be affected and coordinate
    in detail with other developers as appropriate.
    


USEFUL ADVICE

    0) To avoid having to specify the repository in each command, and
       to quell CVS warnings, you can set your CVSROOT environment
       variable to the location of the repository:

       FROM CAD:

          export CVSROOT=/c/CVS

       FROM ELSEWHERE:

          export CVSROOT=username@@cad.arl.army.mil:/c/CVS

    1) It is useful to have a ~/.cvsrc file with the following:

        $ cat ~/.cvsrc
        update -d -P
        checktout -P

       The -P switch tells CVS to prune empty directories.  The -d
       switch tells CVS to add new directories that may have been
       created in the repository since the last update.

    2) Frequent updates are a good thing.  Perform them often to
       minimize conflicts.

    3) Once a branch is merged back into the trunk, it is usually a
       good idea to consider the branch dead.  Create a new branch off
       of the merge tag to start again.



REFERENCES

    This CVS policy was derived off of other projects such as the
    Linux Documentation Project, the XFree86 DRI project, Zope, FreeBSD, 
    and AT&T's SML/NJ among others.


CVS Best Practices
http://www.magic-cauldron.com/cm/cvs-bestpractices/index.html

XFree86 DRI
http://dri.sourceforge.net/doc/cvspolicy.txt

Zope 
http://dev.zope.org/CVS/ZopeReleasePolicy

FreeBSD
http://www.linuxsecurity.com/articles/vendors_products_article-3004.html

AT&T SML/NJ
http://cm.bell-labs.com/cm/cs/what/smlnj/DEV/policy.html




@


11.4
log
@Updated whitespace formatting and tag name convention
@
text
@@


11.3
log
@updated recommended patches tag to use "patches" instead of patch to match historic use
@
text
@d3 1
a3 1
		The following is a proposal for a set of guidelines
d43 7
a49 7
	If you feel you *must* work off of the trunk for simplicity, all
	commits should be extensively tested by hand across all supported
	platforms before being committed to the tree.

	In addition to maintaining a stable tree, branches are also
	useful/used to track patches after a release and to test
	experimental changes.
d88 3
a90 3
	    The <keyword> is normally something short and concise.  For
	    release tags, it is "rel".  Other branch keywords may indicate
	    function, persons, etc.
d94 2
a95 2
		The <revision> naming convention is fairly standard and common
	    practice:
d97 38
a134 38
		<major> is the major revision number and changes very
				infrequently.  Major releases contain significant
				architectural changes and are not necessarily
				backwards compatible with existing code or data.  They
				may require data and/or code to be converted in order
				to upgrade.

				Major releases usually go through an alpha release
				where glaring problems are resolved and features are
				polished.  A lengthy beta period usually follows where
				no new features are added.  Subsequent beta releases
				may be made until the code base is deemed stable.

		<minor> is the minor revision number a usually changes on a
				fairly regular basis.  As new features are added, the
				minor revision number changes to reflect those
				additions.  Minor releases may or may not be preceeded
				by alpha and/or beta releases, depending on the extent
				of changes being made.

		<patch> is the patch revision number and is used to make bug
				fixes on an as-needed basis.  These changes are not
				usually as extensively tested as minor and major
				releases, but they should always be backwards
				compatible.

	<date> := YYYYMMDD (e.g., 20021231)
		
		When creating tags, the date a tag is made is noted.  The
		format of the date is YYYYMMDD and should correspond to tag
		creation dates.  Subsequent tags that are based off of dated
		tags should use the original date.

	<comment>
		
		For branches the comment is "branch", for patches the comment
		is "patches".  For releases, it is left blank.  For other
		miscellaneous tags, the comment is up to the person tagging.
d139 2
a140 2
    should match the match the most relevant release tag that the
    branch is based off of. 
d194 2
a195 1
	0) Merge in any branches and hanging updates that need to be committed.
d197 1
a197 1
	1) Test the release on multiple architectures.  Run the benchmarks
d201 1
a201 1
	2) Tag the release:
d203 2
a204 2
		cvs tag rel-<revision>-<date>
	
d209 1
a209 1
	0) Create a patch branch off of the release tag to work with:
d214 1
a214 1
	1) Make source modifications and patches as needed.  Test, fix,
d217 1
a217 1
	2) Commit changes to the patch branch:
d219 2
a220 2
	    cvs update -dP
	    cvs commit
d222 15
a236 14
	3) Commit changes to the main trunk manually. Patch branches are
       never merged back into the main trunk as it is not possible or
       desireable to merge the trunk into the patch branch first.

	   If the patch branch contains undesireable code (e.g., temp bug
	   fixes) or code not appropriate for the main trunk, it must be
	   merged by hand.

	   Otherwise, the patch branch may be merged back into the main
	   trunk via:
	   
	    cvs update -A
		[ test extensively ]
		cvs commit
a260 1

d294 1
a294 1
    6) Tag your branch with a merge tag:
d296 1
a296 1
        cvs tag <keyword>-<revision>-<date>
d341 6
a346 6
	If the branch being checked in an extensive set of changes,
	testing (step 3) is essential.  It is also a good idea to warn
	other developers of what you are planning to do.  You should
	indicate what parts of the system will be affected and coordinate
	in detail with other developers as appropriate.
	
d351 3
a353 3
    0) To avoid having to specify the repository in each command, you
       can set your CVSROOT environment variable to the location of
       the repository:
d355 1
a355 1
	   FROM CAD:
d357 1
a357 1
	      export CVSROOT=/c/CVS
d359 1
a359 1
	   FROM ELSEWHERE:
d361 1
a361 1
	      export CVSROOT=username@@cad.arl.army.mil:/c/CVS
d365 1
a365 1
	    $ cat ~/.cvsrc
d369 3
a371 3
	   The -P switch tells CVS to prune empty directories.  The -d
	   switch tells CVS to add new directories that may have been
	   created in the repository since the last update.
d373 1
a373 1
	2) Frequent updates are a good thing.  Perform them often to
d376 1
a376 1
	3) Once a branch is merged back into the trunk, it is usually a
@


11.2
log
@updated references and clarified some points on branching
@
text
@d133 1
a133 1
		is "patch".  For releases, it is left blank.  For other
d172 1
a172 1
        rel-<revision>-<date>-patch
d210 2
a211 2
            cvs rtag -b -r rel-<revision>-<date> rel-<revision>-<date>-patch brlcad
            cvs checkout -b rel-<revision>-<date>-patch brlcad
@


11.1
log
@Initial written policy and guidelines for using BRL-CAD with CVS consistently
@
text
@d210 2
a211 2
	    cvs rtag -b -r rel-<revision>-<date> rel-<revision>-<date>-patch
		cvs checkout -b rel-<revision>-<date>-patch
d244 2
a245 2
            cvs rtag -b <keyword>-<revision>-branch
            cvs checkout -b <keyword>-<revision>-branch
d249 2
a250 2
            cvs rtag -b -r <tag> <keyword>-<revision>-branch
            cvs checkout -b <keyword>-<revision>-branch
d384 6
a389 2
    XFree86 DRI project, Zope, FreeBSD, and AT&T's SML/NJ among
    others.    
d400 1
a400 1
AT&T
@


11.1.2.1
log
@sync branch with HEAD
@
text
@d3 1
a3 1
        The following is a proposal for a set of guidelines
d43 7
a49 7
    If you feel you *must* work off of the trunk for simplicity, all
    commits should be extensively tested by hand across all supported
    platforms before being committed to the tree.

    In addition to maintaining a stable tree, branches are also
    useful/used to track patches after a release and to test
    experimental changes.
d88 3
a90 3
        The <keyword> is normally something short and concise.  For
        release tags, it is "rel".  Other branch keywords may indicate
        function, persons, etc.
d94 2
a95 2
        The <revision> naming convention is fairly standard and common
        practice:
d97 38
a134 38
        <major> is the major revision number and changes very
                infrequently.  Major releases contain significant
                architectural changes and are not necessarily
                backwards compatible with existing code or data.  They
                may require data and/or code to be converted in order
                to upgrade.

                Major releases usually go through an alpha release
                where glaring problems are resolved and features are
                polished.  A lengthy beta period usually follows where
                no new features are added.  Subsequent beta releases
                may be made until the code base is deemed stable.

        <minor> is the minor revision number a usually changes on a
                fairly regular basis.  As new features are added, the
                minor revision number changes to reflect those
                additions.  Minor releases may or may not be preceeded
                by alpha and/or beta releases, depending on the extent
                of changes being made.

        <patch> is the patch revision number and is used to make bug
                fixes on an as-needed basis.  These changes are not
                usually as extensively tested as minor and major
                releases, but they should always be backwards
                compatible.

    <date> := YYYYMMDD (e.g., 20021231)
        
        When creating tags, the date a tag is made is noted.  The
        format of the date is YYYYMMDD and should correspond to tag
        creation dates.  Subsequent tags that are based off of dated
        tags should use the original date.

    <comment>
        
        For branches the comment is "branch", for patches the comment
        is "patches".  For releases, it is left blank.  For other
        miscellaneous tags, the comment is up to the person tagging.
d139 2
a140 2
    should match the most relevant release tag that the branch is
    based off of. 
d172 1
a172 1
        rel-<revision>-<date>-patches
d194 1
a194 2
    0) Merge in any branches and hanging updates that need to be committed to
       the base trunk on a HEAD revision checkout.
d196 1
a196 1
    1) Test the release on multiple architectures.  Run the benchmarks
d200 1
a200 1
    2) Tag the release:
d202 2
a203 2
        cvs tag rel-<revision>-<date>
    
d208 1
a208 1
    0) Create a patch branch off of the release tag to work with:
d210 2
a211 2
            cvs rtag -b -r rel-<revision>-<date> rel-<revision>-<date>-patches brlcad
            cvs checkout -b rel-<revision>-<date>-patches brlcad
d213 1
a213 1
    1) Make source modifications and patches as needed.  Test, fix,
d216 1
a216 1
    2) Commit changes to the patch branch:
d218 2
a219 2
        cvs update -dP
        cvs commit
d221 14
a234 15
    3) Commit changes to the main trunk manually. Patch branches are
       never merged back into the main trunk as it is not desireable
       to merge the main trunk into the patch branch first.

       If the patch branch contains any undesireable code (e.g., temp
       bug fixes) or any code not appropriate for the main trunk, the
       desired code must be added to a main branch checkout by hand.

       Otherwise, the patch branch, in its entirety, may be merged
       back into the main trunk via:
       
        cvs update -A
        [ test extensively ]
        cvs commit
        cvs tag rel-<revision>-<date>-patches-merge
d244 2
a245 2
            cvs rtag -b <keyword>-<revision>-branch brlcad
            cvs checkout -b <keyword>-<revision>-branch brlcad
d249 2
a250 2
            cvs rtag -b -r <tag> <keyword>-<revision>-branch brlcad
            cvs checkout -b <keyword>-<revision>-branch brlcad
d259 1
d293 1
a293 1
    6) Tag your branch with a pre head-merge tag:
d295 1
a295 1
        cvs tag <keyword>-<revision>-<date>-merge
d340 6
a345 6
    If the branch being checked in an extensive set of changes,
    testing (step 3) is essential.  It is also a good idea to warn
    other developers of what you are planning to do.  You should
    indicate what parts of the system will be affected and coordinate
    in detail with other developers as appropriate.
    
d350 3
a352 3
    0) To avoid having to specify the repository in each command, and
       to quell CVS warnings, you can set your CVSROOT environment
       variable to the location of the repository:
d354 1
a354 1
       FROM CAD:
d356 1
a356 1
          export CVSROOT=/c/CVS
d358 1
a358 1
       FROM ELSEWHERE:
d360 1
a360 1
          export CVSROOT=username@@cad.arl.army.mil:/c/CVS
d364 1
a364 1
        $ cat ~/.cvsrc
d368 3
a370 3
       The -P switch tells CVS to prune empty directories.  The -d
       switch tells CVS to add new directories that may have been
       created in the repository since the last update.
d372 1
a372 1
    2) Frequent updates are a good thing.  Perform them often to
d375 1
a375 1
    3) Once a branch is merged back into the trunk, it is usually a
d384 2
a385 6
    Linux Documentation Project, the XFree86 DRI project, Zope, FreeBSD, 
    and AT&T's SML/NJ among others.


CVS Best Practices
http://www.magic-cauldron.com/cm/cvs-bestpractices/index.html
d396 1
a396 1
AT&T SML/NJ
@


11.1.4.1
log
@sync to HEAD...
@
text
@d3 1
a3 1
        The following is a proposal for a set of guidelines
d43 7
a49 7
    If you feel you *must* work off of the trunk for simplicity, all
    commits should be extensively tested by hand across all supported
    platforms before being committed to the tree.

    In addition to maintaining a stable tree, branches are also
    useful/used to track patches after a release and to test
    experimental changes.
d88 3
a90 3
        The <keyword> is normally something short and concise.  For
        release tags, it is "rel".  Other branch keywords may indicate
        function, persons, etc.
d94 2
a95 2
        The <revision> naming convention is fairly standard and common
        practice:
d97 38
a134 38
        <major> is the major revision number and changes very
                infrequently.  Major releases contain significant
                architectural changes and are not necessarily
                backwards compatible with existing code or data.  They
                may require data and/or code to be converted in order
                to upgrade.

                Major releases usually go through an alpha release
                where glaring problems are resolved and features are
                polished.  A lengthy beta period usually follows where
                no new features are added.  Subsequent beta releases
                may be made until the code base is deemed stable.

        <minor> is the minor revision number a usually changes on a
                fairly regular basis.  As new features are added, the
                minor revision number changes to reflect those
                additions.  Minor releases may or may not be preceeded
                by alpha and/or beta releases, depending on the extent
                of changes being made.

        <patch> is the patch revision number and is used to make bug
                fixes on an as-needed basis.  These changes are not
                usually as extensively tested as minor and major
                releases, but they should always be backwards
                compatible.

    <date> := YYYYMMDD (e.g., 20021231)
        
        When creating tags, the date a tag is made is noted.  The
        format of the date is YYYYMMDD and should correspond to tag
        creation dates.  Subsequent tags that are based off of dated
        tags should use the original date.

    <comment>
        
        For branches the comment is "branch", for patches the comment
        is "patches".  For releases, it is left blank.  For other
        miscellaneous tags, the comment is up to the person tagging.
d139 2
a140 2
    should match the most relevant release tag that the branch is
    based off of. 
d172 1
a172 1
        rel-<revision>-<date>-patches
d194 1
a194 2
    0) Merge in any branches and hanging updates that need to be committed to
       the base trunk on a HEAD revision checkout.
d196 1
a196 1
    1) Test the release on multiple architectures.  Run the benchmarks
d200 1
a200 1
    2) Tag the release:
d202 2
a203 2
        cvs tag rel-<revision>-<date>
    
d208 1
a208 1
    0) Create a patch branch off of the release tag to work with:
d210 2
a211 2
            cvs rtag -b -r rel-<revision>-<date> rel-<revision>-<date>-patches brlcad
            cvs checkout -b rel-<revision>-<date>-patches brlcad
d213 1
a213 1
    1) Make source modifications and patches as needed.  Test, fix,
d216 1
a216 1
    2) Commit changes to the patch branch:
d218 2
a219 2
        cvs update -dP
        cvs commit
d221 14
a234 15
    3) Commit changes to the main trunk manually. Patch branches are
       never merged back into the main trunk as it is not desireable
       to merge the main trunk into the patch branch first.

       If the patch branch contains any undesireable code (e.g., temp
       bug fixes) or any code not appropriate for the main trunk, the
       desired code must be added to a main branch checkout by hand.

       Otherwise, the patch branch, in its entirety, may be merged
       back into the main trunk via:
       
        cvs update -A
        [ test extensively ]
        cvs commit
        cvs tag rel-<revision>-<date>-patches-merge
d244 2
a245 2
            cvs rtag -b <keyword>-<revision>-branch brlcad
            cvs checkout -b <keyword>-<revision>-branch brlcad
d249 2
a250 2
            cvs rtag -b -r <tag> <keyword>-<revision>-branch brlcad
            cvs checkout -b <keyword>-<revision>-branch brlcad
d259 1
d293 1
a293 1
    6) Tag your branch with a pre head-merge tag:
d295 1
a295 1
        cvs tag <keyword>-<revision>-<date>-merge
d340 6
a345 6
    If the branch being checked in an extensive set of changes,
    testing (step 3) is essential.  It is also a good idea to warn
    other developers of what you are planning to do.  You should
    indicate what parts of the system will be affected and coordinate
    in detail with other developers as appropriate.
    
d350 3
a352 3
    0) To avoid having to specify the repository in each command, and
       to quell CVS warnings, you can set your CVSROOT environment
       variable to the location of the repository:
d354 1
a354 1
       FROM CAD:
d356 1
a356 1
          export CVSROOT=/c/CVS
d358 1
a358 1
       FROM ELSEWHERE:
d360 1
a360 1
          export CVSROOT=username@@cad.arl.army.mil:/c/CVS
d364 1
a364 1
        $ cat ~/.cvsrc
d368 3
a370 3
       The -P switch tells CVS to prune empty directories.  The -d
       switch tells CVS to add new directories that may have been
       created in the repository since the last update.
d372 1
a372 1
    2) Frequent updates are a good thing.  Perform them often to
d375 1
a375 1
    3) Once a branch is merged back into the trunk, it is usually a
d384 2
a385 6
    Linux Documentation Project, the XFree86 DRI project, Zope, FreeBSD, 
    and AT&T's SML/NJ among others.


CVS Best Practices
http://www.magic-cauldron.com/cm/cvs-bestpractices/index.html
d396 1
a396 1
AT&T SML/NJ
@


