head	11.15;
access;
symbols
	ansi-20040405-merged:11.14
	premerge-autoconf:11.14
	ansi-20040316-freeze:11.14
	postmerge-20040315-windows:11.14
	premerge-20040315-windows:11.14
	windows-20040315-freeze:11.14
	autoconf-20031203:11.14
	autoconf-20031202:11.14
	phong-branch:11.14.0.12
	photonmap-branch:11.14.0.10
	rel-6-1-DP:11.14
	windows-branch:11.14.0.8
	rel-6-0-2:11.14
	ansi-branch:11.14.0.6
	rel-6-0-1-branch:11.14.0.4
	hartley-6-0-post:11.14
	hartley-6-0-pre:11.14
	rel-6-0-1:11.14
	rel-6-0:11.14
	rel-5-4:11.14
	offsite-5-3-pre:11.14
	rel-5-3:11.14
	rel-5-2:11.14
	rel-5-1-branch:11.14.0.2
	rel-5-1:11.14
	rel-5-0:11.13
	rel-5-0-beta:11.13
	rel-4-5:11.7
	ctj-4-5-post:11.7
	ctj-4-5-pre:11.7
	rel-4-4:11.1
	rel-4-0:10.1
	rel-3-5:9.1
	rel-3-0:8.1
	AUTOCONF:11.14.0.14;
locks; strict;
comment	@# @;


11.15
date	2004.03.18.18.15.13;	author erikg;	state dead;
branches;
next	11.14;

11.14
date	99.10.08.20.14.30;	author cjohnson;	state Exp;
branches
	11.14.14.1;
next	11.13;

11.13
date	98.08.23.01.35.56;	author mike;	state Exp;
branches;
next	11.12;

11.12
date	98.08.21.22.25.37;	author mike;	state Exp;
branches;
next	11.11;

11.11
date	98.07.07.14.17.19;	author butler;	state Exp;
branches;
next	11.10;

11.10
date	98.06.15.17.30.27;	author jra;	state Exp;
branches;
next	11.9;

11.9
date	98.04.07.13.30.38;	author jra;	state Exp;
branches;
next	11.8;

11.8
date	98.04.07.12.54.39;	author jra;	state Exp;
branches;
next	11.7;

11.7
date	97.05.20.21.09.04;	author mike;	state Exp;
branches;
next	11.6;

11.6
date	97.05.06.18.35.38;	author mike;	state Exp;
branches;
next	11.5;

11.5
date	97.05.06.17.56.47;	author mike;	state Exp;
branches;
next	11.4;

11.4
date	97.05.06.17.36.58;	author mike;	state Exp;
branches;
next	11.3;

11.3
date	97.01.09.01.44.53;	author mike;	state Exp;
branches;
next	11.2;

11.2
date	97.01.08.02.17.51;	author mike;	state Exp;
branches;
next	11.1;

11.1
date	95.01.04.09.43.51;	author mike;	state Rel4_4;
branches
	11.1.1.1;
next	10.6;

10.6
date	95.01.03.22.39.43;	author mike;	state Exp;
branches;
next	10.5;

10.5
date	95.01.03.22.26.57;	author mike;	state Exp;
branches;
next	10.4;

10.4
date	94.11.24.03.27.36;	author mike;	state Exp;
branches;
next	10.3;

10.3
date	94.11.24.03.20.53;	author mike;	state Exp;
branches;
next	10.2;

10.2
date	94.09.21.05.21.44;	author mike;	state Exp;
branches;
next	10.1;

10.1
date	91.10.12.06.35.06;	author mike;	state Rel4_0;
branches;
next	9.3;

9.3
date	91.07.02.23.40.45;	author mike;	state Exp;
branches;
next	9.2;

9.2
date	89.12.29.21.05.24;	author mike;	state Exp;
branches;
next	9.1;

9.1
date	89.05.19.05.43.40;	author mike;	state Rel3_5;
branches;
next	8.2;

8.2
date	88.10.06.06.35.31;	author mike;	state Rel3_0;
branches;
next	8.1;

8.1
date	88.10.05.00.23.23;	author mike;	state Rel3_0;
branches;
next	1.4;

1.4
date	88.09.23.20.41.31;	author mike;	state Exp;
branches;
next	1.3;

1.3
date	88.09.21.05.45.40;	author mike;	state Exp;
branches;
next	1.2;

1.2
date	88.09.21.05.44.43;	author mike;	state Exp;
branches;
next	1.1;

1.1
date	88.09.21.05.42.21;	author mike;	state Exp;
branches;
next	;

11.1.1.1
date	98.01.29.06.15.07;	author mike;	state Rel4_5;
branches;
next	;

11.14.14.1
date	2004.03.18.18.08.49;	author erikg;	state dead;
branches;
next	;


desc
@Script to dork various files to change BASEDIR & BINDIR
@


11.15
log
@merge of AUTOCONF branch in to HEAD
@
text
@#!/bin/sh
#			N E W B I N D I R . S H
#
#  Script to permanantly modify your copy of the BRL-CAD distribution to
#  place the installed programs in some place other than BRL's usual place.
#
#  Changed from Release 4.0
#  Formerly, this script dumped everything into one place.  Messy.
#  Now, the whole "/usr/brlcad/" tree can be re-vectored anywhere you want,
#  while preserving the tree structure below there.
#
#  Once this script is run, the "master" definition of BASEDIR is
#  kept in "machinetype.sh"
#
#  Changed since Release 4.5:
#  Nearly everything responds to the environment variable BRLCAD_ROOT,
#  and either obtains it in C by calling bu_brlcad_path(),
#  or in scripts via "machinetype.sh -v".
#  Cake has been modified to pluck BRLCAD_ROOT out of it's envinronment
#  and send it through to CPP, so even the Cakefiles can see it.
#
#  $Header: /cvs/brlcad/newbindir.sh,v 11.14 1999/10/08 20:14:30 cjohnson Exp $

eval `grep "^BASEDIR=" sh/machinetype.sh`		# sets BASEDIR

echo "Current BASEDIR is $BASEDIR"
echo

if test x$1 = x
then	echo "Usage: $0 new_BASEDIR"
	exit 1
fi

NEW="$1"

if test ! -d $NEW
then	echo "Ahem, $NEW is not an existing directory.  Aborting."
	exit 1
fi

echo
echo "BASEDIR was $BASEDIR, will be $NEW"
echo

#  Replace one path with another, in all the files that matter.

for i in \
	libbu/brlcad_path.c \
	canon/canonserver.c
do
	if [ -f $i ] ; then

		mv -f $i ${i}.oldbindir
		cp ${i}.oldbindir ${i}
		chmod 775 $i
		ed - $i << EOF
f
g,$BASEDIR,s,,$NEW,gp
w
q
EOF
		chmod 555 $i
	fi

done
@


11.14
log
@fix typo
@
text
@d22 1
a22 1
#  $Header: /c/CVS/brlcad/newbindir.sh,v 11.13 1998/08/23 01:35:56 mike Exp $
@


11.14.14.1
log
@merge from head
@
text
@d22 1
a22 1
#  $Header: /cvs/brlcad/newbindir.sh,v 11.14 1999/10/08 20:14:30 cjohnson Exp $
@


11.13
log
@#  Nearly everything responds to the environment variable BRLCAD_ROOT,
#  and either obtains it in C by calling bu_brlcad_path(),
#  or in scripts via "machinetype.sh -v".
#  Cake has been modified to pluck BRLCAD_ROOT out of it's envinronment
#  and send it through to CPP, so even the Cakefiles can see it.
@
text
@d22 1
a22 1
#  $Header: /c/CVS/brlcad/newbindir.sh,v 11.12 1998/08/21 22:25:37 mike Exp $
d54 1
a54 1
		cp ${i}.oldbindir {$i}
@


11.12
log
@Reduced number of files that need to be modified
@
text
@d15 8
a22 1
#  $Header: /c/CVS/brlcad/newbindir.sh,v 11.11 1998/07/07 14:17:19 butler Exp $
d48 2
a49 6
	sh/machinetype.sh \
	Cakefile.defs \
	libbu/vfont.c \
	fb/cat-fb.c canon/canonserver.c \
	brlman/awf brlman/brlman \
	libtcl/Cakefile libtk/Cakefile
d53 2
@


11.11
log
@Added so that it doesn't complain about missing files
@
text
@d15 1
a15 1
#  $Header: /c/CVS/brlcad/newbindir.sh,v 11.10 1998/06/15 17:30:27 jra Exp $
d43 1
a43 2
	cake/Makefile cakeaux/Makefile \
	remrt/remrt.c libbu/vfont.c \
a44 1
	mged/cmd.c \
@


11.10
log
@Needed to be able to modify more than just the first occurence on each line.
@
text
@d15 1
a15 1
#  $Header: /m/cad/RCS/newbindir.sh,v 11.9 1998/04/07 13:30:38 jra Exp jra $
d50 4
a53 2
	chmod 775 $i
	ed - $i << EOF
d59 3
a61 1
	chmod 555 $i
@


11.9
log
@Removed an extra '/'
@
text
@d15 1
a15 1
#  $Header: /m/cad/RCS/newbindir.sh,v 11.8 1998/04/07 12:54:39 jra Exp jra $
d53 1
a53 1
g,$BASEDIR,s,,$NEW,p
@


11.8
log
@Added libtcl/Cakefile and libtk/Cakefile
@
text
@d15 1
a15 1
#  $Header: /m/cad/RCS/newbindir.sh,v 11.7 1997/05/20 21:09:04 mike Exp jra $
d48 1
a48 1
	libtcl/Cakefile libtk/Cakefile \
@


11.7
log
@sh/machinetype.sh now contains the master setting for BASEDIR
@
text
@d15 1
a15 1
#  $Header: /m/cad/RCS/newbindir.sh,v 11.6 1997/05/06 18:35:38 mike Exp mike $
a45 1
	h/tcl.h libtk/tkInt.h \
d47 2
a48 1
	brlman/awf brlman/brlman
@


11.6
log
@machinetype.sh moved into sh/
@
text
@d13 1
a13 2
#  kept in "setup.sh".
#  XXX It would be smarter to put it in machinetype.sh
d15 1
a15 1
#  $Header: /m/cad/RCS/newbindir.sh,v 11.5 1997/05/06 17:56:47 mike Exp mike $
d17 1
a17 1
eval `grep "^BASEDIR=" setup.sh`		# sets BASEDIR
a40 1
	Cakefile.defs setup.sh gen.sh \
d42 1
@


11.5
log
@cray.sh uses machinetype.sh -b to obtain BASEDIR, doesn't
need to be edited.
@
text
@d16 1
a16 1
#  $Header: /m/cad/RCS/newbindir.sh,v 11.4 1997/05/06 17:36:58 mike Exp mike $
d42 2
a43 1
	Cakefile.defs setup.sh gen.sh machinetype.sh \
@


11.4
log
@cray script moved to sh/ directory
@
text
@d16 1
a16 1
#  $Header: /m/cad/RCS/newbindir.sh,v 11.3 1997/01/09 01:44:53 mike Exp mike $
a42 1
	sh/cray.sh \
@


11.3
log
@Now MGED needs to know too.
@
text
@d16 1
a16 1
#  $Header: /m/cad/RCS/newbindir.sh,v 11.2 1997/01/08 02:17:51 mike Exp mike $
d42 2
a43 1
	Cakefile.defs setup.sh gen.sh cray.sh machinetype.sh \
@


11.2
log
@vfont.c moved into libbu
@
text
@d16 1
a16 1
#  $Header: /m/cad/RCS/newbindir.sh,v 11.1 1995/01/04 09:43:51 mike Rel4_4 mike $
d47 1
@


11.1
log
@Release_4.4
@
text
@d16 1
a16 1
#  $Header: /m/cad/RCS/newbindir.sh,v 10.6 95/01/03 22:39:43 mike Exp $
d44 1
a44 1
	remrt/remrt.c libfont/vfont.c \
@


11.1.1.1
log
@Release_4.5
@
text
@d13 2
a14 1
#  kept in "machinetype.sh"
d16 1
a16 1
#  $Header: /m/cad/RCS/newbindir.sh,v 11.7 1997/05/20 21:09:04 mike Exp $
d18 1
a18 1
eval `grep "^BASEDIR=" machinetype.sh`		# sets BASEDIR
d42 1
a42 2
	machinetype.sh \
	Cakefile.defs \
a46 1
	mged/cmd.c \
@


10.6
log
@Made everything relative to BASEDIR, not BINDIR.
@
text
@d16 1
a16 1
#  $Header: /m/cad/RCS/newbindir.sh,v 10.5 95/01/03 22:26:57 mike Exp Locker: mike $
@


10.5
log
@Added TCL support
@
text
@d12 5
a16 1
#  $Header: /m/cad/RCS/newbindir.sh,v 10.4 94/11/24 03:27:36 mike Exp Locker: mike $
d18 1
a18 2
eval `grep "^BINDIR=" setup.sh`		# sets BINDIR
BASEDIR=`echo $BINDIR | sed -e 's/.bin$//'`
d31 1
a31 1
then	echo "Ahem, $NEW is not an existing directory"
d39 1
a39 1
#  Replace one path with another.
d42 1
a42 1
	Cakefile.defs setup.sh gen.sh cray.sh \
d56 1
@


10.4
log
@Added more places with /usr/brlcad hard coded in.
@
text
@d12 1
a12 1
#  $Header: /m/cad/RCS/newbindir.sh,v 10.3 94/11/24 03:20:53 mike Exp Locker: mike $
d39 1
a39 1
	Cakefile.defs setup.sh cray.sh \
d43 1
@


10.3
log
@added libfont/vfont.c to list.
Reponse to Bug #210.
@
text
@d12 1
a12 1
#  $Header: /m/cad/RCS/newbindir.sh,v 10.2 94/09/21 05:21:44 mike Exp Locker: mike $
d41 2
a42 1
	libfont/vfont.c \
@


10.2
log
@Move whole tree now.
@
text
@d12 1
a12 1
#  $Header: /m/cad/RCS/newbindir.sh,v 10.1 91/10/12 06:35:06 mike Rel4_0 Locker: mike $
d41 1
@


10.1
log
@Release_4.0
@
text
@d7 6
a12 1
#  $Header: /m/cad/RCS/newbindir.sh,v 9.3 91/07/02 23:40:45 mike Exp $
d15 1
a15 3
LIBDIR=`echo $BINDIR | sed -e 's/bin$/lib/'`
ETCDIR=`echo $BINDIR | sed -e 's/bin$/etc/'`
INCLUDE_DIR=/usr/brlcad/include
d17 1
a17 1
echo "Current BINDIR is $BINDIR"
d21 1
a21 1
then	echo "Usage: $0 new_BINDIR"
a31 1
echo "(For non-production installation, all dirs forced to new BINDIR)"
d33 1
a33 4
echo "BINDIR was $BINDIR, will be $NEW"
echo "LIBDIR was $LIBDIR, will be $NEW"
echo "ETCDIR was $ETCDIR, will be $NEW"
echo "MANDIR and INCLUDE_DIR will be $NEW"
d36 1
a36 4
#  The first set of substitutions replace one path with another.
#  This works well on Makefiles and shell scripts.
#  The second set of substitutions modify #define entries
#  (typically in Cakefile.defs) that might be system-specific.
d46 1
a46 7
g,$BINDIR,s,,$NEW,p
g,$LIBDIR,s,,$NEW,p
g,$ETCDIR,s,,$NEW,p
g,$MANDIR,s,,$NEW,p
g,$INCLUDE_DIR,s,,$NEW,p
g,INCLUDE_DIR	.*,s,,INCLUDE_DIR	$NEW,p
g,MANDIR	.*,s,,MANDIR	$NEW,p
@


9.3
log
@added support for manual pages
@
text
@d7 1
a7 1
#  $Header: /m/cad/RCS/newbindir.sh,v 9.2 89/12/29 21:05:24 mike Exp $
@


9.2
log
@Changed include/brlcad to brlcad/include
@
text
@d2 6
a7 1
#  $Header: newbindir.sh,v 9.1 89/05/19 05:43:40 mike Locked $
d37 9
a45 1
for i in Cakefile.defs setup.sh cray.sh cake/Makefile cakeaux/Makefile
d53 1
@


9.1
log
@Release_3.5
@
text
@d2 1
a2 1
#  $Header: newbindir.sh,v 8.2 88/10/06 06:35:31 mike Rel3_0 $
d7 1
a7 1
INCLUDE_DIR=/usr/include/brlcad
@


8.2
log
@Minor nits detected in final testing of 3.0.
real 3.0 version
@
text
@d2 1
a2 1
#  $Header: newbindir.sh,v 8.1 88/10/05 00:23:23 mike Locked $
@


8.1
log
@Release_3.0
@
text
@d2 1
a2 1
#  $Header: newbindir.sh,v 1.4 88/09/23 20:41:31 mike Exp $
d7 1
d29 1
d40 3
@


1.4
log
@chmod 755 for setup.sh, not 664.
@
text
@d2 1
a2 1
#  $Header: newbindir.sh,v 1.3 88/09/21 05:45:40 mike Exp $
@


1.3
log
@RCS id added
@
text
@d2 1
a2 1
#  $Header: cray.sh,v 1.6 88/08/14 01:23:36 mike Exp $
d32 1
a32 1
	chmod 664 $i
@


1.2
log
@Made certain the new BINDIR is an existing directory!
@
text
@d2 1
@


1.1
log
@Initial revision
@
text
@d17 5
@
