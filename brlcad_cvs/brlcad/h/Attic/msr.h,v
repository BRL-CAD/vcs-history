head	11.3;
access;
symbols
	ansi-20040405-merged:11.2
	postmerge-20040405-ansi:11.2
	premerge-20040404-ansi:11.2
	postmerge-autoconf:11.2
	autoconf-freeze:11.2
	premerge-autoconf:11.2
	ansi-20040316-freeze:11.2
	postmerge-20040315-windows:11.2
	premerge-20040315-windows:11.2
	windows-20040315-freeze:11.2
	autoconf-20031203:11.2
	autoconf-20031202:11.2
	autoconf-branch:11.2.0.14
	phong-branch:11.2.0.12
	photonmap-branch:11.2.0.10
	rel-6-1-DP:11.2
	windows-branch:11.2.0.8
	rel-6-0-2:11.2
	ansi-branch:11.2.0.6
	rel-6-0-1-branch:11.2.0.4
	hartley-6-0-post:11.2
	hartley-6-0-pre:11.2
	rel-6-0-1:11.2
	rel-6-0:11.2
	rel-5-4:11.2
	offsite-5-3-pre:11.2
	rel-5-3:11.2
	rel-5-2:11.2
	rel-5-1-branch:11.2.0.2
	rel-5-1:11.2
	rel-5-0:11.2
	rel-5-0-beta:11.2
	rel-4-5:11.2
	ctj-4-5-post:11.2
	ctj-4-5-pre:11.2
	rel-4-4:11.1
	rel-4-0:10.1;
locks; strict;
comment	@ * @;


11.3
date	2004.05.24.04.11.52;	author morrison;	state dead;
branches;
next	11.2;

11.2
date	96.10.02.23.16.10;	author mike;	state Exp;
branches;
next	11.1;

11.1
date	95.01.04.09.48.25;	author mike;	state Rel4_4;
branches;
next	10.2;

10.2
date	94.08.23.18.01.09;	author gdurf;	state Exp;
branches;
next	10.1;

10.1
date	91.10.12.06.35.23;	author mike;	state Rel4_0;
branches;
next	1.6;

1.6
date	91.08.09.23.58.35;	author butler;	state Exp;
branches;
next	1.5;

1.5
date	91.07.26.20.52.30;	author mike;	state Exp;
branches;
next	1.4;

1.4
date	91.07.25.01.38.22;	author butler;	state Exp;
branches;
next	1.3;

1.3
date	91.07.24.23.02.20;	author butler;	state Exp;
branches;
next	1.2;

1.2
date	91.06.22.02.22.23;	author cjohnson;	state Exp;
branches;
next	1.1;

1.1
date	90.04.20.02.05.15;	author cjohnson;	state Exp;
branches;
next	;


desc
@Random number header file.
@


11.3
log
@moved/renamed from top-level h/ to top-level include/
@
text
@/*
 *  MSR.H has been absorbed into BN.H
 *  Compatability macros are provided in "compat4.h"
 *	-Mike
 */
#include "compat4.h"
@


11.2
log
@Moved to bn.h
@
text
@@


11.1
log
@Release_4.4
@
text
@d2 3
a4 25
 *			M S R . H
 *
 * Define data structures and constants for the "MSR" random number package.
 *
 * Also define a set of macros to access the random number tables
 * and to limit the area/volume that a set of random numbers inhabit.
 *
 * Note:  Application must include "machine.h" and "vmath.h" so that
 * #include of raytrace.h will work.  Necessary because of use of
 * rt_malloc() by the library routines.
 *
 * Note: MSRMAXTBL must be an even number.
 *
 *  Author -
 *	Christopher T. Johnson
 *  
 *  Source -
 *	SECAD/VLD Computing Consortium, Bldg 394
 *	The U. S. Army Ballistic Research Laboratory
 *	Aberdeen Proving Ground, Maryland  21005-5066
 *  
 *  Distribution Status -
 *	Public Domain, Distribution Unlimitied.
 *
 *  $Header: /m/cad/h/RCS/msr.h,v 10.2 94/08/23 18:01:09 gdurf Exp $
d6 1
a6 62

#define	MSRMAXTBL	4096	/* Size of random number tables. */
#define MSR_UNIF_MAGIC	12481632
#define MSR_GAUSS_MAGIC 512256128

#define MSR_CK_UNIF(_p) RT_CKMAG(_p, MSR_UNIF_MAGIC, "msr_unif")
#define MSR_CK_GAUSS(_p) RT_CKMAG(_p, MSR_GAUSS_MAGIC, "msr_gauss")

struct msr_unif {
	long	magic;
	long	msr_seed;
	int	msr_double_ptr;
	double	*msr_doubles;
	int	msr_long_ptr;
	long	*msr_longs;
};
/*
 * NOTE!!! The order of msr_gauss and msr_unif MUST match in the
 * first three entries as msr_gauss is passed as a msr_unif in
 * msr_gauss_fill.
 */
struct msr_gauss {
	long	magic;
	long	msr_gauss_seed;
	int	msr_gauss_dbl_ptr;
	double	*msr_gauss_doubles;
	int	msr_gauss_ptr;
	double	*msr_gausses;
};
double msr_unif_double_fill();
double msr_gauss_fill();
struct msr_unif *msr_unif_init();
struct msr_gauss *msr_gauss_init();

#define	MSR_UNIF_LONG(_p)	\
	 (((_p)->msr_long_ptr ) ? \
		(_p)->msr_longs[--(_p)->msr_long_ptr] : \
		msr_unif_long_fill(_p))
#define MSR_UNIF_DOUBLE(_p)	\
	(((_p)->msr_double_ptr) ? \
		(_p)->msr_doubles[--(_p)->msr_double_ptr] : \
		msr_unif_double_fill(_p))

#define MSR_UNIF_CIRCLE(_p,_x,_y,_r) { \
	do { \
		(_x) = 2.0*MSR_UNIF_DOUBLE((_p)); \
		(_y) = 2.0*MSR_UNIF_DOUBLE((_p)); \
		(_r) = (_x)*(_x)+(_y)*(_y); \
	} while ((_r) >= 1.0);  }

#define	MSR_UNIF_SPHERE(_p,_x,_y,_z,_r) { \
	do { \
		(_x) = 2.0*MSR_UNIF_DOUBLE(_p); \
		(_y) = 2.0*MSR_UNIF_DOUBLE(_p); \
		(_z) = 2.0*MSR_UNIF_DOUBLE(_p); \
		(_r) = (_x)*(_x)+(_y)*(_y)+(_z)*(_z);\
	} while ((_r) >= 1.0) }

#define	MSR_GAUSS_DOUBLE(_p)	\
	(((_p)->msr_gauss_ptr) ? \
		(_p)->msr_gausses[--(_p)->msr_gauss_ptr] : \
		msr_gauss_fill(_p))
@


10.2
log
@Removed unnecessary includes of machine.h, vmath.h, and raytrace.h
@
text
@d26 1
a26 1
 *  $Header: /m/cad/h/RCS/msr.h,v 10.1 1991/10/12 06:35:23 mike Rel4_0 gdurf $
@


10.1
log
@Release_4.0
@
text
@d26 1
a26 1
 *  $Header: /n/wolf/m/cad/h/RCS/msr.h,v 1.6 91/08/09 23:58:35 butler Exp $
a27 11

#if !defined(MACHINE_H)
# include "machine.h"
#endif
#if !defined(VMATH_H)
# include "vmath.h"
#endif
#if !defined(RAYTRACE_H)
# include "raytrace.h"	/* needed for RT_CKMAG definition */
#endif

@


1.6
log
@removed offending lone } from MSR_UNIF_LONG() definition

@
text
@d26 1
a26 1
 *  $Header: /n/wolf/m/cad/h/RCS/msr.h,v 1.5 91/07/26 20:52:30 mike Exp $
@


1.5
log
@Added header comment.
Fixed typo in #include checking.
Seems to me that auto-#including should be either all or none.
Since raytrace.h was auto-included, I added machine.h and
vmath.h, for the suckers that just want msr.h
@
text
@d26 1
a26 1
 *  $Header: /m/cad/h/RCS/msr.h,v 1.4 91/07/25 01:38:22 butler Exp $
d76 1
a76 1
		msr_unif_long_fill(_p)) }
@


1.4
log
@finished up work on magic numbers for structs
@
text
@d1 2
a2 1
/*	$Header: /m/cad/h/RCS/msr.h,v 1.3 91/07/24 23:02:20 butler Exp $
d4 2
a5 1
 * Define random number structures and constants.
d9 18
a26 11
 *	$Log:	msr.h,v $
 * Revision 1.3  91/07/24  23:02:20  butler
 * added magic numbers to structs
 * 
 * Revision 1.2  91/06/22  02:22:23  cjohnson
 * Fix some types and otherwise clean up the include file.
 * 
 * Revision 1.1  90/04/20  02:05:15  cjohnson
 * Initial revision
 * 
 * 
d28 8
a35 4
/*
 * NOTE!!! MSRMAXTBL must be an even number!!!
 */
#ifndef RATRACE_H
@


1.3
log
@added magic numbers to structs
@
text
@d1 1
a1 1
/*	$Header: /m/cad/h/RCS/msr.h,v 1.2 91/06/22 02:22:23 cjohnson Exp $
d8 3
d22 5
d31 2
d60 8
a67 6
#define	MSR_UNIF_LONG(_p)	(((_p)->msr_long_ptr ) ? \
	(_p)->msr_longs[--(_p)->msr_long_ptr] : \
	msr_unif_long_fill(_p))
#define MSR_UNIF_DOUBLE(_p)	(((_p)->msr_double_ptr) ? \
	(_p)->msr_doubles[--(_p)->msr_double_ptr] : \
	msr_unif_double_fill(_p))
d84 4
a87 3
#define	MSR_GAUSS_DOUBLE(_p)	(((_p)->msr_gauss_ptr) ? \
	(_p)->msr_gausses[--(_p)->msr_gauss_ptr] : \
	msr_gauss_fill(_p))
@


1.2
log
@Fix some types and otherwise clean up the include file.
@
text
@d1 1
a1 1
/*	$Header: msr.h,v 1.1 90/04/20 02:05:15 cjohnson Locked $
d8 3
d20 2
d23 1
d25 1
d38 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
/*	$Header$
d7 3
a9 1
 *	$Log$
d11 1
d32 2
d37 4
d44 1
a44 1
	msr_unif_fill_long(_p))
d46 1
a46 1
	(_p)->msr_longs[--(_p)->msr_double_ptr] : \
d51 2
a52 2
		(_x) = 2.0*MSR_UNIF_DOUBLE((_p)) - 1.0; \
		(_y) = 2.0*MSR_UNIF_DOUBLE((_p)) - 1.0; \
d58 3
a60 3
		(_x) = 2.0*MSR_UNIF_DOUBLE(_p) - 1.0; \
		(_y) = 2.0*MSR_UNIF_DOUBLE(_p) - 1.0; \
		(_z) = 2.0*MSR_UNIF_DOUBLE(_p) - 1.0; \
d65 2
a66 2
	(_p)->msr_gausses[--(_p)->msr_gauss_ptr)] : \
	msr_gause_fill(_p))
@
