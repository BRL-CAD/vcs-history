head	14.8;
access;
symbols
	rel-7-10-4:14.7
	STABLE:14.7.0.2
	rel-7-10-2:14.7
	rel-7-10-0:14.7
	rel-7-8-4:14.5
	rel-7-8-2:14.5
	rel-7-8-0:14.5
	trimnurbs-branch:14.5.0.2
	help:14.5
	temp_tag:14.5
	bobWinPort-20051223-freeze:14.3
	postmerge-20051223-bobWinPort:14.5
	premerge-20051223-bobWinPort:14.5
	rel-7-6-6:14.5
	rel-7-6-4:14.5
	rel-7-6-2:14.4
	rel-7-6-branch:14.4.0.2
	rel-7-6-0:14.4
	rel-7-4-2:14.3
	rel-7-4-branch:14.3.0.4
	bobWinPort:14.3.0.2
	rel-7-4-0:14.3
	rel-7-2-6:14.3
	rel-7-2-4:14.3;
locks; strict;
comment	@# @;


14.8
date	2007.10.22.04.36.20;	author brlcad;	state Exp;
branches;
next	14.7;

14.7
date	2007.01.27.00.31.38;	author brlcad;	state Exp;
branches;
next	14.6;

14.6
date	2007.01.20.13.40.45;	author brlcad;	state Exp;
branches;
next	14.5;

14.5
date	2005.10.23.04.44.27;	author brlcad;	state Exp;
branches;
next	14.4;

14.4
date	2005.08.22.21.24.07;	author lbutler;	state Exp;
branches
	14.4.2.1;
next	14.3;

14.3
date	2005.05.09.22.42.49;	author lbutler;	state Exp;
branches;
next	14.2;

14.2
date	2005.05.09.22.17.13;	author lbutler;	state Exp;
branches;
next	14.1;

14.1
date	2005.05.09.20.03.20;	author lbutler;	state Exp;
branches;
next	;

14.4.2.1
date	2005.11.13.13.46.10;	author brlcad;	state Exp;
branches;
next	;


desc
@@


14.8
log
@more consistent echo output
@
text
@#!/bin/sh

# This file is designed to be run from nightly.sh
echo $MAJOR $MINOR $PATCH

# start the build
case $MYNAME in
wopr)
    export CONF_FLAGS="" ;
    export MAKE_CMD="make" ;
    export MAKE_OPTS="-j11" ;;
liu)
    export CONF_FLAGS="" ;
    export MAKE_CMD="make" ;
    export MAKE_OPTS="-j2" ;;

amdws2)
    export CONF_FLAGS="" ;
    export MAKE_CMD="make" ;
    export MAKE_OPTS="-j2" ;;

vast)
    export CONF_FLAGS="CC=cc CFLAGS=-64 LDFLAGS=-64 --enable-64bit-build" ;
    export MAKE_CMD="/usr/gnu/bin/make" ;
    export MAKE_OPTS="-j5" ;;
esac


# note thate MYNAME and START_TIME are set in the nightly.sh script for us
export BUILD_DIR=`pwd`/${MYNAME}_${START_TIME}.dir
rm -f $BUILD_DIR
mkdir $BUILD_DIR
cd $BUILD_DIR

VERSION=`../brlcad/configure -V | awk '/BRL/ {print $NF}' | sed 's/\./-/g'`

echo "$MYNAME $ARCHITECTURE starting configure" >> $LOG_FILE
../brlcad/configure $CONF_FLAGS --prefix=/usr/brlcad/rel-${VERSION} >> $LOG_FILE 2>&1
$MAKE_CMD $MAKE_OPTS > build.log 2>&1
make install >& install.log 2>&1
cd regress
make test > test.log 2>&1
@


14.7
log
@ws, test two
@
text
@d37 1
a37 1
/bin/echo $MYNAME $ARCHITECTURE starting configure >> $LOG_FILE
@


14.6
log
@trailing newline
@
text
@a28 1

@


14.5
log
@trailing ws
@
text
@d43 1
a43 1
make test > test.log 2>&1@


14.4
log
@Trying to get nightly smoke to run again
@
text
@d7 1
a7 1
case $MYNAME in 
@


14.4.2.1
log
@merge changes from HEAD aka rel-7-6-4 to the rel-7-6-branch just in case someone peeks a gander or tries to continue/build the branch
@
text
@d7 1
a7 1
case $MYNAME in
@


14.3
log
@now we track the release number and do the regression test
@
text
@d4 1
a4 1

a8 1
    export ARCHITECTURE=ia64 ;
a12 1
    export ARCHITECTURE=ia32 ;
a17 1
    export ARCHITECTURE=x86_64 ;
a22 1
    export ARCHITECTURE=mips64 ;
d30 1
d32 1
a32 1
rm -f $MYNAME $BUILD_DIR
d39 1
a39 1
../brlcad/configure $CONF_FLAGS --prefix=/usr/brlcad/rel-${VERSION}/$ARCHITECTURE >> $LOG_FILE 2>&1
@


14.2
log
@Changes to automatically track the release number recorded in configure.ac
@
text
@d43 1
a43 1
$MAKE_CMD > build.log 2>&1
d45 2
@


14.1
log
@Updates for running regression test from remote directory when build tree
and source tree are different.

Added nightly.sh and main.sh which are the foundation for the nightly runs.
More to come in these two.
@
text
@d39 2
d42 1
a42 1
../brlcad/configure $CONF_FLAGS --prefix=/usr/brlcad/rel-7.2.2/$ARCHITECTURE >> $LOG_FILE 2>&1
@

