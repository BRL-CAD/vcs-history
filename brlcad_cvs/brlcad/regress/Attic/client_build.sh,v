head	1.12;
access;
symbols
	ansi-20040405-merged:1.11
	postmerge-20040405-ansi:1.11
	premerge-20040404-ansi:1.11
	postmerge-autoconf:1.11
	autoconf-freeze:1.11
	premerge-autoconf:1.11
	postmerge-20040315-windows:1.11
	premerge-20040315-windows:1.11
	windows-20040315-freeze:1.11
	autoconf-20031203:1.11
	autoconf-20031202:1.11
	autoconf-branch:1.11.0.12
	phong-branch:1.11.0.10
	photonmap-branch:1.11.0.8
	rel-6-1-DP:1.11
	windows-branch:1.11.0.6
	rel-6-0-2:1.11
	ansi-branch:1.11.0.4
	rel-6-0-1-branch:1.11.0.2
	hartley-6-0-post:1.11
	hartley-6-0-pre:1.11
	rel-6-0-1:1.11
	rel-6-0:1.11;
locks; strict;
comment	@# @;


1.12
date	2004.05.19.19.18.25;	author morrison;	state dead;
branches;
next	1.11;

1.11
date	2001.09.25.00.31.06;	author morrison;	state Exp;
branches;
next	1.10;

1.10
date	2001.09.24.23.43.03;	author morrison;	state Exp;
branches;
next	1.9;

1.9
date	2001.09.19.08.37.45;	author morrison;	state Exp;
branches;
next	1.8;

1.8
date	2001.08.28.21.43.42;	author morrison;	state Exp;
branches;
next	1.7;

1.7
date	2001.08.28.21.21.34;	author morrison;	state Exp;
branches;
next	1.6;

1.6
date	2001.08.06.15.57.19;	author morrison;	state Exp;
branches;
next	1.5;

1.5
date	2001.07.31.17.01.32;	author morrison;	state Exp;
branches;
next	1.4;

1.4
date	2001.07.23.19.43.39;	author morrison;	state Exp;
branches;
next	1.3;

1.3
date	2001.06.29.18.21.19;	author butler;	state Exp;
branches;
next	1.2;

1.2
date	2001.06.29.18.15.43;	author butler;	state Exp;
branches;
next	1.1;

1.1
date	2001.06.29.17.43.23;	author butler;	state Exp;
branches;
next	;


desc
@@


1.12
log
@The old regression test scripts are being replaced by something else.  Likely it'll be Corredor with some unit test framework.  The old scripts are so far out of sync and so inadequate that it's simply not worth it any more.
@
text
@#!/bin/sh
#
#  This script is intended to be run only by the client_build.sh script.
#  That is where the necessary environment variables are set.

. `dirname $0`/library


args=`getopt b:d:e:qr:u: $*`

if [ $? != 0 ] ; then
	echo "Usage: $0 [-r brlcad_root] [-u user] -d regress_dir "
	exit 2
fi

set -- $args

MAILUSER=lamas
QUIET=0
initializeVariable REGRESS_DIR /tmp/`whoami`

for i in $* ; do
	case "$i" in
		-d)
			echo "-d $2";
			REGRESS_DIR=$2;
			export REGRESS_DIR
			shift 2;;
		-q)
			echo "-q";
			QUIET=1;
			shift;;
		-r)
			echo "-r $2";
			BRLCAD_ROOT=$2;
			shift 2;;
		-u)
			echo "-d $2";
			MAILUSER=$2;
			export MAILUSER
			shift 2;;
		--)
			shift; break;;
	esac
done

initializeVariable ARCH `${REGRESS_DIR}/brlcad/sh/machinetype.sh`
initializeVariable BRLCAD_ROOT $REGRESS_DIR/brlcad.$ARCH
export QUIET
export BRLCAD_ROOT
export ARCH

PATH="$BRLCAD_ROOT/bin:$PATH" ; export PATH

STARTPWD=$PWD

if [ ! -d ${REGRESS_DIR}/.regress.$ARCH ] ; then mkdir ${REGRESS_DIR}/.regress.$ARCH ; fi

if [ -f ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG ] ; then mv ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG.bak ; fi

cd ${REGRESS_DIR}/brlcad

#echo "client_build.sh" >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
#echo "===============" >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
#echo "$0: starting on $HOSTNAME" >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
#echo ""				  >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
#echo "PATH = $PATH"		  >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
#echo "HOME = $HOME"		  >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
#echo ""		  		  >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG


echo ./setup.sh -s		  >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
./setup.sh -s			  >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG 2>&1 << EOF
yes
EOF

echo ./gen.sh -s all		  >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
./gen.sh -s all			  >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG 2>&1

echo "Compilation Complete" >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG

echo ./gen.sh -s install	  >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
./gen.sh -s install		  >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG 2>&1

echo "Installation Complete" >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG

#echo "RUN ${REGRESS_DIR}/brlcad/regress/client_test.sh"

cd $STARTPWD

echo "Testing package"
echo "Running [client_test.sh -d $REGRESS_DIR]"
`dirname $0`/client_test.sh -d $REGRESS_DIR

echo "Done client_build.sh"
@


1.11
log
@case agreement with logged output
@
text
@@


1.10
log
@caps consistency
@
text
@d85 1
a85 1
echo "Installation complete" >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
@


1.9
log
@commented out host specific chatter
@
text
@d80 1
a80 1
echo "Compilation complete" >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
@


1.8
log
@missed the "linking" calls to use the dirname fix
@
text
@d63 7
a69 7
echo "client_build.sh" >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
echo "===============" >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
echo "$0: starting on $HOSTNAME" >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
echo ""				  >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
echo "PATH = $PATH"		  >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
echo "HOME = $HOME"		  >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
echo ""		  		  >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
d80 1
a80 1
echo "$HOSTNAME compilation complete" >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
d85 1
a85 1
echo "$HOSTNAME .regress.${ARCH} installation complete" >> ${REGRESS_DIR}/.regress.${ARCH}/MAKE_LOG
@


1.7
log
@"fixed" the inclusion of the library resource file (that contains all the function definitions) so that the scripts could be called remotely (without needing to be in the same dir as the library file (. ./library))

changed it to:
. `dirname $0`/libaray
@
text
@d92 2
a93 2
echo "Running [./client_test.sh -d $REGRESS_DIR]"
./client_test.sh -d $REGRESS_DIR
@


1.6
log
@added a starting sun reference (fails)
updated the linux and freebsd reference (also fail)
updated scripts for more capabilities
@
text
@d6 1
a6 1
. ./library
@


1.5
log
@updates to client scripts so sun5 will work properly
added status.sh to verify builds and e-mail results of tests available
@
text
@a19 1
BRLCAD_ROOT=/tmp/brlcad
d48 1
a52 1

d91 3
a93 2
echo "Running tests"
./client_test.sh
@


1.4
log
@rebuild of the regression test suite

master.sh now uses a new utility library
client.sh was broken into different stage files with inidividual post-build tests in the tests.d directory
client scripts will be updated again later to conform more robustly with new testing architecture
@
text
@d54 1
a54 1
export PATH=$BRLCAD_ROOT/bin:$PATH
@


1.3
log
@misc
@
text
@d6 3
d18 1
a18 1
MAILUSER=acst
d20 2
a21 1
BRLCAD_ROOT=/usr/brlcad
d48 1
a48 1

d51 2
d54 1
d56 1
d58 1
a58 2
PATH=$PATH:$BRLCAD_ROOT/bin
export PATH
d60 1
a60 2
mkdir $REGRESS_DIR/$ARCH
cd $REGRESS_DIR/brlcad
d62 1
a62 5
echo "$0: starting on `hostname`" >> $REGRESS_DIR/$ARCH/MAKE_LOG
echo ""				  >> $REGRESS_DIR/$ARCH/MAKE_LOG
echo "PATH = $PATH"		  >> $REGRESS_DIR/$ARCH/MAKE_LOG
echo "HOME = $HOME"		  >> $REGRESS_DIR/$ARCH/MAKE_LOG
echo ""		  		  >> $REGRESS_DIR/$ARCH/MAKE_LOG
d64 7
d72 3
a74 2
echo ./setup.sh -s		  >> $REGRESS_DIR/$ARCH/MAKE_LOG
./setup.sh -s			  >> $REGRESS_DIR/$ARCH/MAKE_LOG 2>&1 << EOF
d78 9
a86 2
echo ./gen.sh -s all		  >> $REGRESS_DIR/$ARCH/MAKE_LOG
./gen.sh -s all			  >> $REGRESS_DIR/$ARCH/MAKE_LOG 2>&1
d88 1
a88 1
echo "`hostname` compilation complete" >> $REGRESS_DIR/$ARCH/MAKE_LOG
d90 1
a90 2
echo ./gen.sh -s install	  >> $REGRESS_DIR/$ARCH/MAKE_LOG
./gen.sh -s install		  >> $REGRESS_DIR/$ARCH/MAKE_LOG 2>&1
d92 2
a93 1
echo "`hostname` $ARCH installation complete" >> $REGRESS_DIR/$ARCH/MAKE_LOG
d95 1
a95 1
$REGRESS_DIR/brlcad/regress/client_test.sh
@


1.2
log
@run scripts out of source tree, not directory where regression was started
@
text
@d6 44
@


1.1
log
@More evolution of the regression test
@
text
@d32 3
a34 1
echo "`hostname` installation complete" >> $REGRESS_DIR/$ARCH/MAKE_LOG
@

