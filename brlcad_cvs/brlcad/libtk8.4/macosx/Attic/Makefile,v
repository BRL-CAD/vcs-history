head	1.4;
access;
symbols
	ansi-20040405-merged:1.3.4.1
	postmerge-20040405-ansi:1.3
	premerge-20040404-ansi:1.3
	postmerge-autoconf:1.3
	premerge-autoconf:1.3
	postmerge-20040315-windows:1.3
	premerge-20040315-windows:1.3
	windows-20040315-freeze:1.3.2.1
	phong-branch:1.1.0.4
	photonmap-branch:1.1.0.2
	windows-branch:1.3.0.2
	ansi-branch:1.3.0.4
	AUTOCONF:1.1.0.6;
locks; strict;
comment	@# @;


1.4
date	2004.05.21.18.01.32;	author morrison;	state dead;
branches;
next	1.3;

1.3
date	2004.03.04.19.49.24;	author morrison;	state Exp;
branches
	1.3.2.1
	1.3.4.1;
next	1.2;

1.2
date	2003.11.07.14.58.28;	author morrison;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.13.20.04.41;	author jra;	state Exp;
branches
	1.1.6.1;
next	;

1.1.6.1
date	2003.11.07.16.41.47;	author erikg;	state dead;
branches;
next	1.1.6.2;

1.1.6.2
date	2004.02.12.19.02.48;	author erikg;	state Exp;
branches;
next	1.1.6.3;

1.1.6.3
date	2004.02.25.15.24.41;	author erikg;	state dead;
branches;
next	;

1.3.2.1
date	2004.03.12.10.00.30;	author morrison;	state Exp;
branches;
next	;

1.3.4.1
date	2004.03.17.21.21.09;	author morrison;	state Exp;
branches;
next	;


desc
@@


1.4
log
@moved from top-level to src/other/.
@
text
@################################################################################
#
# Makefile to build AquaTk on Mac OS X packaged as a Framework
#	uses Project Builder command line tool 'pbxbuild'
#
# RCS: @@(#) $Id: Makefile,v 1.3 2004/03/04 19:49:24 morrison Exp $
#
################################################################################

#-------------------------------------------------------------------------------
# customizable settings

DESTDIR			?=
INSTALL_ROOT		?= ${DESTDIR}

BUILD_DIR		?= ${CURDIR}/../../build
SYMROOT			?= ${BUILD_DIR}/${PROJECT}
OBJROOT			?= ${SYMROOT}

EXTRA_MAKE_ARGS		?= 

INSTALL_PATH		?= /Library/Frameworks
APPLICATION_INSTALL_PATH ?= /Applications/Utilities

PREFIX			?= /usr
BINDIR			?= ${PREFIX}/bin

TCL_FRAMEWORK_DIR	?= ${BUILD_DIR}/tcl
TCLSH_DIR		?= ${TCL_FRAMEWORK_DIR}

#-------------------------------------------------------------------------------

PROJECT			= tk
TARGET			= Wish

DEVBUILDSTYLE		= Development
DEPBUILDSTYLE		= Deployment

PBXBUILD		= /usr/bin/pbxbuild
XCODEBUILD		= /usr/bin/xcodebuild

BUILDCMD		= `if [ -f $(XCODEBUILD) ]; then \
				echo "$(XCODEBUILD)"; \
			  	else echo "$(PBXBUILD)"; fi`

MAKE_VARS		:= SYMROOT OBJROOT BINDIR APPLICATION_INSTALL_PATH \
				TCL_FRAMEWORK_DIR TCLSH_DIR
MAKE_ARGS_V		= $(foreach v,${MAKE_VARS},$v=${$v})

BUILD			= ${BUILDCMD} -target "${TARGET}" ${MAKE_ARGS_V} \
				DYLIB_INSTALL_PATH="${INSTALL_PATH}" \
				${EXTRA_MAKE_ARGS} ${MAKEOVERRIDES}

DEVBUILD		= ${BUILD} -buildstyle "${DEVBUILDSTYLE}"
DEPBUILD		= ${BUILD} -buildstyle "${DEPBUILDSTYLE}"

INSTALLOPTS		= INSTALL_ROOT="${INSTALL_ROOT}"

EMBEDDEDOPTS		= EMBEDDED_BUILD=1

################################################################################

all: develop deploy

install: install-develop install-deploy

embedded: embedded-deploy

install-embedded: install-embedded-deploy cleanup-embedded

clean: clean-develop clean-deploy

################################################################################

develop:
	${DEVBUILD}

deploy:
	${DEPBUILD}

install-develop: 
	${DEVBUILD} install ${INSTALLOPTS}

install-deploy:
	${DEPBUILD} install ${INSTALLOPTS}

embedded-develop:
	${DEVBUILD} ${EMBEDDEDOPTS}

embedded-deploy:
	${DEPBUILD} ${EMBEDDEDOPTS}

install-embedded-develop:
	${DEVBUILD} install ${INSTALLOPTS} ${EMBEDDEDOPTS}

install-embedded-deploy:
	${DEPBUILD} install ${INSTALLOPTS} ${EMBEDDEDOPTS}

clean-develop:
	${DEVBUILD} clean

clean-deploy:
	${DEPBUILD} clean

################################################################################

cleanup-embedded:
	@@-cd ${INSTALL_ROOT}/; \
	chmod -RH u+w Library/Frameworks/Tcl.framework; \
	rm -rf Library/Frameworks/Tcl.framework; \
	chmod -RH u+w Library/Frameworks/Tk.framework; \
	rm -rf Library/Frameworks/Tk.framework; \
	rmdir -p Library/Frameworks 2>&-;

################################################################################

.PHONY: all install embedded clean develop deploy install-develop install-deploy \
embedded-develop embedded-deploy install-embedded-develop install-embedded-deploy \
clean-develop clean-deploy cleanup-embedded

################################################################################
@


1.3
log
@Updated to tk 8.4.6
@
text
@d6 1
a6 1
# RCS: @@(#) $Id: Makefile,v 1.7.2.5 2004/01/27 10:10:16 das Exp $
@


1.3.4.1
log
@sync branch with HEAD
@
text
@d6 1
a6 1
# RCS: @@(#) $Id$
@


1.3.2.1
log
@merge from HEAD
@
text
@d6 1
a6 1
# RCS: @@(#) $Id$
@


1.2
log
@updated tk to 8.4.4
@
text
@d3 2
a4 2
# Simple makefile for building on Mac OS X with the
# Project Builder command line tool 'pbxbuild'
d6 1
a6 1
# RCS: @@(#) $Id: Makefile,v 1.7.2.2 2003/07/18 01:06:33 das Exp $
d10 2
a11 1
INSTALL_ROOT	?=
d13 14
a26 2
BUILD_DIR	?= ${CURDIR}/../../build
SYMROOT		?= ${BUILD_DIR}/${PROJECT}
d29 9
a37 1
TCLSH_DIR	?= ${TCL_FRAMEWORK_DIR}
d39 2
a40 2
PROJECT		= tk
TARGET		= Wish
d42 3
a44 2
DEVBUILDSTYLE	= Development
DEPBUILDSTYLE	= Deployment
d46 3
a48 1
PBXBUILD	= /usr/bin/pbxbuild
d50 3
a52 3
BUILD		= ${PBXBUILD} SYMROOT="${SYMROOT}" -target "${TARGET}" \
			TCL_FRAMEWORK_DIR="${TCL_FRAMEWORK_DIR}" \
			TCLSH_DIR="${TCLSH_DIR}"
d54 2
a55 2
DEVBUILD	= ${BUILD} -buildstyle "${DEVBUILDSTYLE}"
DEPBUILD	= ${BUILD} -buildstyle "${DEPBUILDSTYLE}"
d57 1
a57 1
INSTALLOPTS	= INSTALL_ROOT="${INSTALL_ROOT}"
d59 1
a59 1
EMBEDDEDOPTS	= EMBEDDED_BUILD=1
d108 1
a108 1
	@@-cd ${INSTALL_ROOT}; \
@


1.1
log
@*** empty log message ***
@
text
@d6 1
a6 1
# RCS: @@(#) $Id: Makefile,v 1.7 2003/02/19 16:44:16 das Exp $
d13 1
d15 4
d26 3
a28 1
BUILD		= ${PBXBUILD} SYMROOT="${BUILD_DIR}" -target "${TARGET}"
a82 4
forceRelink:
	@@-cd ${BUILD_DIR}; \
	rm -rf Tk.framework Wish\ Shell.app libtkstub8.4.a

d95 1
a95 2
clean-develop clean-deploy forceRelinkTcl \
cleanup-embedded
@


1.1.6.1
log
@generated now
@
text
@d6 1
a6 1
# RCS: @@(#) $Id: Makefile,v 1.1 2003/03/13 20:04:41 jra Exp $
@


1.1.6.2
log
@merge from HEAD
@
text
@d6 1
a6 1
# RCS: @@(#) $Id: Makefile,v 1.2 2003/11/07 14:58:28 morrison Exp $
a12 1
SYMROOT		?= ${BUILD_DIR}/${PROJECT}
a13 4
TCL_FRAMEWORK_DIR	?= ${BUILD_DIR}/tcl
TCLSH_DIR	?= ${TCL_FRAMEWORK_DIR}

PROJECT		= tk
d21 1
a21 3
BUILD		= ${PBXBUILD} SYMROOT="${SYMROOT}" -target "${TARGET}" \
			TCL_FRAMEWORK_DIR="${TCL_FRAMEWORK_DIR}" \
			TCLSH_DIR="${TCLSH_DIR}"
d76 4
d92 2
a93 1
clean-develop clean-deploy cleanup-embedded
@


1.1.6.3
log
@makefiles should be generated
@
text
@d6 1
a6 1
# RCS: @@(#) $Id: Makefile,v 1.1.6.2 2004/02/12 19:02:48 erikg Exp $
@


