head	14.47;
access;
symbols
	rel-7-10-4:14.47
	STABLE:14.47.0.2
	stable-branch:14.14
	rel-7-10-2:14.47
	rel-7-10-0:14.44
	rel-7-8-4:14.28
	rel-7-8-2:14.25
	rel-7-8-0:14.25
	trimnurbs-branch:14.24.0.2
	help:14.24
	temp_tag:14.21
	bobWinPort-20051223-freeze:14.15
	postmerge-20051223-bobWinPort:14.21
	premerge-20051223-bobWinPort:14.21
	rel-7-6-6:14.21
	rel-7-6-4:14.21
	rel-7-6-2:14.17
	rel-7-6-branch:14.17.0.2
	rel-7-6-0:14.17
	rel-7-4-2:14.15
	rel-7-4-branch:14.15.0.4
	bobWinPort:14.15.0.2
	rel-7-4-0:14.15
	rel-7-2-6:14.14
	rel-7-2-4:14.14
	rel-7-2-2:14.14
	rel-7-2-0:14.14
	rel-7-0-4:14.11
	rel-7-0-2:14.11
	rel-7-0-1:14.11
	opensource-post:14.11;
locks; strict;
comment	@# @;


14.47
date	2007.05.14.21.41.38;	author brlcad;	state Exp;
branches;
next	14.46;

14.46
date	2007.05.14.21.34.08;	author brlcad;	state Exp;
branches;
next	14.45;

14.45
date	2007.05.14.21.32.32;	author brlcad;	state Exp;
branches;
next	14.44;

14.44
date	2007.02.20.03.23.33;	author brlcad;	state Exp;
branches;
next	14.43;

14.43
date	2007.02.08.06.18.35;	author brlcad;	state Exp;
branches;
next	14.42;

14.42
date	2007.02.08.06.14.20;	author brlcad;	state Exp;
branches;
next	14.41;

14.41
date	2007.02.08.05.13.24;	author brlcad;	state Exp;
branches;
next	14.40;

14.40
date	2007.01.31.08.09.00;	author brlcad;	state Exp;
branches;
next	14.39;

14.39
date	2007.01.29.00.06.30;	author brlcad;	state Exp;
branches;
next	14.38;

14.38
date	2007.01.27.09.05.07;	author brlcad;	state Exp;
branches;
next	14.37;

14.37
date	2007.01.27.07.57.13;	author brlcad;	state Exp;
branches;
next	14.36;

14.36
date	2007.01.26.23.32.26;	author brlcad;	state Exp;
branches;
next	14.35;

14.35
date	2007.01.23.01.13.20;	author brlcad;	state Exp;
branches;
next	14.34;

14.34
date	2007.01.21.00.04.19;	author brlcad;	state Exp;
branches;
next	14.33;

14.33
date	2007.01.20.23.50.44;	author brlcad;	state Exp;
branches;
next	14.32;

14.32
date	2007.01.20.14.57.11;	author erikgreenwald;	state Exp;
branches;
next	14.31;

14.31
date	2007.01.20.14.07.16;	author brlcad;	state Exp;
branches;
next	14.30;

14.30
date	2007.01.20.13.57.25;	author brlcad;	state Exp;
branches;
next	14.29;

14.29
date	2007.01.10.08.44.29;	author brlcad;	state Exp;
branches;
next	14.28;

14.28
date	2006.09.28.03.18.30;	author brlcad;	state Exp;
branches;
next	14.27;

14.27
date	2006.09.24.19.53.11;	author brlcad;	state Exp;
branches;
next	14.26;

14.26
date	2006.09.18.09.39.18;	author brlcad;	state Exp;
branches;
next	14.25;

14.25
date	2006.03.10.04.58.07;	author brlcad;	state Exp;
branches;
next	14.24;

14.24
date	2006.02.18.23.37.27;	author brlcad;	state Exp;
branches
	14.24.2.1;
next	14.23;

14.23
date	2006.01.18.06.46.11;	author brlcad;	state Exp;
branches;
next	14.22;

14.22
date	2006.01.04.21.57.12;	author brlcad;	state Exp;
branches;
next	14.21;

14.21
date	2005.11.01.08.58.21;	author brlcad;	state Exp;
branches;
next	14.20;

14.20
date	2005.11.01.08.53.16;	author brlcad;	state Exp;
branches;
next	14.19;

14.19
date	2005.10.23.04.44.27;	author brlcad;	state Exp;
branches;
next	14.18;

14.18
date	2005.10.22.17.34.25;	author brlcad;	state Exp;
branches;
next	14.17;

14.17
date	2005.09.07.06.43.56;	author brlcad;	state Exp;
branches
	14.17.2.1;
next	14.16;

14.16
date	2005.09.06.23.00.47;	author brlcad;	state Exp;
branches;
next	14.15;

14.15
date	2005.06.25.15.32.57;	author brlcad;	state Exp;
branches;
next	14.14;

14.14
date	2005.02.21.18.02.54;	author brlcad;	state Exp;
branches;
next	14.13;

14.13
date	2005.01.30.20.30.12;	author brlcad;	state Exp;
branches;
next	14.12;

14.12
date	2005.01.30.16.17.07;	author brlcad;	state Exp;
branches;
next	14.11;

14.11
date	2004.12.21.05.27.37;	author morrison;	state Exp;
branches;
next	14.10;

14.10
date	2004.12.21.04.53.11;	author morrison;	state Exp;
branches;
next	14.9;

14.9
date	2004.12.21.01.11.51;	author morrison;	state Exp;
branches;
next	14.8;

14.8
date	2004.12.20.20.53.16;	author morrison;	state Exp;
branches;
next	14.7;

14.7
date	2004.12.18.06.37.46;	author morrison;	state Exp;
branches;
next	14.6;

14.6
date	2004.12.18.06.20.00;	author morrison;	state Exp;
branches;
next	14.5;

14.5
date	2004.12.18.02.40.30;	author morrison;	state Exp;
branches;
next	14.4;

14.4
date	2004.12.18.00.47.33;	author morrison;	state Exp;
branches;
next	14.3;

14.3
date	2004.12.18.00.11.14;	author morrison;	state Exp;
branches;
next	14.2;

14.2
date	2004.12.17.22.17.37;	author morrison;	state Exp;
branches;
next	14.1;

14.1
date	2004.12.17.21.02.09;	author morrison;	state Exp;
branches;
next	;

14.17.2.1
date	2005.11.13.13.46.10;	author brlcad;	state Exp;
branches;
next	;

14.24.2.1
date	2006.03.13.18.44.57;	author jlowenz;	state Exp;
branches;
next	;


desc
@@


14.47
log
@stub out where the description goes and add the author block automatically
@
text
@#!/bin/sh
#                       H E A D E R . S H
# BRL-CAD
#
# Copyright (c) 2004-2007 United States Government as represented by
# the U.S. Army Research Laboratory.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
#
# 1. Redistributions of source code must retain the above copyright
# notice, this list of conditions and the following disclaimer.
#
# 2. Redistributions in binary form must reproduce the above
# copyright notice, this list of conditions and the following
# disclaimer in the documentation and/or other materials provided
# with the distribution.
#
# 3. The name of the author may not be used to endorse or promote
# products derived from this software without specific prior written
# permission.
#
# THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS
# OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
# WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
# ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
# DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
# GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
# INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
# WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
# NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
# SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#
###
#
# This script ensures that a legal header has been placed at the top
# of a file.
#
# The script assumes the license and one file as arguments, so example
# uses might be:
#
#   sh/header.sh BSD configure.ac
#
#   find . -type f -name Makefile.am -not -regex '.*src/other.*' -exec sh/header.sh BSD {} \;
#
#   find src/lib* -type f \( -name \*.c -or -name \*.h \) -exec sh/header.sh LGPL {} \;
#
#   find src -type f \( -name \*.c -or -name \*.h \) -not -regex '.*src/lib.*' -exec sh/header.sh BSD {} \;
#
# Author -
#   Christopher Sean Morrison
#
# Source -
#   The U.S. Army Research Laboratory
#   Aberdeen Proving Ground, Maryland 21005-5068  USA
###

LICE="$1"
FILE="$2"
PROJ="$3"
COPY="$4"

# force locale setting to C so things like date output as expected
LC_ALL=C

USAGE="Usage: $0 LICENSE FILE [ProjectName] [CopyrightHolder]"

##################
# validate input #
##################
if [ "x$LICE" = "x" ] ; then
    echo "ERROR: must give a license type (BSD, BDL, LGPL, PD)"
    echo "$USAGE"
    exit 1
fi
case $LICE in
    bsd|BSD)
	LICE=BSD
	;;
    bdl|BDL|doc|docs|documentation)
	LICE=BDL
	;;
    lgpl|LGPL|lesser|library)
	LICE=LGPL
	;;
    pd|PD|pdl|PDL|public|publicdomain)
	LICE=PD
	;;
    *)
	echo "ERROR: Unknown or unsupported license type: $LICE"
	echo "License should be one of BSD, BDL, LGPL, PD (public domain)"
	echo "$USAGE"
	exit 1
	;;
esac

if [ "x$FILE" = "x" ] ; then
    echo "ERROR: must give the name/path of a file to check/update"
    echo "$USAGE"
    exit 1
elif [ ! -f "$FILE" ] ; then
    echo "ERROR: unable to find $FILE"
    exit 1
elif [ ! -r "$FILE" ] ; then
    echo "ERROR: unable to read $FILE"
    exit 2
elif [ ! -w "$FILE" ] ; then
    echo "ERROR: unable to write to $FILE"
    exit 2
fi

if [ "x$PROJ" = "x" ] ; then
    PROJ="BRL-CAD"
else
    echo "Outputting header for [$PROJ]"
fi

if [ "x$COPY" = "x" ] ; then
    echo "Assuming U.S. Government copyright assignment"
fi

if [ "x$5" != "x" ] ; then
    echo "ERROR: LICENSE should be one of BSD, BDL, LGPL, or PD (public domain)"
    echo "No other arguments should follow."
    echo "$USAGE"
    exit 3
fi


########################
# figure out file type #
########################
# wrap is whether or not in needs to be incased in /* */
# commentprefix is the comment character to prefex each line
###
case $FILE in
    *.sh )
	echo "$FILE is a shell script"
	wrap=0
	commentprefix="#"
	;;
    *.c )
	echo "$FILE is a C source file"
	wrap=1
	commentprefix=" *"
	;;
    *.h )
	echo "$FILE is a C header"
	wrap=1
	commentprefix=" *"
	;;
    *.cc | *.cp | *.cxx | *.cpp | *.CPP | *.c++ | *.C )
	echo "$FILE is a C++ source file"
	wrap=1
	commentprefix=" *"
	;;
    *.hh | *.hp | *.hxx | *.hpp | *.HPP | *.h++ | *.H )
	echo "$FILE is a C++ header"
	wrap=1
	commentprefix=" *"
	;;
    *.l )
	echo "$FILE is a Lex/Flex lexer source file"
	wrap=1
	commentprefix=" *"
	;;
    *.y )
	echo "$FILE is a Yacc parser source file"
	wrap=1
	commentprefix=" *"
	;;
    *.m )
	echo "$FILE is an Objective-C source file"
	wrap=1
	commentprefix=" *"
	;;
    *.mm | *.M )
	echo "$FILE is an Objective-C++ source file"
	wrap=1
	commentprefix=" *"
	;;
    *.java )
	echo "$FILE is a Java source file"
	wrap=1
	commentprefix=" *"
	;;
    *.tcl )
	echo "$FILE is a Tcl source file"
	wrap=0
	commentprefix="#"
	;;
    *.tk )
	echo "$FILE is a Tk source file"
	wrap=0
	commentprefix="#"
	;;
    *.itcl )
	echo "$FILE is a IncrTcl source file"
	wrap=0
	commentprefix="#"
	;;
    *.itk )
	echo "$FILE is a IncrTk source file"
	wrap=0
	commentprefix="#"
	;;
    *.pl )
	echo "$FILE is a Perl source file"
	wrap=0
	commentprefix="#"
	;;
    *.py )
	echo "$FILE is a Python source file"
	wrap=0
	commentprefix="#"
	;;
    *.am )
	echo "$FILE is an Automake template file"
	wrap=0
	commentprefix="#"
	;;
    *.in )
	echo "$FILE is an Autoconf template file"
	wrap=0
	commentprefix="#"
	;;
    *.ac )
	echo "$FILE is an Autoconf template file"
	wrap=0
	commentprefix="#"
	;;
    *.m4 )
	echo "$FILE is an m4 macro file"
	wrap=0
	commentprefix="#"
	;;
    *.mk )
	echo "$FILE is a make resource file"
	wrap=0
	commentprefix="#"
	;;
    *.bat )
	echo "$FILE is a batch shell script"
	wrap=0
	commentprefix="REM "
	;;
    *.vim )
	echo "$FILE is a VIM syntax file"
	wrap=0
	commentprefix="\""
	;;
    *.el )
	echo "$FILE is an Emacs Lisp file"
	wrap=0
	commentprefix=";;"
	;;
    *.[0-9] )
	echo "$FILE is a manual page"
	wrap=0
	commentprefix=".\\\""
	;;
    * )
	# check the first line, see if it is a script
	filesig="`head -n 1 $FILE`"
	case $filesig in
	    */bin/sh )
		echo "$FILE is a shell script"
		wrap=0
		commentprefix="#"
		;;
	    */bin/tclsh )
		echo "$FILE is a Tcl script"
		wrap=0
		commentprefix="#"
		;;
	    */bin/wish )
		echo "$FILE is a Tk script"
		wrap=0
		commentprefix="#"
		;;
	    */bin/perl )
		echo "$FILE is a Perl script"
		wrap=0
		commentprefix="#"
		;;
	    */bin/python )
		echo "$FILE is a Python script"
		wrap=0
		commentprefix="#"
		;;
	    * )
		echo "ERROR: $FILE has an unknown filetype"
		exit 4
		;;
	esac
esac


##################################
# figure out the file title line #
##################################
basefilename=`basename $FILE`
if [ "x$basefilename" = "x" ] ; then
    echo "ERROR: basename of $FILE failed"
    exit 5
fi

title="`echo $basefilename | tr [a-z] [A-Z] | sed 's/\(.\)/\1 /g' | sed 's/ $//'`"
length="`echo $title | wc | awk '{print $3}'`"
if [ "x$length" = "x" ] ; then
    echo "ERROR: could not determine title length??"
    exit 6
fi
titlesansext="`echo $title | sed 's/ \..*//'`"

prefixlen="`echo "$commentprefix " | wc | awk '{print $3}'`"
position=0
if [ $length -lt `expr 69 - $prefixlen - 1` ] ; then
    position=`expr \( \( 69 - $prefixlen - 1 - $length \) / 2 \) - 1`
    if [ "x$position" = "x" ] ; then
	echo "ERROR: could not determine title position??"
	exit 7
    fi
fi

if [ "x$wrap" = "x1" ] ; then
    titleline="* "
else
    titleline="$commentprefix "
fi
while [ $position -gt 0 ] ; do
    titleline="${titleline} "
    position="`expr $position - 1`"
done
titleline="${titleline}${title}"


###################################
# figure out the copyright extent #
###################################
copyright=""
currentyear="`date +%Y`"
copyrightline="`grep -i copyright $FILE | grep -v -i notice | grep -v -i '\.SH' | head -n 1`"
if [ "x$copyrightline" = "x" ] ; then
    copyrightline="`grep -i copyright $FILE | grep -v -i united | grep -v -i '\.SH' | head -n 1`"
fi
if [ "x$copyrightline" = "x" ] ; then
    startyear="$currentyear"
else
    startyear="`echo "$copyrightline" | sed 's/.*\([0-9][0-9][0-9][0-9]\)-[0-9][0-9][0-9][0-9].*/\1/'`"
    echo "start is $startyear"
    if [ `echo $startyear | wc | awk '{print $3}'` -gt 10 -o "x$startyear" = "x" ] ; then
	startyear="`echo "$copyrightline" | sed 's/.*[^0-9]\([0-9][0-9][0-9][0-9]\),[0-9][0-9][0-9][0-9],[0-9][0-9][0-9][0-9][^0-9].*/\1/'`"
	echo "start2 is $startyear"
	if [ `echo $startyear | wc | awk '{print $3}'` -gt 10 -o "x$startyear" = "x" ] ; then
	    # didn't find a year, so use current year
	    startyear="`echo "$copyrightline" | sed 's/.*[^0-9]\([0-9][0-9][0-9][0-9]\),[0-9][0-9][0-9][0-9][^0-9].*/\1/'`"
	    echo "start3 is $startyear"
	    if [ `echo $startyear | wc | awk '{print $3}'` -gt 10 -o "x$startyear" = "x" ] ; then
		startyear="`echo "$copyrightline" | sed 's/.*[^0-9]\([0-9][0-9][0-9][0-9]\)[^0-9].*/\1/'`"
		echo "start4 is $startyear"
		if [ `echo $startyear | wc | awk '{print $3}'` -gt 10 -o "x$startyear" = "x" ] ; then
		    startyear="$currentyear"
		fi
	    fi
	fi
    fi
fi

if [ "x$startyear" != "x$currentyear" ] ; then
    copyright="${startyear}-${currentyear}"
else
    copyright="${currentyear}"
fi

echo "using copyright of $copyright"


##############################
# generate the license block #
##############################
block=""
c="$commentprefix"
block="${block}${titleline}
$c ${PROJ}
$c"

if [ "x$COPY" = "x" ] ; then
    if [ "x$LICE" = "xPD" ] ; then
        block="${block}
$c Published in $copyright by the United States Government.
$c This work is in the public domain.
$c"
    else
        block="${block}
$c Copyright (c) $copyright United States Government as represented by
$c the U.S. Army Research Laboratory.
$c"
    fi
else
    if [ "x$LICE" = "xPD" ] ; then
        block="${block}
$c Published in $copyright by $COPY
$c This work is in the public domain.
$c"
    else
        block="${block}
$c Copyright (c) $copyright $COPY
$c"
    fi
fi


case "x$LICE" in
    xBSD)
	block="${block}
$c Redistribution and use in source and binary forms, with or without
$c modification, are permitted provided that the following conditions
$c are met:
$c
$c 1. Redistributions of source code must retain the above copyright
$c notice, this list of conditions and the following disclaimer.
$c
$c 2. Redistributions in binary form must reproduce the above
$c copyright notice, this list of conditions and the following
$c disclaimer in the documentation and/or other materials provided
$c with the distribution.
$c
$c 3. The name of the author may not be used to endorse or promote
$c products derived from this software without specific prior written
$c permission.
$c
$c THIS SOFTWARE IS PROVIDED BY THE AUTHOR \`\`AS IS'' AND ANY EXPRESS
$c OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
$c WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
$c ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
$c DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
$c DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
$c GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
$c INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
$c WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
$c NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
$c SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
"
	;;
    xBDL)
	block="${block}
$c Redistribution and use in source (Docbook format) and 'compiled'
$c forms (PDF, PostScript, HTML, RTF, etc), with or without
$c modification, are permitted provided that the following conditions
$c are met:
$c
$c 1. Redistributions of source code (Docbook format) must retain the
$c above copyright notice, this list of conditions and the following
$c disclaimer.
$c
$c 2. Redistributions in compiled form (transformed to other DTDs,
$c converted to PDF, PostScript, HTML, RTF, and other formats) must
$c reproduce the above copyright notice, this list of conditions and
$c the following disclaimer in the documentation and/or other
$c materials provided with the distribution.
$c
$c 3. The name of the author may not be used to endorse or promote
$c products derived from this documentation without specific prior
$c written permission.
$c
$c THIS DOCUMENTATION IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY
$c EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
$c IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
$c PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
$c ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
$c CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
$c OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
$c BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
$c LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
$c (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
$c USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE POSSIBILITY OF
$c SUCH DAMAGE.
"
	;;
    xLGPL)
	block="${block}
$c This library is free software; you can redistribute it and/or
$c modify it under the terms of the GNU Lesser General Public License
$c version 2.1 as published by the Free Software Foundation.
$c
$c This library is distributed in the hope that it will be useful, but
$c WITHOUT ANY WARRANTY; without even the implied warranty of
$c MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
$c Lesser General Public License for more details.
$c
$c You should have received a copy of the GNU Lesser General Public
$c License along with this file; see the file named COPYING for more
$c information.
"
	;;
    xPD)
	echo "Public domain specified, no license applies."
	;;
    *)
	echo "ERROR: encountered unknown license type $LICE during processing"
	exit 8
	;;
esac

if [ "x$wrap" = "x1" ] ; then
    block="${block}${c}/"
else
    block="${block}${c}
${c}${c}${c}"
fi


###################################
# see if the license block exists #
###################################
foundtitle="`head -n 5 $FILE | grep "$title" | wc | awk '{print $1}'`"
prepend=no
if [ "x$foundtitle" = "x0" ] ; then
    prepend=yes
else
    licline="`echo "$block" | tail -n 7 | head -n 1`"
    foundfileheader="`head -n 50 $FILE | grep "$licline" | wc | awk '{print $1}'`"
    if [ "x$foundfileheader" = "x0" ] ; then
	prepend=yes
	echo "$FILE already has a title"
    fi
fi

if [ "x$prepend" = "xno" ] ; then
    echo "ERROR: $FILE already has a license header"
    exit 9
fi


#######################
# output the new file #
#######################
if [ -f ${FILE}.backup ] ; then
    echo "ERROR: backup file exists... ${FILE}.backup .. remove it"
    exit 10
fi
echo "$FILE ... appending"

mv -f $FILE ${FILE}.backup

closeit=0
skip=1
lineone="`cat ${FILE}.backup | head -n 1`"
linetwo="`cat ${FILE}.backup | head -n 2 | tail -n 1`"
linethree="`cat ${FILE}.backup | head -n 3 | tail -n 1`"
case "x$lineone" in
    "x/*"*${title})
	echo "Found C comment start with file header"
	skip=2
	case "x$linetwo" in
	    "x *")
		echo "Found empty comment line"
		skip=3
		;;
	esac
	;;
    "x/*"*${titlesansext})
	echo "Found C comment start with file header sans extension"
	skip=2
	case "x$linetwo" in
	    "x *")
		echo "Found empty comment line"
		skip=3
		;;
	esac
	;;
    "x/*")
	echo "Found C comment start"
	skip=2
	case "x$linetwo" in
	    "x *"*${title})
		echo "Found old file header"
		skip=3
		;;
	    "x *"*${titlesansext})
		echo "Found old file header sans extension"
		skip=3
		;;
	    "x *")
		echo "Found empty comment line"
		skip=3
		if [ "x$foundtitle" = "x1" ] ; then
		    case "x$linethree" in
			"x *"*${title})
			    echo "Found old file header"
			    skip=4
			    ;;
			"x *"*${titlesansext})
			    echo "Found old file header sans extension"
			    skip=4
			    ;;
		    esac
		fi
		;;
	esac
	;;
    "x.TH"*)
	echo "Found manpage title header line"
	echo "$lineone" >> $FILE
	skip=2
	;;
    "x/*"*)
	echo "WARNING: Found C comment start with stuff trailing"
	skip=0
	closeit=1
	;;
    "x#"*"!"*"/bin/"*)
	echo "Found script exec line"
	echo "$lineone" >> $FILE
	skip=2
	case "x$linetwo" in
	    "x# "*${title})
		echo "Found old file header"
		skip=3
		;;
	    "x# "*${titlesansext})
		echo "Found old file header sans extension"
		skip=3
		;;
	esac
	;;
    "x")
	echo "Found empty line"
	skip=2
	closeit=1
	case "x$linetwo" in
	    "x/*")
		echo "Found C comment start"
		skip=3
		closeit=0
		case "x$linethree" in
		    "x *"*${title})
			echo "Found old file header"
			skip=4
			;;
		    "x *"*${titlesansext})
			echo "Found old file header sans extension"
			skip=4
			;;
		    "x *")
			echo "Found empty comment line"
			skip=4
			if [ "x$foundtitle" = "x1" ] ; then
			    case "x$linethree" in
				"x *"*${title})
				    echo "Found old file header"
				    skip=5
				    ;;
				"x *"*${titlesansext})
				    echo "Found old file header sans extension"
				    skip=5
				    ;;
			    esac

			fi
			;;
		esac
		;;
	    "x/*"*${title})
		echo "Found C comment start with file header"
		skip=3
		closeit=0
		case "x$linetwo" in
		    "x *")
			echo "Found empty comment line"
			skip=4
			;;
		esac
		;;
	    "x/*"*${titlesansext})
		echo "Found C comment start with file header sans extension"
		skip=3
		closeit=0
		case "x$linetwo" in
		    "x *")
			echo "Found empty comment line"
			skip=4
			;;
		esac
		;;
	esac
	;;
    x[a-z]*)
	echo "found code"
	skip=0
	closeit=1
	;;
    x\#include*)
	echo "found code"
	skip=0
	closeit=1
	;;
    x\#*${title})
	echo "Found old file header"
	skip=2
	;;
    x\#*${titlesansext})
	echo "Found old file header sans extension"
	skip=2
	;;
    x\#*)
	echo "found comment line"
	skip=0
	closeit=1
	;;
    x\@@*)
	echo "found batch command"
	skip=0
	;;
    x\REM*)
	echo "found batch comment"
	skip=0
	;;
    *)
	echo "WARNING: Unknown line one in [$FILE]:"
	echo "Line one is [$lineone]"
	skip=0
# 	mv -f ${FILE}.backup $FILE
# 	exit 9
	;;
esac

if [ "x$wrap" = "x1" ] ; then
    if [ "x$closeit" = "x1" ] ; then
	echo "/${block}
/** @@file $basefilename
 *
 * Brief description
 *
 * Author -
 *   Unknown
 */

" >> $FILE
    else
	echo "/${block}
/** @@file $basefilename" >> $FILE
    fi
else
    echo "${block}" >> $FILE
fi

tail -n +${skip} ${FILE}.backup >> $FILE


exit 0


# Local Variables:
# mode: sh
# tab-width: 8
# sh-indentation: 4
# sh-basic-offset: 4
# indent-tabs-mode: t
# End:
# ex: shiftwidth=4 tabstop=8
@


14.46
log
@add additional c++ header name suffixes
@
text
@d736 4
d741 1
@


14.45
log
@not knowing the file type should report a non-zero error
@
text
@d154 1
a154 1
    *.cc | *.cp | *.cxx | *.cpp | *.cpp | *.CPP | *.c++ | *.C )
d159 1
a159 1
    *.hh | *.H )
@


14.44
log
@eek, double Lesser Lesser
@
text
@d295 1
a295 1
		exit 0
d307 1
a307 1
    exit 4
d314 1
a314 1
    exit 5
d324 1
a324 1
	exit 6
d504 1
a504 1
	exit 6
d534 1
a534 1
    exit 7
d543 1
a543 1
    exit 8
@


14.43
log
@PD work else statement was swapped, fixed.
@
text
@d492 1
a492 1
$c Lesser Lesser General Public License for more details.
@


14.42
log
@add recognition of PD for public domain works, remove the GPL and GFDL sections.
@
text
@d405 2
a406 1
$c Copyright (c) $copyright $COPY
d410 1
a410 2
$c Published in $copyright by $COPY
$c This work is in the public domain.
@


14.41
log
@recognize lexer and parser files
@
text
@d50 1
a50 1
#   find src -type f \( -name \*.c -or -name \*.h \) -not -regex '.*src/lib.*' -exec sh/header.sh GPL {} \;
d74 1
a74 1
    echo "ERROR: must give a license type (BSD, BDL, LGPL)"
d82 1
a82 1
    bdl|BDL)
d85 1
a85 1
    lgpl|LGPL)
d88 3
d93 1
a93 1
	echo "License should be one of BSD, BDL, LGPL"
d125 1
a125 1
    echo "ERROR: LICENSE should be one of BSD, BDL, LGPL"
d391 7
a397 1
    block="${block}
d401 1
d403 2
a404 1
    block="${block}
d407 6
d499 2
a500 50
    xGPL)
	block="${block}
$c This program is free software; you can redistribute it and/or
$c modify it under the terms of the GNU General Public License as
$c published by the Free Software Foundation.
$c
$c This program is distributed in the hope that it will be useful, but
$c WITHOUT ANY WARRANTY; without even the implied warranty of
$c MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
$c General Public License for more details.
$c
$c You should have received a copy of the GNU General Public License
$c along with this file; see the file named COPYING for more
$c information.
"
	;;
    xGFDL)
	block="${block}
$c Redistribution and use in source (Docbook format) and 'compiled'
 forms (PDF, PostScript, HTML, RTF, etc), with or without
 modification, are permitted provided that the following conditions
 are met:

 1. Redistributions of source code (Docbook format) must retain the
 above copyright notice, this list of conditions and the following
 disclaimer.

 2. Redistributions in compiled form (transformed to other DTDs,
 converted to PDF, PostScript, HTML, RTF, and other formats) must
 reproduce the above copyright notice, this list of conditions and
 the following disclaimer in the documentation and/or other
 materials provided with the distribution.

 3. The name of the author may not be used to endorse or promote
 products derived from this documentation without specific prior
 written permission.

 THIS DOCUMENTATION IS PROVIDED BY THE AUTHOR AS IS'' AND ANY
 EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
 OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
 BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
 USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE POSSIBILITY OF
 SUCH DAMAGE.
"
@


14.40
log
@remove the abort if the first line isn't detected.  instead just warn and apply the header.  also, add prefix to case for portability and empty argument matching.
@
text
@d161 10
@


14.39
log
@c++ source file
@
text
@d389 2
a390 2
case $LICE in
    BSD)
d421 1
a421 1
    BDL)
d456 1
a456 1
    LGPL)
d472 1
a472 1
    GPL)
d488 1
a488 1
    GFDL)
d575 2
a576 2
case "$lineone" in
    "/*"*${title})
d579 2
a580 2
	case "$linetwo" in
	    " *")
d586 1
a586 1
    "/*"*${titlesansext})
d589 2
a590 2
	case "$linetwo" in
	    " *")
d596 1
a596 1
    "/*")
d599 2
a600 2
	case "$linetwo" in
	    " *"*${title})
d604 1
a604 1
	    " *"*${titlesansext})
d608 1
a608 1
	    " *")
d612 2
a613 2
		    case "$linethree" in
			" *"*${title})
d617 1
a617 1
			" *"*${titlesansext})
d626 1
a626 1
    ".TH"*)
d631 1
a631 1
    "/*"*)
d636 1
a636 1
    "#"*"!"*"/bin/"*)
d640 2
a641 2
	case "$linetwo" in
	    "# "*${title})
d645 1
a645 1
	    "# "*${titlesansext})
d651 1
a651 1
    "")
d655 2
a656 2
	case "$linetwo" in
	    "/*")
d660 2
a661 2
		case "$linethree" in
		    " *"*${title})
d665 1
a665 1
		    " *"*${titlesansext})
d669 1
a669 1
		    " *")
d673 2
a674 2
			    case "$linethree" in
				" *"*${title})
d678 1
a678 1
				" *"*${titlesansext})
d688 1
a688 1
	    "/*"*${title})
d692 2
a693 2
		case "$linetwo" in
		    " *")
d699 1
a699 1
	    "/*"*${titlesansext})
d703 2
a704 2
		case "$linetwo" in
		    " *")
d712 1
a712 1
    [a-z]*)
d717 1
a717 1
    \#include*)
d722 1
a722 1
    \#*${title})
d726 1
a726 1
    \#*${titlesansext})
d730 1
a730 1
    \#*)
d735 1
a735 1
    \@@*)
d739 1
a739 1
    \REM*)
d744 5
a748 3
	echo "${FILE}:1 ERROR: Unknown line one: $lineone"
	mv -f ${FILE}.backup $FILE
	exit 9
@


14.38
log
@oop another ref to gpl/gfdl removed.
@
text
@d152 1
a152 1
	echo "$FILE is a C source file"
@


14.37
log
@should not be using the gpl or gfdl any more
@
text
@d122 1
a122 1
    echo "ERROR: LICENSE should be one of BSD, LGPL, GPL, or GFDL"
@


14.36
log
@ws
@
text
@d74 1
a74 1
    echo "ERROR: must give a license type (BSD, BDL, LGPL, GPL, GFDL)"
a87 6
    gpl|GPL)
	LICE=GPL
	;;
    gfdl|fdl|GFDL|FDL)
	LICE=GFDL
	;;
d89 2
a90 2
	echo "ERROR: Unknown license type: $LICE"
	echo "License should be one of BSD, LGPL, GPL, GFDL"
@


14.35
log
@Sweeping license updates.  Documentation is fully relicensed to the BSD Documentation License (a minor variant of the FreeBSD Documentation License and BSD License).  All GPL code (mostly application code) is converted to the LGPL and now also specifically declares version 2.1, revoking the blank check to the FSF.  The intent of these sweeping changes are to simplify the licensing terms and increase overall flexibility of use, both externally (to users for their purposes) and internally (to allow application code to be migrated to libraries without creating GPL libraries).  As a collective work, BRL-CAD is now LGPL.
@
text
@d80 1
a80 1
        LICE=BSD
d86 1
a86 1
        LICE=LGPL
d89 1
a89 1
        LICE=GPL
d92 2
a93 2
        LICE=GFDL
    	;;
d95 1
a95 1
        echo "ERROR: Unknown license type: $LICE"
d348 1
a348 1
        startyear="`echo "$copyrightline" | sed 's/.*[^0-9]\([0-9][0-9][0-9][0-9]\),[0-9][0-9][0-9][0-9],[0-9][0-9][0-9][0-9][^0-9].*/\1/'`"
d397 1
a397 1
        block="${block}
d426 1
a426 1
        ;;
d428 1
a428 1
        block="${block}
d433 1
a433 1
$c 
d437 1
a437 1
$c 
d443 1
a443 1
$c 
d447 1
a447 1
$c 
d463 1
a463 1
        block="${block}
d477 1
a477 1
        ;;
d479 1
a479 1
        block="${block}
d493 1
a493 1
        ;;
d495 1
a495 1
        block="${block}
d500 1
a500 1
 
d504 1
a504 1
 
d510 1
a510 1
 
d514 1
a514 1
 
d528 1
a528 1
        ;;
d530 1
a530 1
        echo "ERROR: encountered unknown license type $LICE during processing"
d583 1
a583 1
        echo "Found C comment start with file header"
d587 1
a587 1
	        echo "Found empty comment line"
d593 1
a593 1
        echo "Found C comment start with file header sans extension"
d597 1
a597 1
	        echo "Found empty comment line"
d603 1
a603 1
        echo "Found C comment start"
d607 1
a607 1
	        echo "Found old file header"
d611 1
a611 1
	        echo "Found old file header sans extension"
d615 1
a615 1
	        echo "Found empty comment line"
d638 1
a638 1
        echo "WARNING: Found C comment start with stuff trailing"
d643 1
a643 1
        echo "Found script exec line"
d648 1
a648 1
	        echo "Found old file header"
d652 1
a652 1
	        echo "Found old file header sans extension"
d658 1
a658 1
        echo "Found empty line"
d663 1
a663 1
	        echo "Found C comment start"
d668 1
a668 1
		        echo "Found old file header"
d672 1
a672 1
		        echo "Found old file header sans extension"
d676 1
a676 1
		        echo "Found empty comment line"
d695 1
a695 1
	        echo "Found C comment start with file header"
d700 1
a700 1
	                echo "Found empty comment line"
d706 1
a706 1
	        echo "Found C comment start with file header sans extension"
d711 1
a711 1
	                echo "Found empty comment line"
d719 1
a719 1
        echo "found code"
d724 1
a724 1
        echo "found code"
d729 1
a729 1
        echo "Found old file header"
d733 1
a733 1
        echo "Found old file header sans extension"
d737 1
a737 1
        echo "found comment line"
d742 1
a742 1
        echo "found batch command"
d746 1
a746 1
        echo "found batch comment"
d750 1
a750 1
        echo "${FILE}:1 ERROR: Unknown line one: $lineone"
@


14.34
log
@recognize arbitrary script exec identifier lines, regardless of /usr/bin, /bin, etc
@
text
@d74 1
a74 1
    echo "ERROR: must give a license type (BSD, LGPL, GPL, GFDL)"
d82 3
d427 35
d466 1
a466 1
$c as published by the Free Software Foundation.
d471 1
a471 1
$c Lesser General Public License for more details.
d496 31
a526 13
$c This document is made available under the terms of the GNU Free
$c Documentation License or, at your option, under the terms of the
$c GNU General Public License as published by the Free Software
$c Foundation.  Permission is granted to copy, distribute and/or
$c modify this document under the terms of the GNU Free Documentation
$c License as published by the Free Software Foundation; with no
$c Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
$c Permission is also granted to redistribute this document under the
$c terms of the GNU General Public License.
$c
$c You should have received a copy of the GNU Free Documentation
$c License and/or the GNU General Public License along with this
$c document; see the file named COPYING for more information.
@


14.33
log
@add recognition of python
@
text
@d586 1
a586 16
    "#!/bin/"*)
        echo "Found script exec line"
	echo "$lineone" >> $FILE
	skip=2
	case "$linetwo" in
	    "# "*${title})
	        echo "Found old file header"
		skip=3
		;;
	    "# "*${titlesansext})
	        echo "Found old file header sans extension"
		skip=3
		;;
	esac
	;;
    "# !/bin/"*)
@


14.32
log
@use dates formatting to extract the year instead of awk...
@
text
@d204 5
d278 5
@


14.31
log
@Remove the carte blanche statement that allowed selection of the license at user's discretion and GNU's provision.  If there's motivation to change the license, even to a new version, it will need to be a conscious effort and decision.
@
text
@d324 1
a324 1
currentyear="`date | awk '{print $6}'`"
@


14.30
log
@update copyright to 2007
@
text
@d418 1
a418 2
$c as published by the Free Software Foundation; either version 2 of
$c the License, or (at your option) any later version.
d434 1
a434 2
$c published by the Free Software Foundation; either version 2 of the
$c License, or (at your option) any later version.
d453 4
a456 6
$c License, Version 1.2 or any later version published by the Free
$c Software Foundation; with no Invariant Sections, no Front-Cover
$c Texts, and no Back-Cover Texts.  Permission is also granted to
$c redistribute this document under the terms of the GNU General
$c Public License; either version 2 of the License, or (at your
$c option) any later version.
@


14.29
log
@add support for emacs lisp files
@
text
@d5 1
a5 1
# Copyright (c) 2004-2006 United States Government as represented by
@


14.28
log
@add support for C++ and Objective-C/C++ to the mix
@
text
@d239 5
@


14.27
log
@let header.sh be used with other projects and copyright holders too
@
text
@d139 1
a139 1
    *.sh)
d144 1
a144 1
    *.c)
d149 1
a149 1
    *.h)
d154 21
a174 1
    *.java)
d179 1
a179 1
    *.tcl)
d184 1
a184 1
    *.tk)
d189 1
a189 1
    *.itcl)
d194 1
a194 1
    *.itk)
d199 1
a199 1
    *.pl)
d204 1
a204 1
    *.am)
d209 1
a209 1
    *.in)
d214 1
a214 1
    *.ac)
d219 1
a219 1
    *.m4)
d224 1
a224 1
    *.mk)
d229 1
a229 1
    *.bat)
d234 1
a234 1
    *.vim)
d239 1
a239 1
    *.[0-9])
d244 1
a244 1
    *)
d248 1
a248 1
	    */bin/sh)
d253 1
a253 1
	    */bin/tclsh)
d258 1
a258 1
	    */bin/wish)
d263 1
a263 1
	    */bin/perl)
d268 1
a268 1
	    *)
@


14.26
log
@automatically detect a slew of script types by looking at the first line of the file -- if the /bin/* is recognizable, then the file doesn't need a suffix after all.
@
text
@d62 2
d68 1
d75 1
a75 1
    echo "Usage: $0 LICENSE FILE"
d94 1
a94 1
        echo "Usage: $0 LICENSE FILE"
d101 1
a101 1
    echo "Usage: $0 LICENSE FILE"
d114 9
d124 2
a125 3
if [ "x$3" != "x" ] ; then
    echo "Usage: $0 LICENSE FILE"
    echo "LICENSE should be one of BSD, LGPL, GPL, or GFDL"
d127 1
d342 1
a342 1
$c BRL-CAD
d345 2
a346 1
block="${block}
d350 6
@


14.25
log
@add support for m4 files and make sure it's consistent on template files between the header and footer scripts
@
text
@d213 28
a240 3
	echo "ERROR: $FILE has an unknown filetype"
	exit 0
	;;
@


14.24
log
@add support for .vim files; also manual page comment character to an escaped quote
@
text
@d182 10
d193 1
a193 1
	echo "$FILE is a make file"
@


14.24.2.1
log
@Changes from HEAD merge.
@
text
@a181 10
    *.ac)
	echo "$FILE is an Autoconf template file"
	wrap=0
	commentprefix="#"
	;;
    *.m4)
	echo "$FILE is an m4 macro file"
	wrap=0
	commentprefix="#"
	;;
d183 1
a183 1
	echo "$FILE is a make resource file"
@


14.23
log
@update copyright to 2006
@
text
@d192 5
d200 1
a200 1
	commentprefix="./\""
@


14.22
log
@add support for DOS batch script files, using REM as the comment
@
text
@d5 1
a5 1
# Copyright (C) 2004-2005 United States Government as represented by
@


14.21
log
@-n comes before
@
text
@d187 5
d610 8
@


14.20
log
@presume posix behavior in the tools, accepting a modified version of stefan fiedler's e-mailed patch.  solaris is known to have issues but that should be extremely minor
@
text
@d627 1
a627 1
tail +n ${skip} ${FILE}.backup >> $FILE
@


14.19
log
@trailing ws
@
text
@d243 1
a243 1
copyrightline="`grep -i copyright $FILE | grep -v -i notice | grep -v -i '\.SH' | head -1`"
d245 1
a245 1
    copyrightline="`grep -i copyright $FILE | grep -v -i united | grep -v -i '\.SH' | head -1`"
d395 1
a395 1
foundtitle="`head -5 $FILE | grep "$title" | wc | awk '{print $1}'`"
d400 2
a401 2
    licline="`echo "$block" | tail -7 | head -1`"
    foundfileheader="`head -50 $FILE | grep "$licline" | wc | awk '{print $1}'`"
d427 3
a429 3
lineone="`cat ${FILE}.backup | head -1`"
linetwo="`cat ${FILE}.backup | head -2 | tail -1`"
linethree="`cat ${FILE}.backup | head -3 | tail -1`"
d627 1
a627 1
tail +${skip} ${FILE}.backup >> $FILE
@


14.18
log
@ws
@
text
@d52 2
a53 2
# Author - 
#   Christopher Sean Morrison 
d85 1
a85 1
    gfdl|fdl|GFDL|FDL) 
d126 1
a126 1
case $FILE in 
d430 1
a430 1
case "$lineone" in 
d553 1
a553 1
			    
@


14.17
log
@ignore manpage .SH COPYRIGHT lines
@
text
@d15 1
a15 1
# 2. Redistributions in binary form must reproduce the above 
d303 1
a303 1
$c 2. Redistributions in binary form must reproduce the above 
@


14.17.2.1
log
@merge changes from HEAD aka rel-7-6-4 to the rel-7-6-branch just in case someone peeks a gander or tries to continue/build the branch
@
text
@d15 1
a15 1
# 2. Redistributions in binary form must reproduce the above
d52 2
a53 2
# Author -
#   Christopher Sean Morrison
d85 1
a85 1
    gfdl|fdl|GFDL|FDL)
d126 1
a126 1
case $FILE in
d243 1
a243 1
copyrightline="`grep -i copyright $FILE | grep -v -i notice | grep -v -i '\.SH' | head -n 1`"
d245 1
a245 1
    copyrightline="`grep -i copyright $FILE | grep -v -i united | grep -v -i '\.SH' | head -n 1`"
d303 1
a303 1
$c 2. Redistributions in binary form must reproduce the above
d395 1
a395 1
foundtitle="`head -n 5 $FILE | grep "$title" | wc | awk '{print $1}'`"
d400 2
a401 2
    licline="`echo "$block" | tail -n 7 | head -n 1`"
    foundfileheader="`head -n 50 $FILE | grep "$licline" | wc | awk '{print $1}'`"
d427 4
a430 4
lineone="`cat ${FILE}.backup | head -n 1`"
linetwo="`cat ${FILE}.backup | head -n 2 | tail -n 1`"
linethree="`cat ${FILE}.backup | head -n 3 | tail -n 1`"
case "$lineone" in
d553 1
a553 1

d627 1
a627 1
tail -n +${skip} ${FILE}.backup >> $FILE
@


14.16
log
@add support for manual pages.  brl-cad's gfdl documentation is actually dual-licensed so customize the comment block to include that detail.  less and other pagers that recognize and auto-format manpages don't work if comment is first, so make the comment block come after the .TH
@
text
@d243 1
a243 1
copyrightline="`grep -i copyright $FILE | grep -v -i notice | head -1`"
d245 1
a245 1
    copyrightline="`grep -i copyright $FILE | grep -v -i united | head -1`"
@


14.15
log
@recognize .am, .in, and .mk files
@
text
@d187 5
d361 11
a371 5
$c Permission is granted to copy, distribute and/or modify this
$c document under the terms of the GNU Free Documentation License,
$c Version 1.2 or any later version published by the Free Software
$c Foundation; with no Invariant Sections, no Front-Cover Texts, and
$c no Back-Cover Texts.
d374 2
a375 2
$c License along with this file; see the file named COPYING for more
$c information.
d481 5
@


14.14
log
@force locale setting to C so things like date output as expected
@
text
@d172 15
@


14.13
log
@update copyright to 2005
@
text
@d63 3
@


14.12
log
@don't bother formatting new block copyright line to 70 exactly since we just have to fix the wrapping of the 'the' after a year
@
text
@d6 1
a6 1
# U.S. Army Research Laboratory.
@


14.11
log
@dang it.. 2.1 calls itself the lesser GPL, not the library GPL any more
@
text
@d5 1
a5 1
# Copyright (c) 2004 United States Government as represented by the
d265 1
a265 3
if [ "x$startyear" != "x$currentyear" ] ; then
    # longer date wraps the 'the'
    block="${block}
a268 6
else
    block="${block}
$c Copyright (c) $copyright United States Government as represented by the
$c U.S. Army Research Laboratory.
$c"
fi
@


14.10
log
@support commented line headers (tcl/tk script library files) and fix the dang last paragraph to match the license being used.
@
text
@d313 1
a313 1
$c modify it under the terms of the GNU Library General Public License
d320 1
a320 1
$c Library General Public License for more details.
d322 1
a322 1
$c You should have received a copy of the GNU Library General Public
@


14.9
log
@handle java files too
@
text
@d322 2
a323 2
$c You should have received a copy of the GNU General Public License
$c along with this file; see the file named COPYING for more
d352 2
a353 2
$c You should have received a copy of the GNU General Public License
$c along with this file; see the file named COPYING for more
d566 13
@


14.8
log
@header length/position moves once again due to trailing comment length
@
text
@d139 5
@


14.7
log
@remove the empty C wrap line preceeding the doxygen block now that it's separated.  add support for matching title lines that removed the file suffix (e.g. F O O instead of F O O . C)
@
text
@d374 1
a374 1
    licline="`echo "$block" | tail -5 | head -1`"
@


14.6
log
@fix check for #include; change format of @@file breakpoint to appease emacs indent-region'ing
@
text
@d186 1
d359 1
a359 2
    block="${block}${c}
${c}/"
d415 10
d433 4
d443 7
a449 3
			echo "Found old file header"
			skip=4
			;;
d469 4
d484 4
d504 4
d517 4
d538 11
@


14.5
log
@handle spaces after shell script bangs, handle #include as code files to just prepend the header on
@
text
@d359 1
a359 1
${c}*/"
d511 1
a511 1
    #include*)
d525 2
a526 1
	echo "/${block}/** @@file $basefilename
d531 2
a532 1
	echo "/${block}/** @@file $basefilename" >> $FILE
@


14.4
log
@slew of fixes to support more varied source files and try to otherwise continue
@
text
@d453 11
d511 5
@


14.3
log
@add support to snarf an existing copyright date from the file if it's there
@
text
@d231 5
a235 1
		startyear="$currentyear"
d378 1
a378 1
	echo "WARNING: $FILE already has a title"
d399 1
d405 10
d437 4
a440 9
    "/*"*${title})
        echo "Found C comment start with file header"
	skip=2
	case "$linetwo" in
	    " *")
	        echo "Found empty comment line"
		skip=3
		;;
	esac
d456 1
d461 1
d483 10
a492 9
	    echo "Found C comment start with file header"
	    skip=3
	    case "$linetwo" in
		" *")
	            echo "Found empty comment line"
		    skip=4
		    ;;
	    esac
	    ;;
d495 5
d501 1
a501 1
        echo "ERROR: Found unknown line one: $lineone"
d508 8
a515 1
    echo "/${block}/** @@file $basefilename" >> $FILE
@


14.2
log
@output the title on the first line instead of the second line
@
text
@d197 5
a201 1
titleline="$commentprefix "
d209 37
d253 11
a263 2
$c
$c Copyright (c) 2004 United States Government as represented by the
d266 1
d365 1
a365 1
foundtitle="`head -3 $FILE | grep "$title" | wc | awk '{print $1}'`"
d370 1
a370 1
    licline="`echo "$block" | tail -3 | head -1`"
d398 1
d408 12
d425 6
d443 38
@


14.1
log
@initial header script to assist in assignment of copyright/license headers
@
text
@a349 1
	echo "$lineone" >> $FILE
a360 1
	echo "/*" >> $FILE
d366 7
d382 1
a382 1
    echo "${block}/** @@file $basefilename" >> $FILE
a389 1

@

