head	14.4;
access;
symbols
	rel-7-0-4:14.2
	rel-7-0-2:14.2
	rel-7-0-1:14.2
	opensource-post:14.2
	opensource-pre:11.2
	rel-7-0-branch:11.2.0.16
	rel-7-0:11.2
	ansi-20040405-merged:11.2
	postmerge-20040405-ansi:11.2
	premerge-20040404-ansi:11.2
	postmerge-autoconf:11.2
	autoconf-freeze:11.2
	premerge-autoconf:11.2
	postmerge-20040315-windows:11.2
	premerge-20040315-windows:11.2
	windows-20040315-freeze:11.2
	autoconf-20031203:11.2
	autoconf-20031202:11.2
	autoconf-branch:11.2.0.14
	phong-branch:11.2.0.12
	photonmap-branch:11.2.0.10
	rel-6-1-DP:11.2
	windows-branch:11.2.0.8
	rel-6-0-2:11.2
	ansi-branch:11.2.0.6
	rel-6-0-1-branch:11.2.0.4
	hartley-6-0-post:11.2
	hartley-6-0-pre:11.2
	rel-6-0-1:11.2
	rel-6-0:11.2
	rel-5-4:11.2
	offsite-5-3-pre:11.2
	rel-5-3:11.2
	rel-5-2:11.2
	rel-5-1-branch:11.2.0.2
	rel-5-1:11.2
	rel-5-0:11.2
	rel-5-0-beta:11.2
	rel-4-5:11.1
	ctj-4-5-post:11.1
	ctj-4-5-pre:11.1
	rel-4-4:11.1;
locks; strict;
comment	@# @;


14.4
date	2005.02.22.03.05.46;	author brlcad;	state dead;
branches;
next	14.3;

14.3
date	2005.01.30.20.30.13;	author brlcad;	state Exp;
branches;
next	14.2;

14.2
date	2004.12.17.21.01.05;	author morrison;	state Exp;
branches;
next	14.1;

14.1
date	2004.11.16.19.42.12;	author morrison;	state Exp;
branches;
next	11.2;

11.2
date	99.01.13.08.04.44;	author butler;	state Exp;
branches;
next	11.1;

11.1
date	95.01.04.09.43.47;	author mike;	state Rel4_4;
branches;
next	1.10;

1.10
date	94.12.30.19.32.43;	author mike;	state Exp;
branches;
next	1.9;

1.9
date	94.12.22.01.59.20;	author mike;	state Exp;
branches;
next	1.8;

1.8
date	94.12.21.22.16.23;	author mike;	state Exp;
branches;
next	1.7;

1.7
date	94.12.20.17.00.24;	author mike;	state Exp;
branches;
next	1.6;

1.6
date	94.10.19.20.14.46;	author cjohnson;	state Exp;
branches;
next	1.5;

1.5
date	94.10.19.15.00.47;	author mike;	state Exp;
branches;
next	1.4;

1.4
date	94.10.19.14.08.57;	author mike;	state Exp;
branches;
next	1.3;

1.3
date	94.10.19.10.52.51;	author cjohnson;	state Exp;
branches;
next	1.2;

1.2
date	94.10.18.13.11.26;	author mike;	state Exp;
branches;
next	1.1;

1.1
date	94.10.14.15.23.20;	author mike;	state Exp;
branches;
next	;


desc
@Make symlink between numbered and unnumbered version of shared library.
Thanks AT&T :-(
@


14.4
log
@remove the old sharedlib script files as they are no longer needed with the new build system
@
text
@#!/bin/sh
#                S H A R E D L I B L I N K . S H
# BRL-CAD
#
# Copyright (C) 2004-2005 United States Government as represented by
# the U.S. Army Research Laboratory.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
#
# 1. Redistributions of source code must retain the above copyright
# notice, this list of conditions and the following disclaimer.
#
# 2. Redistributions in binary form must reproduce the above 
# copyright notice, this list of conditions and the following
# disclaimer in the documentation and/or other materials provided
# with the distribution.
#
# 3. The name of the author may not be used to endorse or promote
# products derived from this software without specific prior written
# permission.
#
# THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS
# OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
# WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
# ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
# DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
# GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
# INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
# WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
# NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
# SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#
###
# Main result sent to stdout, errors must go to stderr
#
# Build the symbolic link from the numbered version of a library to
# the no-number library.  e.g. link librt.so.10 to librt.so
#
# Also, for systems like SunOS 4.1.x and Linux that use major and
# minor version numbers, make a symlink to minor version 1 as well.
#
#  $Header: /cvsroot/brlcad/brlcad/sh/sharedliblink.sh,v 14.3 2005/01/30 20:30:13 brlcad Exp $

if test $# != 1 -o ! -f "$1"
then
	echo "Usage: sharedliblink.sh libraryname.so.##" 1>&2
	echo "e.g.	../.librt.sun4/librt.so.10" 1>&2
	exit 1
fi

ONENUM="$1"
DIR=`dirname $ONENUM`
BASE=`basename $ONENUM`

cd $DIR

NONUM=`echo $BASE | sed -e 's/\\.so\\..*/.so/' `
TWONUM=$BASE.1			# Minor version 1

# If the shared library has a version number, link numbered to unnumbered.
# If no version number, don't do anything.
if test "$BASE" != "$NONUM"
then
	rm -f $NONUM $TWONUM
	ln -s $BASE $NONUM
	ln -s $BASE $TWONUM
fi

# Local Variables:
# mode: sh
# tab-width: 8
# sh-indentation: 4
# sh-basic-offset: 4
# indent-tabs-mode: t
# End:
# ex: shiftwidth=4 tabstop=8
@


14.3
log
@update copyright to 2005
@
text
@d45 1
a45 1
#  $Header: /cvsroot/brlcad/brlcad/sh/sharedliblink.sh,v 14.2 2004/12/17 21:01:05 morrison Exp $
@


14.2
log
@assignment of copyright and BSD license
@
text
@d5 2
a6 2
# Copyright (c) 2004 United States Government as represented by the
# U.S. Army Research Laboratory.
d45 1
a45 1
#  $Header: /cvs/brlcad/sh/sharedliblink.sh,v 14.1 2004/11/16 19:42:12 morrison Exp $
@


14.1
log
@dawn of a new revision.  it shall be numbered 14 to match release 7.  begin the convergence by adding emacs/vi local variable footer blocks to encourage consistent formatting.
@
text
@d2 35
a36 1

d39 2
a40 2
# Build the symbolic link from the numbered version of a library
# to the no-number library.  e.g. link librt.so.10 to librt.so
d42 2
a43 2
# Also, for systems like SunOS 4.1.x and Linux that use major and minor
# version numbers, make a symlink to minor version 1 as well.
d45 1
a45 1
#  $Header: /cvs/brlcad/sh/sharedliblink.sh,v 11.2 1999/01/13 08:04:44 butler Exp $
@


11.2
log
@sharedliblink now makes links to the file name in the local directory,
not the full path.
@
text
@d11 1
a11 1
#  $Header: /c/CVS/brlcad/sh/sharedliblink.sh,v 11.1 1995/01/04 09:43:47 mike Rel4_4 $
d37 9
@


11.1
log
@Release_4.4
@
text
@d11 1
a11 1
#  $Header: /m/cad/RCS/sharedliblink.sh,v 1.10 94/12/30 19:32:43 mike Exp $
d34 2
a35 2
	ln -s $ONENUM $NONUM
	ln -s $ONENUM $TWONUM
@


1.10
log
@Fixed missing grave-accent.
Only a problem on Linux.
@
text
@d11 1
a11 1
#  $Header: /m/cad/RCS/sharedliblink.sh,v 1.9 94/12/22 01:59:20 mike Exp Locker: mike $
@


1.9
log
@Finally got the minor number stuff working.
@
text
@d11 1
a11 1
#  $Header: /m/cad/RCS/sharedliblink.sh,v 1.8 94/12/21 22:16:23 mike Exp Locker: mike $
d20 3
a22 1
cd `dirname $1`
d24 1
a24 2
NONUM=`basename $1 | sed -e 's/\\.so\\..*/.so/`
TWONUM=`basename $1`.1			# Minor version 1
d26 3
d31 1
a31 1
if test `basename $1` != "$NONUM"
d34 2
a35 2
	ln -s $1 $NONUM
	ln -s $1 $TWONUM
@


1.8
log
@If TWONUM version exists, it has to be removed too.
@
text
@d11 1
a11 1
#  $Header: /m/cad/RCS/sharedliblink.sh,v 1.7 94/12/20 17:00:24 mike Exp Locker: mike $
d13 1
a13 1
if test $# != 1
d23 1
a23 1
TWONUM=$NONUM.1			# Minor version 1
@


1.7
log
@Add (phony) minor version, too.
@
text
@d11 1
a11 1
#  $Header: /m/cad/RCS/sharedliblink.sh,v 1.6 94/10/19 20:14:46 cjohnson Exp Locker: mike $
d23 1
d29 1
a29 1
	rm -f $NONUM
d31 1
a31 1
	ln -s $1 $1.1		# Minor version 1
@


1.6
log
@More protection.
@
text
@d8 4
a11 1
#  $Header: /m/cad/RCS/sharedliblink.sh,v 1.5 1994/10/19 15:00:47 mike Exp cjohnson $
d30 1
@


1.5
log
@Added $HEADER
@
text
@d8 1
a8 1
#  $Header: /m/cad/RCS/pixinfo.sh,v 1.9 94/10/18 17:17:53 mike Exp $
d23 1
a23 1
if test "$1" != "$NONUM"
@


1.4
log
@Added comments, and changed to use TEST command.
@
text
@d7 2
@


1.3
log
@Don't delete the shared library by accident.
@
text
@d19 4
a22 1
if [ $1 != $NONUM ] ; then
@


1.2
log
@Eliminate it if it's already there.
@
text
@d19 4
a22 2
rm -f $NONUM
ln -s $1 $NONUM
@


1.1
log
@Initial revision
@
text
@d19 1
@
