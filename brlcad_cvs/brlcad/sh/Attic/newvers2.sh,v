head	11.2;
access;
symbols
	postmerge-20040405-ansi:11.1
	premerge-20040404-ansi:11.1
	postmerge-autoconf:11.1
	autoconf-freeze:1.1.2.3
	autoconf-branch:1.1.0.2;
locks; strict;
comment	@# @;


11.2
date	2004.05.13.14.10.21;	author morrison;	state dead;
branches;
next	11.1;

11.1
date	2004.03.18.18.25.17;	author erikg;	state Exp;
branches;
next	1.1;

1.1
date	2003.12.23.18.46.51;	author erikg;	state dead;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2003.12.23.18.46.51;	author erikg;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	2004.02.12.20.07.05;	author erikg;	state dead;
branches;
next	1.1.2.3;

1.1.2.3
date	2004.02.25.14.17.23;	author erikg;	state Exp;
branches;
next	;


desc
@@


11.2
log
@vers.c is now generated from vers.sh
@
text
@#!/bin/sh
#			N E W V E R S . S H
#
# Update the "version" file, and create a new "vers.c" from it.
# May be run in any (first-level) subdirectory of the source tree.
#
#  Optional args:
#	variable name to put version string in (default="version")
#	title
#
# @@(#)$Header: /c/CVS/brlcad/sh/newvers2.sh,v 11.1 2004/03/18 18:25:17 erikg Exp $ (BRL)

if test $# -gt 0
then
	VARIABLE="$1"
	shift
else
	VARIABLE="version"
fi

if test $# -gt 0
then
	TITLE="$*"
else
	TITLE="Graphics Editor (MGED)"
fi

eval `machinetype.sh -b`	# sets MACHINE, UNIXTYPE, etc

# Obtain RELEASE, RCS_REVISION, and REL_DATE
if test -r ../gen.sh
then
	# XXX The following line causes DEC Alpha's /bin/sh to dump core.
	eval `grep '^RELEASE=' ../gen.sh`
	##RELEASE=4.4;	RCS_REVISION=11;	# Uncomment for Alpha workaround.
else
	RELEASE='??.??'
fi

DIR=`pwd`
if test x$DIR = x; then DIR="/unknown"; fi

if test ! -w version
then
	rm -f version; echo 0 > version; chmod 664 version
fi

awk '{version = $1 + 1; };END{printf "%d\n", version > "version"; }' < version

VERSION=`cat version`
DATE=`date`
PATH=$PATH:/usr/ucb:/usr/bsd
export PATH
if test x$UNIXTYPE = xBSD -o -f /usr/ucb/hostname -o -f /usr/bsd/hostname
then
	HOST=`hostname`
else
	HOST=`uname -n`
fi

if test "$USER" = ""
then
	USER="$LOGNAME"
fi

cat << EOF
char ${VARIABLE}[] = "\\
@@(#) BRL-CAD Release ${RELEASE}   ${TITLE}\n\\
    ${DATE}, Compilation ${VERSION}\n\\
    ${USER}@@${HOST}:${DIR}\n";
EOF
@


11.1
log
@merge of AUTOCONF branch in to HEAD
@
text
@d11 1
a11 1
# @@(#)$Header$ (BRL)
@


1.1
log
@file newvers2.sh was initially added on branch AUTOCONF.
@
text
@d1 71
@


1.1.2.1
log
@dump to stdout instead of file vers.c
@
text
@a0 71
#!/bin/sh
#			N E W V E R S . S H
#
# Update the "version" file, and create a new "vers.c" from it.
# May be run in any (first-level) subdirectory of the source tree.
#
#  Optional args:
#	variable name to put version string in (default="version")
#	title
#
# @@(#)$Header: /c/CVS/brlcad/sh/newvers.sh,v 11.1 1995/01/04 09:43:45 mike Rel4_4 $ (BRL)

if test $# -gt 0
then
	VARIABLE="$1"
	shift
else
	VARIABLE="version"
fi

if test $# -gt 0
then
	TITLE="$*"
else
	TITLE="Graphics Editor (MGED)"
fi

eval `machinetype.sh -b`	# sets MACHINE, UNIXTYPE, etc

# Obtain RELEASE, RCS_REVISION, and REL_DATE
if test -r ../gen.sh
then
	# XXX The following line causes DEC Alpha's /bin/sh to dump core.
	eval `grep '^RELEASE=' ../gen.sh`
	##RELEASE=4.4;	RCS_REVISION=11;	# Uncomment for Alpha workaround.
else
	RELEASE='??.??'
fi

DIR=`pwd`
if test x$DIR = x; then DIR="/unknown"; fi

if test ! -w version
then
	rm -f version; echo 0 > version; chmod 664 version
fi

awk '{version = $1 + 1; };END{printf "%d\n", version > "version"; }' < version

VERSION=`cat version`
DATE=`date`
PATH=$PATH:/usr/ucb:/usr/bsd
export PATH
if test x$UNIXTYPE = xBSD -o -f /usr/ucb/hostname -o -f /usr/bsd/hostname
then
	HOST=`hostname`
else
	HOST=`uname -n`
fi

if test "$USER" = ""
then
	USER="$LOGNAME"
fi

cat << EOF
char ${VARIABLE}[] = "\\
@@(#) BRL-CAD Release ${RELEASE}   ${TITLE}\n\\
    ${DATE}, Compilation ${VERSION}\n\\
    ${USER}@@${HOST}:${DIR}\n";
EOF
@


1.1.2.2
log
@generated now...
@
text
@d11 1
a11 1
# @@(#)$Header: /c/CVS/brlcad/sh/Attic/newvers2.sh,v 1.1.2.1 2003/12/23 18:46:51 erikg Exp $ (BRL)
@


1.1.2.3
log
@reviving
@
text
@@


