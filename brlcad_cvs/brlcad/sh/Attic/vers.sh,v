head	14.14;
access;
symbols
	stable-branch:14.4
	rel-7-10-0:14.13
	rel-7-8-4:14.11
	rel-7-8-2:14.9
	rel-7-8-0:14.9
	trimnurbs-branch:14.9.0.2
	help:14.9
	temp_tag:14.8
	bobWinPort-20051223-freeze:14.5
	postmerge-20051223-bobWinPort:14.8
	premerge-20051223-bobWinPort:14.8
	rel-7-6-6:14.8
	rel-7-6-4:14.8
	rel-7-6-2:14.5
	rel-7-6-branch:14.5.0.6
	rel-7-6-0:14.5
	rel-7-4-2:14.5
	rel-7-4-branch:14.5.0.4
	bobWinPort:14.5.0.2
	rel-7-4-0:14.5
	rel-7-2-6:14.5
	rel-7-2-4:14.4
	rel-7-2-2:14.4
	rel-7-2-0:14.4
	rel-7-0-4:14.2
	rel-7-0-2:14.2
	rel-7-0-1:14.2
	opensource-post:14.2
	opensource-pre:11.5
	rel-7-0-branch:11.5.0.2
	rel-7-0:11.5;
locks; strict;
comment	@# @;


14.14
date	2007.04.18.02.52.19;	author brlcad;	state dead;
branches;
next	14.13;

14.13
date	2007.01.26.23.32.26;	author brlcad;	state Exp;
branches;
next	14.12;

14.12
date	2007.01.20.13.57.25;	author brlcad;	state Exp;
branches;
next	14.11;

14.11
date	2006.08.16.18.52.33;	author brlcad;	state Exp;
branches;
next	14.10;

14.10
date	2006.08.16.18.47.57;	author brlcad;	state Exp;
branches;
next	14.9;

14.9
date	2006.01.18.06.46.11;	author brlcad;	state Exp;
branches;
next	14.8;

14.8
date	2005.11.11.21.34.28;	author brlcad;	state Exp;
branches;
next	14.7;

14.7
date	2005.11.01.09.04.39;	author brlcad;	state Exp;
branches;
next	14.6;

14.6
date	2005.10.22.17.36.02;	author brlcad;	state Exp;
branches;
next	14.5;

14.5
date	2005.05.12.12.33.46;	author brlcad;	state Exp;
branches
	14.5.6.1;
next	14.4;

14.4
date	2005.02.21.18.02.54;	author brlcad;	state Exp;
branches;
next	14.3;

14.3
date	2005.01.30.20.30.13;	author brlcad;	state Exp;
branches;
next	14.2;

14.2
date	2004.12.17.21.01.05;	author morrison;	state Exp;
branches;
next	14.1;

14.1
date	2004.11.16.19.42.12;	author morrison;	state Exp;
branches;
next	11.5;

11.5
date	2004.09.15.04.35.19;	author morrison;	state Exp;
branches;
next	11.4;

11.4
date	2004.07.26.17.31.20;	author morrison;	state Exp;
branches;
next	11.3;

11.3
date	2004.07.25.04.08.42;	author morrison;	state Exp;
branches;
next	11.2;

11.2
date	2004.05.13.14.27.21;	author morrison;	state Exp;
branches;
next	11.1;

11.1
date	2004.05.13.14.11.45;	author morrison;	state Exp;
branches;
next	;

14.5.6.1
date	2005.11.13.13.46.11;	author brlcad;	state Exp;
branches;
next	;


desc
@@


14.14
log
@remove the old vers.sh script.  no longer used now that include/conf is in place along with corresponding include/brlcad_version.h routines.
@
text
@#!/bin/sh
#                         V E R S . S H
# BRL-CAD
#
# Copyright (c) 2004-2007 United States Government as represented by
# the U.S. Army Research Laboratory.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
#
# 1. Redistributions of source code must retain the above copyright
# notice, this list of conditions and the following disclaimer.
#
# 2. Redistributions in binary form must reproduce the above
# copyright notice, this list of conditions and the following
# disclaimer in the documentation and/or other materials provided
# with the distribution.
#
# 3. The name of the author may not be used to endorse or promote
# products derived from this software without specific prior written
# permission.
#
# THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS
# OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
# WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
# ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
# DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
# GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
# INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
# WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
# NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
# SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#
###
#
# Update the "version" file for creation of a new "vers.c" from it.
# May be run in any subdirectory of the source tree.  Output goes to
# stdout now so you'll likely need to run:
#
#       sh vers.sh variable_name "this is a title" > vers.c
#
#  Optional args:
#       variable name to put version string in (default="version")
#       title
###

path_to_vers_sh="`dirname $0`"

# force locale setting to C so things like date output as expected
LC_ALL=C

if test $# -gt 0 ; then
	VARIABLE="$1"
	shift
else
	VARIABLE="version"
fi

if test $# -gt 0 ; then
	TITLE="$*"
else
	TITLE="Graphics Editor (MGED)"
fi

# determine the behavior of head
case "x`echo 'head' | head -n 1 2>&1`" in
    *xhead*) HEAD_N="n " ;;
    *) HEAD_N="" ;;
esac

# determine the behavior of tail
case "x`echo 'tail' | tail -n 1 2>&1`" in
    *xtail*) TAIL_N="n " ;;
    *) TAIL_N="" ;;
esac

# Obtain RELEASE number
if test -r $path_to_vers_sh/../configure.ac ; then
	for i in 1 2 3 4 ; do
	    eval "`grep \"^[MP][AI][JNT][OC][RH]_VERSION=\" ${path_to_vers_sh}/../configure.ac`"
	    BRLCAD_VERSION="${MAJOR_VERSION}.${MINOR_VERSION}.${PATCH_VERSION}"
	done
	if test ! "x$BRLCAD_VERSION" = "x" ; then
		RELEASE="$BRLCAD_VERSION"
	else
		RELEASE='??.??.??'
	fi
else
	RELEASE='??.??.??'
fi

DIR=`pwd`
if test x$DIR = x; then DIR="/unknown"; fi

if test ! -w version ; then
	rm -f version; echo 0 > version; chmod 664 version
fi

awk '{version = $1 + 1; };END{printf "%d\n", version > "version"; }' < version

VERSION=`cat version`
DATE=`date`
PATH=$PATH:/usr/ucb:/usr/bsd
export PATH

# figure out what machine this is
HOST=$HOSTNAME
if test "x$HOST" = "x" ; then
    HOST="`hostname`"
fi
if test "x$HOST" = "x" ; then
    HOST="`uname -n`"
fi
if test "x$HOST" = "x" ; then
    HOST="//unknown//"
fi

# figure out who this is
if test "x$USER" = "x" ; then
	USER="$LOGNAME"
fi
if test "x$USER" = "x" ; then
	USER="$LOGIN"
fi
if test "x$USER" = "x" ; then
	USER="`whoami`"
fi
if test "x$USER" = "x" ; then
	USER="//unknown//"
fi

cat << EOF
char ${VARIABLE}[] = "\\
@@(#) BRL-CAD Release ${RELEASE}   ${TITLE}\n\\
    ${DATE}, Compilation ${VERSION}\n\\
    ${USER}@@${HOST}:${DIR}\n";
EOF

# Local Variables:
# mode: sh
# tab-width: 8
# sh-indentation: 4
# sh-basic-offset: 4
# indent-tabs-mode: t
# End:
# ex: shiftwidth=4 tabstop=8
@


14.13
log
@ws
@
text
@@


14.12
log
@update copyright to 2007
@
text
@d42 1
a42 1
#	sh vers.sh variable_name "this is a title" > vers.c
d45 2
a46 2
#	variable name to put version string in (default="version")
#	title
@


14.11
log
@should escape the quotes since they're inside quotes
@
text
@d5 1
a5 1
# Copyright (c) 2004-2006 United States Government as represented by
@


14.10
log
@use a somewhat more safe means to extract the version number from configure.ac
@
text
@d47 1
a47 2
#
# @@(#)$Header: /cvsroot/brlcad/brlcad/sh/vers.sh,v 14.9 2006/01/18 06:46:11 brlcad Exp $ (BRL)
d82 1
a82 1
	    eval "`grep "^[MP][AI][JNT][OC][RH]_VERSION=" ${path_to_vers_sh}/../configure.ac`"
@


14.9
log
@update copyright to 2006
@
text
@d48 1
a48 1
# @@(#)$Header: /cvsroot/brlcad/brlcad/sh/vers.sh,v 14.8 2005/11/11 21:34:28 brlcad Exp $ (BRL)
d83 2
a84 2
		version_script="`grep VERSION $path_to_vers_sh/../configure.ac | grep -v SUBST | head -${HEAD_N}$i | tail -${TAIL_N}1`"
		eval "$version_script"
@


14.8
log
@more consistency between the tail/head checking for the functionality of -n.  check for head and tail separately
@
text
@d5 1
a5 1
# Copyright (C) 2004-2005 United States Government as represented by
d48 1
a48 1
# @@(#)$Header: /cvsroot/brlcad/brlcad/sh/vers.sh,v 14.7 2005/11/01 09:04:39 brlcad Exp $ (BRL)
@


14.7
log
@accept a modified version of Stefan Fiedler's tail/head patch for -n # instead of -# as the line option.  this conforms to _POSIX2_VERSION 200112 and tools compiled against said posix version that allow run-time complaince forcing.
@
text
@d48 1
a48 1
# @@(#)$Header: /cvsroot/brlcad/brlcad/sh/vers.sh,v 14.6 2005/10/22 17:36:02 brlcad Exp $ (BRL)
d68 11
a78 9
# check for posix compliant tail/head -n option
TAIL="tail -"
if test "x`echo 'tail' | tail -n 1 2>&1`" = "xtail" ; then
    TAIL="tail -n "
fi
HEAD="head -"
if test "x`echo 'head' | head -n 1 2>&1`" = "xhead" ; then
    HEAD="head -n "
fi
d83 1
a83 1
		version_script="`grep VERSION $path_to_vers_sh/../configure.ac | grep -v SUBST | ${HEAD}$i | ${TAIL}1`"
@


14.6
log
@ws
@
text
@d48 1
a48 1
# @@(#)$Header: /cvsroot/brlcad/brlcad/sh/vers.sh,v 14.5 2005/05/12 12:33:46 brlcad Exp $ (BRL)
d68 10
d81 1
a81 1
		version_script="`grep VERSION $path_to_vers_sh/../configure.ac | grep -v SUBST | head -$i | tail -1`"
@


14.5
log
@solaris shell annoyingly will not evaluate multiple connected statements as one (i.e. doesn't know about the variables set until the eval is done), so evaluate them one line at a time.
@
text
@d15 1
a15 1
# 2. Redistributions in binary form must reproduce the above 
d48 1
a48 1
# @@(#)$Header: /cvsroot/brlcad/brlcad/sh/vers.sh,v 14.4 2005/02/21 18:02:54 brlcad Exp $ (BRL)
@


14.5.6.1
log
@merge changes from HEAD aka rel-7-6-4 to the rel-7-6-branch just in case someone peeks a gander or tries to continue/build the branch
@
text
@d15 1
a15 1
# 2. Redistributions in binary form must reproduce the above
d48 1
a48 1
# @@(#)$Header$ (BRL)
a67 12
# determine the behavior of head
case "x`echo 'head' | head -n 1 2>&1`" in
    *xhead*) HEAD_N="n " ;;
    *) HEAD_N="" ;;
esac

# determine the behavior of tail
case "x`echo 'tail' | tail -n 1 2>&1`" in
    *xtail*) TAIL_N="n " ;;
    *) TAIL_N="" ;;
esac

d71 1
a71 1
		version_script="`grep VERSION $path_to_vers_sh/../configure.ac | grep -v SUBST | head -${HEAD_N}$i | tail -${TAIL_N}1`"
@


14.4
log
@force locale setting to C so things like date output as expected
@
text
@d48 1
a48 1
# @@(#)$Header: /cvsroot/brlcad/brlcad/sh/vers.sh,v 14.3 2005/01/30 20:30:13 brlcad Exp $ (BRL)
d70 4
a73 2
	version_script=`grep VERSION $path_to_vers_sh/../configure.ac | grep -v SUBST | head -4`
	eval $version_script
@


14.3
log
@update copyright to 2005
@
text
@d48 1
a48 1
# @@(#)$Header: /cvsroot/brlcad/brlcad/sh/vers.sh,v 14.2 2004/12/17 21:01:05 morrison Exp $ (BRL)
d52 3
@


14.2
log
@assignment of copyright and BSD license
@
text
@d5 2
a6 2
# Copyright (c) 2004 United States Government as represented by the
# U.S. Army Research Laboratory.
d48 1
a48 1
# @@(#)$Header: /cvs/brlcad/sh/vers.sh,v 14.1 2004/11/16 19:42:12 morrison Exp $ (BRL)
@


14.1
log
@dawn of a new revision.  it shall be numbered 14 to match release 7.  begin the convergence by adding emacs/vi local variable footer blocks to encourage consistent formatting.
@
text
@d2 35
a36 1
#			  V E R S . S H
d48 1
a48 1
# @@(#)$Header: /cvs/brlcad/sh/vers.sh,v 11.5 2004/09/15 04:35:19 morrison Exp $ (BRL)
@


11.5
log
@machinetype.sh isn't really needed, so don't try to run it any more.  try a little harder to find the system name and user name.
@
text
@d14 1
a14 1
# @@(#)$Header: /cvs/brlcad/sh/vers.sh,v 11.4 2004/07/26 17:31:20 morrison Exp $ (BRL)
d90 9
@


11.4
log
@solaris shell does not support the bang, make test handle it
@
text
@d14 1
a14 1
# @@(#)$Header: /n/xoff/cvs/brlcad/sh/vers.sh,v 11.3 2004/07/25 04:08:42 morrison Exp $ (BRL)
a30 6
if test -x $path_to_vers_sh/machinetype.sh ; then
	eval `$path_to_vers_sh/machinetype.sh -b`	# sets MACHINE, UNIXTYPE, etc
else
	eval `machinetype.sh -b`	# sets MACHINE, UNIXTYPE, etc
fi

d57 11
a67 4
if test x$UNIXTYPE = xBSD -o -f /usr/ucb/hostname -o -f /usr/bsd/hostname ; then
	HOST=`hostname`
else
	HOST=`uname -n`
d70 1
d75 7
a81 1
	USER=unknown
@


11.3
log
@ignore the new AC_SUBST version lines
@
text
@d14 1
a14 1
# @@(#)$Header: /n/xoff/cvs/brlcad/sh/vers.sh,v 11.2 2004/05/13 14:27:21 morrison Exp $ (BRL)
d41 1
a41 1
	if ! test "x$BRLCAD_VERSION" = "x" ; then
@


11.2
log
@comment on how output goes to stdout now
@
text
@d14 1
a14 1
# @@(#)$Header: /c/CVS/brlcad/sh/vers.sh,v 11.1 2004/05/13 14:11:45 morrison Exp $ (BRL)
d39 1
a39 1
	version_script=`grep VERSION $path_to_vers_sh/../configure.ac | head -4`
@


11.1
log
@initial vers.sh for vers.c generation, based off former newvers.sh/newvers2.sh scripts.  updated to not assume machinetype.sh is in path, does not check for gen.sh any more (since it's gone), and pulls the version from configure.ac
@
text
@d4 5
a8 2
# Update the "version" file, and create a new "vers.c" from it.
# May be run in any subdirectory of the source tree.
d14 1
a14 1
# @@(#)$Header: $ (BRL)
@

