head	1.7;
access;
symbols
	ansi-20040405-merged:1.5.4.1
	postmerge-20040405-ansi:1.6
	premerge-20040404-ansi:1.6
	postmerge-autoconf:1.6
	autoconf-freeze:1.5.12.1
	premerge-autoconf:1.6
	postmerge-20040315-windows:1.6
	premerge-20040315-windows:1.6
	windows-20040315-freeze:1.5.6.1
	autoconf-20031203:1.5
	autoconf-20031202:1.5
	autoconf-branch:1.5.0.12
	phong-branch:1.5.0.10
	photonmap-branch:1.5.0.8
	rel-6-1-DP:1.5
	windows-branch:1.5.0.6
	rel-6-0-2:1.5
	ansi-branch:1.5.0.4
	rel-6-0-1-branch:1.5.0.2
	hartley-6-0-post:1.5
	hartley-6-0-pre:1.5
	rel-6-0-1:1.5
	rel-6-0:1.5
	rel-5-4:1.4.2.1
	offsite-5-3-pre:1.5
	rel-5-3:1.4.2.1
	rel-5-2:1.4.2.1
	rel-5-1-branch:1.4.0.2
	rel-5-1:1.4;
locks; strict;
comment	@# @;


1.7
date	2004.05.21.16.41.19;	author morrison;	state dead;
branches;
next	1.6;

1.6
date	2004.02.02.17.39.43;	author morrison;	state Exp;
branches;
next	1.5;

1.5
date	2000.07.21.21.09.11;	author bparker;	state Exp;
branches
	1.5.4.1
	1.5.6.1
	1.5.12.1;
next	1.4;

1.4
date	2000.05.12.21.54.36;	author bparker;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2000.03.03.23.14.55;	author bparker;	state Exp;
branches;
next	1.2;

1.2
date	2000.02.25.21.50.32;	author bparker;	state Exp;
branches;
next	1.1;

1.1
date	2000.01.31.21.01.14;	author bparker;	state Exp;
branches;
next	;

1.4.2.1
date	2000.08.16.17.02.25;	author bparker;	state Exp;
branches;
next	;

1.5.4.1
date	2004.03.17.21.23.04;	author morrison;	state Exp;
branches;
next	;

1.5.6.1
date	2004.03.11.23.48.51;	author morrison;	state Exp;
branches;
next	;

1.5.12.1
date	2004.02.12.18.34.48;	author erikg;	state Exp;
branches;
next	;


desc
@@


1.7
log
@moved to src/tclscripts/
@
text
@##                 D A T A B A S E . T C L
#
# Author -
#	Bob Parker
#
# Source -
#	The U. S. Army Research Laboratory
#	Aberdeen Proving Ground, Maryland  21005
#
# Distribution Notice -
#	Re-distribution of this software is restricted, as described in
#       your "Statement of Terms and Conditions for the Release of
#       The BRL-CAD Package" agreement.
#
# Copyright Notice -
#       This software is Copyright (C) 1998-2004 by the United States Army
#       in all countries except the USA.  All rights reserved.
#
# Description -
#	The Database class inherits from Db and Drawable.
#
class Database {
    inherit Db Drawable

    constructor {file} {
	Db::constructor $file
	Drawable::constructor [Db::get_dbname]
    } {}

    destructor {}

    public method ? {}
    public method apropos {key}
    public method help {args}
    public method getUserCmds {}
}

body Database::? {} {
    return "[Db::?]\n[Drawable::?]"
}

body Database::apropos {key} {
    return "[Db::apropos $key] [Drawable::apropos $key]"
}

body Database::help {args} {
    if {[llength $args] && [lindex $args 0] != {}} {
	if {[catch {eval Db::help $args} result]} {
	    set result [eval Drawable::help $args]
	}

	return $result
    }

    # list all help messages for Db and Drawable
    return "[Db::help][Drawable::help]"
}

body Database::getUserCmds {} {
    return "[Db::getUserCmds] [Drawable::getUserCmds]"
}
@


1.6
log
@update copyright to include span through 2003
@
text
@@


1.5
log
@Add help methods.
@
text
@d16 1
a16 1
#       This software is Copyright (C) 1998 by the United States Army
@


1.5.4.1
log
@sync branch with HEAD
@
text
@d16 1
a16 1
#       This software is Copyright (C) 1998-2004 by the United States Army
@


1.5.6.1
log
@sync to HEAD...
@
text
@d16 1
a16 1
#       This software is Copyright (C) 1998-2004 by the United States Army
@


1.5.12.1
log
@merge from HEAD
@
text
@d16 1
a16 1
#       This software is Copyright (C) 1998-2004 by the United States Army
@


1.4
log
@*- changed get_name to get_dbname
@
text
@d30 23
a52 1
    destructor {
d54 7
@


1.4.2.1
log
@Make use of Help object.
@
text
@d30 1
a30 23
    destructor {}

    public method ? {}
    public method apropos {key}
    public method help {args}
    public method getUserCmds {}
}

body Database::? {} {
    return "[Db::?]\n[Drawable::?]"
}

body Database::apropos {key} {
    return "[Db::apropos $key] [Drawable::apropos $key]"
}

body Database::help {args} {
    if {[llength $args] && [lindex $args 0] != {}} {
	if {[catch {eval Db::help $args} result]} {
	    set result [eval Drawable::help $args]
	}

	return $result
a31 7

    # list all help messages for Db and Drawable
    return "[Db::help][Drawable::help]"
}

body Database::getUserCmds {} {
    return "[Db::getUserCmds] [Drawable::getUserCmds]"
@


1.3
log
@*- cleanup
@
text
@d27 1
a27 1
	Drawable::constructor [Db::get_name]
@


1.2
log
@*- now inheriting from Db and Drawable
@
text
@d25 1
a25 1
    constructor {file args} {
d28 1
a28 4
    } {
	# process options
	eval configure $args
    }
@


1.1
log
@Database class
@
text
@d20 1
a20 3
#	The Database class is comprised of a database object and a
#       drawable geometry object. When a database object is opened
#       a drawable geometry object is created and associated with it.
d23 1
a23 7
    protected variable db ""
    protected variable dg ""
    public variable name ""

    constructor {args} {
	set db [subst $this]_db
	set dg [subst $this]_dg
d25 4
a33 142
	# close the current drawable geometry object
	if {[info commands $dg] != ""} {
	    $dg close
	}

	# close the current database
	if {[info commands $db] != ""} {
	    $db close
	}
    }

    # database methods
    method open {args}
    method match {args}
    method get {args}
    method put {args}
    method adjust {args}
    method form {args}
    method tops {args}
    method rt_gettrees {args}
    method dump {args}
    method dbip {args}
    method ls {args}
    method l {args}
    method listeval {args}
    method paths {args}
    method expand {args}
    method kill {args}
    method killall {args}
    method killtree {args}
    method cp {args}
    method mv {args}
    method mvall {args}
    method concat {args}
    method dup {args}
    method g {args}
    method rm {args}
    method r {args}
    method c {args}
    method comb {args}
    method find {args}
    method whichair {args}
    method whichid {args}
    method title {args}
    method tree {args}
    method color {args}
    method prcolor {args}
    method tol {args}
    method push {args}
    method whatid {args}
    method keep {args}
    method cat {args}
    method i {args}

    # drawable geometry methods
    method draw {args}
    method erase {args}
    method zap {}
    method who {args}

    method blast {args}
    method clear {}
    method ev {args}
    method erase_all {args}
    method overlay {args}
    method rt {args}
    method rtcheck {args}
    method vdraw {args}
}

configbody Database::name {
    open $name
}

body Database::draw {args} {
    eval $dg draw $args
}

body Database::erase {args} {
    eval $dg erase $args
}

body Database::zap {} {
    $dg zap
}

body Database::who {args} {
    eval $dg who $args
}

body Database::blast {args} {
    eval $dg blast $args
}

body Database::clear {} {
    eval $dg clear
}

body Database::ev {args} {
    eval $dg ev $args
}

body Database::erase_all {args} {
    eval $dg erase_all $args
}

body Database::overlay {args} {
    eval $dg overlay $args
}

body Database::rt {args} {
    eval $dg rt $args
}

body Database::rtcheck {args} {
    eval $dg rtcheck $args
}

body Database::vdraw {args} {
    eval $dg vdraw $args
}

body Database::open {args} {
    set len [llength $args]

    if {$len > 1} {
	return -code error "open:: too many arguments"
    }

    # get the current database name
    if {$len == 0} {
	return $name
    }

    # close the current drawable geometry object
    if {[info commands $dg] != ""} {
	$dg close
    }

    # close the current database
    if {[info commands $db] != ""} {
	$db close
a34 171

    # open a database
    set result [catch {wdb_open $db db $args} msg]
    dg_open $dg $db

    if {$result} {
	return -code $result $msg
    }

    set name $args
    return $name
}

body Database::match {args} {
    eval $db match $args
}

body Database::get {args} {
    eval $db get $args
}

body Database::put {args} {
    eval $db put $args
}

body Database::adjust {args} {
    eval $db adjust $args
}

body Database::form {args} {
    eval $db form $args
}

body Database::tops {args} {
    eval $db tops $args
}

body Database::rt_gettrees {args} {
    eval $db rt_gettrees $args
}

body Database::dump {args} {
    eval $db dump $args
}

body Database::dbip {} {
    eval $db dbip
}

body Database::ls {args} {
    eval $db ls $args
}

body Database::l {args} {
    eval $db l $args
}

body Database::listeval {args} {
    eval $db listeval $args
}

body Database::paths {args} {
    eval $db paths $args
}

body Database::expand {args} {
    eval $db expand $args
}

body Database::kill {args} {
    eval $db kill $args
}

body Database::killall {args} {
    eval $db killall $args
}

body Database::killtree {args} {
    eval $db killtree $args
}

body Database::cp {args} {
    eval $db cp $args
}

body Database::mv {args} {
    eval $db mvall $args
}

body Database::mvall {args} {
    eval $db mvall $args
}

body Database::concat {args} {
    eval $db concat $args
}

body Database::dup {args} {
    eval $db dup $args
}

body Database::g {args} {
    eval $db g $args
}

body Database::rm {args} {
    eval $db rm $args
}

body Database::r {args} {
    eval $db r $args
}

body Database::c {args} {
    eval $db c $args
}

body Database::comb {args} {
    eval $db comb $args
}

body Database::find {args} {
    eval $db find $args
}

body Database::whichair {args} {
    eval $db whichair $args
}

body Database::whichid {args} {
    eval $db whichid $args
}

body Database::title {args} {
    eval $db title $args
}

body Database::tree {args} {
    eval $db tree $args
}

body Database::color {args} {
    eval $db color $args
}

body Database::prcolor {args} {
    eval $db prcolor $args
}

body Database::tol {args} {
    eval $db tol $args
}

body Database::push {args} {
    eval $db push $args
}

body Database::whatid {args} {
    eval $db whatid $args
}

body Database::keep {args} {
    eval $db keep $args
}

body Database::cat {args} {
    eval $db cat $args
}

body Database::i {args} {
    eval $db i $args
@

