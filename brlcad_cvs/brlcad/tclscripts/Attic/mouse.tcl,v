head	1.4;
access;
symbols
	ansi-20040405-merged:1.2.4.1
	postmerge-20040405-ansi:1.3
	premerge-20040404-ansi:1.3
	postmerge-autoconf:1.3
	autoconf-freeze:1.2.12.1
	premerge-autoconf:1.3
	postmerge-20040315-windows:1.3
	premerge-20040315-windows:1.3
	windows-20040315-freeze:1.2.6.1
	autoconf-20031203:1.2
	autoconf-20031202:1.2
	autoconf-branch:1.2.0.12
	phong-branch:1.2.0.10
	photonmap-branch:1.2.0.8
	rel-6-1-DP:1.2
	windows-branch:1.2.0.6
	rel-6-0-2:1.2
	ansi-branch:1.2.0.4
	rel-6-0-1-branch:1.2.0.2
	hartley-6-0-post:1.2
	hartley-6-0-pre:1.2
	rel-6-0-1:1.2
	rel-6-0:1.2
	rel-5-4:1.1.2.2
	offsite-5-3-pre:1.2
	rel-5-3:1.1.2.2
	rel-5-1-branch:1.1.0.2;
locks; strict;
comment	@# @;


1.4
date	2004.05.21.16.41.18;	author morrison;	state dead;
branches;
next	1.3;

1.3
date	2004.02.02.17.39.42;	author morrison;	state Exp;
branches;
next	1.2;

1.2
date	2000.11.17.22.49.53;	author bparker;	state Exp;
branches
	1.2.4.1
	1.2.6.1
	1.2.12.1;
next	1.1;

1.1
date	2000.11.17.15.32.50;	author bparker;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2000.11.17.15.34.10;	author bparker;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	2000.11.17.22.46.19;	author bparker;	state Exp;
branches;
next	;

1.2.4.1
date	2004.03.17.21.23.04;	author morrison;	state Exp;
branches;
next	;

1.2.6.1
date	2004.03.11.23.48.41;	author morrison;	state Exp;
branches;
next	;

1.2.12.1
date	2004.02.12.18.34.47;	author erikg;	state Exp;
branches;
next	;


desc
@@


1.4
log
@moved to src/tclscripts/
@
text
@#			M O U S E . T C L
#
# Author -
#	Robert Parker
#
# Source -
#	The U. S. Army Ballistic Research Laboratory
#	Aberdeen Proving Ground, Maryland  21005
#  
# Distribution Notice -
#	Re-distribution of this software is restricted, as described in
#	your "Statement of Terms and Conditions for the Release of
#	The BRL-CAD Package" agreement.
#
# Copyright Notice -
#	This software is Copyright (C) 1995-2004 by the United States Army
#	in all countries except the USA.  All rights reserved.
#
# Description -
#       Mouse routines.

## - place_near_mouse
#
# Places window near the mouse while keeping the 
# window under the mouse and completely (mostly)
# on the screen.
#
proc place_near_mouse {top} {
    if {[winfo toplevel $top] != $top} {
	error "place_near_mouse: $top is not a toplevel window"
    }

    set pxy [winfo pointerxy $top]
    set px [lindex $pxy 0]
    set py [lindex $pxy 1]

    wm withdraw $top
    update
    set width [winfo reqwidth $top]
    set height [winfo reqheight $top]
    set screenwidth [winfo screenwidth $top]
    set screenheight [winfo screenheight $top]

    set x [expr {int($px - $width * 0.5)}]
    set y [expr {int($py - $height * 0.5)}]

    if {$x < 0} {
	set x 0
    } elseif {[expr {$x + $width}] > $screenwidth} {
	set x [expr {$screenwidth - $width}]
    }

    if {$y < 0} {
	set y 0
    } elseif {[expr {$y + $height}] > $screenheight} {
	set y [expr {$screenheight - $height}]
    }

    wm geometry $top +$x+$y
    wm deiconify $top
}
@


1.3
log
@update copyright to include span through 2003
@
text
@@


1.2
log
@Rewrote place_near_mouse to be more
accurate about window placement.
@
text
@d16 1
a16 1
#	This software is Copyright (C) 1995 by the United States Army
@


1.2.4.1
log
@sync branch with HEAD
@
text
@d16 1
a16 1
#	This software is Copyright (C) 1995-2004 by the United States Army
@


1.2.6.1
log
@sync to HEAD...
@
text
@d16 1
a16 1
#	This software is Copyright (C) 1995-2004 by the United States Army
@


1.2.12.1
log
@merge from HEAD
@
text
@d16 1
a16 1
#	This software is Copyright (C) 1995-2004 by the United States Army
@


1.1
log
@Mouse utility routines.
@
text
@d22 11
a32 1
proc place_near_mouse { top } {
d34 18
a51 2
    set x [lindex $pxy 0]
    set y [lindex $pxy 1]
d53 5
a57 2
    set x [expr {int($x - [winfo reqwidth $top] * 0.5)}]
    set y [expr {int($y - [winfo reqheight $top] * 0.5)}]
d59 2
a60 1
    catch { wm geometry $top +$x+$y }
@


1.1.2.1
log
@Mouse utility routines.
@
text
@@


1.1.2.2
log
@Rewrote place_near_mouse to be more
accurate about window placement.
@
text
@d22 1
a22 11
## - place_near_mouse
#
# Places window near the mouse while keeping the 
# window under the mouse and completely (mostly)
# on the screen.
#
proc place_near_mouse {top} {
    if {[winfo toplevel $top] != $top} {
	error "place_near_mouse: $top is not a toplevel window"
    }

d24 2
a25 18
    set px [lindex $pxy 0]
    set py [lindex $pxy 1]

    wm withdraw $top
    update
    set width [winfo reqwidth $top]
    set height [winfo reqheight $top]
    set screenwidth [winfo screenwidth $top]
    set screenheight [winfo screenheight $top]

    set x [expr {int($px - $width * 0.5)}]
    set y [expr {int($py - $height * 0.5)}]

    if {$x < 0} {
	set x 0
    } elseif {[expr {$x + $width}] > $screenwidth} {
	set x [expr {$screenwidth - $width}]
    }
d27 2
a28 5
    if {$y < 0} {
	set y 0
    } elseif {[expr {$y + $height}] > $screenheight} {
	set y [expr {$screenheight - $height}]
    }
d30 1
a30 2
    wm geometry $top +$x+$y
    wm deiconify $top
@


