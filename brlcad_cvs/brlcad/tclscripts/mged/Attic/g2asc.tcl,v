head	1.10;
access;
symbols
	ansi-20040405-merged:1.8.4.1
	postmerge-20040405-ansi:1.9
	premerge-20040404-ansi:1.9
	postmerge-autoconf:1.9
	autoconf-freeze:1.9
	premerge-autoconf:1.9
	postmerge-20040315-windows:1.9
	premerge-20040315-windows:1.9
	windows-20040315-freeze:1.8.6.2
	autoconf-20031203:1.9
	autoconf-20031202:1.9
	autoconf-branch:1.9.0.6
	phong-branch:1.9.0.4
	photonmap-branch:1.9.0.2
	rel-6-1-DP:1.8
	windows-branch:1.8.0.6
	rel-6-0-2:1.8
	ansi-branch:1.8.0.4
	rel-6-0-1-branch:1.8.0.2
	hartley-6-0-post:1.8
	hartley-6-0-pre:1.8
	rel-6-0-1:1.8
	rel-6-0:1.8
	rel-5-4:1.5.2.1
	offsite-5-3-pre:1.6
	rel-5-3:1.5.2.1
	rel-5-2:1.5
	rel-5-1-branch:1.5.0.2
	rel-5-1:1.5
	rel-5-0:1.5
	rel-5-0-beta:1.4;
locks; strict;
comment	@# @;


1.10
date	2004.05.21.16.41.24;	author morrison;	state dead;
branches;
next	1.9;

1.9
date	2003.03.13.19.45.31;	author jra;	state Exp;
branches;
next	1.8;

1.8
date	2001.09.17.19.14.03;	author bparker;	state Exp;
branches
	1.8.4.1
	1.8.6.1;
next	1.7;

1.7
date	2001.04.03.22.33.03;	author bparker;	state Exp;
branches;
next	1.6;

1.6
date	2000.12.22.00.35.15;	author bparker;	state Exp;
branches;
next	1.5;

1.5
date	99.09.01.18.08.25;	author bparker;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	99.05.06.17.37.48;	author bparker;	state Exp;
branches;
next	1.3;

1.3
date	99.01.19.22.31.29;	author bparker;	state Exp;
branches;
next	1.2;

1.2
date	98.06.09.18.05.20;	author bparker;	state Exp;
branches;
next	1.1;

1.1
date	98.05.26.14.43.37;	author bparker;	state Exp;
branches;
next	;

1.5.2.1
date	2000.12.22.00.02.28;	author bparker;	state Exp;
branches;
next	;

1.8.4.1
date	2004.03.17.21.23.11;	author morrison;	state Exp;
branches;
next	;

1.8.6.1
date	2002.09.26.23.04.17;	author morrison;	state Exp;
branches;
next	1.8.6.2;

1.8.6.2
date	2004.03.11.23.48.58;	author morrison;	state Exp;
branches;
next	;


desc
@@


1.10
log
@moved to src/tclscripts/
@
text
@#
#			G 2 A S C . T C L
#
#	Tool for saving the current database to an ascii file.
#
#	Author - Robert G. Parker
#

proc init_g2asc { id } {
    global mged_gui
    global ::tk::Priv

    if {[opendb] == ""} {
	cad_dialog $::tk::Priv(cad_dialog) $mged_gui($id,screen) "No database." \
		"No database has been opened!" info 0 OK
	return
    }

    set top .$id.ascii
    catch { destroy $top }

    set db_name [_mged_opendb]
    set default_name [file rootname $db_name].asc
    set ret [cad_input_dialog $top $mged_gui($id,screen) "Save as Ascii"\
	    "Enter ascii filename:" ascii_filename\
	    $default_name 0 {{ summary "Enter a filename to indicate where
to put the acsii converted database."}} OK Cancel]


    if { $ascii_filename != "" } {
	if { $ret == 0 } {
	    if [file exists $ascii_filename] {
		set result [cad_dialog $::tk::Priv(cad_dialog) $mged_gui($id,screen)\
			"Overwrite $ascii_filename?"\
			"Overwrite $ascii_filename?"\
			"" 0 OK Cancel]

		if { $result } {
		    return
		}
	    }

	    catch {exec g2asc $db_name $ascii_filename} msg
	}
    } else {
	if { $ret == 0 } {
	    cad_dialog $::tk::Priv(cad_dialog) $mged_gui($id,screen)\
		    "No file name specified!"\
		    "No file name specified!"\
		    "" 0 OK
	}
    }
}
@


1.9
log
@*** empty log message ***
@
text
@@


1.8
log
@*- call g2asc using new command syntax
@
text
@d11 1
a11 1
    global tkPriv
d14 1
a14 1
	cad_dialog $tkPriv(cad_dialog) $mged_gui($id,screen) "No database." \
d33 1
a33 1
		set result [cad_dialog $tkPriv(cad_dialog) $mged_gui($id,screen)\
d47 1
a47 1
	    cad_dialog $tkPriv(cad_dialog) $mged_gui($id,screen)\
@


1.8.4.1
log
@sync branch with HEAD
@
text
@d11 1
a11 1
    global ::tk::Priv
d14 1
a14 1
	cad_dialog $::tk::Priv(cad_dialog) $mged_gui($id,screen) "No database." \
d33 1
a33 1
		set result [cad_dialog $::tk::Priv(cad_dialog) $mged_gui($id,screen)\
d47 1
a47 1
	    cad_dialog $::tk::Priv(cad_dialog) $mged_gui($id,screen)\
@


1.8.6.1
log
@Modifications (on a 6.0 source distribution) for initial port to windows (merged with sources close to 6.0.2)
@
text
@d11 1
a11 1
    variable ::tk::Priv
d14 1
a14 1
	cad_dialog $Priv(cad_dialog) $mged_gui($id,screen) "No database." \
d33 1
a33 1
		set result [cad_dialog $Priv(cad_dialog) $mged_gui($id,screen)\
d47 1
a47 1
	    cad_dialog $Priv(cad_dialog) $mged_gui($id,screen)\
@


1.8.6.2
log
@sync to HEAD...
@
text
@d11 1
a11 1
    global ::tk::Priv
d14 1
a14 1
	cad_dialog $::tk::Priv(cad_dialog) $mged_gui($id,screen) "No database." \
d33 1
a33 1
		set result [cad_dialog $::tk::Priv(cad_dialog) $mged_gui($id,screen)\
d47 1
a47 1
	    cad_dialog $::tk::Priv(cad_dialog) $mged_gui($id,screen)\
@


1.7
log
@*- mods requested by Eric regarding consistency
   when using capitalization in the GUI
@
text
@d43 1
a43 1
	    catch {exec g2asc < $db_name > $ascii_filename} msg
@


1.6
log
@Use tkPriv(cad_dialog) for dialog name.
@
text
@d27 1
a27 1
to put the acsii converted database."}} OK CANCEL]
d36 1
a36 1
			"" 0 OK CANCEL]
@


1.5
log
@*- check for no database open
@
text
@d11 1
d14 1
a14 1
	cad_dialog .$id.uncool $mged_gui($id,screen) "No database." \
d33 1
a33 1
		set result [cad_dialog $top $mged_gui($id,screen)\
d47 1
a47 1
	    cad_dialog $top $mged_gui($id,screen)\
@


1.5.2.1
log
@Use tkPriv(cad_dialog) for dialog name.
@
text
@a10 1
    global tkPriv
d13 1
a13 1
	cad_dialog $tkPriv(cad_dialog) $mged_gui($id,screen) "No database." \
d32 1
a32 1
		set result [cad_dialog $tkPriv(cad_dialog) $mged_gui($id,screen)\
d46 1
a46 1
	    cad_dialog $tkPriv(cad_dialog) $mged_gui($id,screen)\
@


1.4
log
@*- add help on context
@
text
@d12 6
@


1.3
log
@*- cleanup variables
@
text
@d18 4
a21 1
	    "Enter ascii filename:" ascii_filename $default_name 0 OK CANCEL]
@


1.2
log
@*- use cad_dialog instead of mged_dialog
*- use cad_input_dialog instead of mged_input_dialog
@
text
@d10 1
a10 1
    global player_screen
d17 1
a17 1
    set ret [cad_input_dialog $top $player_screen($id) "Save as Ascii"\
d23 1
a23 1
		set result [cad_dialog $top $player_screen($id)\
d37 1
a37 1
	    cad_dialog $top $player_screen($id)\
@


1.1
log
@*- Tool for saving the current database to an ascii file.
@
text
@d17 1
a17 1
    set ret [mged_input_dialog $top $player_screen($id) "Save as Ascii"\
d23 1
a23 1
		set result [mged_dialog $top $player_screen($id)\
d37 1
a37 1
	    mged_dialog $top $player_screen($id)\
@
