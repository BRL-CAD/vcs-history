head	1.4;
access;
symbols
	ansi-20040405-merged:1.3
	postmerge-20040405-ansi:1.3
	premerge-20040404-ansi:1.3
	postmerge-autoconf:1.3
	autoconf-freeze:1.3
	premerge-autoconf:1.3
	postmerge-20040315-windows:1.3
	premerge-20040315-windows:1.3
	windows-20040315-freeze:1.3
	autoconf-20031203:1.3
	autoconf-20031202:1.3
	autoconf-branch:1.3.0.12
	phong-branch:1.3.0.10
	photonmap-branch:1.3.0.8
	rel-6-1-DP:1.3
	windows-branch:1.3.0.6
	rel-6-0-2:1.3
	ansi-branch:1.3.0.4
	rel-6-0-1-branch:1.3.0.2
	hartley-6-0-post:1.3
	hartley-6-0-pre:1.3
	rel-6-0-1:1.3
	rel-6-0:1.3
	rel-5-4:1.2.2.1
	offsite-5-3-pre:1.2
	rel-5-3:1.2.2.1
	rel-5-2:1.2
	rel-5-1-branch:1.2.0.2
	rel-5-1:1.2
	rel-5-0:1.2
	rel-5-0-beta:1.2;
locks; strict;
comment	@# @;


1.4
date	2004.05.21.16.41.24;	author morrison;	state dead;
branches;
next	1.3;

1.3
date	2001.03.19.22.20.20;	author butler;	state Exp;
branches;
next	1.2;

1.2
date	98.05.01.21.08.28;	author bparker;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	98.04.09.20.59.25;	author bparker;	state Exp;
branches;
next	;

1.2.2.1
date	2000.10.20.17.20.52;	author bparker;	state Exp;
branches;
next	;


desc
@@


1.4
log
@moved to src/tclscripts/
@
text
@#
#			I L L U M . T C L
#
#	Author -
#		Robert G. Parker
#
#	Description -
#		Tcl routines to illuminate solids/objects/matrices.
#

#	Ensure that all commands that this script uses without defining
#	are provided by the calling application
check_externs "_mged_press _mged_ill _mged_matpick"

proc solid_illum {spath {ri 1}} {
    set state [_mged_status state]

    switch $state {
	VIEWING {
	    _mged_press sill
	}
	default {
	    _mged_press reject
	    _mged_press sill
	}
    }
    
    _mged_ill -n -i $ri $spath
}

proc matrix_illum { spath path_pos {ri 1}} {
    set state [_mged_status state]

    switch $state {
	VIEWING {
	    _mged_press oill
	    _mged_ill -i $ri $spath
	}
	"OBJ PICK" {
	    _mged_ill -i $ri $spath
	}
	default {
	    _mged_press reject
	    _mged_press oill
	    _mged_ill -i $ri $spath
	}
    }

    _mged_matpick -n $path_pos
}
@


1.3
log
@patches to merge 5.3 into 6.0
@
text
@@


1.2
log
@modified procs: solid_illum and matrix_illum
@
text
@d15 1
a15 1
proc solid_illum { spath } {
d28 1
a28 1
    _mged_ill -n $spath
d31 1
a31 1
proc matrix_illum { spath path_pos } {
d37 1
a37 1
	    _mged_ill $spath
d40 1
a40 1
	    _mged_ill $spath
d45 1
a45 1
	    _mged_ill $spath
@


1.2.2.1
log
@Use the new -i option for the
sed and ill commands.
@
text
@d15 1
a15 1
proc solid_illum {spath {ri 1}} {
d28 1
a28 1
    _mged_ill -n -i $ri $spath
d31 1
a31 1
proc matrix_illum { spath path_pos {ri 1}} {
d37 1
a37 1
	    _mged_ill -i $ri $spath
d40 1
a40 1
	    _mged_ill -i $ri $spath
d45 1
a45 1
	    _mged_ill -i $ri $spath
@


1.1
log
@Tcl routines to illuminate solids/objects/matrices.
@
text
@d15 2
a16 3
proc solid_illum { w x y illum_only } {
    $w selection clear 0 end
    $w selection set @@$x,$y
d18 8
a25 21
    _mged_press sill

    if {$illum_only} {
	_mged_ill -n [$w get @@$x,$y]
    } else {
	_mged_ill [$w get @@$x,$y]
    }
}

proc obj_illum { id w x y illum_only } {
    $w selection clear 0 end
    $w selection set @@$x,$y

    _mged_press oill

    if {$illum_only} {
	_mged_ill -n [$w get @@$x,$y]
    } else {
	set item [$w get @@$x,$y]
	_mged_ill $item
	build_matrix_menu $id $item
d27 2
d31 2
a32 3
proc matrix_illum { w x y illum_only } {
    $w selection clear 0 end
    $w selection set @@$x,$y
d34 13
a46 4
    if {$illum_only} {
	_mged_matpick -n [$w index @@$x,$y]
    } else {
	_mged_matpick [$w index @@$x,$y]
a47 14
}

proc comb_illum { w x y } {
    $w selection clear 0 end
    $w selection set @@$x,$y

    set comb [$w get @@$x,$y]

    set paths [_mged_x -1]
    set path_index [lsearch $paths *$comb*]
    set path [lindex $paths $path_index]
    regexp "\[^/\].*" $path match
    set path_components [split $match /]
    set path_index [lsearch -exact $path_components $comb]
d49 1
a49 3
    _mged_press oill
    _mged_ill $path
    _mged_matpick $path_index
@
