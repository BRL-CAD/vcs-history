head	1.5;
access;
symbols
	rel-7-10-4:1.3
	STABLE:1.3.0.2
	rel-7-10-2:1.3
	rel-7-10-0:1.3
	rel-7-8-4:1.3
	rel-7-8-2:1.2
	rel-7-8-0:1.2
	trimnurbs-branch:1.2.0.2
	help:1.2
	temp_tag:1.2
	bobWinPort-20051223-freeze:1.1.2.1
	postmerge-20051223-bobWinPort:1.2
	bobWinPort:1.1.0.2;
locks; strict;
comment	@# @;


1.5
date	2007.09.25.16.31.43;	author brlcad;	state dead;
branches;
next	1.4;

1.4
date	2007.09.14.15.21.24;	author erikgreenwald;	state Exp;
branches;
next	1.3;

1.3
date	2006.06.30.17.19.43;	author bob1961;	state Exp;
branches;
next	1.2;

1.2
date	2005.12.23.21.26.40;	author bob1961;	state Exp;
branches;
next	1.1;

1.1
date	2005.09.08.19.38.47;	author bob1961;	state dead;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2005.09.08.19.38.47;	author bob1961;	state Exp;
branches;
next	;


desc
@@


1.5
log
@retemplatize pkgIndex.tcl so that the appropriate paths are searched for the blt library, include the source directory in the search just in case we're running uninstalled.
@
text
@# Tcl package index file, version 1.0

proc LoadBLT { version dir } {

    set prefix "lib"
    set suffix [info sharedlibextension]
    regsub {\.} $version {} version_no_dots

    # Determine whether to load the full BLT library or
    # the "lite" tcl-only version.

    if { [info commands tk] == "tk" } {
        set name ${prefix}BLT${version_no_dots}${suffix}
    } else {
        set name ${prefix}BLTlite${version_no_dots}${suffix}
    }

    global tcl_platform
    if { $tcl_platform(platform) == "unix" } {
	set library [file join $dir $name]
	if { ![file exists $library] } {
	    # Try the parent directory.
	    set library [file join [file dirname $dir] $name]
	}
	if { ![file exists $library] } {
	    # Fall back to default path.
	    set library [file join "/usr/brlcad/lib/blt2.4" $name]
	}
    } else {
	set library $name
    }
    load $library BLT
}

set version "2.4"

package ifneeded BLT $version [list LoadBLT $version $dir]

# End of package index file
@


1.4
log
@removed trailing whitespace
@
text
@@


1.3
log
@Change default library path.
@
text
@d11 1
a11 1
    
d17 1
a17 1
    
@


1.2
log
@Merge of bobWinPort
@
text
@d26 2
a27 2
	    # Default to the path generated at compilation.
	    set library [file join "c:/cygwin/home/bob/src/Archer/brlcadWin/lib/blt2.4z" $name]
@


1.1
log
@file pkgIndex.tcl was initially added on branch bobWinPort.
@
text
@d1 39
@


1.1.2.1
log
@Initial check-in
@
text
@a0 39
# Tcl package index file, version 1.0

proc LoadBLT { version dir } {

    set prefix "lib"
    set suffix [info sharedlibextension]
    regsub {\.} $version {} version_no_dots

    # Determine whether to load the full BLT library or
    # the "lite" tcl-only version.
    
    if { [info commands tk] == "tk" } {
        set name ${prefix}BLT${version_no_dots}${suffix}
    } else {
        set name ${prefix}BLTlite${version_no_dots}${suffix}
    }
    
    global tcl_platform
    if { $tcl_platform(platform) == "unix" } {
	set library [file join $dir $name]
	if { ![file exists $library] } {
	    # Try the parent directory.
	    set library [file join [file dirname $dir] $name]
	}
	if { ![file exists $library] } {
	    # Default to the path generated at compilation.
	    set library [file join "c:/cygwin/home/bob/src/Archer/brlcadWin/lib/blt2.4z" $name]
	}
    } else {
	set library $name
    }
    load $library BLT
}

set version "2.4"

package ifneeded BLT $version [list LoadBLT $version $dir]

# End of package index file
@

