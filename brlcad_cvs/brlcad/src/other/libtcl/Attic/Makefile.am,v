head	14.12;
access;
symbols
	stable-branch:14.4
	rel-7-8-4:14.10
	rel-7-8-2:14.9
	rel-7-8-0:14.9
	trimnurbs-branch:14.9.0.2
	help:14.9
	temp_tag:14.7
	bobWinPort-20051223-freeze:14.6
	postmerge-20051223-bobWinPort:14.7
	premerge-20051223-bobWinPort:14.7
	rel-7-6-6:14.7
	rel-7-6-4:14.7
	rel-7-6-2:14.7
	rel-7-6-branch:14.7.0.2
	rel-7-6-0:14.7
	rel-7-4-2:14.6
	rel-7-4-branch:14.6.0.4
	bobWinPort:14.6.0.2
	rel-7-4-0:14.6
	rel-7-2-6:14.4
	rel-7-2-4:14.4
	rel-7-2-2:14.4
	rel-7-2-0:14.1
	rel-7-0-4:14.1
	rel-7-0-2:14.1
	rel-7-0-1:14.1
	opensource-post:14.1
	opensource-pre:1.17
	rel-7-0-branch:1.17.0.2
	rel-7-0:1.17;
locks; strict;
comment	@# @;


14.12
date	2007.03.02.21.46.29;	author brlcad;	state dead;
branches;
next	14.11;

14.11
date	2007.02.03.01.54.26;	author brlcad;	state Exp;
branches;
next	14.10;

14.10
date	2006.08.28.18.49.11;	author brlcad;	state Exp;
branches;
next	14.9;

14.9
date	2006.01.12.23.32.00;	author brlcad;	state Exp;
branches;
next	14.8;

14.8
date	2006.01.04.15.59.30;	author bob1961;	state Exp;
branches;
next	14.7;

14.7
date	2005.08.21.02.48.52;	author brlcad;	state Exp;
branches;
next	14.6;

14.6
date	2005.06.25.00.23.12;	author brlcad;	state Exp;
branches;
next	14.5;

14.5
date	2005.06.12.22.03.09;	author brlcad;	state Exp;
branches;
next	14.4;

14.4
date	2005.03.15.21.44.05;	author brlcad;	state Exp;
branches;
next	14.3;

14.3
date	2005.03.13.08.58.35;	author brlcad;	state Exp;
branches;
next	14.2;

14.2
date	2005.03.13.07.31.22;	author brlcad;	state Exp;
branches;
next	14.1;

14.1
date	2004.11.16.19.42.21;	author morrison;	state Exp;
branches;
next	1.17;

1.17
date	2004.10.15.08.41.47;	author morrison;	state Exp;
branches;
next	1.16;

1.16
date	2004.10.06.14.31.29;	author morrison;	state Exp;
branches;
next	1.15;

1.15
date	2004.09.24.19.27.33;	author erikg;	state Exp;
branches;
next	1.14;

1.14
date	2004.09.24.16.35.27;	author erikg;	state Exp;
branches;
next	1.13;

1.13
date	2004.09.24.14.51.29;	author morrison;	state Exp;
branches;
next	1.12;

1.12
date	2004.09.24.14.18.16;	author erikg;	state Exp;
branches;
next	1.11;

1.11
date	2004.09.09.17.10.14;	author erikg;	state Exp;
branches;
next	1.10;

1.10
date	2004.09.07.17.45.41;	author erikg;	state Exp;
branches;
next	1.9;

1.9
date	2004.09.07.15.03.33;	author morrison;	state Exp;
branches;
next	1.8;

1.8
date	2004.09.07.13.15.06;	author erikg;	state Exp;
branches;
next	1.7;

1.7
date	2004.08.31.05.57.42;	author morrison;	state Exp;
branches;
next	1.6;

1.6
date	2004.08.25.15.03.12;	author morrison;	state Exp;
branches;
next	1.5;

1.5
date	2004.08.02.06.41.18;	author morrison;	state Exp;
branches;
next	1.4;

1.4
date	2004.07.29.06.08.38;	author morrison;	state Exp;
branches;
next	1.3;

1.3
date	2004.07.27.13.18.19;	author morrison;	state Exp;
branches;
next	1.2;

1.2
date	2004.05.25.20.14.30;	author morrison;	state Exp;
branches;
next	1.1;

1.1
date	2004.05.20.14.50.43;	author morrison;	state Exp;
branches;
next	;


desc
@@


14.12
log
@upgrade tcl/tk from 8.4.6 to 8.5a5; also move to a recursive configure, using AC_CONFIG_SUBDIRS to call upon tcl, tk, and enigma's configure scripts as needed instead of redoing their build systems for our purpose.  this has a rather drastic impact on the way the libraries are linked together, including the need to compile tcl/tk static so as to avoid libtool portability issues as well as letting us take advantage of their build system for reduced maintenance and easing future upgrades.  undoubtedly more build issues to be worked out with other platforms given the extent of this change.  this does move us one step closer towards correctly linking against system tcl/tk installations too.
@
text
@# $Id: Makefile.am,v 14.11 2007/02/03 01:54:26 brlcad Exp $

SUBDIRS = \
	doc \
	generic \
	library \
	unix

AM_CFLAGS =
AM_CPPFLAGS = \
	-I${top_srcdir}/src/other/libtcl/generic \
	-DTCL_LIBRARY="\"${TCL_LIBRARY}\"" \
	-DTCL_PACKAGE_PATH="\"${TCL_PACKAGE_PATH}\"" \
	-DUSE_TCLALLOC=0 \
	${LIBZ_CPPFLAGS}

lib_LTLIBRARIES = \
	libtcl.la \
	libtcl@@TCL_VERSION@@.la
noinst_LTLIBRARIES = \
	libtcl_nil.la

libtcl_la_SOURCES =
libtcl_la_LDFLAGS = -version-info 19:1
libtcl_la_LIBADD = \
	libtcl_nil.la

libtcl_nil_la_SOURCES =
libtcl_nil_la_LIBADD = \
	generic/regcomp.lo \
	generic/regerror.lo \
	generic/regexec.lo \
	generic/regfree.lo \
	generic/tclAlloc.lo \
	generic/tclAsync.lo \
	generic/tclBasic.lo \
	generic/tclBinary.lo \
	generic/tclCkalloc.lo \
	generic/tclClock.lo \
	generic/tclCmdAH.lo \
	generic/tclCmdIL.lo \
	generic/tclCmdMZ.lo \
	generic/tclCompCmds.lo \
	generic/tclCompExpr.lo \
	generic/tclCompile.lo \
	generic/tclDate.lo \
	generic/tclEncoding.lo \
	generic/tclEnv.lo \
	generic/tclEvent.lo \
	generic/tclExecute.lo \
	generic/tclFCmd.lo \
	generic/tclFileName.lo \
	generic/tclGet.lo \
	generic/tclHash.lo \
	generic/tclHistory.lo \
	generic/tclIO.lo \
	generic/tclIOCmd.lo \
	generic/tclIOGT.lo \
	generic/tclIOSock.lo \
	generic/tclIOUtil.lo \
	generic/tclIndexObj.lo \
	generic/tclInterp.lo \
	generic/tclLink.lo \
	generic/tclListObj.lo \
	generic/tclLiteral.lo \
	generic/tclLoad.lo \
	generic/tclMain.lo \
	generic/tclNamesp.lo \
	generic/tclNotify.lo \
	generic/tclObj.lo \
	generic/tclPanic.lo \
	generic/tclParse.lo \
	generic/tclParseExpr.lo \
	generic/tclPipe.lo \
	generic/tclPkg.lo \
	generic/tclPosixStr.lo \
	generic/tclPreserve.lo \
	generic/tclProc.lo \
	generic/tclRegexp.lo \
	generic/tclResolve.lo \
	generic/tclResult.lo \
	generic/tclScan.lo \
	generic/tclStringObj.lo \
	generic/tclStubInit.lo \
	generic/tclStubLib.lo \
	generic/tclThread.lo \
	generic/tclThreadAlloc.lo \
	generic/tclThreadJoin.lo \
	generic/tclTimer.lo \
	generic/tclUtf.lo \
	generic/tclUtil.lo \
	generic/tclVar.lo \
	unix/tclLoadDl.lo \
	unix/tclUnixChan.lo \
	unix/tclUnixEvent.lo \
	unix/tclUnixFCmd.lo \
	unix/tclUnixFile.lo \
	unix/tclUnixInit.lo \
	unix/tclUnixNotfy.lo \
	unix/tclUnixPipe.lo \
	unix/tclUnixSock.lo \
	unix/tclUnixThrd.lo \
	unix/tclUnixTime.lo \
	${LIBDL} \
	${LIBSOCKET} \
	${LIBNSL} \
	${LIBZ} \
	${LIBM} 

libtcl@@TCL_VERSION@@_la_SOURCES = $(libtcl_la_SOURCES)
libtcl@@TCL_VERSION@@_la_LDFLAGS = $(libtcl_la_LDFLAGS)
libtcl@@TCL_VERSION@@_la_LIBADD = $(libtcl_la_LIBADD)

noinst_PROGRAMS = tclsh

# MIPSpro 7.3 has a linker bug with long rpaths
if LINK_STATIC_REQUIRED
tclsh_LDFLAGS = -static
endif

tclsh_SOURCES = 
tclsh_LDADD = \
	unix/tclAppInit.lo \
	libtcl.la

tcllibdir = ${libdir}

EXTRA_DIST = \
	ChangeLog.1999 \
	ChangeLog.2000 \
	ChangeLog.2001 \
	changes \
	compat \
	mac \
	macosx \
	tests \
	tools \
	win

MAINTAINERCLEANFILES = Makefile.in

include $(top_srcdir)/misc/Makefile.defs
@


14.11
log
@remove duplication of zlib's public headers from our include/ dir; have configure provide a LIBZ_CPPFLAGS that points to src/other/zlib instead.
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.10 2006/08/28 18:49:11 brlcad Exp $
@


14.10
log
@make/use noinst convenience library for libtcl just like was done for bu, bn, rt so that librtserver can have no dependencies other than guaranteed system ones
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.9 2006/01/12 23:32:00 brlcad Exp $
d14 2
a15 1
	-DUSE_TCLALLOC=0
@


14.9
log
@move the AM_CPPFLAGS up to the top
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.8 2006/01/04 15:59:30 bob1961 Exp $
d19 2
d25 4
@


14.8
log
@Add win to EXTRA_DIST
@
text
@d1 1
a1 1
# $Id$
d9 7
a120 7
AM_CFLAGS =
AM_CPPFLAGS = \
	-I${top_srcdir}/src/other/libtcl/generic \
	-DTCL_LIBRARY="\"${TCL_LIBRARY}\"" \
	-DTCL_PACKAGE_PATH="\"${TCL_PACKAGE_PATH}\"" \
	-DUSE_TCLALLOC=0

@


14.7
log
@add LINK_STATIC_REQUIRED to handle the MIPSpro 7.3 linker bug where rpath lines longer than 255 causes the linker to crash, link [b]tclsh/[b]wish static for that compiler
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.6 2005/06/25 00:23:12 brlcad Exp $
d130 2
a131 1
	tools
@


14.6
log
@include misc/Makefile.defs
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.5 2005/06/12 22:03:09 brlcad Exp $
d100 6
a105 1
noinst_PROGRAMS = tclsh tclsh.static
a111 4
tclsh_static_SOURCES = $(tclsh_SOURCES)
tclsh_static_LDADD = $(tclsh_LDADD)
tclsh_static_LDFLAGS = -static

a120 4
.PHONY : test
test: tclsh.static
	echo 'puts "hi"' | ./tclsh.static

@


14.5
log
@don't install tclsh
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.4 2005/03/15 21:44:05 brlcad Exp $
d136 2
@


14.4
log
@libtcl needs libdl for symbols from tclLoadDl.o
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.3 2005/03/13 08:58:35 brlcad Exp $
d100 1
a100 1
bin_PROGRAMS = tclsh tclsh.static
@


14.3
log
@add libnsl
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.2 2005/03/13 07:31:22 brlcad Exp $
d90 1
@


14.2
log
@libtcl requires -lsocket if it's available
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.1 2004/11/16 19:42:21 morrison Exp $
d91 1
@


14.1
log
@dawn of a new revision.  it shall be numbered 14 to match release 7.  begin the convergence by adding emacs/vi local variable footer blocks to encourage consistent formatting.
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.17 2004/10/15 08:41:47 morrison Exp $
d90 1
@


1.17
log
@refactor tickle tea que for the umpteenth time
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.16 2004/10/06 14:31:29 morrison Exp $
@


1.16
log
@Major restructuring and fixes so that 'make distcheck' should now work and actually be close to correct.  i.e. the resultant generated tarball should contain contents similar to a CVS export.  This helps it generate a proper distribution and build, install, and uninstall cleanly off of that distribution.
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.15 2004/09/24 19:27:33 erikg Exp $
d15 77
a91 1
libtcl_la_LIBADD = unix/libtclu.la generic/libtclg.la ${LIBZ} ${LIBM} 
d100 3
a102 1
tclsh_LDADD = unix/libtclsh.la libtcl.la
@


1.15
log
@avoid duplicate compiles...
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.14 2004/09/24 16:35:27 erikg Exp $
a4 4
	library

DIST_SUBDIRS = \
	doc \
a8 78
generic_src = \
	$(srcdir)/generic/regcomp.c\
	$(srcdir)/generic/regerror.c\
	$(srcdir)/generic/regexec.c\
	$(srcdir)/generic/regfree.c\
	$(srcdir)/generic/tclAlloc.c\
	$(srcdir)/generic/tclAsync.c\
	$(srcdir)/generic/tclBasic.c\
	$(srcdir)/generic/tclBinary.c\
	$(srcdir)/generic/tclCkalloc.c\
	$(srcdir)/generic/tclClock.c\
	$(srcdir)/generic/tclCmdAH.c\
	$(srcdir)/generic/tclCmdIL.c\
	$(srcdir)/generic/tclCmdMZ.c\
	$(srcdir)/generic/tclCompCmds.c\
	$(srcdir)/generic/tclCompExpr.c\
	$(srcdir)/generic/tclCompile.c\
	$(srcdir)/generic/tclDate.c\
	$(srcdir)/generic/tclEncoding.c\
	$(srcdir)/generic/tclEnv.c\
	$(srcdir)/generic/tclEvent.c\
	$(srcdir)/generic/tclExecute.c\
	$(srcdir)/generic/tclFCmd.c\
	$(srcdir)/generic/tclFileName.c\
	$(srcdir)/generic/tclGet.c\
	$(srcdir)/generic/tclHash.c\
	$(srcdir)/generic/tclHistory.c\
	$(srcdir)/generic/tclIO.c\
	$(srcdir)/generic/tclIOCmd.c\
	$(srcdir)/generic/tclIOGT.c\
	$(srcdir)/generic/tclIOSock.c\
	$(srcdir)/generic/tclIOUtil.c\
	$(srcdir)/generic/tclIndexObj.c\
	$(srcdir)/generic/tclInterp.c\
	$(srcdir)/generic/tclLink.c\
	$(srcdir)/generic/tclListObj.c\
	$(srcdir)/generic/tclLiteral.c\
	$(srcdir)/generic/tclLoad.c\
	$(srcdir)/generic/tclMain.c\
	$(srcdir)/generic/tclNamesp.c\
	$(srcdir)/generic/tclNotify.c\
	$(srcdir)/generic/tclObj.c\
	$(srcdir)/generic/tclPanic.c\
	$(srcdir)/generic/tclParse.c\
	$(srcdir)/generic/tclParseExpr.c\
	$(srcdir)/generic/tclPipe.c\
	$(srcdir)/generic/tclPkg.c\
	$(srcdir)/generic/tclPosixStr.c\
	$(srcdir)/generic/tclPreserve.c\
	$(srcdir)/generic/tclProc.c\
	$(srcdir)/generic/tclRegexp.c\
	$(srcdir)/generic/tclResolve.c\
	$(srcdir)/generic/tclResult.c\
	$(srcdir)/generic/tclScan.c\
	$(srcdir)/generic/tclStringObj.c\
	$(srcdir)/generic/tclStubInit.c\
	$(srcdir)/generic/tclStubLib.c\
	$(srcdir)/generic/tclThread.c\
	$(srcdir)/generic/tclThreadAlloc.c\
	$(srcdir)/generic/tclThreadJoin.c\
	$(srcdir)/generic/tclTimer.c\
	$(srcdir)/generic/tclUtf.c\
	$(srcdir)/generic/tclUtil.c\
	$(srcdir)/generic/tclVar.c

unix_src = \
	$(srcdir)/unix/tclLoadDl.c \
	$(srcdir)/unix/tclUnixChan.c \
	$(srcdir)/unix/tclUnixEvent.c \
	$(srcdir)/unix/tclUnixFCmd.c \
	$(srcdir)/unix/tclUnixFile.c \
	$(srcdir)/unix/tclUnixInit.c \
	$(srcdir)/unix/tclUnixNotfy.c \
	$(srcdir)/unix/tclUnixPipe.c \
	$(srcdir)/unix/tclUnixSock.c \
	$(srcdir)/unix/tclUnixThrd.c \
	$(srcdir)/unix/tclUnixTime.c

d13 1
a13 2
AM_CFLAGS =
libtcl_la_SOURCES = $(generic_src) $(unix_src)
d15 1
a15 1
libtcl_la_LIBADD = ${LIBZ} ${LIBM}
a21 2
tclsh_SOURCES = unix/tclAppInit.c
tclsh_LDADD = $(lib_LTLIBRARIES) ${TCL}
d23 5
a27 2
tclsh_static_SOURCES = unix/tclAppInit.c
tclsh_static_LDADD = libtcl.la
d32 1
d42 13
@


1.14
log
@added test target
fixed up tclsh.static link shtuff for dep handling
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.13 2004/09/24 14:51:29 morrison Exp $
d95 1
a95 1
libtcl_la_CFLAGS = 
a99 1
libtcl@@TCL_VERSION@@_la_CFLAGS = $(libtcl_la_CFLAGS)
@


1.13
log
@help make distcheck get a whole lot farther ..
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.12 2004/09/24 14:18:16 erikg Exp $
d95 1
a96 1

a97 1

d100 1
a100 1

a101 1

a102 1

a104 1

a105 1

a106 1

a108 2

# XXX - should not have to do this, but quick fix for muves folks for now
d110 2
a111 2
tclsh_static_LDADD = .libs/libtcl.a

d121 3
@


1.12
log
@build a static tclsh
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.11 2004/09/09 17:10:14 erikg Exp $
d5 4
d91 3
a93 1
lib_LTLIBRARIES = libtcl.la libtcl@@TCL_VERSION@@.la
d96 1
d98 1
d101 1
d103 1
d105 1
d108 1
a111 1
tclsh_LDADD = $(lib_LTLIBRARIES) ${TCL} libtcl.la
d113 4
d119 1
@


1.11
log
@collapse lib compile into single dir. makes things a little neater? should fix the irix cross-toolset issue...
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.10 2004/09/07 17:45:41 erikg Exp $
d97 2
a98 1
bin_PROGRAMS = tclsh
d101 3
@


1.10
log
@socket has been moved to configure.ac ...
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.9 2004/09/07 15:03:33 morrison Exp $
d9 77
a85 22
EXTRA_DIST = \
	compat \
	mac \
	macosx \
	tests \
	tools \
	win

MAINTAINERCLEANFILES = \
	Makefile.in

lib_LTLIBRARIES = libtcl@@TCL_VERSION@@.la libtcl.la

libtcl@@TCL_VERSION@@_la_SOURCES = 

libtcl@@TCL_VERSION@@_la_LDFLAGS = -version-info 19:1

libtcl@@TCL_VERSION@@_la_LIBADD = \
	generic/libtclgeneric.la \
	unix/libtclunix.la \
	${LIBZ} \
	${LIBM}
d87 1
a87 1
libtcl_la_SOURCES = 
d89 1
d91 1
d93 3
a95 5
libtcl_la_LIBADD = \
	generic/libtclgeneric.la \
	unix/libtclunix.la \
	${LIBZ} \
	${LIBM}
d98 4
d103 5
a107 1
tclsh_SOURCES = unix/tclAppInit.c
a108 1
tclsh_LDADD = $(lib_LTLIBRARIES) ${TCL}
@


1.9
log
@undoubtedly not the best since they can probably be included into one, but for now make both libraries that include and do not include the version number as part of the name.
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.8 2004/09/07 13:15:06 erikg Exp $
d46 1
a46 1
tclsh_LDADD = $(lib_LTLIBRARIES) ${TCL} ${SOCKET}
@


1.8
log
@solaris needs -lsocket here
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.7 2004/08/31 05:57:42 morrison Exp $
d20 1
a20 1
lib_LTLIBRARIES = libtcl@@TCL_VERSION@@.la
d23 1
d32 10
d46 1
a46 1
tclsh_LDADD = $(lib_LTLIBRARIES) @@TCL@@ @@SOCKET@@
@


1.7
log
@add the stub libs and improve build deps
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.6 2004/08/25 15:03:12 morrison Exp $
d35 1
a35 1
tclsh_LDADD = $(lib_LTLIBRARIES) @@TCL@@
@


1.6
log
@readd the tcl library makefiles
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.5 2004/08/02 06:41:18 morrison Exp $
d31 5
@


1.5
log
@We are Borg, resistance is futile, you will be assimilated.  Convert tcl/tk's build to ours instead of continuing to live with the build issues their build imposes.
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.4 2004/07/29 06:08:38 morrison Exp $
d6 1
a10 1
	library \
d30 1
@


1.4
log
@go into doc and generic
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.3 2004/07/27 13:18:19 morrison Exp $
d19 11
@


1.3
log
@make dist should include the other subdirs
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.2 2004/05/25 20:14:30 morrison Exp $
d3 4
a6 1
SUBDIRS = unix
a9 2
	doc \
	generic \
@


1.2
log
@let AC_CONFIG_SUBDIRS do its magic
@
text
@d1 1
a1 1
# $Id: $
d4 11
@


1.1
log
@Sources that are external to BRL-CAD are moved from the top level to src/other/.
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.5 2004/04/08 12:16:47 erikg Exp $
d3 1
a3 12
configure:
	mkdir -p build
	(cd build && \
		${top_srcdir}/../libtcl8.4/unix/configure  \
		--srcdir=${top_srcdir}/../libtcl8.4/unix \
		--enable-shared \
		--exec-prefix=${prefix} \
		--prefix=${prefix} \
		--x-includes=@@X_PREFIX@@/include \
		--x-libraries=@@X_PREFIX@@/lib \
		--with-tcl=${top_builddir}/../libtcl8.4\
	)
d5 2
a6 10
all-am:
	if [ ! -d build ] ; then $(MAKE) configure ; fi
	if [ ! -e build/Makefile ] ; then rm -rf build && $(MAKE) configure ; fi
	(cd build && $(MAKE) -$(MAKEFLAGS))

install-am: all-am
	(cd build && $(MAKE) -$(MAKEFLAGS) install)

clean-am:
	rm -rf build
@

