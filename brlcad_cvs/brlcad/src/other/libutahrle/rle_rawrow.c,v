head	14.3;
access;
symbols
	rel-7-10-4:14.2
	STABLE:14.2.0.10
	stable-branch:14.2
	rel-7-10-2:14.2
	rel-7-10-0:14.2
	rel-7-8-4:14.2
	rel-7-8-2:14.2
	rel-7-8-0:14.2
	trimnurbs-branch:14.2.0.8
	help:14.2
	temp_tag:14.2
	bobWinPort-20051223-freeze:14.2
	postmerge-20051223-bobWinPort:14.2
	premerge-20051223-bobWinPort:14.2
	rel-7-6-6:14.2
	rel-7-6-4:14.2
	rel-7-6-2:14.2
	rel-7-6-branch:14.2.0.6
	rel-7-6-0:14.2
	rel-7-4-2:14.2
	rel-7-4-branch:14.2.0.4
	bobWinPort:14.2.0.2
	rel-7-4-0:14.2
	rel-7-2-6:14.2
	rel-7-2-4:14.2
	rel-7-2-2:14.2
	rel-7-2-0:14.2
	rel-7-0-4:14.2
	rel-7-0-2:14.1
	rel-7-0-1:14.1
	opensource-post:14.1
	opensource-pre:1.4
	rel-7-0-branch:1.4.0.2
	rel-7-0:1.4;
locks; strict;
comment	@ * @;


14.3
date	2007.09.14.15.21.39;	author erikgreenwald;	state Exp;
branches;
next	14.2;

14.2
date	2005.01.23.14.29.55;	author brlcad;	state Exp;
branches;
next	14.1;

14.1
date	2004.11.16.19.42.30;	author morrison;	state Exp;
branches;
next	1.4;

1.4
date	2004.09.03.23.30.59;	author morrison;	state Exp;
branches;
next	1.3;

1.3
date	2004.08.02.23.01.52;	author morrison;	state Exp;
branches;
next	1.2;

1.2
date	2004.06.08.18.30.55;	author morrison;	state Exp;
branches;
next	1.1;

1.1
date	2004.05.20.14.54.08;	author morrison;	state Exp;
branches;
next	;


desc
@@


14.3
log
@removed trailing whitespace
@
text
@/*
 * rle_rawrow.c - Convert RLE "raw" input to "row" input.
 *
 * Author:	Spencer W. Thomas
 * 		EECS Dept.
 * 		University of Michigan
 * Date:	Mon Jun 18 1990
 * Copyright (c) 1990, University of Michigan
 */

#include "rle.h"
#include "rle_raw.h"

/*****************************************************************
 * TAG( rle_rawtorow )
 *
 * Convert a "raw" scanline to a row format.
 * Inputs:
 * 	the_hdr:	RLE header describing the image.
 * 	raw:		Pointer to pointers to vectors of "raw" data.
 * 	nraw:		Pointer to vector of lengths of raw data vectors.
 * Outputs:
 * 	outrows:	Pointer to pointers to scanline data for
 * 			this scanline.
 * Algorithm:
 * 	Interpret successive "op codes", filling in scanline array.
 * 	Scanline between xmin and xmax is prefilled with background
 * 	color, if one is given.
 */
void
rle_rawtorow(the_hdr, raw, nraw, outrows)
rle_hdr * the_hdr;
rle_op ** raw;
int * nraw;
rle_pixel ** outrows;
{
    register int i, j;
    register rle_pixel * outptr;
    int chan;

    for (chan = -the_hdr->alpha; chan < the_hdr->ncolors; chan++)
	if ( RLE_BIT( *the_hdr, chan ) )
	{
	    if ( chan >= 0 && the_hdr->background == 2 && the_hdr->bg_color &&
		 the_hdr->bg_color[chan] != 0 )
	    {
		j = the_hdr->bg_color[chan];
		for ( i = the_hdr->xmin,
		      outptr = &outrows[chan][the_hdr->xmin];
		      i <= the_hdr->xmax;
		      i++, outptr++ )
		    *outptr = j;
	    }
	    else
		bzero( (char *)&outrows[chan][the_hdr->xmin],
		       the_hdr->xmax - the_hdr->xmin + 1 );

	    for( i = 0; i < nraw[chan]; i++ )
	    {
		outptr = &(outrows[chan][raw[chan][i].xloc]);
		switch (raw[chan][i].opcode)
		{
		case RByteDataOp:
		    bcopy( (char *)raw[chan][i].u.pixels, (char *)outptr,
			   raw[chan][i].length );
		    break;

		case RRunDataOp:
		    for ( j = raw[chan][i].length; j > 0; j--)
			*(outptr++) = (rle_pixel) raw[chan][i].u.run_val;
		    break;
		}
	    }
	}
}
@


14.2
log
@update from a patched 3.0 to urt 3.1b1 (library)
@
text
@d1 1
a1 1
/* 
d3 1
a3 1
 * 
d16 1
a16 1
 * 
d30 1
a30 1
void    
d40 1
a40 1
    
@


14.1
log
@dawn of a new revision.  it shall be numbered 14 to match release 7.  begin the convergence by adding emacs/vi local variable footer blocks to encourage consistent formatting.
@
text
@a10 14
#include "common.h"



#include <stdio.h>

#include "machine.h"

#ifdef HAVE_STRING_H
#include <string.h>
#else
#include <strings.h>
#endif

a11 1
#include "rle_code.h"
a13 1

d31 5
a35 1
rle_rawtorow(rle_hdr *the_hdr, rle_op **raw, int *nraw, rle_pixel **outrows)
d64 1
a64 1
		    bcopy( raw[chan][i].u.pixels, outptr,
@


1.4
log
@USE_STRING_H is no more.. it's HAVE_STRING_H
@
text
@@


1.3
log
@replace the wrapped config.h block with common.h
@
text
@d19 1
a19 1
#ifdef USE_STRING_H
@


1.2
log
@externs.h is no longer needed and is going away .. config.h can be used instead if needed
@
text
@d11 1
a11 3
#ifdef HAVE_CONFIG_H
# include "config.h"
#endif
@


1.1
log
@Sources that are external to BRL-CAD are moved from the top level to src/other/.
@
text
@a19 1
#include "externs.h"
@

