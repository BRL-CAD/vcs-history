head	14.5;
access;
symbols
	stable-branch:14.2
	rel-7-8-2:14.4
	rel-7-8-0:14.4
	trimnurbs-branch:14.4.0.2
	help:14.4
	temp_tag:14.4
	bobWinPort-20051223-freeze:14.2
	postmerge-20051223-bobWinPort:14.4
	premerge-20051223-bobWinPort:14.4
	rel-7-6-6:14.4
	rel-7-6-4:14.4
	rel-7-6-2:14.3
	rel-7-6-branch:14.3.0.2
	rel-7-6-0:14.3
	rel-7-4-2:14.2
	rel-7-4-branch:14.2.0.4
	bobWinPort:14.2.0.2
	rel-7-4-0:14.2
	rel-7-2-6:14.2
	rel-7-2-4:14.2
	rel-7-2-2:14.2
	rel-7-2-0:14.2
	rel-7-0-4:14.2
	rel-7-0-2:14.2
	rel-7-0-1:14.2
	opensource-post:14.2
	opensource-pre:1.4
	rel-7-0-branch:1.4.0.2
	rel-7-0:1.4;
locks; strict;
comment	@ * @;


14.5
date	2006.07.10.14.16.44;	author brlcad;	state dead;
branches;
next	14.4;

14.4
date	2005.10.23.04.44.36;	author brlcad;	state Exp;
branches;
next	14.3;

14.3
date	2005.08.24.02.52.42;	author brlcad;	state Exp;
branches
	14.3.2.1;
next	14.2;

14.2
date	2004.12.21.07.18.58;	author morrison;	state Exp;
branches;
next	14.1;

14.1
date	2004.11.16.19.42.16;	author morrison;	state Exp;
branches;
next	1.4;

1.4
date	2004.09.03.23.30.58;	author morrison;	state Exp;
branches;
next	1.3;

1.3
date	2004.08.02.23.01.50;	author morrison;	state Exp;
branches;
next	1.2;

1.2
date	2004.06.08.22.04.25;	author morrison;	state Exp;
branches;
next	1.1;

1.1
date	2004.05.20.15.20.13;	author morrison;	state Exp;
branches;
next	;

14.3.2.1
date	2005.11.13.13.46.17;	author brlcad;	state Exp;
branches;
next	;


desc
@@


14.5
log
@remove getopt.c as it is no longer needed. code should be using libbu's bu_getopt.
@
text
@/*
 *			G E T O P T . C
 *
 *  Important note -
 *	If getopt() it going to be used more than once, it is necessary
 *	to reinitialize optind=1 before beginning on the next argument list.
 *
 */

#include "common.h"

#ifndef HAVE_GETOPT

#include <stdio.h>
#ifdef HAVE_STRING_H
#  include <string.h>
#else
#  include <strings.h>
#endif

/*
 * get option letter from argument vector
 */

int	opterr = 1;		/* set to zero to suppress errors */
int	optind = 1;		/* index into parent argv vector */
int	optopt;			/* character checked for validity */
char	*optarg;		/* argument associated with option */

#define BADCH	(int)'?'
#define EMSG	""
#define tell(s)	if(opterr)  { \
		fputs(*nargv,stderr);fputs(s,stderr); \
		fputc(optopt,stderr);fputc('\n',stderr); \
	} return(BADCH);

int
getopt(int nargc, char *nargv[], const char *ostr)
{
	static char	*place = EMSG;	/* option letter processing */
	register char	*oli;		/* option letter list index */

	if(*place=='\0') {			/* update scanning pointer */
		if(optind >= nargc || *(place = nargv[optind]) != '-' ||
		   !*++place)  {
		   	place = EMSG;
			return(EOF);
		}
		if (*place == '-') {	/* found "--" */
			place = EMSG;
			++optind;
			return(EOF);
		}
	}				/* option letter okay? */
	if ((optopt = (int)*place++) == (int)':' || !(oli = strchr(ostr,optopt))) {
		if(*place == '\0') {
			++optind;
			place = EMSG;
		}
		tell(": illegal option -- ");
	}
	if (*++oli != ':') {		/* don't need argument */
		optarg = NULL;
		if (*place == '\0') {
			++optind;
			place = EMSG;
		}
	}
	else {				/* need an argument */
		if (*place) optarg = place;	/* no white space */
		else if (nargc <= ++optind) {	/* no arg */
			place = EMSG;
			tell(": option requires an argument -- ");
		}
	 	else optarg = nargv[optind];	/* white space */
		place = EMSG;
		++optind;
	}
	return(optopt);			/* dump back option letter */
}

#endif

/*
 * Local Variables:
 * mode: C
 * tab-width: 8
 * c-basic-offset: 4
 * indent-tabs-mode: t
 * End:
 * ex: shiftwidth=4 tabstop=8
 */
@


14.4
log
@trailing ws
@
text
@@


14.3
log
@don't compile these functions being provided for convenience if the system already has them
@
text
@d7 1
a7 1
 *  
@


14.3.2.1
log
@merge changes from HEAD aka rel-7-6-4 to the rel-7-6-branch just in case someone peeks a gander or tries to continue/build the branch
@
text
@d7 1
a7 1
 *
@


14.2
log
@the significantly modified pd files are incorporated as new works and assigned copyright, so remove the old statement.
@
text
@a8 3
#ifndef lint
static char RCSid[] = "@@(#)$Header: /cvs/brlcad/src/libsysv/getopt.c,v 14.1 2004/11/16 19:42:16 morrison Exp $ (BRL)";
#endif
d12 1
a12 8


#if defined(HAVE_GETOPT)
#ifndef lint
char getopt_dummy;   /* some systems can't handle empty object modules */
#else
#endif
#else
d16 1
a16 1
#include <string.h>
d18 1
a18 1
#include <strings.h>
a20 2
#include "machine.h"

a24 8
#if defined(__convexc__)
/* brain dead Convex compiler/loader won't let us redefine a variable declared
 * and initialized in their library, despite the fact that we don't even use
 * that module of their library!
 */
extern int opterr;            /* set to zero to suppress errors */
extern int optind;            /* index into parent argv vector */
#else
a26 1
#endif
d38 1
a38 9
getopt(nargc,nargv,ostr)
int	nargc;
#if defined(linux)
char	* const nargv[];
const char *ostr;
#else
char	*nargv[];
char	*ostr;
#endif
@


14.1
log
@dawn of a new revision.  it shall be numbered 14 to match release 7.  begin the convergence by adding emacs/vi local variable footer blocks to encourage consistent formatting.
@
text
@a7 2
 *  Distribution Status -
 *	Public Domain, Distribution Unlimitied.
d10 1
a10 1
static char RCSid[] = "@@(#)$Header: /cvs/brlcad/src/libsysv/getopt.c,v 1.4 2004/09/03 23:30:58 morrison Exp $ (BRL)";
@


1.4
log
@USE_STRING_H is no more.. it's HAVE_STRING_H
@
text
@d12 1
a12 1
static char RCSid[] = "@@(#)$Header: /cvs/brlcad/src/libsysv/getopt.c,v 1.3 2004/08/02 23:01:50 morrison Exp $ (BRL)";
d114 10
@


1.3
log
@replace the wrapped config.h block with common.h
@
text
@d12 1
a12 1
static char RCSid[] = "@@(#)$Header: /cvs/brlcad/src/libsysv/getopt.c,v 1.2 2004/06/08 22:04:25 morrison Exp $ (BRL)";
d27 1
a27 1
#ifdef USE_STRING_H
@


1.2
log
@obliterate externs.h
@
text
@d12 1
a12 1
static char RCSid[] = "@@(#)$Header$ (BRL)";
d15 1
a15 3
#ifdef HAVE_CONFIG_H
# include "config.h"
#endif
@


1.1
log
@Vast reorganization begins.  Sources moved from top-level directories into src/.
@
text
@d12 1
a12 1
static char RCSid[] = "@@(#)$Header: /cvs/brlcad/libsysv/getopt.c,v 11.3 2004/05/10 15:30:47 erikg Exp $ (BRL)";
a35 1
#include "externs.h"
@

