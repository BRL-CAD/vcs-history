head	14.14;
access;
symbols
	rel-7-10-4:14.13
	STABLE:14.13.0.2
	stable-branch:14.3
	rel-7-10-2:14.13
	rel-7-10-0:14.12
	rel-7-8-4:14.9
	rel-7-8-2:14.9
	rel-7-8-0:14.9
	trimnurbs-branch:14.9.0.2
	help:14.9
	temp_tag:14.7
	bobWinPort-20051223-freeze:14.4
	postmerge-20051223-bobWinPort:14.7
	premerge-20051223-bobWinPort:14.7
	rel-7-6-6:14.7
	rel-7-6-4:14.7
	rel-7-6-2:14.4
	rel-7-6-branch:14.4.0.6
	rel-7-6-0:14.4
	rel-7-4-2:14.4
	rel-7-4-branch:14.4.0.4
	bobWinPort:14.4.0.2
	rel-7-4-0:14.4
	rel-7-2-6:14.4
	rel-7-2-4:14.4
	rel-7-2-2:14.3
	rel-7-2-0:14.3
	rel-7-0-4:14.2
	rel-7-0-2:14.2
	rel-7-0-1:14.2
	opensource-post:14.2
	opensource-pre:1.3
	rel-7-0-branch:1.3.0.2
	rel-7-0:1.3;
locks; strict;
comment	@.\" @;


14.14
date	2007.12.07.05.22.01;	author brlcad;	state Exp;
branches;
next	14.13;

14.13
date	2007.05.14.21.04.31;	author brlcad;	state Exp;
branches;
next	14.12;

14.12
date	2007.01.27.01.41.36;	author brlcad;	state Exp;
branches;
next	14.11;

14.11
date	2007.01.23.01.13.34;	author brlcad;	state Exp;
branches;
next	14.10;

14.10
date	2007.01.20.14.36.51;	author brlcad;	state Exp;
branches;
next	14.9;

14.9
date	2006.01.18.06.46.16;	author brlcad;	state Exp;
branches;
next	14.8;

14.8
date	2006.01.17.05.54.48;	author brlcad;	state Exp;
branches;
next	14.7;

14.7
date	2005.10.23.04.44.32;	author brlcad;	state Exp;
branches;
next	14.6;

14.6
date	2005.09.19.21.23.31;	author brlcad;	state Exp;
branches;
next	14.5;

14.5
date	2005.09.09.03.29.35;	author brlcad;	state Exp;
branches;
next	14.4;

14.4
date	2005.05.02.01.58.27;	author brlcad;	state Exp;
branches
	14.4.6.1;
next	14.3;

14.3
date	2005.01.30.20.30.45;	author brlcad;	state Exp;
branches;
next	14.2;

14.2
date	2004.12.21.01.07.59;	author butler;	state Exp;
branches;
next	14.1;

14.1
date	2004.11.16.19.42.14;	author morrison;	state Exp;
branches;
next	1.3;

1.3
date	2004.08.02.23.05.56;	author morrison;	state Exp;
branches;
next	1.2;

1.2
date	2004.07.25.04.35.42;	author morrison;	state Exp;
branches;
next	1.1;

1.1
date	2004.05.20.15.19.33;	author morrison;	state Exp;
branches;
next	;

14.4.6.1
date	2005.11.13.13.46.15;	author brlcad;	state Exp;
branches;
next	;


desc
@@


14.14
log
@remove the RECOMMENDATION section that refers to compat4.h and updating sources several major versions old
@
text
@.TH LIBBU 3 BRL-CAD
.\"                        L I B B U . 3
.\" BRL-CAD
.\"
.\" Copyright (c) 2004-2007 United States Government as represented by
.\" the U.S. Army Research Laboratory.
.\"
.\" Redistribution and use in source (Docbook format) and 'compiled'
.\" forms (PDF, PostScript, HTML, RTF, etc), with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\"
.\" 1. Redistributions of source code (Docbook format) must retain the
.\" above copyright notice, this list of conditions and the following
.\" disclaimer.
.\"
.\" 2. Redistributions in compiled form (transformed to other DTDs,
.\" converted to PDF, PostScript, HTML, RTF, and other formats) must
.\" reproduce the above copyright notice, this list of conditions and
.\" the following disclaimer in the documentation and/or other
.\" materials provided with the distribution.
.\"
.\" 3. The name of the author may not be used to endorse or promote
.\" products derived from this documentation without specific prior
.\" written permission.
.\"
.\" THIS DOCUMENTATION IS PROVIDED BY THE AUTHOR AS IS'' AND ANY
.\" EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
.\" PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
.\" CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
.\" OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
.\" BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
.\" LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
.\" USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\".\".\"
.SH NAME
libbu \- The BRL-CAD Utility Library
.SH SYNOPSIS
.nf
\fB#include "common.h"
\fB#include "<stdio.h>"
\fB#include "machine.h"
\fB#include "bu.h"
.sp
WARNING - WARNING - WARNING - WARNING - WARNING

This file seems to be out of date with the sources.
Consult the headers for up-to-date information.
Use the below interface documentation at your own discretion.

WARNING - WARNING - WARNING - WARNING - WARNING
.sp
.SH DESCRIPTION
.I libbu
contains all of the basic "computer-science" integer utility subroutines
for The BRL-CAD Package;
the two letters "BU" stand for "BRL-CAD" and "Utility".
Numerical (floating-point math) routines are found in the separate library
.IR libbn .
All subroutines in
.I libbu
are designed to be "parallel-safe" (sometimes called "mp-safe"),
to greatly ease code development for multi-processor systems.
.PP
The header file
.I bu.h
contains several "packages" which are implemented entirely by
macros and have no corresponding source code.
This includes the portable interface for declaring function prototypes
.I BU_EXTERN
and
.IR BU_ARGS ,
the portable interface for declaring FORTRAN-callable C routines
.IR BU_FORTRAN ,
the object constructor macros
.I BU_GETSTRUCT
and
.IR BU_GETUNION ,
the magic-number checking macros
.IR BU_CKMAG ,
the entire doubly-linked list package (formerly found in h/rtlist.h)
.IR BU_LIST_xxx() .
.PP
In addition to the capabilities implemented as macros, there are
additional "packages" which have both macro and subroutine interfaces:
.PP
The arbitrary-length bit-vector routines
.IR bu_bitv_xxx() .
.PP
The standardized parallel-safe error logging and abort routines
.I bu_log()
and
.IR bu_bomb() .
.PP
A portable re-entrant implementation of the
.IR getopt (3)
library routine
.IR bu_getopt (3).
.PP
A set of data histogramming routines
.IR bu_hist_xxx() .
.PP
A set of portable vendor-independent routines for parallel processing
that include
.I bu_avail_cpus()
to determine how many CPUs are available on the current system,
.I bu_parallel()
to initiate a specified number of parallel \fIthreads\fR of execution,
and
.IR bu_semaphore_init() ,
.IR bu_semaphore_acquire() ,
and
.I bu_semaphore_release()
for portable handling of \fIsemaphores\fR
to protect critical sections of code.
.PP
The
.I bu_malloc()
family of parallel-safe
routines provide an interface to the system memory allocator
which include standardized error checking, optional memory-use logging, and
optional run-time pointer and memory corruption testing.
.PP
The
.I bu_open_mapped_file()
routines provide a standardized interface for acquiring the entire contents
of an existing file mapped into the current address space,
using the virtual-memory capabilities of the operating-system (such as
.IR mmap (2))
where available, or if all else fails,
allocating sufficient dynamic memory and reading the entire file.
.PP
The
.I bu_structparse
data structure and associated routines provide a convenient way of
describing a C data structure, and reading and writing it
in both human-readable ASCII and efficient binary forms.
.PP
The
.I bu_ptbl
"pointer table" data structure provides a convenient
mechanism for managing a collection of pointers to objects,
where the size of the array is not known in advance and may change with time.
It is very convenient to be able to write code that can say
"remember this object", and then later on iterate through the collection
of remembered objects.
When combined with the concept of placing "magic numbers" in the first
.B long
of each data structure, the pointers to the objects become
automatically typed.
.PP
The
.I bu_vls
structure provides support for variable length strings,
freeing the programmer from concerns about having
.B char
arrays large enough to hold strings.
A complete set of string routines are provided,
including
.IR bu_vls_gets() ,
.IR bu_vls_strdup() ,
.IR bu_vls_strcat() ,
.IR bu_vls_from_argv() ,
.IR bu_vls_fwrite() ,
and many others.
.PP
The red-black package of balanced binary tree operations
that provides all the basic dynamic set operations
(e.g., insertion, deletion, search, minimum, maximum,
predecessor, and successor)
and order-statistic operations
(i.e., select and rank)
with optimal
--
that is,
.IR "O(" "log " "n)"
--
performance
while sorting on multiple keys.
.PP
Finally, a set of routines exist for taking text descriptions of
distance units and converting them to millimeters and back,
including
.IR bu_units_conversion() .
.SH WARNING
.I libbu
is designed to run in parallel on multiprocessor machines.
On some such machines
system calls must be semaphore protected.  For this reason,
.I libbu
provides:
.sp
.nf
.I bu_log()
.I bu_malloc() bu_free() bu_calloc() bu_realloc()
.I bu_strdup()
.fi
.PP
The function
.I bu_log()
is essentially a semaphore-protected version of
.I printf()
except that it uses the standard error (stderr) instead of the standard
output (stdout).
.PP
Dynamic memory handling in applications using
.I libbu
should use
the functions provided by
.I libbu
instead of the usual system runtime library
routines.  The
.I libbu
versions do not return to the caller unless they succeed,
thus sparing the programmer from constantly having to check
for NULL return code.
If a
.I libbu
routine fails with an unrecoverable error, it will call
.I bu_bomb
with their last argument (str) as the parameter.  The string parameter
usually indicates the purpose of the memory being allocated.
.PP
The function
.I bu_strdup()
calls bu_malloc() instead of malloc() to acquire memory.
Thus it should be used in place of strdup() in programs linking with
.I libbu.
.SH "EXIT CODE"
All truly fatal errors detected by the library use
.I bu_bomb
to exit with a status of 12.
.SH "SEE ALSO"
brlcad(1B), librt(1B), libbn(1B), redblack(3B).
.SH DIAGNOSTICS
``bu_malloc: malloc failure'',
if
.I libbu
is unable to allocate memory with
.IR malloc .
.SH AUTHORS
Michael John Muuss
.br
Lee A. Butler
.br
Glenn Durfee
.br
Paul J. Tanenbaum
.SH SOURCE
 The U. S. Army Research Laboratory
 Aberdeen Proving Ground, Maryland  21005-5068  USA
.SH COPYRIGHT
Copyright (c) 2004-2007 United States Government as represented by
U.S. Army Research Laboratory.

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public License as
published by the Free Software Foundation.

This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with this file; see the file named COPYING for more
information.

.SH "BUG REPORTS"
Reports of bugs or problems should be submitted via electronic
mail to <devs@@brlcad.org>, or via the provided "cadbug.sh" script.
@


14.13
log
@gah, pick up where someone left off over half a decade ago.  finish updating all of the compat4 symbols throughout the code to their new names.  finally. it's done.  make the deprecated headers obsolete -- make compat4.h obsolete too so we can be sure that all of the changes are now picked up by the compiler as errors.  this change will likely impact muves if they've similarly not updated to the new names too, so the headers are kept with a #warning for now (though will likely disappear down the road entirely).
@
text
@a237 22
.SH RECOMMENDATION
You should study the macros and data structures in
.IR bu.h .
.sp
To convert programs written for BRL-CAD Release 4.4 and earlier,
where these routines were all part of
.IR librt ,
a compatibility header file is provided:
.sp
#include "compat4.h"
.sp
In addition, you can painlessly upgrade your source code to using
the new libraries by using the provided editor script:
.sp
ed yourprog.c < ../include/sed4
.sp
This will change all the subroutine, macro, and data structure names
from their old
.I rt_
prefix names to their new
.I bu_
prefix names.
@


14.12
log
@ws. lots and lots of ws.  see sh/ws.sh for details (cases 'abcdeg').
@
text
@d50 8
@


14.11
log
@Sweeping license updates.  Documentation is fully relicensed to the BSD Documentation License (a minor variant of the FreeBSD Documentation License and BSD License).  All GPL code (mostly application code) is converted to the LGPL and now also specifically declares version 2.1, revoking the blank check to the FSF.  The intent of these sweeping changes are to simplify the licensing terms and increase overall flexibility of use, both externally (to users for their purposes) and internally (to allow application code to be migrated to libraries without creating GPL libraries).  As a collective work, BRL-CAD is now LGPL.
@
text
@d12 1
a12 1
.\" 
d16 1
a16 1
.\" 
d22 1
a22 1
.\" 
d26 1
a26 1
.\" 
@


14.10
log
@update copyright to 2007
@
text
@d8 31
a38 15
.\" This document is made available under the terms of the GNU Free
.\" Documentation License or, at your option, under the terms of the
.\" GNU General Public License as published by the Free Software
.\" Foundation.  Permission is granted to copy, distribute and/or
.\" modify this document under the terms of the GNU Free Documentation
.\" License, Version 1.2 or any later version published by the Free
.\" Software Foundation; with no Invariant Sections, no Front-Cover
.\" Texts, and no Back-Cover Texts.  Permission is also granted to
.\" redistribute this document under the terms of the GNU General
.\" Public License; either version 2 of the License, or (at your
.\" option) any later version.
.\"
.\" You should have received a copy of the GNU Free Documentation
.\" License and/or the GNU General Public License along with this
.\" document; see the file named COPYING for more information.
d277 1
a277 2
published by the Free Software Foundation; either version 2 of the
License, or (at your option) any later version.
@


14.9
log
@update copyright to 2006
@
text
@d5 1
a5 1
.\" Copyright (c) 2004-2006 United States Government as represented by
d256 1
a256 1
Copyright (c) 2004-2006 United States Government as represented by
@


14.8
log
@fix the manpage commments via s/\.\/"/.\\\"/g
@
text
@d5 1
a5 1
.\" Copyright (c) 2004-2005 United States Government as represented by
d256 1
a256 1
Copyright (C) 2004-2005 United States Government as represented by
@


14.7
log
@trailing ws
@
text
@d2 23
a24 23
./"                        L I B B U . 3
./" BRL-CAD
./"
./" Copyright (c) 2004-2005 United States Government as represented by
./" the U.S. Army Research Laboratory.
./"
./" This document is made available under the terms of the GNU Free
./" Documentation License or, at your option, under the terms of the
./" GNU General Public License as published by the Free Software
./" Foundation.  Permission is granted to copy, distribute and/or
./" modify this document under the terms of the GNU Free Documentation
./" License, Version 1.2 or any later version published by the Free
./" Software Foundation; with no Invariant Sections, no Front-Cover
./" Texts, and no Back-Cover Texts.  Permission is also granted to
./" redistribute this document under the terms of the GNU General
./" Public License; either version 2 of the License, or (at your
./" option) any later version.
./"
./" You should have received a copy of the GNU Free Documentation
./" License and/or the GNU General Public License along with this
./" document; see the file named COPYING for more information.
./"
./"./"./"
@


14.6
log
@h/ directory is now the include/ directory
@
text
@d170 1
a170 1
system calls must be semaphore protected.  For this reason, 
d208 1
a208 1
Thus it should be used in place of strdup() in programs linking with 
@


14.5
log
@add the standard documentation gfdl/gpl license header and copyright/distribution notice
@
text
@d228 1
a228 1
ed yourprog.c < ../h/sed4
@


14.4
log
@replace the old cad e-mail with devs at brlcad dot org since the dot mil forward is no more.
@
text
@d2 23
@


14.4.6.1
log
@merge changes from HEAD aka rel-7-6-4 to the rel-7-6-branch just in case someone peeks a gander or tries to continue/build the branch
@
text
@a1 23
./"                        L I B B U . 3
./" BRL-CAD
./"
./" Copyright (c) 2004-2005 United States Government as represented by
./" the U.S. Army Research Laboratory.
./"
./" This document is made available under the terms of the GNU Free
./" Documentation License or, at your option, under the terms of the
./" GNU General Public License as published by the Free Software
./" Foundation.  Permission is granted to copy, distribute and/or
./" modify this document under the terms of the GNU Free Documentation
./" License, Version 1.2 or any later version published by the Free
./" Software Foundation; with no Invariant Sections, no Front-Cover
./" Texts, and no Back-Cover Texts.  Permission is also granted to
./" redistribute this document under the terms of the GNU General
./" Public License; either version 2 of the License, or (at your
./" option) any later version.
./"
./" You should have received a copy of the GNU Free Documentation
./" License and/or the GNU General Public License along with this
./" document; see the file named COPYING for more information.
./"
./"./"./"
d147 1
a147 1
system calls must be semaphore protected.  For this reason,
d185 1
a185 1
Thus it should be used in place of strdup() in programs linking with
d205 1
a205 1
ed yourprog.c < ../include/sed4
@


14.3
log
@update copyright to 2005
@
text
@d252 1
a252 1
mail to <CAD@@ARL.ARMY.MIL>, or via the provided "cadbug.sh" script.
@


14.2
log
@Changes to move to the GPL license
@
text
@d233 1
a233 1
Copyright (c) 2004 United States Government as represented by the
@


14.1
log
@dawn of a new revision.  it shall be numbered 14 to match release 7.  begin the convergence by adding emacs/vi local variable footer blocks to encourage consistent formatting.
@
text
@d233 17
a249 2
This portion of The BRL-CAD Package is intended for wide-spread use
and is Public Domain, Distribution Unlimited.
@


1.3
log
@s/config.h/common.h
@
text
@@


1.2
log
@refer to the new config.h instead of conf.h
@
text
@d6 1
a6 1
\fB#include "config.h"
@


1.1
log
@Vast reorganization begins.  Sources moved from top-level directories into src/.
@
text
@d6 1
a6 1
\fB#include "conf.h"
@

