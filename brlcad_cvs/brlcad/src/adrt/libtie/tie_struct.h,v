head	1.3;
access;
symbols
	rel-7-10-4:1.1
	STABLE:1.1.0.2;
locks; strict;
comment	@ * @;


1.3
date	2007.12.04.21.59.08;	author erikgreenwald;	state Exp;
branches;
next	1.2;

1.2
date	2007.11.28.20.56.47;	author erikgreenwald;	state Exp;
branches;
next	1.1;

1.1
date	2007.08.30.19.04.57;	author brlcad;	state Exp;
branches;
next	;


desc
@@


1.3
log
@shuffle and pad the tie_s struct for slightly safer use outside of the dual-path environment...
@
text
@/*
 *  tie_struct.h
 *
 *  RCSid:          $Id: tie_struct.h,v 1.2 2007/11/28 20:56:47 erikgreenwald Exp $
*/

#ifndef	_TIE_STRUCT_H
#define _TIE_STRUCT_H

#include "tie_define.h"
#include <inttypes.h>

typedef struct TIE_3_s {
  tfloat v[3];
} TIE_3;

typedef struct tie_ray_s {
  TIE_3 pos;    /* Position */
  TIE_3 dir;    /* Direction */
  short depth;  /* Depth */
  short kdtree_depth;
} tie_ray_t;

typedef struct tie_id_s {
  TIE_3 pos;    /* Point */
  TIE_3 norm;   /* Normal */
  tfloat dist;   /* Distance */
  tfloat alpha;	/* Barycentric Coordinate Alpha */
  tfloat beta;	/* Barycentric Coordinate Beta */
} tie_id_t;

typedef struct tie_tri_s {
  TIE_3 data[3];	/* 36-bytes, Data[0] = Point, Data[1] = Normal, Data[2] = DotProduct, VectorU, VectorV */
  tfloat *v;		/* 8-bytes */
  void *ptr;		/* 4-bytes */
} tie_tri_t;

typedef struct tie_kdtree_s {
  tfloat axis;
  void *data;
} tie_kdtree_t;

typedef struct tie_geom_s {
  tie_tri_t **tri_list;
  int tri_num;
} tie_geom_t;

typedef struct tie_stack_s {
  tie_kdtree_t *node;
  tfloat near;
  tfloat far;
} tie_stack_t;

typedef struct tie_s {
  uint64_t rays_fired;
  tie_kdtree_t *kdtree;
  int max_depth;	/* Maximum depth allowed for given geometry */
  unsigned int tri_num;
  unsigned int tri_num_alloc;
  tie_tri_t *tri_list;
  int stat;		/* used for testing various statistics */
  int kdmethod;		/* Optimal or Fast */
  /* all tfloat altered stuff should be at the end. */
  TIE_3 min, max;
#if TIE_PRECISION == 0
  tfloat _pad[6];	/* so both float and double variants are the same size. */
#endif
} tie_t;

#endif
@


1.2
log
@merge of the "other" libtie...
@
text
@d4 1
a4 1
 *  RCSid:          $Id: tie_struct.h,v 1.1 2007/08/30 19:04:57 brlcad Exp $
a57 1
  TIE_3 min, max;
d63 5
@


1.1
log
@libtie update from Justin.  these changes are the updates after integration of libtie with MUVES-S2.  it includes a few minor api changes as well as a variety of bug fixes and other cleanup.
@
text
@d4 1
a4 1
 *  RCSid:          $Id: tie_struct.h,v 1.2 2007/05/09 13:57:38 kmurray Exp $
d63 1
@

