head	1.14;
access;
symbols
	rel-7-10-4:1.7
	STABLE:1.7.0.2
	rel-7-10-2:1.7
	rel-7-10-0:1.6
	rel-7-8-4:1.4
	rel-7-8-2:1.4
	rel-7-8-0:1.4
	trimnurbs-branch:1.4.0.2
	help:1.4
	temp_tag:1.2
	bobWinPort-20051223-freeze:1.1.2.3
	postmerge-20051223-bobWinPort:1.2
	bobWinPort:1.1.0.2;
locks; strict;
comment	@# @;


1.14
date	2007.12.14.21.29.18;	author bob1961;	state Exp;
branches;
next	1.13;

1.13
date	2007.12.13.20.58.06;	author bob1961;	state Exp;
branches;
next	1.12;

1.12
date	2007.11.09.21.36.59;	author bob1961;	state Exp;
branches;
next	1.11;

1.11
date	2007.11.04.16.15.31;	author bob1961;	state Exp;
branches;
next	1.10;

1.10
date	2007.10.02.00.38.12;	author brlcad;	state Exp;
branches;
next	1.9;

1.9
date	2007.10.01.07.06.35;	author brlcad;	state Exp;
branches;
next	1.8;

1.8
date	2007.10.01.07.03.03;	author brlcad;	state Exp;
branches;
next	1.7;

1.7
date	2007.05.14.20.00.28;	author bob1961;	state Exp;
branches;
next	1.6;

1.6
date	2007.01.23.01.13.49;	author brlcad;	state Exp;
branches;
next	1.5;

1.5
date	2007.01.20.14.37.01;	author brlcad;	state Exp;
branches;
next	1.4;

1.4
date	2006.01.31.02.08.23;	author brlcad;	state Exp;
branches;
next	1.3;

1.3
date	2006.01.25.03.19.11;	author brlcad;	state Exp;
branches;
next	1.2;

1.2
date	2005.12.23.21.26.47;	author bob1961;	state Exp;
branches;
next	1.1;

1.1
date	2005.09.21.14.46.07;	author bob1961;	state dead;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2005.09.21.14.46.07;	author bob1961;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	2005.09.26.13.07.27;	author bob1961;	state Exp;
branches;
next	1.1.2.3;

1.1.2.3
date	2005.11.17.17.12.13;	author bob1961;	state Exp;
branches;
next	;


desc
@@


1.14
log
@Removed the dir parameter from both LoadArcherCoreLibs and LoadArcherLibs.
@
text
@#              L O A D A R C H E R L I B S . T C L
# BRL-CAD
#
# Copyright (c) 2006-2007 United States Government as represented by
# the U.S. Army Research Laboratory.
#
# This library is free software; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public License
# version 2.1 as published by the Free Software Foundation.
#
# This library is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public
# License along with this file; see the file named COPYING for more
# information.
#
###
#
# Author(s):
#    Bob Parker (SURVICE Engineering Company)
#
# Description:
#    Code to load Archer's shared libraries.
###

proc LoadArcherCoreLibs {} {
    global tcl_platform

    # load tkimg
    if {$tcl_platform(platform) == "windows"} {
	set ext "dll"
	set tkimgdir [bu_brlcad_root "bin"]
    } else {
	set ext "so"
	set tkimgdir [bu_brlcad_root "lib"]
	if {![file exists $tkimgdir]} {
	    set tkimgdir [file join [bu_brlcad_data "src"] other tkimg .libs]
	}
    }

    # can't use sharedlibextension without changing tkimg build
    if {![file exists [file join $tkimgdir tkimg.$ext]]} {
	puts "ERROR: Unable to initialize Archer imagery"
	exit 1
    }

    load [file join $tkimgdir tkimg.$ext]

    if { [catch {package require Swidgets} _initialized] } {
	puts "$_initialized"
	puts ""
	puts "ERROR: Unable to load Archer Scripting"
	exit 1
    }
}

proc LoadArcherLibs {} {
    # Try to load Sdb
    if {[catch {package require Sdb 1.1}]} {
	set Archer::haveSdb 0
    } else {
	set Archer::haveSdb 1
    }
}

# Local Variables:
# mode: Tcl
# tab-width: 8
# c-basic-offset: 4
# tcl-indent-level: 4
# indent-tabs-mode: t
# End:
# ex: shiftwidth=4 tabstop=8
@


1.13
log
@Mods related to using ArcherCore.
@
text
@d29 1
a29 1
proc LoadArcherCoreLibs {dir} {
d60 1
a60 1
proc LoadArcherLibs {dir} {
@


1.12
log
@Archer now depends on bwish so this script gets simplified.
@
text
@d29 1
a29 1
proc LoadArcherLibs {dir} {
d52 9
a66 7

    if { [catch {package require Swidgets} _initialized] } {
	puts "$_initialized"
	puts ""
	puts "ERROR: Unable to load Archer Scripting"
	exit 1
    }
@


1.11
log
@Activate the fbserv capability on Windows.
@
text
@d32 1
d34 2
a35 25
	if {[info exists Archer::debug] && $Archer::debug} {
	    load [file join $dir bin itcl33_d.dll]
	    load [file join $dir bin itk33_d.dll]
	    load [file join $dir bin BLT24_d.dll]

	    # Load Brlcad libraries
	    load [file join $dir bin libbu_d]
	    load [file join $dir bin libbn_d]
	    load [file join $dir bin libsysv_d]
	    load [file join $dir bin librt_d]
	    load [file join $dir bin libdm_d]
	    load [file join $dir bin tkimg_d]
	} else {
	    load [file join $dir bin itcl33.dll]
	    load [file join $dir bin itk33.dll]
	    load [file join $dir bin BLT24.dll]

	    # Load Brlcad libraries
	    load [file join $dir bin libbu.dll]
	    load [file join $dir bin libbn.dll]
	    load [file join $dir bin libsysv.dll]
	    load [file join $dir bin librt.dll]
	    load [file join $dir bin libdm.dll]
	    load [file join $dir bin tkimg.dll]
	}
d37 1
a37 1
	# load tkimg
d42 1
d44 5
a48 5
	# can't use sharedlibextension without changing tkimg build
	if {![file exists [file join $tkimgdir tkimg.so]]} {
	    puts "ERROR: Unable to initialize Archer imagery"
	    exit 1
	}
d50 1
a50 2
	load [file join $tkimgdir tkimg.so]
    }
d58 7
@


1.10
log
@blt is actually already loaded as part of the preload in the main archer script, so don't need this load here
@
text
@d58 6
a63 1
    }
d65 5
a69 5
    # load tkimg
    set tkimgdir [bu_brlcad_root "lib"]
    if {![file exists $tkimgdir]} {
	set tkimgdir [file join [bu_brlcad_data "src"] other tkimg .libs]
    }
d71 1
a71 4
    # can't use sharedlibextension without changing tkimg build
    if {![file exists [file join $tkimgdir tkimg.so]]} {
	puts "ERROR: Unable to initialize Archer imagery"
	exit 1
a73 2
    load [file join $tkimgdir tkimg.so]

@


1.9
log
@comment on sharedlibextension
@
text
@a73 14
    # load blt
    set bltdir [bu_brlcad_root "lib"]
    if {![file exists $bltdir]} {
	set bltdir [file join [bu_brlcad_data "src"] other blt .libs]
    }

    set bltlibname libBLT[info sharedlibextension]
    if {![file exists [file join $bltdir $bltlibname]]} {
	puts "ERROR: Unable to initialize Archer interface"
	exit 2
    }

    load [file join $bltdir $bltlibname]

@


1.8
log
@load tkimg and blt during initialization and report the error appropriately if the load fails.
@
text
@d65 2
a66 1
    
@


1.7
log
@Use tcl_platform(platform) instead of tcl_platform(os).
@
text
@a57 10
    } else {
	if {[info exists $Archer::debug] && $Archer::debug} {
	} else {
	  set dir [bu_brlcad_root "lib"]
	    load [file join $dir libblt2.4.so]

	    # Load Brlcad libraries
	    #load [file join $dir lib libpng.so]
	    load [file join $dir tkimg.so]
	}
d60 27
@


1.6
log
@Sweeping license updates.  Documentation is fully relicensed to the BSD Documentation License (a minor variant of the FreeBSD Documentation License and BSD License).  All GPL code (mostly application code) is converted to the LGPL and now also specifically declares version 2.1, revoking the blank check to the FSF.  The intent of these sweeping changes are to simplify the licensing terms and increase overall flexibility of use, both externally (to users for their purposes) and internally (to allow application code to be migrated to libraries without creating GPL libraries).  As a collective work, BRL-CAD is now LGPL.
@
text
@d32 1
a32 1
    if {$tcl_platform(os) == "Windows NT"} {
d51 6
a56 6
	    load [file join $dir bin libbu]
	    load [file join $dir bin libbn]
	    load [file join $dir bin libsysv]
	    load [file join $dir bin librt]
	    load [file join $dir bin libdm]
	    load [file join $dir bin tkimg]
@


1.5
log
@update copyright to 2007
@
text
@d9 1
a9 2
# as published by the Free Software Foundation; either version 2 of
# the License, or (at your option) any later version.
@


1.4
log
@to quote Bob's commit to src/archer/archer "All of archer including the tclscripts is assigned to u.s. government and should be under the LGPL" so add the boilerplate legal header.  the COPYING file requires this regardless for all commits whether implicit or explicit.  also add the boilerplate variables footer while we're at it.
@
text
@d4 1
a4 1
# Copyright (c) 2006 United States Government as represented by
@


1.3
log
@load the blt library by getting lib out of the bu_brlcad_root path.. need to refactor this puppy, but it should work irrespective of the other stuff
@
text
@d1 21
a21 1
##
d28 1
a28 1
#
d78 9
@


1.2
log
@Merge of bobWinPort
@
text
@d42 2
a43 1
	    load [file join $dir lib libblt2.4.so]
d47 1
a47 1
	    load [file join $dir lib tkimg.so]
@


1.1
log
@file LoadArcherLibs.tcl was initially added on branch bobWinPort.
@
text
@d1 56
@


1.1.2.1
log
@Initial check-in
@
text
@a0 46

proc LoadArcherLibs {dir} {
    global archerDebug
    global tcl_platform

    if {$tcl_platform(os) == "Windows NT"} {
	if {[info exists $archerDebug] && $archerDebug} {
	    load [file join $dir bin itcl33_d.dll]
	    load [file join $dir bin itk33_d.dll]
	    load [file join $dir bin BLT24_d.dll]

	    # Load Brlcad libraries
	    load [file join $dir bin libbu_d]
	    load [file join $dir bin libbn_d]
	    load [file join $dir bin libsysv_d]
	    load [file join $dir bin librt_d]
	    load [file join $dir bin libdm_d]
	    load [file join $dir bin libpng_d]
	    load [file join $dir bin tkimg_d]
	    load [file join $dir bin tkimgpng_d]
	} else {
	    load [file join $dir bin itcl33.dll]
	    load [file join $dir bin itk33.dll]
	    load [file join $dir bin BLT24.dll]

	    # Load Brlcad libraries
	    load [file join $dir bin libbu]
	    load [file join $dir bin libbn]
	    load [file join $dir bin libsysv]
	    load [file join $dir bin librt]
	    load [file join $dir bin libdm]
	    load [file join $dir bin libpng]
	    load [file join $dir bin tkimg]
	    load [file join $dir bin tkimgpng]
	}
    } else {
	if {[info exists $archerDebug] && $archerDebug} {
	} else {
	    load [file join $dir lib libblt2.4.so]

	    # Load Brlcad libraries
	    #load [file join $dir lib libpng.so]
	    load [file join $dir lib tkimg.so]
	}
    }
}
@


1.1.2.2
log
@Add code to set haveSdb; No longer need to load libpng and tkimgpng
@
text
@d3 1
d7 1
a7 1
	if {[info exists $Archer::debug] && $Archer::debug} {
d18 1
d20 1
d32 1
d34 1
d37 1
a37 1
	if {[info exists $Archer::debug] && $Archer::debug} {
a45 7

    # Try to load Sdb
    if {[catch {package require Sdb 1.1}]} {
	set Archer::haveSdb 0
    } else {
	set Archer::haveSdb 1
    }
@


1.1.2.3
log
@Fixed typo (i.e. errantly dereferenced a variable)
@
text
@a0 8
##
#
# Author(s):
#    Bob Parker (SURVICE Engineering Company)
#
# Description:
#    Code to load Archer's shared libraries.
#
d6 1
a6 1
	if {[info exists Archer::debug] && $Archer::debug} {
@


