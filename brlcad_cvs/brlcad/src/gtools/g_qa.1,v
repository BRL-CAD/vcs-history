head	1.31;
access;
symbols
	rel-7-10-4:1.31
	STABLE:1.31.0.2
	rel-7-10-2:1.31
	rel-7-10-0:1.31
	rel-7-8-4:1.26
	rel-7-8-2:1.26
	rel-7-8-0:1.26
	trimnurbs-branch:1.26.0.2
	help:1.26
	temp_tag:1.24
	bobWinPort-20051223-freeze:1.14
	postmerge-20051223-bobWinPort:1.24
	premerge-20051223-bobWinPort:1.24
	rel-7-6-6:1.24
	rel-7-6-4:1.23
	rel-7-6-2:1.19
	rel-7-6-branch:1.19.0.2
	rel-7-6-0:1.19
	rel-7-4-2:1.15.2.2
	rel-7-4-branch:1.15.0.2
	bobWinPort:1.14.0.2;
locks; strict;
comment	@.\" @;


1.31
date	2007.01.27.01.41.34;	author brlcad;	state Exp;
branches;
next	1.30;

1.30
date	2007.01.23.01.13.32;	author brlcad;	state Exp;
branches;
next	1.29;

1.29
date	2007.01.20.14.59.14;	author erikgreenwald;	state Exp;
branches;
next	1.28;

1.28
date	2007.01.20.13.43.25;	author brlcad;	state Exp;
branches;
next	1.27;

1.27
date	2007.01.18.21.09.10;	author lbutler;	state Exp;
branches;
next	1.26;

1.26
date	2006.01.18.06.46.15;	author brlcad;	state Exp;
branches;
next	1.25;

1.25
date	2006.01.17.05.54.48;	author brlcad;	state Exp;
branches;
next	1.24;

1.24
date	2005.12.06.16.20.21;	author lbutler;	state Exp;
branches;
next	1.23;

1.23
date	2005.11.08.14.36.32;	author lbutler;	state Exp;
branches;
next	1.22;

1.22
date	2005.10.27.06.34.16;	author brlcad;	state Exp;
branches;
next	1.21;

1.21
date	2005.10.23.04.44.30;	author brlcad;	state Exp;
branches;
next	1.20;

1.20
date	2005.09.09.03.29.35;	author brlcad;	state Exp;
branches;
next	1.19;

1.19
date	2005.09.08.20.17.29;	author lbutler;	state Exp;
branches
	1.19.2.1;
next	1.18;

1.18
date	2005.09.08.16.14.51;	author lbutler;	state Exp;
branches;
next	1.17;

1.17
date	2005.09.08.15.11.36;	author lbutler;	state Exp;
branches;
next	1.16;

1.16
date	2005.08.22.23.25.54;	author lbutler;	state Exp;
branches;
next	1.15;

1.15
date	2005.08.15.22.37.25;	author lbutler;	state Exp;
branches
	1.15.2.1;
next	1.14;

1.14
date	2005.08.12.22.41.57;	author lbutler;	state Exp;
branches;
next	1.13;

1.13
date	2005.08.08.12.07.39;	author lbutler;	state Exp;
branches;
next	1.12;

1.12
date	2005.08.03.21.13.56;	author lbutler;	state Exp;
branches;
next	1.11;

1.11
date	2005.08.02.22.57.08;	author lbutler;	state Exp;
branches;
next	1.10;

1.10
date	2005.07.28.19.51.48;	author lbutler;	state Exp;
branches;
next	1.9;

1.9
date	2005.07.27.22.51.17;	author lbutler;	state Exp;
branches;
next	1.8;

1.8
date	2005.07.25.22.27.19;	author lbutler;	state Exp;
branches;
next	1.7;

1.7
date	2005.07.25.15.26.57;	author lbutler;	state Exp;
branches;
next	1.6;

1.6
date	2005.07.21.19.42.05;	author lbutler;	state Exp;
branches;
next	1.5;

1.5
date	2005.07.20.22.37.26;	author lbutler;	state Exp;
branches;
next	1.4;

1.4
date	2005.07.20.21.55.26;	author lbutler;	state Exp;
branches;
next	1.3;

1.3
date	2005.07.19.20.55.45;	author lbutler;	state Exp;
branches;
next	1.2;

1.2
date	2005.07.18.22.40.43;	author lbutler;	state Exp;
branches;
next	1.1;

1.1
date	2005.07.18.19.27.40;	author lbutler;	state Exp;
branches;
next	;

1.15.2.1
date	2005.08.15.22.37.25;	author brlcad;	state dead;
branches;
next	1.15.2.2;

1.15.2.2
date	2005.08.16.21.03.48;	author brlcad;	state Exp;
branches;
next	;

1.19.2.1
date	2005.11.13.13.46.14;	author brlcad;	state Exp;
branches;
next	;


desc
@@


1.31
log
@ws. lots and lots of ws.  see sh/ws.sh for details (cases 'abcdeg').
@
text
@.TH G_QA 1
.\"                         G _ Q A . 1
.\" BRL-CAD
.\"
.\" Copyright (c) 2005-2007 United States Government as represented by
.\" the U.S. Army Research Laboratory.
.\"
.\" Redistribution and use in source (Docbook format) and 'compiled'
.\" forms (PDF, PostScript, HTML, RTF, etc), with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\"
.\" 1. Redistributions of source code (Docbook format) must retain the
.\" above copyright notice, this list of conditions and the following
.\" disclaimer.
.\"
.\" 2. Redistributions in compiled form (transformed to other DTDs,
.\" converted to PDF, PostScript, HTML, RTF, and other formats) must
.\" reproduce the above copyright notice, this list of conditions and
.\" the following disclaimer in the documentation and/or other
.\" materials provided with the distribution.
.\"
.\" 3. The name of the author may not be used to endorse or promote
.\" products derived from this documentation without specific prior
.\" written permission.
.\"
.\" THIS DOCUMENTATION IS PROVIDED BY THE AUTHOR AS IS'' AND ANY
.\" EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
.\" PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
.\" CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
.\" OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
.\" BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
.\" LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
.\" USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\".\".\"
.\" Set the interparagraph spacing to 1 (default is 0.4)
.PD 1v
.\"
.\" The man page begins...
.SH NAME
g_qa \- a BRL-CAD quantitative geometry analysis tool
.SH SYNOPSIS
.BR "g_qa " "[options] model.g objects"
.SH DESCRIPTION
The
.I g_qa
program computes and reports a variety of characteristics of the
.I objects
specified from the given
.I model.g
geometric description.
The characteristics which can be computed include
.B weight, volume, overlaps, exposed air, gaps/voids,
and
.B adjacent air.
.\"and
.\".B interfaces.
Only the
.I objects
from the database specified on the command line are analyzed.
.P
It works by shooting grids of rays from the three axis-aligned directions (sometimes called
\fIviews\fR).


For Volume/Weight calculations the resulting calculations for each view are compared to each other.
The grid of rays is progressively refined until the results from all three views
agree within a user-specifiable tolerance, or a limit on grid refinement is reached.
.P
For error and interface calculations, the grid is refined until an error is found or the grid refinement
limit is reached.
.P
When multiple calculations are performed, the most extensive path is taken.
For example, if weight and overlap calculations are performed, then the grid
will be refined until the refinement limit is reached, or an overlap is
detected.

.SH VOLUME AND WEIGHT CALCULATION
If volume or weight calculation is selected a value is calculated and reported
For each
.I object
specified on the command line.
.B Note that if there are overlaps or other errors in the geometry the values reported will be invalid.

.P
For weight computation, the density of every region must be specified.
Densities are specified as an index in a table of density values.
This index is stored in the
.I GIFTmater
attribute of each region (typically set with the
.I edcodes
or
.I adjust
commands in MGED).
.P
The density table consists of three columns:
.IP
.B An integer index value.
This is the value the to which the \fIGIFTmater\fR attribute will be set to select this material for the region.
.IP
.B A floating point density value.
This is the density for the material, and is specified in \fBgrams/cc\fR.
.IP
.B A name string
This is a name or description the material.
.in -5
.P
An example file might look like the following:
.IP
2	7.82		Carbon Tool Steel
.br
3	2.7		Aluminum, 6061-T6
.br
4	2.74		Aluminum, 7079-T6
.br
5	8.9		Copper, pure
.br
6	19.32		Gold, pure
.br
7	8.03		Stainless, 18Cr-8Ni
.br
8	7.47		Stainless 27Cr
.br
9	7.715		Steel, tool
.br
10	7.84		Carbon Steel
.P
The table is typically created in an external file using a text editor.

The geometry editor MGED automatically assigns an index value of
.B 1
to a newly created region.
While this default can be handy when a vast majority of objects are made from the same
material, it can lead to surprising errors when objects which are supposed to have a
certain weight are computed to have different weight because one or two regions
were not set to the correct, non-default index value.  As a result, it is advised that the index value
.B 1
never be used.  If this practice is followed, then an error message will be generated for any
regions which have not had their material index set to something other than the default.
.P
The user will typically want to run g_qa and verify the results using the
.I \-f
option (see below)
before importing the table into the database.
For example, if a material index is left out of the table,
it is easier to rectify the situation using the external file.
Once the table has been verified as correct and complete, it is imported to the database as the binary object
\fB_DENSITIES\fR.
To import the text file into the database, the following comand is used:
.IP
mged>
.B dbbinary \-i u c _DENSITIES
.I filename

.SH GEOMETRY ERROR DETECTION
.P
All of these calculations run until an error is detected, or until the grid
refinement limit is reached.
.SH OVERLAP DETECTION
For each pair of regions that overlap, the tool reports the two regions that
overlap,
the maximum line-of-sight thickness of the overlap, and the in-hit location
of the ray that caused that maximum overlap thickness.
.P
Other analysis in the error detection category behave in a similar manner.
.SH OPTIONS
.TP
.B \-A \fR\fIanalysis_flags\fR
Specifies which computations are to be performed and reported.
The
.I analysis_flags
parameter is one or more of the following:
.in +5
.sp
\fBvalue	report generated\fR
.br
A		all
.br
a		Adjacent different air
.br
b		Bounding box dimensions
.br
e		Exposed air
.br
g		Gaps/voids
.br
o		Overlaps
.br
v		Volume
.br
w		Weight
.sp
.in -5
Only those reports requested will be provided.  The default is
.B -AA
to produce all reports.

.B Adjacent different air (a):
Detects air volumes which are next to each other but have different air_code values applied to the region.
This would typically indicate that the regions are different types of air,
such as crew_air (which fills the crew compartment of a vehicle) and engine_air (which surrounds the engine).
When these different types of air adjoin each other, it is generally considered a modeling error.

.B Bounding box dimensions (b):
Reports the dimensions of an axis-aligned box which fully encloses the
\fIobjects\fR.

.B Exposed air (e):
This causes checks to be made to see if the ray encounters air regions before
(or after all) solid objects.
It also checks to see if the ray moves from a void to an air region.
Typically, only the air inside a building or vehicle is modeled if the
purpose of the model is to support analysis of
that single structure/vehicle.
There are exceptions, such as when modeling larger environments for more
extended analysis purposes.

.B Gaps/voids (g):
This reports when there is more than
.I overlap_tol_dist
(see the
.B \-t
option below)
between objects on the ray path.  Note that not all gaps are errors.
For example, gaps between a wheel and a fender are expected (unless external air is modeled).
Typically, users should perform gap analysis on contained subsets of a model (such as passenger compartments)
rather than on whole vehicles.

.B Overlaps (o):
are two regions which occupy the same space.
In the real world, two objects may not occupy the same space.
This check is sometimes also known as \fIinterference checking\fR.
Two objects must overlap by at least
.I overlap_tol_dist
(see the
.B \-t
option below)
to be considered to overlap.  Overlap testing causes the grid spacing to
be refined until the limit is reached, or an overlap is detected.
See the
.B \-g
option below for details on setting the grid spacing.
Once overlaps have been detected, grid refinement is not done, and processing stops.

.B Volume (v):
Computes the volume of the
.I objects
specified on the command line.

.B Weight (w):
Computes the weight of the
.I objects
specified on the command line.
.TP
.B \-a \fR\fIazimuth_deg\fR
.B Not Implemented.
.br
Sets a rotation (in degrees) of the coordinate system by a given amount about the Z axis.
The default is 0.
See also:
.B \-e
.TP
.B \-e \fR\fIelevation_deg\fR
.B Not Implemented.
.br
Sets a rotation (in degrees) of the coordinate system by a given elevation from the XY plane (rotation about X axis?).
The default is 0.
See also
.B \-a
.TP
.B \-f \fR\fIfilename\fR
Specifies that density values should be taken from an external file instead of from the
.B _DENSITIES
object in the database.
This option can be useful when developing the density table with a text editor, prior to importing it to the geometric database.
.TP
.B \-g \fR\fI[initial_grid_spacing-]grid_spacing_limit\fR
Specifies a limit on how far the grid can be refined
and optionally the initial spacing between rays in the grids.
The first value (if present) indicates the inital spacing between grid rays.
The mandatory argument, "\fIgrid_spacing_limit\fR",
indicates a lower bound on how fine the gridspacing may get before computation is terminated.
In general, the \fIinitial_grid_spacing\fR value should be an integer power of
the \fIgrid_spacing_limit\fR.  So for example, if \fIgrid_spacing_limit\fR has
the value 1, then any \fIinitial_grid_spacing\fR specified should be in the
sequence 2, 4, 8, 16, 32... so that the grid will refine to precisely the
lower limit.
.\" Should the code force this issue?"
The grid spacing may be specified with units.  For example:
.B 5 mm
or
.B 10 in.
If units are not provided, millimeters are presumed to be the units.
.IP

The default values are 50.0 mm and 0.5 mm, which is equivalent to specifying:
.B \-g 50.0mm-0.5mm
or
.B \-g 50.0mm,0.5mm
on the command line.
This is a hard limit.  If other analysis constraints are not met, the grid
spacing will never be refined smaller than the minimum grid size to satisfy
another constraint.
The initial grid spacing is divided in half at each refinement step.  As a
result, if you desire a lower limit to actually be tested, then the initial
grid size must be a power of 2 greater.  For example, specifying -g10mm,1mm
would result in grid spacings of 10, 5, 2.5, 1.25 being used.  If the goal was
to exactly end at a 1mm grid, then values such as 8 or 16 should have been
chosen for the initial values.  This would result in testing 16, 8, 4, 2, 1
grid spacing values.

.TP
.B \-G
.br
.B Not Implemented.
.br
Specifies that the program should create new
.I assembly combinations
in the geometry database to represent the overlap pairs.
This flag is meaningless if overlap reporting is not turned on with the
.B \-A
option.
If regions
.I rod.r
and
.I disk.r
overlap, this option will cause the creation of an assembly called _OVERLAP_rod.r_disk.r which includes the following items:
.in +5
.br
.I rod.r
.br
.I disk.r
.br
.I _OVERLAP_lines_rod.r_disk.r
.in -5

The last item is an object to represent the overlapping area so that it can be easily seen.
The default is that no groups are created.
.TP
.B \-n \fR\fInum_hits\fR
Specifies that the grid be refined until each region has at least
.I num_hits
ray intersections.  Applies only when Weight or Volume calculations are being performed.
This limit is not applied per-view, but rather per-analysis.
So for example, it is accepted that a thin object might not be hit from one view at all, but hit when shooting from other views.
.IP
The default is 1.
Hence, each region must be intersected by a ray at least once during the analysis.
.TP
.B \-N \fR\fInum_views\fR
Specifies that only the first
.I num_views
should be computed.  This is principly a debugging option.
.TP
.B \-p
Specifies that
.I g_qa
should produce plot files for each of the analysis it performs.  These can be overlaid on the geometry in
.I mged
with the
.I overlay
command to help visualize the analysis results.
Each of the different analysis types write to a separate plot file and use different colors for drawing.
.TP
.B \-P \fR\fIncpu\fR
Specifies that
.I ncpu
CPUs should be used for performing the calculation.
By default, all local CPUs are utilized.
This option exists primarily to reduce the number of
computation threads from the machine maximum.
Note that specifying more CPUs than are present on the machine does not increase
the number of computation threads.
.TP
.B \-r
Indicates that
.I g_qa
should print per-region statistics for weight and volume as well as the values for the objects specified on the command line.
.TP
.B \-S \fR\fIsamples_per_model_axis\fR
Specifies that the grid spacing will be initially refined so that at least
.I samples_per_axis_min
will be shot along each axis of the bounding box of the model.
For example, if the objects specified have a bounding box of 0 0 0 -> 4 3 2 and the grid spacing is 1.0, specifying the option
.B \-S 4
will cause the initial grid spacing to be adjusted to 0.5 so that 4 samples will be shot across the Z dimension of the bounding box.
The default is to assure 1 rays per model grid axis.
.TP
.B \-t \fR\fIoverlap_tolerance\fR
Sets the tolerance for computing overlaps.  the
.I overlap_tolerance
must be a positive number equal to or greater than 0.0.
Any overlap smaller than the value specified will be ignored.
The default value is 0.0, which causes any overlap to be reported/processed.
The value may be specified with a unit specifier such as:
.B -t 1.0mm
or
.B -t 0.25in.
.TP
.B \-U \fR\fIuse_air\fR
Specifies the Boolean value (0 or 1) for
.I use_air
which indicates whether regions which are marked as "air" should be retained and included in the raytrace.
.B Unlike other BRL-CAD raytracing applications the default is to retain air in the raytracing.
The
.B \-U 0
option causes air regions to be discarded prior to raytracing.
If you turn off use_air, and request any analysis that requires it (see
.I \-A
above) then the program will exit with an error message.
.TP
.B \-u \fR\fIdistane,volume,weight\fR
Specify the units used when reporting values.  Values must be comma delimited and provided in the order
\fIdistance\fR,\fIvolume\fR,\fIweight\fR.  For example:
.B \-u ``cm,cu ft,kg''
or \fB\-u ,,kg\fR (the latter example sets only the weight units).
Note that unit values with spaces in their names such as
.I cu ft
must be contained in quotes for the shell to keep the values together.

The default units are millimeters, cubic millimeters, and grams.
.TP
.B \-v
Turns on verbose reporting of computation progress.  This is useful for
learning how the computation is progressing, and what tolerances are causing
further computation to be necessary.
.TP
.B \-V \fR\fIvolume_tolerance[units]\fR
Specifies a volumetric tolerance value that the three view computations must be within for computation to complete.
If volume calculation is selected and this option is not set, then the tolerance is set to
1/10,000 of the volume of the model.
For large, complex objets (such as entire vehicles), this value might need to be
set larger to achieve reasonable runtimes (or even completion).
Given the approximate sampling nature of the algorithm, the
three separate view computations will not usually produce identical results.
.TP
.B \-W \fR\fIweight_tolerance[units]\fR
This is like the volume tolerance, \fB\-T\fR, but is applied to the weight computation results,
not the volume computation results.

The weight computation tolerance is probably more appropriate when doing whole-vehicle analysis.
If weight computation is selected, it is set to a value equal to the weight of an object 1/100
the size of the model, which is made of the most dense material in the table.

.SH EXAMPLES
.P
The following command computes the weight of an object called
.I wheel.r
from the geometry database
.I model.g
and reports the weight and volume, and checks for overlaps.
.IP
g_qa model.g wheel.r
.P
The following will check objects hull, turret, and suspension for overlaps
and report exposed air.
The grid starts at 1 cm and is refined to 1mm unless overlaps or exposed air is detected
before the grid is refined to 1mm

.IP
g_qa -g 1cm-1mm -A oe model.g hull turret suspension

.P
The following computes volume and weight of hull, turret, and suspension.  Results are reported in cubic centimeters (cc) and ounces (oz).  The grid spacing starts at 5in and will not be refined below 0.3mm spacing.
.IP
g_qa -g5in-0.3mm -Avw -u ft,cc,oz test.g hull turret suspension
.P
For an example of each independent analysis type, consider the following:
.IP
.nf

% \fBg_qa -u m,m^3,kg -Ao geometry.g overlaps\fR
Units:
 length: m volume: m^3 weight: kg
grid spacing 50mm  199 x 199 x 199
Summary:
list Overlaps:
/overlaps/overlap_obj.r /overlaps/closed_box.r count:32039 dist:8m @@ (9050 1000 1000)

% \fBg_qa -u m,m^3,kg -Ae geometry.g exposed_air.g\fR
Units:
 length: m volume: m^3 weight: kg
grid spacing 50mm  199 x 199 x 199
Summary:
list Exposed Air:
/exposed_air.g/exposed_air.r count:25921 dist:9m @@ (10000 1000 1000)

% \fBg_qa -u m,m^3,kg -Ag geometry.g gap.g\fR
Units:
 length: m volume: m^3 weight: kg
grid spacing 50mm  199 x 199 x 199
Summary:
list Gaps:
/gap.g/closed_box.r /gap.g/closed_box.r count:26082 dist:8m @@ (9000 1000 1000)
/gap.g/adj_air2.r /gap.g/closed_box.r count:25921 dist:4m @@ (1000 5000 1000)

% \fBg_qa -u m,m^3,kg -Av geometry.g closed_box.r\fR
Units:
 length: m volume: m^3 weight: kg
setting volume tolerance to 1 m^3
grid spacing 50mm  199 x 199 x 199
grid spacing 25mm  399 x 399 x 399
grid spacing 12.5mm  799 x 799 x 799
Summary:
	closed_box.r  484.195 m^3
  Average total volume: 488.327 m^3

% \fBg_qa -u m,m^3,kg -Aw geometry.g closed_box.r\fR
Units:
 length: m volume: m^3 weight: kg
setting weight tolerance to 768000 kg
grid spacing 50mm  199 x 199 x 199
Summary:
Weight:
	closed_box.r  3.6375e+06 kg
  Average total weight: 3.67541e+06 kg

.fi
@


1.30
log
@Sweeping license updates.  Documentation is fully relicensed to the BSD Documentation License (a minor variant of the FreeBSD Documentation License and BSD License).  All GPL code (mostly application code) is converted to the LGPL and now also specifically declares version 2.1, revoking the blank check to the FSF.  The intent of these sweeping changes are to simplify the licensing terms and increase overall flexibility of use, both externally (to users for their purposes) and internally (to allow application code to be migrated to libraries without creating GPL libraries).  As a collective work, BRL-CAD is now LGPL.
@
text
@d12 1
a12 1
.\" 
d16 1
a16 1
.\" 
d22 1
a22 1
.\" 
d26 1
a26 1
.\" 
d58 1
a58 1
.B weight, volume, overlaps, exposed air, gaps/voids, 
d166 2
a167 2
overlap, 
the maximum line-of-sight thickness of the overlap, and the in-hit location 
d301 1
a301 1
The default values are 50.0 mm and 0.5 mm, which is equivalent to specifying: 
d352 1
a352 1
The default is 1.  
d395 1
a395 1
Sets the tolerance for computing overlaps.  the 
d398 3
a400 3
Any overlap smaller than the value specified will be ignored.  
The default value is 0.0, which causes any overlap to be reported/processed.  
The value may be specified with a unit specifier such as: 
d402 1
a402 1
or 
d466 1
a466 1
g_qa -g 1cm-1mm -A oe model.g hull turret suspension 
d510 1
a510 1
        closed_box.r  484.195 m^3
d520 1
a520 1
        closed_box.r  3.6375e+06 kg
@


1.29
log
@update copyright to 2007
@
text
@d8 31
a38 15
.\" This document is made available under the terms of the GNU Free
.\" Documentation License or, at your option, under the terms of the
.\" GNU General Public License as published by the Free Software
.\" Foundation.  Permission is granted to copy, distribute and/or
.\" modify this document under the terms of the GNU Free Documentation
.\" License, Version 1.2 or any later version published by the Free
.\" Software Foundation; with no Invariant Sections, no Front-Cover
.\" Texts, and no Back-Cover Texts.  Permission is also granted to
.\" redistribute this document under the terms of the GNU General
.\" Public License; either version 2 of the License, or (at your
.\" option) any later version.
.\"
.\" You should have received a copy of the GNU Free Documentation
.\" License and/or the GNU General Public License along with this
.\" document; see the file named COPYING for more information.
@


1.28
log
@trailing newline
@
text
@d5 1
a5 1
.\" Copyright (c) 2005-2006 United States Government as represented by
@


1.27
log
@Added documentation for -t option.
@
text
@d507 1
a507 1
.fi@


1.26
log
@update copyright to 2006
@
text
@d377 11
a387 1

@


1.25
log
@fix the manpage commments via s/\.\/"/.\\\"/g
@
text
@d5 1
a5 1
.\" Copyright (c) 2005 United States Government as represented by
@


1.24
log
@Updated termination check so that "vol/weight" tests cannot cause early
termination when "error checks" are being done.  The -n required_hits flag
now only applies to vol/weight calculations.  This fixes a behavioral bug
where analysis could run past the "lower" limit on the grid spacing.
Since interface checking is not implemented, it was removed it from the manpage.
Updated manpage with new syntax for -g option.  This is not implemented, but it
snuck in.  I'll commit the changes to g_qa.c RSN.
@
text
@d2 23
a24 23
./"                         G _ Q A . 1
./" BRL-CAD
./"
./" Copyright (c) 2005 United States Government as represented by
./" the U.S. Army Research Laboratory.
./"
./" This document is made available under the terms of the GNU Free
./" Documentation License or, at your option, under the terms of the
./" GNU General Public License as published by the Free Software
./" Foundation.  Permission is granted to copy, distribute and/or
./" modify this document under the terms of the GNU Free Documentation
./" License, Version 1.2 or any later version published by the Free
./" Software Foundation; with no Invariant Sections, no Front-Cover
./" Texts, and no Back-Cover Texts.  Permission is also granted to
./" redistribute this document under the terms of the GNU General
./" Public License; either version 2 of the License, or (at your
./" option) any later version.
./"
./" You should have received a copy of the GNU Free Documentation
./" License and/or the GNU General Public License along with this
./" document; see the file named COPYING for more information.
./"
./"./"./"
d45 2
a46 2
./"and
./".B interfaces.
d277 1
a277 1
./" Should the code force this issue?"
@


1.23
log
@The -g command line option can now have its arguments separated by either
a comma or a hyphen now, based upon user request.
@
text
@d42 1
a42 1
.B weight, volume, overlaps, exposed air, gaps/voids, adjacent air,
d44 3
a46 1
.B interfaces.
d53 4
a56 2
The resulting calculations for each view are compared to each other.
For Volume/Weight calculations the grid of rays is progressively refined until the results from all three views
d58 1
d61 6
d68 2
a69 1
If volume or weight calculation is selected, for each
d71 2
a72 2
specified on the command line, value is calculated and reported.
Note that if there are overlaps in the geometry the values reported will be invalid.
d144 4
d149 6
a154 2
For each pair of regions that overlap, the tool reports the two regions that overlap, the maximum line-of-sight thickness of the overlap, and the in-hit location of the ray that caused that maximum overlap thickness.

d266 12
a277 6
.B \-g \fR\fIgrid_spacing[-lim]\fR
Specifies the initial spacing between rays in the grids,
and optionally a limit on how far the grid can be refined.
The first value indicates the inital spacing between grid rays.
If the optional second argument, "\fIlim\fR",
is specified, it indicates a lower bound on how fine the gridspacing may get before computation is terminated.
d332 1
a332 1
ray intersections.
d336 2
a337 2
The default is 1.  This indicates that each region must be intersected by a ray at least once during the analysis.
If the grid spacing limit is reached, processing will end even if this criteria has not been met.
@


1.22
log
@delimit -g option with a comma, not a dash -- dash is indistinguishable from a negative sign
@
text
@d258 4
a261 1
The default values are 50.0 mm and 0.5 mm, which is equivalent to specifying:
d414 2
a415 1
g_qa -g 1cm,1mm -A oe model.g hull turret suspension
d419 1
a419 1
g_qa -g5in,0.3mm -Avw -u ft,cc,oz test.g hull turret suspension
@


1.21
log
@trailing ws
@
text
@d266 1
a266 1
grid size must be a power of 2 greater.  For example, specifying -g10mm-1mm
@


1.20
log
@add the standard documentation gfdl/gpl license header and copyright/distribution notice
@
text
@d34 2
a35 2
The 
.I g_qa 
d38 1
a38 1
specified from the given 
d41 3
a43 3
The characteristics which can be computed include 
.B weight, volume, overlaps, exposed air, gaps/voids, adjacent air, 
and 
d45 1
a45 1
Only the 
d49 2
a50 2
It works by shooting grids of rays from the three axis-aligned directions (sometimes called 
\fIviews\fR).  
d57 1
a57 1
If volume or weight calculation is selected, for each 
d63 1
a63 1
For weight computation, the density of every region must be specified.  
d65 2
a66 2
This index is stored in the 
.I GIFTmater 
d73 1
a73 1
The density table consists of three columns: 
d79 1
a79 1
This is the density for the material, and is specified in \fBgrams/cc\fR. 
d105 1
a105 1
The table is typically created in an external file using a text editor.  
d107 1
a107 1
The geometry editor MGED automatically assigns an index value of 
d111 3
a113 3
material, it can lead to surprising errors when objects which are supposed to have a 
certain weight are computed to have different weight because one or two regions 
were not set to the correct, non-default index value.  As a result, it is advised that the index value 
d115 1
a115 1
never be used.  If this practice is followed, then an error message will be generated for any 
d118 1
a118 1
The user will typically want to run g_qa and verify the results using the 
d121 3
a123 3
before importing the table into the database.  
For example, if a material index is left out of the table, 
it is easier to rectify the situation using the external file. 
d129 1
a129 1
.B dbbinary \-i u c _DENSITIES 
d133 1
a133 1
For each pair of regions that overlap, the tool reports the two regions that overlap, the maximum line-of-sight thickness of the overlap, and the in-hit location of the ray that caused that maximum overlap thickness.  
d139 1
a139 1
The 
d163 1
a163 1
Only those reports requested will be provided.  The default is 
d168 2
a169 2
Detects air volumes which are next to each other but have different air_code values applied to the region.  
This would typically indicate that the regions are different types of air, 
d174 1
a174 1
Reports the dimensions of an axis-aligned box which fully encloses the 
d178 1
a178 1
This causes checks to be made to see if the ray encounters air regions before 
d181 1
a181 1
Typically, only the air inside a building or vehicle is modeled if the 
d184 1
a184 1
There are exceptions, such as when modeling larger environments for more 
d193 1
a193 1
between objects on the ray path.  Note that not all gaps are errors.  
d199 2
a200 2
are two regions which occupy the same space.  
In the real world, two objects may not occupy the same space.  
d202 1
a202 1
Two objects must overlap by at least 
d209 2
a210 2
See the 
.B \-g 
d215 1
a215 1
Computes the volume of the 
d220 1
a220 1
Computes the weight of the 
d227 2
a228 2
Sets a rotation (in degrees) of the coordinate system by a given amount about the Z axis.  
The default is 0. 
d235 1
a235 1
Sets a rotation (in degrees) of the coordinate system by a given elevation from the XY plane (rotation about X axis?).  
d241 2
a242 2
Specifies that density values should be taken from an external file instead of from the 
.B _DENSITIES 
d249 1
a249 1
The first value indicates the inital spacing between grid rays.  
d254 1
a254 1
or 
d258 1
a258 1
The default values are 50.0 mm and 0.5 mm, which is equivalent to specifying: 
d277 1
a277 1
Specifies that the program should create new 
d279 2
a280 2
in the geometry database to represent the overlap pairs.  
This flag is meaningless if overlap reporting is not turned on with the 
d283 1
a283 1
If regions 
d285 1
a285 1
and 
d297 1
a297 1
The last item is an object to represent the overlapping area so that it can be easily seen.  
d301 1
a301 1
Specifies that the grid be refined until each region has at least 
d316 1
a316 1
Specifies that 
d318 1
a318 1
should produce plot files for each of the analysis it performs.  These can be overlaid on the geometry in 
d320 1
a320 1
with the 
d328 2
a329 2
CPUs should be used for performing the calculation.  
By default, all local CPUs are utilized.  
d333 1
a333 1
the number of computation threads.  
d336 1
a336 1
Indicates that 
d355 1
a355 1
The 
d363 1
a363 1
Specify the units used when reporting values.  Values must be comma delimited and provided in the order 
d379 2
a380 2
Specifies a volumetric tolerance value that the three view computations must be within for computation to complete.  
If volume calculation is selected and this option is not set, then the tolerance is set to 
d382 2
a383 2
For large, complex objets (such as entire vehicles), this value might need to be 
set larger to achieve reasonable runtimes (or even completion).  
d389 1
a389 1
not the volume computation results.  
d392 1
a392 1
If weight computation is selected, it is set to a value equal to the weight of an object 1/100 
d397 1
a397 1
The following command computes the weight of an object called 
d399 1
a399 1
from the geometry database 
d406 1
a406 1
and report exposed air.  
d411 1
a411 1
g_qa -g 1cm,1mm -A oe model.g hull turret suspension 
@


1.19
log
@Stop refining grid if overlaps have been found.
@
text
@d1 24
a28 1
.TH G_QA 1
d30 1
a30 1
g_qa \- a BRL-CAD geometry analysis tool
@


1.19.2.1
log
@merge changes from HEAD aka rel-7-6-4 to the rel-7-6-branch just in case someone peeks a gander or tries to continue/build the branch
@
text
@a0 24
.TH G_QA 1
./"                         G _ Q A . 1
./" BRL-CAD
./"
./" Copyright (c) 2005 United States Government as represented by
./" the U.S. Army Research Laboratory.
./"
./" This document is made available under the terms of the GNU Free
./" Documentation License or, at your option, under the terms of the
./" GNU General Public License as published by the Free Software
./" Foundation.  Permission is granted to copy, distribute and/or
./" modify this document under the terms of the GNU Free Documentation
./" License, Version 1.2 or any later version published by the Free
./" Software Foundation; with no Invariant Sections, no Front-Cover
./" Texts, and no Back-Cover Texts.  Permission is also granted to
./" redistribute this document under the terms of the GNU General
./" Public License; either version 2 of the License, or (at your
./" option) any later version.
./"
./" You should have received a copy of the GNU Free Documentation
./" License and/or the GNU General Public License along with this
./" document; see the file named COPYING for more information.
./"
./"./"./"
d5 1
d7 1
a7 1
g_qa \- a BRL-CAD quantitative geometry analysis tool
d11 2
a12 2
The
.I g_qa
d15 1
a15 1
specified from the given
d18 3
a20 3
The characteristics which can be computed include
.B weight, volume, overlaps, exposed air, gaps/voids, adjacent air,
and
d22 1
a22 1
Only the
d26 2
a27 2
It works by shooting grids of rays from the three axis-aligned directions (sometimes called
\fIviews\fR).
d34 1
a34 1
If volume or weight calculation is selected, for each
d40 1
a40 1
For weight computation, the density of every region must be specified.
d42 2
a43 2
This index is stored in the
.I GIFTmater
d50 1
a50 1
The density table consists of three columns:
d56 1
a56 1
This is the density for the material, and is specified in \fBgrams/cc\fR.
d82 1
a82 1
The table is typically created in an external file using a text editor.
d84 1
a84 1
The geometry editor MGED automatically assigns an index value of
d88 3
a90 3
material, it can lead to surprising errors when objects which are supposed to have a
certain weight are computed to have different weight because one or two regions
were not set to the correct, non-default index value.  As a result, it is advised that the index value
d92 1
a92 1
never be used.  If this practice is followed, then an error message will be generated for any
d95 1
a95 1
The user will typically want to run g_qa and verify the results using the
d98 3
a100 3
before importing the table into the database.
For example, if a material index is left out of the table,
it is easier to rectify the situation using the external file.
d106 1
a106 1
.B dbbinary \-i u c _DENSITIES
d110 1
a110 1
For each pair of regions that overlap, the tool reports the two regions that overlap, the maximum line-of-sight thickness of the overlap, and the in-hit location of the ray that caused that maximum overlap thickness.
d116 1
a116 1
The
d140 1
a140 1
Only those reports requested will be provided.  The default is
d145 2
a146 2
Detects air volumes which are next to each other but have different air_code values applied to the region.
This would typically indicate that the regions are different types of air,
d151 1
a151 1
Reports the dimensions of an axis-aligned box which fully encloses the
d155 1
a155 1
This causes checks to be made to see if the ray encounters air regions before
d158 1
a158 1
Typically, only the air inside a building or vehicle is modeled if the
d161 1
a161 1
There are exceptions, such as when modeling larger environments for more
d170 1
a170 1
between objects on the ray path.  Note that not all gaps are errors.
d176 2
a177 2
are two regions which occupy the same space.
In the real world, two objects may not occupy the same space.
d179 1
a179 1
Two objects must overlap by at least
d186 2
a187 2
See the
.B \-g
d192 1
a192 1
Computes the volume of the
d197 1
a197 1
Computes the weight of the
d204 2
a205 2
Sets a rotation (in degrees) of the coordinate system by a given amount about the Z axis.
The default is 0.
d212 1
a212 1
Sets a rotation (in degrees) of the coordinate system by a given elevation from the XY plane (rotation about X axis?).
d218 2
a219 2
Specifies that density values should be taken from an external file instead of from the
.B _DENSITIES
d226 1
a226 1
The first value indicates the inital spacing between grid rays.
d231 1
a231 1
or
a234 1

a235 2
.B \-g 50.0mm-0.5mm
or
d243 1
a243 1
grid size must be a power of 2 greater.  For example, specifying -g10mm,1mm
d254 1
a254 1
Specifies that the program should create new
d256 2
a257 2
in the geometry database to represent the overlap pairs.
This flag is meaningless if overlap reporting is not turned on with the
d260 1
a260 1
If regions
d262 1
a262 1
and
d274 1
a274 1
The last item is an object to represent the overlapping area so that it can be easily seen.
d278 1
a278 1
Specifies that the grid be refined until each region has at least
d293 1
a293 1
Specifies that
d295 1
a295 1
should produce plot files for each of the analysis it performs.  These can be overlaid on the geometry in
d297 1
a297 1
with the
d305 2
a306 2
CPUs should be used for performing the calculation.
By default, all local CPUs are utilized.
d310 1
a310 1
the number of computation threads.
d313 1
a313 1
Indicates that
d332 1
a332 1
The
d340 1
a340 1
Specify the units used when reporting values.  Values must be comma delimited and provided in the order
d356 2
a357 2
Specifies a volumetric tolerance value that the three view computations must be within for computation to complete.
If volume calculation is selected and this option is not set, then the tolerance is set to
d359 2
a360 2
For large, complex objets (such as entire vehicles), this value might need to be
set larger to achieve reasonable runtimes (or even completion).
d366 1
a366 1
not the volume computation results.
d369 1
a369 1
If weight computation is selected, it is set to a value equal to the weight of an object 1/100
d374 1
a374 1
The following command computes the weight of an object called
d376 1
a376 1
from the geometry database
d383 1
a383 1
and report exposed air.
d388 1
a388 2
g_qa -g 1cm-1mm -A oe model.g hull turret suspension 

d392 1
a392 1
g_qa -g5in-0.3mm -Avw -u ft,cc,oz test.g hull turret suspension
@


1.18
log
@Documented -N option but not so much that people will start to use it.
@
text
@d34 1
a34 1
If weight calculation is selected, for each 
d36 1
a36 1
specified on the command line, volume and weight is calculated and reported.
@


1.17
log
@Fixes for overlap-only calculations.  Improvements to the man page.
@
text
@d18 4
a21 2
Among these characteristics are weight, volume, overlaps, exposed air,
gaps/voids, adjacent air, and interfaces.
d25 1
d28 2
a29 2
The resulting volume/weight calculations for each view are compared to each other.
The grid of rays is progressively refined until the results from all three views
d31 8
d108 2
a109 6
.SH VOLUME WEIGHT REPORTING
If weight calculation is selected, for each 
.I object
specified on the command line, volume and weight is calculated and reported.
  Note that if there are overlaps in the geometry the values reported will be invalid.
.SH OVERLAP REPORTING
d111 1
d287 5
@


1.16
log
@updates based upon code review
@
text
@d13 1
a13 1
program computes and reports the weight and volume of the 
d18 2
a19 1
It also reports overlaps.
d230 10
a239 1
Note that this is a hard limit.  If other analysis constraints are not met, the grid spacing will never be refined smaller than the minimum grid size to satisfy another constraint.
@


1.15
log
@Refined production of plot output into individual files.
Built test cases for each analysis type.
Added -p command line option to suppress (default) or produce plot files.
Banged head against keyboard until units were reported correctly.
Gave up on making floating point values average correctly.
Cleaned up output to always (I think) report the user specified units.
@
text
@d32 5
a36 1
attribute of each region.
d100 1
d102 1
a102 1
For each pair of objects that overlap, the tool reports the two regions that overlap, the maximum line-of-sight thickness of the overlap, and the in-hit location of the ray that caused that maximum overlap thickness.
d116 1
a116 1
a		adjacent different air
d118 1
a118 1
b		bounding box dimensions
d120 1
a120 1
e		exposed air
d122 1
a122 1
g		gaps/voids
d124 1
a124 1
o		overlaps
d126 1
a126 1
v		volume
d128 1
a128 1
w		weight
d132 1
a132 1
.B -A A
d135 1
a135 1
.B Adjacent different air:
d141 1
a141 1
.B Bounding box dimensions:
d145 1
a145 1
.B Exposed air:
d155 1
a155 1
.B Gaps/voids:
d166 1
a166 1
.B Overlaps:
d180 1
d182 1
a182 1
.B Volume:
d187 1
a187 1
.B Weight:
d214 1
a214 1
.B \-g \fR\fIgrid_spacing[,lim]\fR
d218 1
a218 1
If the optional second argument, "\fI,lim\fR",
d276 2
a277 1
command to help visualize the analysis results.  Each of the different analysis types write to a separate plot file, and use different colors for drawing.
a289 3
.br
.B Not implemented.
.br
d305 1
a305 1
Specifies the Boolean value 
a373 38
%\fB echo "5 7.68 stuff" > density_table.txt\fR
%\fB mged -c geometry.g << EOF > /dev/null 2>&1
units m
dbbinary -i u c _DENSITIES density_table.txt

in box1.s rpp 0 10 0 10 0 10
in box2.s rpp 1  9 1  9 1  9
in box3.s rpp 1 10 1  9 1  9
in box4.s rpp 0.5  9.5 0.5  5 0.5  9.5

r closed_box.r u box1.s - box2.s
adjust closed_box.r GIFTmater 5
mater closed_box.r "plastic tr=0.5 di=0.5 sp=0.5" 128 128 128 0

r open_box.r u box1.s - box3.s
mater open_box.r "plastic tr=0.5 di=0.5 sp=0.5" 128 128 128 0


r exposed_air.r u box3.s
adjust exposed_air.r air 2
mater exposed_air.r  "plastic tr=0.8 di=0.1 sp=0.1" 255 255 128 0
g exposed_air.g exposed_air.r open_box.r

r adj_air1.r u box2.s + box4.s
r adj_air2.r u box2.s - box4.s
adjust adj_air1.r air 3
adjust adj_air2.r air 4
mater adj_air1.r  "plastic tr=0.5 di=0.1 sp=0.1" 255 128 128  0
mater adj_air2.r  "plastic tr=0.5 di=0.1 sp=0.1" 128 128 255 0
g adj_air.g closed_box.r adj_air1.r adj_air2.r

g gap.g closed_box.r adj_air2.r

r overlap_obj.r u box3.s
g overlaps closed_box.r overlap_obj.r

q
EOF\fR
d381 1
a381 1
/overlaps/overlap_obj.r /overlaps/closed_box.r count:32039 dist:8m (9050 1000 1000)
d389 1
a389 1
/exposed_air.g/exposed_air.r count:25921 dist:9m (10000 1000 1000)
d397 2
a398 2
/gap.g/closed_box.r /gap.g/closed_box.r count:26082 dist:8m (9000 1000 1000)
/gap.g/adj_air2.r /gap.g/closed_box.r count:25921 dist:4m (1000 5000 1000)
@


1.15.2.1
log
@file g_qa.1 was added on branch rel-7-4-branch on 2005-08-16 21:03:48 +0000
@
text
@d1 455
@


1.15.2.2
log
@merge in changes through Aug10 for 7.4.2 release
@
text
@a0 327
.\" Set the interparagraph spacing to 1 (default is 0.4)
.PD 1v
.\"
.\" The man page begins...
.TH G_QA 1
.SH NAME
g_qa \- a BRL-CAD geometry analysis tool
.SH SYNOPSIS
.BR "g_qa " "[options] model.g objects"
.SH DESCRIPTION
The 
.I g_qa 
program computes and reports the weight and volume of the 
.I objects
specified from the given 
.I model.g
geometric description.
It also reports overlaps.
Only the 
.I objects
from the database specified on the command line are analyzed.
It works by shooting grids of rays from the three axis-aligned directions (sometimes called 
\fIviews\fR).  
The resulting volume/weight calculations for each view are compared to each other.
The grid of rays is progressively refined until the results from all three views
agree within a user-specifiable tolerance, or a limit on grid refinement is reached.
.P
For weight computation, the density of every region must be specified.  
Densities are specified as an index in a table of density values.
This index is stored in the 
.I GIFTmater 
attribute of each region.
.P
The density table consists of three columns: 
.IP
.B An integer index value.
This is the value the to which the \fIGIFTmater\fR attribute will be set to select this material for the region.
.IP
.B A floating point density value.
This is the density for the material, and is specified in \fBgrams/cc\fR. 
.IP
.B An optional name string
This is a name or description the material.
.in -5
.P
An example file might look like the following:
.IP
1	7.84		Carbon Steel
.br
2	7.82		Carbon Tool Steel
.br
3	2.7		Aluminum, 6061-T6
.br
4	2.74		Aluminum, 7079-T6
.br
5	8.9		Copper, pure
.br
6	19.32		Gold, pure
.br
7	8.03		Stainless, 18Cr-8Ni
.br
8	7.47		Stainless 27Cr
.br
9	7.715		Steel, tool
.P
The table is typically created in an external file using a text editor.  
Validation of the table is typically performed using the external file (see the 
.I \-f
option below).
The file is imported to the database as the binary object
.B _DENSITIES
when complete.  To import the text file into the database, the following comand is used:
.IP
mged>
.B dbbinary \-i u c _DENSITIES 
.I filename
.SH VOLUME WEIGHT REPORTING
If weight calculation is selected, for each 
.I object
specified on the command line, volume and weight is calculated and reported.
.SH OVERLAP REPORTING
For each pair of objects that overlap, the tool reports the two regions that overlap, the maximum line-of-sight thickness of the overlap, and the in-hit location of the ray that caused that maximum overlap thickness.
.SH OPTIONS
.TP
.B \-A \fR\fIanalysis_flags\fR
Specifies which computations are to be performed and reported.
The 
.I analysis_flags
parameter is one or more of the following:
.in +5
.sp
\fBvalue	report generated\fR
.br
A		all
.br
a		adjacent different air
.br
b		bounding box dimensions
.br
e		exposed air
.br
g		gaps/voids
.br
o		overlaps
.br
v		volume
.br
w		weight
.sp
.in -5
Only those reports requested will be provided.  The default is 
.B -A A
to produce all reports.

.B Adjacent different air:
Detects air volumes which are next to each other but have different air_code values applied to the region.  
This would typically indicate that the regions are different types of air, 
such as crew_air (which fills the crew compartment of a vehicle) and engine_air (which surrounds the engine).
When these different types of air adjoin each other, it is generally considered a modeling error.

.B Bounding box dimensions:
Reports the dimensions of an axis-aligned box which fully encloses the 
\fIobjects\fR.

.B Exposed air:
This causes checks to be made to see if the ray encounters air regions before (or after all) solid objects.
Typically, only the air inside a building or vehicle is modeled if the purpose of the model is to support analysis of
that single structure/vehicle.
There are exceptions, such as when modeling larger environments for more extended analysis purposes.

.B Gaps/voids:
This reports when there is more than
.I overlap_tol_dist
(see the
.B \-t
option below)
between objects on the ray path.  Note that not all gaps are errors.  
For example, gaps between a wheel and a fender are expected (unless external air is modeled).
Typically, users should perform gap analysis on contained subsets of a model (such as passenger compartments)
rather than on whole vehicles.

.B Overlaps:
are two regions which occupy the same space.  
In the real world, two objects may not occupy the same space.  
This check is sometimes also known as \fIinterference checking\fR.
Two objects must overlap by at least 
.I overlap_tol_dist
(see the
.B \-t
option below)
to be considered to overlap.  Overlap testing never causes the grid spacing to
be refined, so it is important to specify the desired spacing for the initial
grid.  See the 
.B \-g 
option below for details on setting the grid spacing.

.B Volume:
Computes the volume of the 
.I objects
specified on the command line.

.B Weight:
Computes the weight of the 
.I objects
specified on the command line.
.TP
.B \-a \fR\fIazimuth_deg\fR
.B Not Implemented.
.br
Sets a rotation (in degrees) of the coordinate system by a given amount about the Z axis.  
The default is 0. 
See also:
.B \-e
.TP
.B \-e \fR\fIelevation_deg\fR
.B Not Implemented.
.br
Sets a rotation (in degrees) of the coordinate system by a given elevation from the XY plane (rotation about X axis?).  
The default is 0.
See also
.B \-a
.TP
.B \-f \fR\fIfilename\fR
Specifies that density values should be taken from an external file instead of from the 
.B _DENSITIES 
object in the database.
This option can be useful when developing the density table with a text editor, prior to importing it to the geometric database.
.TP
.B \-g \fR\fIgrid_spacing[,lim]\fR
Specifies the initial spacing between rays in the grids,
and optionally a limit on how far the grid can be refined.
The first value indicates the inital spacing between grid rays.  
If the optional second argument, "\fI,lim\fR",
is specified, it indicates a lower bound on how fine the gridspacing may get before computation is terminated.
The grid spacing may be specified with units.  For example:
.B 5 mm
or 
.B 10 in.
If units are not provided, millimeters are presumed to be the units.
.IP
The default values are 50.0 mm and 0.5 mm, which is equivalent to specifying: 
.B \-g 50.0mm,0.5mm
.TP
.B \-G
.br
.B Not Implemented.
.br
Specifies that the program should create new 
.I assembly combinations
in the geometry database to represent the overlap pairs.  
This flag is meaningless if overlap reporting is not turned on with the 
.B \-A
option.
If regions 
.I rod.r
and 
.I disk.r
overlap, this option will cause the creation of an assembly called _OVERLAP_rod.r_disk.r which includes the following items:
.in +5
.br
.I rod.r
.br
.I disk.r
.br
.I _OVERLAP_lines_rod.r_disk.r
.in -5

The last item is an object to represent the overlapping area so that it can be easily seen.  
The default is that no groups are created.
.TP
.B \-n \fR\fInum_hits\fR
Specifies that the grid be refined until each region has at least 
.I num_hits
ray intersections.
This limit is not applied per-view, but rather per-analysis.
So for example, it is accepted that a thin object might not be hit from one view at all, but hit when shooting from other views.
.IP
The default is 1.  This indicates that each region must be intersected by a ray at least once during the analysis.
If the grid spacing limit is reached, processing will end even if this criteria has not been met.
.TP
.B \-P \fR\fIncpu\fR
Specifies that
.I ncpu
CPUs should be used for performing the calculation.  
By default, all local CPUs are utilized.  
This option exists primarily to reduce the number of
computation threads from the machine maximum.
Note that specifying more CPUs than are present on the machine does not increase
the number of computation threads.  
.TP
.B \-r
Indicates that 
.I g_qa
should print per-region statistics (weight, volume) as well as the values for the objects specified on the command line.
.TP
.B \-S \fR\fIsamples_per_model_axis\fR
Specifies that the grid spacing will be initially refined so that at least
.I samples_per_axis_min
will be shot along each axis of the bounding box of the model.
For example, if the objects specified have a bounding box of 0 0 0 -> 4 3 2 and the grid spacing is 1.0, specifying the option
.B \-S 4
will cause the initial grid spacing to be adjusted to 0.5 so that 4 samples will be shot across the Z dimension of the bounding box.
The default is to assure 1 rays per model grid axis.

.TP
.B \-U \fR\fIuse_air\fR
Specifies the Boolean value 
.I use_air
which indicates whether regions which are marked as "air" should be retained and included in the raytrace.
.B Unlike other BRL-CAD raytracing applications the default is to retain air in the raytracing.
The 
.B \-U 0
option causes air regions to be discarded prior to raytracing.
Note that you probably don't want to turn off use_air when asking for various air checking analysis such as 
.B Air First/Last
or 
.B Contiguous unlike air
.TP
.B \-u \fR\fIdist,vol,wgt\fR
Specify the units used when reporting values.  Values are provided in the order 
\fIdistance\fR, \fIvolume\fR, and \fIweight\fR separated by commas.  For example:
.B \-u ``cm,cu ft,kg''
or
.B \-u ,,kg
Note that unit values with spaces in their names such as
.I cu ft
must be contained in quotes for the shell to keep the values together.

The default units are millimeters, cubic millimeters, and grams.
.TP
.B \-v
Turns on verbose reporting of computation progress.  This is useful for
learning how the computation is progressing, and what tolerances are causing
further computation to be necessary.
.TP
.B \-V \fR\fIvolume_tolerance[units]\fR
Specifies a volumetric tolerance value that the three view computations must be within for computation to complete.  
If volume calculation is selected and this option is not set, then the tolerance is set to 
1/10,000 of the volume of the model.
For large, complex objets (such as entire vehicles), this value might need to be 
set larger to achieve reasonable runtimes (or even completion).  
Given the approximate sampling nature of the algorithm, the
three separate view computations will not usually produce identical results.
.TP
.B \-W \fR\fIweight_tolerance[units]\fR
This is like the volume tolerance, \fB\-T\fR, but is applied to the weight computation results,
not the volume computation results.  

The weight computation tolerance is probably more appropriate when doing whole-vehicle analysis.
If weight computation is selected, it is set to a value equal to the weight of an object 1/100 
the size of the model, which is made of the most dense material in the table.

.SH EXAMPLES
.P
The following command computes the weight of an object called 
.I wheel.r
from the geometry database 
.I model.g
and reports the weight and volume, and checks for overlaps.
.IP
g_qa model.g wheel.r
.P
To check objects hull, turret, and suspension for overlaps only,
and to report overlaps and occurence of exposed air.
.IP
g_qa -A oe model.g hull turret suspension 
.P
@


1.14
log
@Fixed paralell bug
@
text
@d141 5
a145 2
This causes checks to be made to see if the ray encounters air regions before (or after all) solid objects.
Typically, only the air inside a building or vehicle is modeled if the purpose of the model is to support analysis of
d147 2
a148 1
There are exceptions, such as when modeling larger environments for more extended analysis purposes.
d263 9
@


1.13
log
@Changes from the plane ride back to Baltimore from SIGGraph
@
text
@d42 1
a42 1
.B An optional name string
a47 2
1	7.84		Carbon Steel
.br
d63 2
d67 13
a79 1
Validation of the table is typically performed using the external file (see the 
d81 7
a87 4
option below).
The file is imported to the database as the binary object
.B _DENSITIES
when complete.  To import the text file into the database, the following comand is used:
d166 3
a168 3
to be considered to overlap.  Overlap testing never causes the grid spacing to
be refined, so it is important to specify the desired spacing for the initial
grid.  See the 
d218 3
d270 3
d275 1
a275 1
should print per-region statistics (weight, volume) as well as the values for the objects specified on the command line.
d295 7
a301 8
Note that you probably don't want to turn off use_air when asking for various air checking analysis such as 
.B Air First/Last
or 
.B Contiguous unlike air
.TP
.B \-u \fR\fIdist,vol,wgt\fR
Specify the units used when reporting values.  Values are provided in the order 
\fIdistance\fR, \fIvolume\fR, and \fIweight\fR separated by commas.  For example:
d303 1
a303 2
or
.B \-u ,,kg
d342 5
a346 2
To check objects hull, turret, and suspension for overlaps only,
and to report overlaps and occurence of exposed air.
d348 1
a348 1
g_qa -A oe model.g hull turret suspension 
d350 93
@


1.12
log
@Since the user community didn't ask for the -s option I've deleted it for now.
It can be implemented, but doesn't seem worth the time right now.  Given the
existence of the -g and -n options, I suspect the -s option isn't necessary.
@
text
@d151 5
a155 1
to be considered to overlap;
d256 1
a256 1
.B \-S \fR\fIsamples_per_axis_min\fR
d263 1
a263 1
The default is to assure 10 rays per model grid axis.
d291 5
@


1.11
log
@Massive changes
@
text
@a261 13
.B \-s \fR\fIsamples_per_axis_min\fR
This is like the 
.B \-S 
option except that the smallest bounding box dimensions (for primitive shapes) in the model are
used instead of the model bounding box.
This typically creates very fine, highly accurate grid spacing and long runtimes.
.TP
.B \-t \fR\fIoverlap_tol_dist[units]\fR
Specifies that overlaps less than 
.I overlap_tol_dist
will not be reported.
The default is 0.0 so that all overlaps are reported.
.TP
@


1.10
log
@results formatting for volume/weight
@
text
@d328 1
a328 1
and to report overlaps and occurence of external air.
@


1.9
log
@Many changes, including incorporation of units
@
text
@d100 1
a100 1
e		external air
d125 1
a125 1
.B External air:
d137 4
a140 1
between objects on the ray path.
a161 1

d164 2
d172 2
d201 3
d247 5
@


1.8
log
@Checkpoint.
@
text
@d226 1
d274 9
a282 10
.B \-u \fR\fIunits\fR
Specify the units used when reporting values.  
If this option is not specified, the current editing units are used.
This option can be used to override this behavior.
Possible values include: 
Volume
cm cc m^3
Distance
Weight
g, kg, lb
d284 1
d288 4
a291 2
The default value is 0.5 cc.  For large, complex objets (such as entire vehicles), this value must often be 
increased to achieve reasonable runtimes (or even completion).  
a293 5
Only one of either
.B \-T
or
.B \-W
may be specified.  If both are specified, the last one specified on the command line is used.
d298 1
a298 5
Only one of 
.B \-T
or
.B \-W
may be specified.  The last one specified on the command line is used.  
d300 2
@


1.7
log
@Incorporated Janine's comments.  Much more readable now.
Editors are really wonderful people to have around!
Broke with the g_lint tradition of specifying reports as a bit mask.
The user community really doesn't know the first thing about binary
these days, so we shouldn't mandate they learn about it to work with
the user interface (even a command-line user interface).
@
text
@d28 2
a29 1
For weight computation, the density of every region must be specified.  Densities are specified as an index in a table of density values.
d35 9
a43 1
an integer index value, a floating point density value specified in grams/cc, and an optional text string describing the material.
d47 1
a47 3
.sp 1
.in +5
.br
a64 4
.in -5n
.P
The first column is the index value to which the \fIGIFTmater\fR attribute of a region is set in order 
to select the given material type (density value) for the region.
d67 3
d72 1
a72 1
when complete.  To import the text file into the database, the following comand is used.
a76 1

a80 1

a81 1

a82 2


d86 73
a158 8
Specifies which computations are to be performed.  The parameter is one or more of the following:
.B a, o, w, v,
for 
.I all, overlaps, weight
and 
.I volume 
respectively.  Only those reports requested will be provided.  The default is 
.I all.
d162 3
a164 1
Sets a rotation (in degrees) of the coordinate system by a given amount about the Z axis.  See also:
d168 2
a169 1
Sets a rotation (in degrees) of the coordinate system by a given elevation from the XY plane (rotation about X axis?).
d190 1
a191 3
.sp
.ti +5
.br
a192 1

d197 5
a201 1
in the geometry database to represent the overlap pairs.  If regions 
a221 1
The default is 1 (that is, each region must be hit at least once).
d224 2
d230 3
a232 4
CPUs should be used for performing the calculation.  Note that
specifying more CPUs than are present on the machine does not increase
the number of computation threads.  By default, all local CPUs are
utilized.  This option exists primarily to reduce the number of
d234 2
a235 24
.TP
.BI \-r  \fR\fIreports\fR
Specifies which types of reports to produce.
The value
.I reports
consists of the the following character values:
.in +5
.sp
\fBvalue	report generated\fR
.br
o		overlaps
.br
a		contiguous unlike air regions
.br
u		unconfined air
.br
1		air regions first/last on ray
.br
v		vacuums/voids after first hit on ray
.in -5
.sp
So for example specifying 
.B -r oau1v
would turn on all checks and reports
d254 1
a254 1
.B \-t \fR\fIoverlap_tol_dist\fR
d268 4
d278 6
a283 1
.I XXX what are the possible values XXX?
d285 1
a285 1
.B \-V \fR\fIvolume_tolerance\fR
d297 1
a297 1
.B \-W \fR\fIweight_tolerance\fR
d318 1
a318 1
and to report overlaps and occurence of air first/last on rays:
d320 1
a320 1
g_qa -A o -r 1 model.g hull turret suspension 
@


1.6
log
@Checkpoint:  Refinements on man page, and output reporting from program.
@
text
@d13 1
a13 1
program computes and reports the weight, and volume of the 
d26 1
a26 1
agree within a user specifiable tolerance, or a limit on grid refinement is reached.
d28 1
a28 1
For weight computation, the density of every region must be specified.  Densities are specified as an index into a table of density values.
d34 1
a34 1
an integer index value, a floating point density value specified in grams/cm^3, and an optional text string describing the material
d37 1
a37 1
For example:
d60 2
a61 1
The first column is the index value to which the GIFTmater attribute of a region is set to select the given material type (density value).
d63 2
a64 2
The table is typically created in an external file using a text editor.  The file is imported to the database
as the binary object
d72 2
a73 2
.SH WEIGHT REPORTING
If weight calculation is slected, for each 
d75 1
a75 1
specified on the command line, a volume and weight is calculated and reported.
d79 1
a79 1
For each pair of objects which overlap, the tool reports the two regions which overlap, the maximum line-of-sight thickness of the overlap, and the in-hit location of the ray which caused that maximum overlap thickness.
d84 1
a84 1
.B \-A analysis_flags
d95 1
a95 1
.B \-a azimuth_deg
d99 1
a99 1
.B \-e elevation_deg
d104 5
a108 3
.B \-f filename
Specifies that density values should be taken from an external file instead of from the _DENSITIES object in the database.
This can be useful when developing the density table with a text editor, prior to importing it to the geometric database.
d110 1
a110 1
.B \-g grid_spacing\fI[,lim]\fR
d117 1
a117 1
.B 5mm
d119 1
a119 1
.B 10in.
d121 1
a121 1
The default values are 50.0mm and 0.5mm, which is equivalent to specifying: 
d142 1
a142 1
.I _OVERLAPS_rod.r_disk.r
d145 1
a145 1
The last of these is an object to represent the overlapping area so that it can be easily seen.  
d148 1
a148 1
.B \-n num_hits
d156 1
a156 1
.B \-P ncpu
d159 3
a161 3
CPU's should be used for performing the caluclation.  Note that
specifying more cpus than are present on the machine does not increase
the number of computation threads.  By default, all local cpu's are
d165 1
a165 1
.BI "-r" " bits"
d167 3
a169 12
If, after an optional minus sign,
.I bits
begins with either ``0x'' or ``0X'',
the remainder is interpreted in hexadecimal.
Otherwise, if
.I bits
begins with ``0'',
the remainder is interpreted in octal.
Otherwise,
.I bits
is interpreted in decimal.
The meaning of the individual bits is as follows:
d171 12
a182 1
 1 overlaps
d184 4
a187 26
.in +5
 2 contiguous unlike airs
.in -5
.in +5
 4 unconfined airs
.in -5
.in +5
 8 air first on rays
.in -5
.in +5
16 air last on rays
.in -5
.in +5
32 vacuums.
.in -5
If there was no initial minus sign, then
.I bits
specifies which report types to produce.
The minus sign implies complementation:
when it is present,
.I bits
specifies which report types
.I not
to produce.
The default is 1 (report only overlaps).  To specify all reports, a value of 63 should be used.

d189 1
a189 1
.B \-S samples_per_axis_min
d199 1
a199 1
.B \-s samples_per_axis_min
d204 1
a204 1
This typically creates very fine grid spacing, and long runtimes, with higher accuracy.
d206 1
a206 1
.B \-t overlap_tol_dist
d212 1
a212 1
.B \-U use_air
d221 1
a221 1
.B \-u units
d228 21
a248 11
.B \-V volume_tolerance
Specifies a volumetric tolerance value which the 3 view computations must be within for computation to complete.  
The default value is 0.5 cc  For large complex objects (such as entire vehicles) this values must often be adjusted upwards to achieve
reasonable runtimes (or even completion).  
Given the approximate sampling nature of the algorithm, most of the time the three separate view computations will not agree identically.
Only one of -T and -W may be specified.  The last one specified on the command line wins.  
.TP
.B \-W weight_tolerance
This is like the volume tolerance (\fI-T\fR), but is applied to the weight computation results, not the volume computation results.  
Only one of -T and -W may be specified.  The last one specified on the command line wins.  
The weight computation tolerance is probably more appropriate when doing whole-vehicle analysis
d256 1
a256 1
and reports the weight, volume, and checks for overlaps.
d260 2
a261 1
To check objects hull, turret, suspension for overlaps only, reporting overlaps and occurence of air first on rays:
d263 1
a263 1
g_qa -A o -r 9 model.g hull turret suspension 
@


1.5
log
@Fixed a few bugs.  Added some reporting when options are not implemented (yet)
@
text
@d24 1
a24 1
The resulting weight calculations for each view are compared to each other.
d26 1
a26 1
agree within a user specifiable volumetric tolerance.
d51 1
a51 1
6	19.32	Gold, pure
d57 1
a57 1
8	7.715	Steel, tool
d60 1
a60 1
The first column is the index value to which the GIFTmater attribute is set to select the given 
d62 4
a65 4
The table is typically created with a text editor, and then imported to the database as the binary object
.B _DENSITIES.
.P
To import a text file into the database, the following comand is used.
d68 1
a68 1
.B binunif \-i u c _DENSITIES 
d78 1
a78 1
For each pair of objects which overlap, the tool reports the two regions which overlap, the maximum thickness of the overlap, and the in-hit location of the ray which caused that maximum overlap thickness.
d108 2
a109 1
Specifies the spacing between rays in the grids.  
d203 2
a204 1
The default is 1.
d223 1
a223 1
.B \-t tol_dist
d225 1
a225 1
.I tol_dist
d232 2
a233 2
which indicates whether regions which are "air" should be included in the raytrace
.B Unlike other BRL-CAD raytracing applications the default is to include air in the raytracing.
d236 1
a236 1
option causes raytracing of air to be turned off.
@


1.4
log
@checkpoint
@
text
@d236 7
a249 7
.B \-u units
Specify the units used when reporting values.  
If this option is not specified, the current editing units are used.
This option can be used to override this behavior.
Possible values include: 
.I XXX what are the possible values XXX?
.TP
@


1.3
log
@Modifications following first user community design review.
@
text
@d32 31
a62 1
The density table consists of integer index values, and density values specified in grams/cm^3.  An optional text string may follow the density value.  The table is typically created with a text editor, and then imported to the database as the binary object
d72 3
a74 1
For each object specified on the command line, a volume and weight is calculated and reported.
d105 1
d107 6
a112 8
.B \-g gridspacing\fI[,lim]\fR
Specifies the spacing between rays in the grids.  The default value is
50.0mm or a minumum of 10 rays per axis of the bounding box of the
geometry.  For example, a geometry with a 10x10x10mm bounding box
would (by default) get a 1mm grid size.  If the user specifies a
value, it is used.  If that value does not guarantee 10 samples per
axis, a warning is printed.  If the user does not specify a grid size,
the program will set the grid size to asure 10 rays/axis.  The gridspacing may be specified with units.  For example:
d116 7
a122 4
.P
If the optional 
.I,lim
is specified, it indicates a lower bound on how fine the gridspacing may get before processing 
d133 1
d135 1
a135 2
.in -5
.in +5
d137 2
d140 3
a142 8
.in +5
.I _OVERLAPS_rod.r_disk.r
The last of these is an object to represent the overlapping area so that it can be easily seen.
.TP
.B \-m min_samples
Specifies that the tolerance of at least 
.I num_samples
(10 by default) samples per axis be applied to the smallest region bounding box, not the model bounding box.  This results in much tighter grids, longer runtimes, and higher quality answers.
d150 1
a150 1
So for example, it is accepted that a thin object might not be hit from one view at all.
d207 2
a208 1
will be shot along each axis of the bounding box of the model.  For example, if the objects specified have a bounding box of 0 0 0 -> 4 3 2 and the grid spacing is 1.0, specifying the option
d211 2
d217 3
a219 1
option except that the smallest bounding box in the model is used instead of the model bounding box.  This typically creates very fine grid spacing, and long runtimes, with high initial accuracy.
a226 7
.B \-T volume_tolerance
Specifies a volumetric tolerance value which the 3 view computations must be within for computation to complete.  
The default value is 0.5 cc  For large complex objects (such as entire vehicles) this values must often be adjusted upwards to achieve
reasonable runtimes.  
Given the approximate sampling nature of the algorithm, most of the time the three separate view computations will not agree identically.
Only one of -T and -W may be specified.  The last one specified on the command line wins.  
.TP
d236 7
d244 4
a247 1
Specify the units used when reporting values.  If the command is run from within MGED, the current editing units are provided.  This option can be used to override this behavior.  Possible values include: 
d265 4
@


1.2
log
@Just a checkpoint.  added support for minimum rays required per region.
@
text
@d13 1
a13 1
program computes the weight, and volume of the 
d17 1
a17 1
geometric desctription.
d22 26
a47 4
It works by shooting grids of rays from the three axis-aligned directions.  
The resulting weight calculations for each axis of computation are compared to each other.
The grid of rays is progressively refined until the results from all three axes of computation agree 
within a given tolerance.
d51 1
a51 1
.B -a analysis_flags
d60 10
d74 1
a74 2
.B -g gridsize

d81 1
a81 1
the program will set the grid size to asure 10 rays/axis.  The gridsize may be specified with units.  For example:
d85 27
a111 1

d113 1
a113 1
.B -m hits
d115 1
a115 1
.I hits
d117 3
a119 1

d130 85
a214 12
.B \-t tolerance
Specifies a tolerance value which the 3 view computations must be within for computation to complete.  The default value is 0.5.

.TP
.B \-r
Specifies that per-region statistics about volume and weight are desired.

.TP
.B \-q num_samples
Specifies that the tolerance of at least 
.I num_samples
(10 by default) samples per axis be applied to the smallest region bounding box, not the model bounding box.  This results in much tighter grids, longer runtimes, and higher quality answers.
d218 5
a222 1
To compute the weight an volume of objects.
d224 2
a225 3
g_qa -a wv 
.SH AUTHOR
.SH @


1.1
log
@Man page for g_qa
@
text
@d9 1
a9 1
.BR "g_qa " "[optoins] model.g objects"
d13 7
a19 2
program computes weights, volumes and detects overlaps in geometric descriptions.
The 
d21 1
a21 1
specified are analyzed.
d23 2
a24 1
The grid is progressively refined until the answers from all three grid calculations agree 
d56 6
d79 4
a82 7
.B \-q
Specifies that the tolerance of at least 10 samples per axis be applied to the smallest region bounding box, not the model bounding box.  This results in much tighter grids, longer runtimes, and higher quality answers.
.TP
.B -m hits
Specifies that the grid be refined until each region has at least 
.I hits
ray intersections.
@

