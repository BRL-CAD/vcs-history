head	1.4;
access;
symbols
	rel-7-10-4:1.3
	STABLE:1.3.0.2
	rel-7-10-2:1.3
	rel-7-10-0:1.3
	rel-7-8-4:1.1;
locks; strict;
comment	@# @;


1.4
date	2007.10.03.19.36.13;	author brlcad;	state Exp;
branches;
next	1.3;

1.3
date	2007.02.06.19.59.37;	author jlowenz;	state Exp;
branches;
next	1.2;

1.2
date	2007.01.27.01.41.33;	author brlcad;	state Exp;
branches;
next	1.1;

1.1
date	2006.07.28.03.38.46;	author brlcad;	state Exp;
branches;
next	;


desc
@@


1.4
log
@remove the MAINTAINERCLEAN rules, they're never really used regardless of the debate over whether the Makefile.in files belong there or not
@
text
@# $Id: Makefile.am,v 1.3 2007/02/06 19:59:37 jlowenz Exp $#

lib_LTLIBRARIES = libproe2brl.la

# XXX this is different based on the platform
PRO_MACHINE_TYPE = i486_linux

# XXX this depends on local system configuration
PRO_HOME = /usr/local/ptc/proeWildfire3.0
PROTOOL_SRC = $(PRO_HOME)/protoolkit
PROTOOL_SYS = $(PROTOOL_SRC)/$(PRO_MACHINE_TYPE)
PRODEV_SRC  = $(PRO_HOME)/prodevelop
PRODEV_SYS  = $(PRODEV_SRC)/$(PRO_MACHINE_TYPE)
PROTK_UNLOCK = $(PRO_HOME)/bin/protk_unlock

PDLIB       = $(PRODEV_SYS)/obj/prodevelop.a
PDLIB_DLL   = $(PRODEV_SYS)/obj/prodev_dll.a
PTLIB       = $(PROTOOL_SYS)/obj/protoolkit.a
PTLIB_DLL   = $(PROTOOL_SYS)/obj/protk_dll.a
PTCLIBS     = $(PTLIB) $(PDLIB)
PTCLIBS_DLL = $(PTLIB_DLL) $(PDLIB_DLL)
BRLLIBS     = ../../libbu/.libs/libbu.a ../../libbn/.libs/libbn.a

# XXX this may be different based on the platform
SYSLIBS     = -lc -lm -ldl

# XXX this may be different based on the platform
AM_CFLAGS = -m32 -fpic
AM_LDFLAGS = -shared -Wl,-Bsymbolic -Wl,-noinhibit-exec -Wl,-E $(SYSLIBS)
# XXX the PRO_MACHINE/PRO_OS depends on system/os (obviously). values defined by PTC, see their example makefiles for target system.
AM_CPPFLAGS = \
	-DPRO_MACHINE=34 -DPRO_OS=3 \
	-I$(PROTOOL_SRC)/protk_appls/includes \
	-I$(PROTOOL_SRC)/includes \
	-I$(PRODEV_SRC)/includes

libproe2brl_ladir = $(BRLCAD_DATA)/pro-engineer/$(PRO_MACHINE_TYPE)
libproe2brl_la_CFLAGS = $(AM_CFLAGS)
libproe2brl_la_LIBADD = $(PDLIB_DLL) $(PTLIB_DLL) $(BRLLIBS) $(SYSLIBS)
libproe2brl_la_SOURCES = proe-brl.c

all-am: libproe2brl.la Makefile
	@@if test "x$(MAKECMDGOALS)" = "xall-am" -o "x$(.TARGETS)" = "xall-am" -o "x$(MAKECMDGOALS)" = "x" -a "x$(.TARGETS)" = "x" ; then \
	  @@ECHO@@ "---" ; \
	  @@ECHO@@ "Run 'make plugin' from misc/pro-engineer before 'make install' to build the Pro-Engineer plugin." ; \
	  @@ECHO@@ "Run 'make plugin2' from misc/pro-engineer before 'make install' to build a .so Pro-Engineer plugin." ; \
	  @@ECHO@@ ; \
	fi

install-data-local:
	@@if test -f .libs/proe-brl ; then \
		@@ECHO@@ "Installing proe-brl" ; \
		if ! test -d $(DESTDIR)$(proe_brldir) ; then \
			mkdir -p $(DESTDIR)$(proe_brldir) ; \
		fi ; \
		$(INSTALL) .libs/proe-brl $(DESTDIR)$(proe_brldir)/proe-brl ; \
	fi
	@@if test -f libproe2brl.la ; then \
		@@ECHO@@ "Installing libproe2brl.la" ; \
		if ! test -d $(DESTDIR)$(libproe2brl_ladir) ; then \
			mkdir -p $(DESTDIR)$(libproe2brl_ladir) ; \
		fi ; \
		if test -x $(PROTK_UNLOCK) ; then \
			$(PROTK_UNLOCK) $(prefix)/lib/libproe2brl.so ; \
		fi ; \
		cp $(prefix)/lib/libproe2brl.so $(libproe2brl_ladir)/ ; \
	fi

unlock:
	@@if test -x $(PROTK_UNLOCK) ; then \
		if test -f .libs/proe-brl ; then \
			$(PROTK_UNLOCK) .libs/proe-brl ; \
		else \
			@@ECHO@@ "Run 'make plugin' before running 'make unlock'" ; \
		fi ; \
	else \
		@@ECHO@@ "The ProE unlock tool does not exist as $(PROTK_UNLOCK)" ; \
		@@ECHO@@ "Set and verify PROTK_UNLOCK in misc/pro-engineer/Makefile" ; \
	fi

unlock2:
	@@if test -x $(PROTK_UNLOCK) ; then \
		if test -f libproe2brl.so ; then \
			$(PROTK_UNLOCK) libproe2brl.so ; \
		else \
			@@ECHO@@ "Run 'make plugin2' before running 'make unlock2'" ; \
		fi ; \
	else \
		@@ECHO@@ "The ProE unlock tool does not exist as $(PROTK_UNLOCK)" ; \
		@@ECHO@@ "Set and verify PROTK_UNLOCK in misc/pro-engineer/Makefile" ; \
	fi

plugin: proe-brl
	@@@@ECHO@@ "---"
	@@@@ECHO@@ "Run 'make unlock' to unlock the Pro-Engineer plugin for distribution"
	@@@@ECHO@@ "Run 'make install' to install the Pro-Engineer plugin"
	@@@@ECHO@@ "You will need to edit protk.dat to use this plugin instead of libproe2brl.so"
	@@@@ECHO@@

plugin2: libproe2brl.la
	@@@@ECHO@@ "---"
	@@@@ECHO@@ "Run 'make unlock2' to unlock the Pro-Engineer .so plugin for distribution"
	@@@@ECHO@@ "Run 'make install' to install the Pro-Engineer .so plugin"
	@@@@ECHO@@

proedir = $(BRLCAD_DATA)/pro-engineer
tmsgdir = $(BRLCAD_DATA)/pro-engineer/text/usascii/
rsrcdir = $(BRLCAD_DATA)/pro-engineer/text/usascii/resource/

proe_DATA = \
	install.doc \
	protk.dat

tmsg_DATA = usermsg.txt

rsrc_DATA = \
	proe_brl.res \
	proe_brl_error.res \
	proe_brl_gen_error.res

EXTRA_DIST = \
	$(proe_DATA) \
	$(rsrc_DATA) \
	$(tmsg_DATA) \
	mk.in \
	protk.dat.in

CLEANFILES = \
	libproe2brl.so \
	proe-brl

DISTCLEANFILES = \
	mk \
	protk.dat


include $(top_srcdir)/misc/Makefile.defs
@


1.3
log
@Update pro/e makefile to support compilation on Linux.
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.2 2007/01/27 01:41:33 brlcad Exp $#
d128 3
a130 1
CLEANFILES = libproe2brl.so proe-brl
d132 3
a134 3
DISTCLEANFILES = mk protk.dat

MAINTAINERCLEANFILES = Makefile.in
@


1.2
log
@ws. lots and lots of ws.  see sh/ws.sh for details (cases 'abcdeg').
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.1 2006/07/28 03:38:46 brlcad Exp $#
d3 1
a3 2
EXTRA_PROGRAMS = proe-brl
# EXTRA_LTLIBRARIES = libproe2brl.la
d5 6
a10 2
PRO_MACHINE_TYPE = sgi_mips4
PROTOOL_SRC = /opt/ptc/proe2001/protoolkit
d12 1
a12 1
PRODEV_SRC  = /opt/ptc/proe2001/prodevelop
d14 1
a14 1
PROTK_UNLOCK = /usr/proe/bin/protk_unlock
d22 4
a25 2
BRLLIBS     = $(BU) $(BN) $(TCL)
SYSLIBS     = -lc -lm -lw
d27 4
a30 2
AM_CFLAGS = -Wl,-rpath -Wl,$(libdir) -Wl,-multigot -Wl,-T10000000 -Wl,-B,symbolic
AM_LDFLAGS = $(BRLLIBS) $(SYSLIBS)
d32 1
a32 1
	-DPRO_MACHINE=23 -DPRO_OS=3 \
d37 4
a40 10
proe_brldir = $(BRLCAD_DATA)/pro-engineer/$(PRO_MACHINE_TYPE)
proe_brl_CFLAGS = $(AM_CFLAGS)
proe_brl_LDADD = $(PTLIB) $(PDLIB) $(SYSLIBS)
proe_brl_SOURCES = proe-brl.c

#cc -n32 -mips4 -woff 1521 -multigot -Wl,-wall  -rpath /usr/brlcad/lib -Wl,-hiddens_file,/dev/null -shared -T10000000 -B symbolic -o proe-brl.dll proe-brl.o /opt/ptc/proe2001/protoolkit/sgi_mips4/obj/protk_dll.a /opt/ptc/proe2001/prodevelop/sgi_mips4/obj/prodev_dll.a -L/usr/brlcad/lib -lbu -lbn -ltcl -lc -lm -lw

#gcc -shared  libproe2brl_la-proe-brl.o   -L/vld/morrison/brlcad/src/libbu/.libs -L/vld/morrison/brlcad/src/other/libtcl/.libs /opt/ptc/proe2001/protoolkit/sgi_mips4/obj/protk_dll.a /opt/ptc/proe2001/prodevelop/sgi_mips4/obj/prodev_dll.a ../../src/libbu/.libs/libbu.so ../../src/libbn/.libs/libbn.so ../../src/other/libtcl/.libs/libtcl8.4.so -lc -lm -lw -lmx -lmalloc    -lc  -Wl,-soname -Wl,libproe2brl.so.1 `test -n "sgi1.0" && echo -Wl,-set_version -Wl,sgi1.0` -Wl,-update_registry -Wl,.libs/so_locations -o .libs/libproe2brl.so.1.0

#/usr/bin/ld -n32 -shared  libproe2brl_la-proe-brl.o   -L/vld/morrison/brlcad/src/libbu/.libs -L/vld/morrison/brlcad/src/other/libtcl/.libs /opt/ptc/proe2001/protoolkit/sgi_mips4/obj/protk_dll.a /opt/ptc/proe2001/prodevelop/sgi_mips4/obj/prodev_dll.a ../../src/libbu/.libs/libbu.so ../../src/libbn/.libs/libbn.so ../../src/other/libtcl/.libs/libtcl8.4.so -lc -lm -lw -lmx -lmalloc    -lc  -soname libproe2brl.so.1 `test -n "sgi1.0" && echo -set_version sgi1.0` -update_registry .libs/so_locations -o .libs/libproe2brl.so.1.0
d42 1
a42 10
# libproe2brl_la_SOURCES = proe-brl.c
# libproe2brl_la_CFLAGS = $(AM_CFLAGS)
# libproe2brl_la_LDFLAGS = -multigot -rpath $(libdir) -T10000000 -B symbolic
# libproe2brl_la_LIBADD = $(PTLIB_DLL) $(PDLIB_DLL) $(BRLLIBS) $(SYSLIBS)
# libproe2brl_sodir = $(BRLCAD_DATA)/pro-engineer/$(PRO_MACHINE_TYPE)

libproe2brl.so: mk
	make -f mk dll

all-am: Makefile
d58 7
a64 4
	@@if test -f libproe2brl.so ; then \
		@@ECHO@@ "Installing libproe2brl.so" ; \
		if ! test -d $(DESTDIR)$(proe_brldir) ; then \
			mkdir -p $(DESTDIR)$(proe_brldir) ; \
d66 1
a66 1
		$(INSTALL) libproe2brl.so $(DESTDIR)$(proe_brldir)/libproe2brl.so ; \
d100 1
a100 1
plugin2: libproe2brl.so
@


1.1
log
@move the Pro/Engineer plugin from misc/pro-engineer to src/external/ProEngineer.  the new src/external directory is intended for all of the codes that are written to work with and link against external packages (often as a plugin to said external package)
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.9 2005/07/07 06:05:22 brlcad Exp $#
a140 1

@

