head	11.7;
access;
symbols
	ansi-20040405-merged:11.4.2.1
	postmerge-20040405-ansi:11.5
	premerge-20040404-ansi:11.4
	postmerge-autoconf:11.4
	autoconf-freeze:11.4
	premerge-autoconf:11.4
	postmerge-20040315-windows:11.4
	premerge-20040315-windows:11.4
	windows-20040315-freeze:11.4
	autoconf-20031203:11.4
	autoconf-20031202:11.4
	autoconf-branch:11.4.0.10
	phong-branch:11.4.0.8
	photonmap-branch:11.4.0.6
	rel-6-1-DP:11.4
	windows-branch:11.4.0.4
	rel-6-0-2:11.2
	ansi-branch:11.4.0.2
	rel-6-0-1-branch:11.2.0.2
	hartley-6-0-post:11.3
	hartley-6-0-pre:11.2
	rel-6-0-1:11.2
	rel-6-0:11.2
	rel-5-4:11.1
	offsite-5-3-pre:11.1
	rel-5-3:11.1
	rel-5-2:11.1
	rel-5-1-branch:11.1.0.2
	rel-5-1:11.1
	rel-5-0:11.1
	rel-5-0-beta:11.1
	rel-4-5:11.1
	ctj-4-5-post:11.1
	ctj-4-5-pre:11.1
	rel-4-4:11.1
	rel-4-0:10.1;
locks; strict;
comment	@ * @;


11.7
date	2004.05.21.16.45.04;	author morrison;	state dead;
branches;
next	11.6;

11.6
date	2004.05.10.15.30.50;	author erikg;	state Exp;
branches;
next	11.5;

11.5
date	2004.04.05.05.45.59;	author morrison;	state Exp;
branches;
next	11.4;

11.4
date	2002.08.20.17.08.42;	author jra;	state Exp;
branches
	11.4.2.1;
next	11.3;

11.3
date	2002.08.15.20.55.53;	author hartley;	state Exp;
branches;
next	11.2;

11.2
date	2001.08.10.21.22.45;	author morrison;	state Exp;
branches;
next	11.1;

11.1
date	95.01.04.10.19.05;	author mike;	state Rel4_4;
branches;
next	10.2;

10.2
date	94.08.23.18.07.00;	author gdurf;	state Exp;
branches;
next	10.1;

10.1
date	91.10.12.06.51.00;	author mike;	state Rel4_0;
branches;
next	1.2;

1.2
date	91.07.02.02.15.42;	author butler;	state Exp;
branches;
next	1.1;

1.1
date	90.10.25.20.13.30;	author butler;	state Exp;
branches;
next	;

11.4.2.1
date	2002.09.19.18.02.19;	author morrison;	state Exp;
branches;
next	;


desc
@safety check in
@


11.7
log
@moved to src/sig/
@
text
@/*
 *		D 2 - C . C
 *
 * Merge two double files into one complex file.
 *
 *  Author -
 *	Phillip Dykstra
 */
#ifndef lint
static char RCSid[] = "@@(#)$Header: /n/xoff/cvs/brlcad/sig/d2-c.c,v 11.6 2004/05/10 15:30:50 erikg Exp $ (BRL)";
#endif

#ifdef HAVE_CONFIG_H
# include "config.h"
#endif



#ifdef USE_STRING_H
#include <string.h>
#else
#include <strings.h>
#endif

#include <stdio.h>
#include "machine.h"

double	obuf[2*1024];
double	real[1024], imag[1024];

void	open_file(FILE **fp, char *name);

static char usage[] = "\
Usage: d2-c real_file imag_file > complex (- stdin, . skip)\n";

int main(int argc, char **argv)
{
	int	i;
	int	nr, ni, num;
	register double *obufp;
	FILE	*rfp, *ifp;

	if( argc != 3 || isatty(fileno(stdout)) ) {
		fputs( usage, stderr );
		exit( 1 );
	}

	open_file( &rfp, argv[1] );
	open_file( &ifp, argv[2] );

	while( 1 ) {
		nr = fread( real, sizeof( double ), 1024, rfp );
		ni = fread( real, sizeof( double ), 1024, ifp );
		if( nr <= 0 && ni <= 0 )
			break;

		/* find max */
		num = (nr > ni) ? nr : ni;
		if( nr < num )
			bzero( &real[nr], (num-nr)*sizeof(double) );
		if( ni < num )
			bzero( &imag[ni], (num-ni)*sizeof(double) );

		obufp = &obuf[0];
		for( i = 0; i < num; i++ ) {
			*obufp++ = real[i];
			*obufp++ = imag[i];
		}
		fwrite( obuf, sizeof( double ), num*2, stdout );
	}
	return 0;
}

void
open_file(FILE **fp, char *name)
{
	/* check for special names */
	if( strcmp( name, "-" ) == 0 ) {
		*fp = stdin;
		return;
	} else if( strcmp( name, "." ) == 0 ) {
		*fp = fopen( "/dev/null", "r" );
		return;
	}

	if( (*fp = fopen( name, "r" )) == NULL ) {
		fprintf( stderr, "d2-c: Can't open \"%s\"\n", name );
		exit( 2 );
	}
}
@


11.6
log
@change conf.h to a wrapped config.h
@
text
@d10 1
a10 1
static char RCSid[] = "@@(#)$Header: /cvs/brlcad/sig/d2-c.c,v 11.5 2004/04/05 05:45:59 morrison Exp $ (BRL)";
@


11.5
log
@merge of ansi-6-0-branch into head
@
text
@d10 1
a10 1
static char RCSid[] = "@@(#)$Header$ (BRL)";
d13 5
a17 1
#include "conf.h"
@


11.4
log
@Restoration of entire source tree to Pre-Hartley state
@
text
@d10 1
a10 1
static char RCSid[] = "@@(#)$Header: /c/CVS/brlcad/sig/d2-c.c,v 11.2 2001/08/10 21:22:45 morrison Exp $ (BRL)";
d27 1
a27 1
void	open_file();
d32 1
a32 3
int main( argc, argv )
int argc;
char **argv;
d71 1
a71 3
open_file( fp, name )
FILE **fp;
char *name;
@


11.4.2.1
log
@Initial ANSIfication
@
text
@d10 1
a10 1
static char RCSid[] = "@@(#)$Header: /c/CVS/brlcad/sig/d2-c.c,v 11.4 2002/08/20 17:08:42 jra Exp $ (BRL)";
d27 1
a27 1
void	open_file(FILE **fp, char *name);
d32 3
a34 1
int main(int argc, char **argv)
d73 3
a75 1
open_file(FILE **fp, char *name)
@


11.3
log
@Converted from K&R to ANSI C - RFH
@
text
@d27 1
a27 1
void	open_file(FILE **fp, char *name);
d32 3
a34 1
int main(int argc, char **argv)
d73 3
a75 1
open_file(FILE **fp, char *name)
@


11.2
log
@added proper checking for string.h/strings.h
added int return type to main
added return 0 to main
@
text
@d10 1
a10 1
static char RCSid[] = "@@(#)$Header: /c/CVS/brlcad/sig/d2-c.c,v 11.1 1995/01/04 10:19:05 mike Rel4_4 $ (BRL)";
d27 1
a27 1
void	open_file();
d32 1
a32 3
int main( argc, argv )
int argc;
char **argv;
d71 1
a71 3
open_file( fp, name )
FILE **fp;
char *name;
@


11.1
log
@Release_4.4
@
text
@d10 1
a10 1
static char RCSid[] = "@@(#)$Header: /m/cad/sig/RCS/d2-c.c,v 10.2 94/08/23 18:07:00 gdurf Exp $ (BRL)";
d15 6
d32 1
a32 1
main( argc, argv )
d69 1
@


10.2
log
@Added include of conf.h
@
text
@d10 1
a10 1
static char RCSid[] = "@@(#)$Header: /m/cad/sig/RCS/d2-c.c,v 10.1 1991/10/12 06:51:00 mike Rel4_0 gdurf $ (BRL)";
@


10.1
log
@Release_4.0
@
text
@d10 1
a10 1
static char RCSid[] = "@@(#)$Header: /m/cad/sig/RCS/d2-c.c,v 1.2 91/07/02 02:15:42 butler Exp $ (BRL)";
d12 2
@


1.2
log
@Minor nits
@
text
@d10 1
a10 1
static char RCSid[] = "@@(#)$Header: /m/cad/sig/RCS/d2-c.c,v 1.1 90/10/25 20:13:30 butler Exp $ (BRL)";
@


1.1
log
@Initial revision
@
text
@d10 1
a10 1
static char RCSid[] = "@@(#)$Header: d2-c.c,v 9.1 89/05/19 06:07:30 mike Rel3_5 $ (BRL)";
d14 1
a14 4

#ifdef SYSV
#define bzero(str,n)		memset( str, '\0', n )
#endif
@
