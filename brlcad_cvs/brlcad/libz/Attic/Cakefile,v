head	1.16;
access;
symbols
	ansi-20040405-merged:1.9.6.1
	premerge-autoconf:1.15
	postmerge-20040315-windows:1.15
	premerge-20040315-windows:1.15
	windows-20040315-freeze:1.9.8.1
	autoconf-20031203:1.15
	autoconf-20031202:1.15
	phong-branch:1.14.0.4
	photonmap-branch:1.14.0.2
	rel-6-1-DP:1.9
	windows-branch:1.9.0.8
	rel-6-0-2:1.9
	ansi-branch:1.9.0.6
	rel-6-0-1-branch:1.9.0.4
	hartley-6-0-post:1.9
	hartley-6-0-pre:1.9
	rel-6-0-1:1.9
	rel-6-0:1.9
	rel-5-4:1.9
	offsite-5-3-pre:1.9
	rel-5-3:1.9
	rel-5-2:1.9
	rel-5-1-branch:1.9.0.2
	rel-5-1:1.9
	rel-5-0:1.8
	rel-5-0-beta:1.8
	AUTOCONF:1.15.0.2
	zlib_1_0_4:1.1.1.1
	zlib:1.1.1;
locks; strict;
comment	@# @;


1.16
date	2004.03.18.18.25.15;	author erikg;	state dead;
branches;
next	1.15;

1.15
date	2003.09.26.19.42.04;	author morrison;	state Exp;
branches
	1.15.2.1;
next	1.14;

1.14
date	2003.03.13.19.44.40;	author jra;	state Exp;
branches;
next	1.13;

1.13
date	2002.12.25.01.26.38;	author jra;	state Exp;
branches;
next	1.12;

1.12
date	2002.12.23.22.27.38;	author jra;	state Exp;
branches;
next	1.11;

1.11
date	2002.12.23.22.15.16;	author jra;	state Exp;
branches;
next	1.10;

1.10
date	2002.12.23.21.47.37;	author jra;	state Exp;
branches;
next	1.9;

1.9
date	2000.06.14.18.34.54;	author bparker;	state Exp;
branches
	1.9.6.1
	1.9.8.1;
next	1.8;

1.8
date	99.05.19.19.01.46;	author jra;	state Exp;
branches;
next	1.7;

1.7
date	98.10.29.03.29.50;	author jra;	state Exp;
branches;
next	1.6;

1.6
date	98.08.25.00.58.58;	author mike;	state Exp;
branches;
next	1.5;

1.5
date	98.08.23.00.16.24;	author mike;	state Exp;
branches;
next	1.4;

1.4
date	98.07.13.21.03.08;	author jra;	state Exp;
branches;
next	1.3;

1.3
date	98.06.25.17.15.51;	author jra;	state Exp;
branches;
next	1.2;

1.2
date	98.06.24.18.33.14;	author jra;	state Exp;
branches;
next	1.1;

1.1
date	98.06.24.13.19.59;	author jra;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.06.24.13.19.59;	author jra;	state Exp;
branches;
next	;

1.9.6.1
date	2004.03.17.21.21.48;	author morrison;	state Exp;
branches;
next	;

1.9.8.1
date	2004.03.11.23.45.53;	author morrison;	state Exp;
branches;
next	;

1.15.2.1
date	2004.03.18.18.10.30;	author erikg;	state dead;
branches;
next	;


desc
@@


1.16
log
@merge of AUTOCONF branch in to HEAD
@
text
@/*
 *			zlib/Cakefile
 */
#define SRCDIR	libz
#define	SRCSUFF	.c
#define MANSECTION	3

#include "../Cakefile.defs"

#if !defined(BUILD_LIBRARY)
#define PRODUCTS	libz.a
#define CONFIG_OPTS	-p BASEDIR
#define	AFTER_MAKE	/**/
#define	FIX_FILE	afile
#define AFTER_INSTALL	/**/
#else
#define PRODUCTS	libz.ARCH_SUF
#define SHARED_PRODUCT	libz.ARCH_SUF''[[LIBVERS]]
#define CONFIG_OPTS	-s -p BASEDIR
#define	AFTER_MAKE	mv libz.ARCH_SUF SHARED_PRODUCT ; sharedliblink.sh SHARED_PRODUCT
#define	FIX_FILE	sfile
#define AFTER_INSTALL	mv BASEDIR/lib/PRODUCTS BASEDIR/lib/SHARED_PRODUCT ; sharedliblink.sh BASEDIR/lib/SHARED_PRODUCT

#endif

#if !defined(LDSHARED)
#	define	MAKETHIS ( \C\C=\"CC\"; \
		\C\F\L\A\G\S=\"GFLAG OPTIMIZER PROFILER -I../SRCDIR\"; \
		\R\A\N\L\I\B=\"RANLIB\"; \
		\L\D\F\L\A\G\S=\"LDFLAGS\"; \
		SHAREDVER=[[LIBVERS]]; \
		export \C\C \C\F\L\A\G\S \R\A\N\L\I\B \L\D\F\L\A\G\S \S\H\A\R\E\D\V\E\R; \
		cp ../SRCDIR/zlib.h .; \
		../SRCDIR/configure CONFIG_OPTS; \
		../SRCDIR/fix_makefile.sh FIX_FILE  >  Makefile.MTYPE)
#else
#	define MAKETHIS	( \C\C=\"CC\"; \
		\C\F\L\A\G\S=\"GFLAG OPTIMIZER PROFILER -I../SRCDIR\"; \
		\R\A\N\L\I\B=\"RANLIB\"; \
		\L\D\F\L\A\G\S=\"LDFLAGS\"; \
		\L\D\S\H\A\R\E\D=\"LDSHARED\"; \
		SHAREDVER=[[LIBVERS]]; \
		export \C\C \C\F\L\A\G\S \R\A\N\L\I\B \L\D\F\L\A\G\S \L\D\S\H\A\R\E\D \S\H\A\R\E\D\V\E\R; \
		cp ../SRCDIR/zlib.h .; \
		../SRCDIR/configure --shared CONFIG_OPTS; \
		../SRCDIR/fix_makefile.sh FIX_FILE  >  Makefile.MTYPE)
#endif

PRODUCTS: Makefile.MTYPE
	make -f Makefile.MTYPE PRODUCTS
	AFTER_MAKE

Makefile.in:	if not exist Makefile.in
	cp ../SRCDIR/Makefile.in .

Makefile.MTYPE:	Makefile.in	if not exist Makefile.MTYPE
	MAKETHIS

clean&:
	make -f Makefile.MTYPE clean Makefile zlib.h Makefile.in lib.exp

noprod&:
	rm -rf *.ARCH_SUF *.a

clobber&: Makefile.MTYPE
	make -f Makefile.MTYPE clean
	rm -f *.MTYPE Makefile zlib.h Makefile.in lib.exp

install&: Makefile.MTYPE
	cp ../SRCDIR/zlib.h .
	cp ../SRCDIR/zconf.h .
	rm -f INCLUDE_DIR/zlib.h INCLUDE_DIR/zconf.h
	rm -f LIBDIR/libz.*
	make -f Makefile.MTYPE install prefix=BASEDIR
	AFTER_INSTALL

install-nobak&: Makefile.MTYPE
	cp ../SRCDIR/zlib.h .
	cp ../SRCDIR/zconf.h .
	rm -f INCLUDE_DIR/zlib.h INCLUDE_DIR/zconf.h
	rm -f LIBDIR/libz.*
	make -f Makefile.MTYPE install prefix=BASEDIR
	AFTER_INSTALL

test&: Makefile.MTYPE
	make -f Makefile.MTYPE test

@


1.15
log
@added potential ibm sp3 build terds to be removed on clean/clobber
@
text
@@


1.15.2.1
log
@merge from head
@
text
@@


1.14
log
@Now uses ARCH_SUF macro
@
text
@d60 1
a60 1
	make -f Makefile.MTYPE clean
d67 1
a67 1
	rm -f *.MTYPE Makefile
@


1.13
log
@install now removes products before install to avoid permission errors
@
text
@d17 2
a18 2
#define PRODUCTS	libz.so
#define SHARED_PRODUCT	libz.so''[[LIBVERS]]
d20 1
a20 1
#define	AFTER_MAKE	mv libz.so SHARED_PRODUCT ; sharedliblink.sh SHARED_PRODUCT
d45 1
a45 1
		../SRCDIR/configure CONFIG_OPTS; \
d63 1
a63 1
	rm -rf *.so *.a
@


1.12
log
@created an "AFTER_INSTALL" macro to run sharedliblink.sh
@
text
@d72 2
d80 2
@


1.11
log
@mods to get shared libraries to install correctly
@
text
@d15 1
d22 2
d73 1
d79 1
a79 2
	mv BASEDIR/lib/PRODUCTS BASEDIR/lib/SHARED_PRODUCT
	sharedliblink.sh BASEDIR/lib/SHARED_PRODUCT
@


1.10
log
@Update to zlib version 1.1.4
@
text
@d75 2
@


1.9
log
@Mods to optionally feed a shared library
command to configure.
@
text
@d30 1
d41 1
@


1.9.6.1
log
@sync branch with HEAD
@
text
@a14 1
#define AFTER_INSTALL	/**/
d16 2
a17 2
#define PRODUCTS	libz.ARCH_SUF
#define SHARED_PRODUCT	libz.ARCH_SUF''[[LIBVERS]]
d19 1
a19 1
#define	AFTER_MAKE	mv libz.ARCH_SUF SHARED_PRODUCT ; sharedliblink.sh SHARED_PRODUCT
a20 2
#define AFTER_INSTALL	mv BASEDIR/lib/PRODUCTS BASEDIR/lib/SHARED_PRODUCT ; sharedliblink.sh BASEDIR/lib/SHARED_PRODUCT

a29 1
		cp ../SRCDIR/zlib.h .; \
d40 1
a40 2
		cp ../SRCDIR/zlib.h .; \
		../SRCDIR/configure --shared CONFIG_OPTS; \
d55 1
a55 1
	make -f Makefile.MTYPE clean Makefile zlib.h Makefile.in lib.exp
d58 1
a58 1
	rm -rf *.ARCH_SUF *.a
d62 1
a62 1
	rm -f *.MTYPE Makefile zlib.h Makefile.in lib.exp
a66 2
	rm -f INCLUDE_DIR/zlib.h INCLUDE_DIR/zconf.h
	rm -f LIBDIR/libz.*
a67 1
	AFTER_INSTALL
a71 2
	rm -f INCLUDE_DIR/zlib.h INCLUDE_DIR/zconf.h
	rm -f LIBDIR/libz.*
a72 1
	AFTER_INSTALL
@


1.9.8.1
log
@sync to HEAD...
@
text
@a14 1
#define AFTER_INSTALL	/**/
d16 2
a17 2
#define PRODUCTS	libz.ARCH_SUF
#define SHARED_PRODUCT	libz.ARCH_SUF''[[LIBVERS]]
d19 1
a19 1
#define	AFTER_MAKE	mv libz.ARCH_SUF SHARED_PRODUCT ; sharedliblink.sh SHARED_PRODUCT
a20 2
#define AFTER_INSTALL	mv BASEDIR/lib/PRODUCTS BASEDIR/lib/SHARED_PRODUCT ; sharedliblink.sh BASEDIR/lib/SHARED_PRODUCT

a29 1
		cp ../SRCDIR/zlib.h .; \
d40 1
a40 2
		cp ../SRCDIR/zlib.h .; \
		../SRCDIR/configure --shared CONFIG_OPTS; \
d55 1
a55 1
	make -f Makefile.MTYPE clean Makefile zlib.h Makefile.in lib.exp
d58 1
a58 1
	rm -rf *.ARCH_SUF *.a
d62 1
a62 1
	rm -f *.MTYPE Makefile zlib.h Makefile.in lib.exp
a66 2
	rm -f INCLUDE_DIR/zlib.h INCLUDE_DIR/zconf.h
	rm -f LIBDIR/libz.*
a67 1
	AFTER_INSTALL
a71 2
	rm -f INCLUDE_DIR/zlib.h INCLUDE_DIR/zconf.h
	rm -f LIBDIR/libz.*
a72 1
	AFTER_INSTALL
@


1.8
log
@Fixed shared library version number handling
@
text
@d23 21
d52 1
a52 9
	( \C\C=\"CC\"; \
		\C\F\L\A\G\S=\"GFLAG OPTIMIZER PROFILER -I../SRCDIR\"; \
		\R\A\N\L\I\B=\"RANLIB\"; \
		\L\D\F\L\A\G\S=\"LDFLAGS\"; \
		SHAREDVER=[[LIBVERS]]; \
		export \C\C \C\F\L\A\G\S \R\A\N\L\I\B \L\D\F\L\A\G\S \S\H\A\R\E\D\V\E\R; \
		../SRCDIR/configure CONFIG_OPTS; \
		../SRCDIR/fix_makefile.sh FIX_FILE  >  Makefile.MTYPE)

@


1.7
log
@Mods to handle shared libraries.
@
text
@d35 2
a36 1
		export \C\C \C\F\L\A\G\S \R\A\N\L\I\B \L\D\F\L\A\G\S; \
@


1.6
log
@Make sure to copy crucial .h files to compilation directory
so that Makefile.??? has them handy to install them.
@
text
@d12 1
a12 1
#define CONFIG_OPTS	--prefix=BASEDIR
d14 1
d18 1
a18 1
#define CONFIG_OPTS	--shared --prefix=BASEDIR
d20 1
d37 1
a37 1
		../SRCDIR/fix_makefile.sh >  Makefile.MTYPE)
d53 1
a53 1
	make -f Makefile.MTYPE install
d58 1
a58 1
	make -f Makefile.MTYPE install
@


1.5
log
@Need to get header files into a place where the Makefile can
install them.
@
text
@a26 2
	cp ../SRCDIR/zlib.h .
	cp ../SRCDIR/zconf.h .
d49 2
d54 2
@


1.4
log
@Use BASEDIR rather than BINDIR.
@
text
@d27 2
@


1.3
log
@Minor updates.
@
text
@d12 1
a12 1
#define CONFIG_OPTS	--prefix=BINDIR
d17 1
a17 1
#define CONFIG_OPTS	--shared --prefix=BINDIR
@


1.2
log
@zlib version 1.1.2
@
text
@d25 4
a28 1
Makefile.MTYPE:		if not exist Makefile.MTYPE
d30 1
a30 1
		\C\F\L\A\G\S=\"GFLAG OPTIMIZER PROFILER\"; \
d46 1
a46 1
	rm -f *.MTYPE
@


1.1
log
@Initial revision
@
text
@d12 1
d17 1
d31 1
a31 1
		../SRCDIR/configure; \
@


1.1.1.1
log
@Initial inclusion of zlib (version 1.0.4).
@
text
@@
