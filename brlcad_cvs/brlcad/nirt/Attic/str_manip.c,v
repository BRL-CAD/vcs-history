head	11.9;
access;
symbols
	ansi-20040405-merged:11.6.2.1
	postmerge-20040405-ansi:11.7
	premerge-20040404-ansi:11.6
	postmerge-autoconf:11.6
	autoconf-freeze:11.6
	premerge-autoconf:11.6
	postmerge-20040315-windows:11.6
	premerge-20040315-windows:11.6
	windows-20040315-freeze:11.6
	autoconf-20031203:11.6
	autoconf-20031202:11.6
	autoconf-branch:11.6.0.10
	phong-branch:11.6.0.8
	photonmap-branch:11.6.0.6
	rel-6-1-DP:11.6
	windows-branch:11.6.0.4
	rel-6-0-2:11.4
	ansi-branch:11.6.0.2
	rel-6-0-1-branch:11.4.0.2
	hartley-6-0-post:11.5
	hartley-6-0-pre:11.4
	rel-6-0-1:11.4
	rel-6-0:11.4
	rel-5-4:11.2
	offsite-5-3-pre:11.3
	rel-5-3:11.2
	rel-5-2:11.2
	rel-5-1-branch:11.2.0.2
	rel-5-1:11.2
	rel-5-0:11.2
	rel-5-0-beta:11.2
	rel-4-5:11.2
	ctj-4-5-post:11.1
	ctj-4-5-pre:11.1
	rel-4-4:11.1
	rel-4-0:10.1;
locks; strict;
comment	@ * @;


11.9
date	2004.05.21.17.47.09;	author morrison;	state dead;
branches;
next	11.8;

11.8
date	2004.05.10.15.30.49;	author erikg;	state Exp;
branches;
next	11.7;

11.7
date	2004.04.05.07.39.41;	author morrison;	state Exp;
branches;
next	11.6;

11.6
date	2002.08.20.17.08.30;	author jra;	state Exp;
branches
	11.6.2.1;
next	11.5;

11.5
date	2002.08.15.20.55.44;	author hartley;	state Exp;
branches;
next	11.4;

11.4
date	2001.08.09.19.58.22;	author jra;	state Exp;
branches;
next	11.3;

11.3
date	2000.08.24.23.10.01;	author mike;	state Exp;
branches;
next	11.2;

11.2
date	97.12.08.18.54.56;	author pjt;	state Exp;
branches;
next	11.1;

11.1
date	95.01.04.10.22.21;	author mike;	state Rel4_4;
branches;
next	10.2;

10.2
date	94.08.24.14.02.12;	author gdurf;	state Exp;
branches;
next	10.1;

10.1
date	91.10.12.06.53.35;	author mike;	state Rel4_0;
branches;
next	1.4;

1.4
date	91.07.19.01.53.13;	author mike;	state Exp;
branches;
next	1.3;

1.3
date	91.02.15.16.02.32;	author mike;	state Exp;
branches;
next	1.2;

1.2
date	91.02.14.09.19.53;	author pjt;	state Exp;
branches;
next	1.1;

1.1
date	91.02.11.09.56.05;	author pjt;	state Exp;
branches;
next	;

11.6.2.1
date	2002.09.19.18.02.10;	author morrison;	state Exp;
branches;
next	;


desc
@@


11.9
log
@moved to src/nirt/
@
text
@/*	STR_MANIP.C	*/
#ifndef lint
static const char RCSid[] = "$Header: /n/xoff/cvs/brlcad/nirt/str_manip.c,v 11.8 2004/05/10 15:30:49 erikg Exp $";
#endif

/*	INCLUDES	*/
#ifdef HAVE_CONFIG_H
# include "config.h"
#endif



#include <stdio.h>

#ifdef USE_STRING_H
#include <string.h>
#else
#include <strings.h>
#endif

#include <ctype.h>

#include "machine.h"
#include "vmath.h"
#include "./nirt.h"

int str_dbl(char *buf, double *Result)
{
	int 	status = 0; 		/* 0, function failed - 1, success */
	int	sign = POS;		/* POS or NEG sign		   */
	double	Frac = .1;              /* used in the case of a fraction  */
	double  Value = 0.0;		/* current value of the double	   */
	int	i = 0;			/* current position of *buf        */

	if (*buf == '-')      /* check for a minus sign */  
	{
		sign = NEG;
		++i;
		++buf;
	}
	while (isdigit(*buf)) /* update Value while there is a digit */
	{
		status = 1;
		Value *= 10.0;
		Value += *buf++ - '0';
		++i;
	}
	if (*buf == '.')      /* check for a decimal point */
	{
		++i;
		++buf;
		while (isdigit(*buf))  /* update Value while there is a digit */
		{
			++i;
			status = 1;
			Value += (*buf++ - '0') * Frac;
			Frac *= .1;
		}
	}
	if (status == 0)
		return(0);    /* if function failed return a 0 */
	else
	{
		if (sign == NEG)
			Value *= -1;
		*Result = Value;
		return(i);    /* if function succeeds return position of *buf */
	}

}

char *basename(char *string)
{
    char	*sp;
    char        *sp2;

    for (sp = string + strlen(string); (sp > string) && (*sp != '/'); --sp)
	;
    if (*sp == '/')
        ++sp;
    sp2 = sp;
    while (*sp2 != '{' && *sp2 != '\0')
    	++sp2;
    *sp2 = '\0';
    return (sp);
}
@


11.8
log
@change conf.h to a wrapped config.h
@
text
@d3 1
a3 1
static const char RCSid[] = "$Header: /cvs/brlcad/nirt/str_manip.c,v 11.7 2004/04/05 07:39:41 morrison Exp $";
@


11.7
log
@merge of ansi-6-0-branch into HEAD
@
text
@d3 1
a3 1
static const char RCSid[] = "$Header$";
d7 5
a11 1
#include "conf.h"
@


11.6
log
@Restoration of entire source tree to Pre-Hartley state
@
text
@d3 1
a3 1
static const char RCSid[] = "$Header: /c/CVS/brlcad/nirt/str_manip.c,v 11.4 2001/08/09 19:58:22 jra Exp $";
d23 1
a23 3
int str_dbl(buf, Result)
char 	*buf;
double	*Result;
d68 1
a68 2
char *basename(string)
char	*string;
@


11.6.2.1
log
@Initial ANSIfication
@
text
@d3 1
a3 1
static const char RCSid[] = "$Header: /c/CVS/brlcad/nirt/str_manip.c,v 11.6 2002/08/20 17:08:30 jra Exp $";
d23 3
a25 1
int str_dbl(char *buf, double *Result)
d70 2
a71 1
char *basename(char *string)
@


11.5
log
@Converted from K&R to ANSI C - RFH
@
text
@d23 3
a25 1
int str_dbl(char *buf, double *Result)
d70 2
a71 1
char *basename(char *string)
@


11.4
log
@lint
@
text
@d3 1
a3 1
static const char RCSid[] = "$Header: /c/CVS/brlcad/nirt/str_manip.c,v 11.3 2000/08/24 23:10:01 mike Exp $";
d23 1
a23 3
int str_dbl(buf, Result)
char 	*buf;
double	*Result;
d68 1
a68 2
char *basename(string)
char	*string;
@


11.3
log
@
lint
@
text
@d3 1
a3 1
static const char RCSid[] = "$Header: /c/CVS/brlcad/nirt/str_manip.c,v 11.2 1997/12/08 18:54:56 pjt Exp $";
d10 7
@


11.2
log
@Got rid of AND macro for &&
@
text
@d3 1
a3 1
static char RCSid[] = "$Header: /m/cad/nirt/RCS/str_manip.c,v 11.1 1995/01/04 10:22:21 mike Rel4_4 pjt $";
@


11.1
log
@Release_4.4
@
text
@d3 1
a3 1
static char RCSid[] = "$Header: /m/cad/nirt/RCS/str_manip.c,v 10.2 94/08/24 14:02:12 gdurf Exp $";
d74 1
a74 1
    while (*sp2 != '{' AND *sp2 != '\0')
@


10.2
log
@Made includes explicit
@
text
@d3 1
a3 1
static char RCSid[] = "$Header: /m/cad/nirt/RCS/str_manip.c,v 10.1 1991/10/12 06:53:35 mike Rel4_0 gdurf $";
@


10.1
log
@Release_4.0
@
text
@d3 1
a3 1
static char RCSid[] = "$Header: /m/cad/nirt/RCS/str_manip.c,v 1.4 91/07/19 01:53:13 mike Exp $";
d7 2
d11 3
@


1.4
log
@NULL is not the same as '\0'
@
text
@d3 1
a3 1
static char RCSid[] = "$Header: /m/cad/nirt/RCS/str_manip.c,v 1.3 91/02/15 16:02:32 mike Exp $";
@


1.3
log
@Converted to Cake
@
text
@d3 1
a3 1
static char RCSid[] = "$Header: /m/cad/nirt/RCS/str_manip.c,v 1.2 91/02/14 09:19:53 pjt Exp $";
d69 1
a69 1
    while (*sp2 != '{' AND *sp2 != NULL)
d71 1
a71 1
    *sp2 = NULL;
@


1.2
log
@Attempt to add $Header$ to file
@
text
@d3 1
a3 1
static char RCSid[] = "$Header$";
d7 1
a7 1
#include "nirt.h"
d9 1
a9 1
#include <stdio.h>
@


1.1
log
@Initial revision
@
text
@d2 3
@
