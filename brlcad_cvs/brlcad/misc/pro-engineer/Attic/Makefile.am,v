head	14.10;
access;
symbols
	stable-branch:14.5
	rel-7-8-2:14.9
	rel-7-8-0:14.9
	trimnurbs-branch:14.9.0.8
	help:14.9
	temp_tag:14.9
	bobWinPort-20051223-freeze:14.9
	postmerge-20051223-bobWinPort:14.9
	premerge-20051223-bobWinPort:14.9
	rel-7-6-6:14.9
	rel-7-6-4:14.9
	rel-7-6-2:14.9
	rel-7-6-branch:14.9.0.6
	rel-7-6-0:14.9
	rel-7-4-2:14.9
	rel-7-4-branch:14.9.0.4
	bobWinPort:14.9.0.2
	rel-7-4-0:14.9
	rel-7-2-6:14.6
	rel-7-2-4:14.5
	rel-7-2-2:14.5
	rel-7-2-0:14.5
	rel-7-0-4:14.5
	rel-7-0-2:14.1
	rel-7-0-1:14.1
	opensource-post:14.1
	opensource-pre:1.7
	rel-7-0-branch:1.7.0.2
	rel-7-0:1.7;
locks; strict;
comment	@# @;


14.10
date	2006.07.28.03.38.45;	author brlcad;	state dead;
branches;
next	14.9;

14.9
date	2005.07.07.06.05.22;	author brlcad;	state Exp;
branches;
next	14.8;

14.8
date	2005.06.24.23.48.05;	author brlcad;	state Exp;
branches;
next	14.7;

14.7
date	2005.06.12.22.19.10;	author brlcad;	state Exp;
branches;
next	14.6;

14.6
date	2005.05.12.20.54.37;	author brlcad;	state Exp;
branches;
next	14.5;

14.5
date	2005.01.26.15.26.12;	author brlcad;	state Exp;
branches;
next	14.4;

14.4
date	2005.01.24.23.54.44;	author brlcad;	state Exp;
branches;
next	14.3;

14.3
date	2005.01.24.05.31.36;	author brlcad;	state Exp;
branches;
next	14.2;

14.2
date	2005.01.11.05.43.00;	author brlcad;	state Exp;
branches;
next	14.1;

14.1
date	2004.11.16.19.42.10;	author morrison;	state Exp;
branches;
next	1.7;

1.7
date	2004.11.01.13.53.57;	author morrison;	state Exp;
branches;
next	1.6;

1.6
date	2004.10.29.13.47.31;	author morrison;	state Exp;
branches;
next	1.5;

1.5
date	2004.10.22.06.07.26;	author morrison;	state Exp;
branches;
next	1.4;

1.4
date	2004.10.22.04.34.32;	author morrison;	state Exp;
branches;
next	1.3;

1.3
date	2004.09.24.14.51.28;	author morrison;	state Exp;
branches;
next	1.2;

1.2
date	2004.06.03.14.53.32;	author erikg;	state Exp;
branches;
next	1.1;

1.1
date	2004.05.20.21.53.48;	author morrison;	state Exp;
branches;
next	;


desc
@@


14.10
log
@move the Pro/Engineer plugin from misc/pro-engineer to src/external/ProEngineer.  the new src/external directory is intended for all of the codes that are written to work with and link against external packages (often as a plugin to said external package)
@
text
@# $Id: Makefile.am,v 14.9 2005/07/07 06:05:22 brlcad Exp $#

EXTRA_PROGRAMS = proe-brl
# EXTRA_LTLIBRARIES = libproe2brl.la

PRO_MACHINE_TYPE = sgi_mips4
PROTOOL_SRC = /opt/ptc/proe2001/protoolkit
PROTOOL_SYS = $(PROTOOL_SRC)/$(PRO_MACHINE_TYPE)
PRODEV_SRC  = /opt/ptc/proe2001/prodevelop
PRODEV_SYS  = $(PRODEV_SRC)/$(PRO_MACHINE_TYPE)
PROTK_UNLOCK = /usr/proe/bin/protk_unlock

PDLIB       = $(PRODEV_SYS)/obj/prodevelop.a
PDLIB_DLL   = $(PRODEV_SYS)/obj/prodev_dll.a
PTLIB       = $(PROTOOL_SYS)/obj/protoolkit.a
PTLIB_DLL   = $(PROTOOL_SYS)/obj/protk_dll.a
PTCLIBS     = $(PTLIB) $(PDLIB)
PTCLIBS_DLL = $(PTLIB_DLL) $(PDLIB_DLL)
BRLLIBS     = $(BU) $(BN) $(TCL)
SYSLIBS     = -lc -lm -lw

AM_CFLAGS = -Wl,-rpath -Wl,$(libdir) -Wl,-multigot -Wl,-T10000000 -Wl,-B,symbolic
AM_LDFLAGS = $(BRLLIBS) $(SYSLIBS)
AM_CPPFLAGS = \
	-DPRO_MACHINE=23 -DPRO_OS=3 \
	-I$(PROTOOL_SRC)/protk_appls/includes \
	-I$(PROTOOL_SRC)/includes \
	-I$(PRODEV_SRC)/includes

proe_brldir = $(BRLCAD_DATA)/pro-engineer/$(PRO_MACHINE_TYPE)
proe_brl_CFLAGS = $(AM_CFLAGS)
proe_brl_LDADD = $(PTLIB) $(PDLIB) $(SYSLIBS)
proe_brl_SOURCES = proe-brl.c

#cc -n32 -mips4 -woff 1521 -multigot -Wl,-wall  -rpath /usr/brlcad/lib -Wl,-hiddens_file,/dev/null -shared -T10000000 -B symbolic -o proe-brl.dll proe-brl.o /opt/ptc/proe2001/protoolkit/sgi_mips4/obj/protk_dll.a /opt/ptc/proe2001/prodevelop/sgi_mips4/obj/prodev_dll.a -L/usr/brlcad/lib -lbu -lbn -ltcl -lc -lm -lw

#gcc -shared  libproe2brl_la-proe-brl.o   -L/vld/morrison/brlcad/src/libbu/.libs -L/vld/morrison/brlcad/src/other/libtcl/.libs /opt/ptc/proe2001/protoolkit/sgi_mips4/obj/protk_dll.a /opt/ptc/proe2001/prodevelop/sgi_mips4/obj/prodev_dll.a ../../src/libbu/.libs/libbu.so ../../src/libbn/.libs/libbn.so ../../src/other/libtcl/.libs/libtcl8.4.so -lc -lm -lw -lmx -lmalloc    -lc  -Wl,-soname -Wl,libproe2brl.so.1 `test -n "sgi1.0" && echo -Wl,-set_version -Wl,sgi1.0` -Wl,-update_registry -Wl,.libs/so_locations -o .libs/libproe2brl.so.1.0

#/usr/bin/ld -n32 -shared  libproe2brl_la-proe-brl.o   -L/vld/morrison/brlcad/src/libbu/.libs -L/vld/morrison/brlcad/src/other/libtcl/.libs /opt/ptc/proe2001/protoolkit/sgi_mips4/obj/protk_dll.a /opt/ptc/proe2001/prodevelop/sgi_mips4/obj/prodev_dll.a ../../src/libbu/.libs/libbu.so ../../src/libbn/.libs/libbn.so ../../src/other/libtcl/.libs/libtcl8.4.so -lc -lm -lw -lmx -lmalloc    -lc  -soname libproe2brl.so.1 `test -n "sgi1.0" && echo -set_version sgi1.0` -update_registry .libs/so_locations -o .libs/libproe2brl.so.1.0

# libproe2brl_la_SOURCES = proe-brl.c
# libproe2brl_la_CFLAGS = $(AM_CFLAGS)
# libproe2brl_la_LDFLAGS = -multigot -rpath $(libdir) -T10000000 -B symbolic
# libproe2brl_la_LIBADD = $(PTLIB_DLL) $(PDLIB_DLL) $(BRLLIBS) $(SYSLIBS)
# libproe2brl_sodir = $(BRLCAD_DATA)/pro-engineer/$(PRO_MACHINE_TYPE)

libproe2brl.so: mk
	make -f mk dll

all-am: Makefile
	@@if test "x$(MAKECMDGOALS)" = "xall-am" -o "x$(.TARGETS)" = "xall-am" -o "x$(MAKECMDGOALS)" = "x" -a "x$(.TARGETS)" = "x" ; then \
	  @@ECHO@@ "---" ; \
	  @@ECHO@@ "Run 'make plugin' from misc/pro-engineer before 'make install' to build the Pro-Engineer plugin." ; \
	  @@ECHO@@ "Run 'make plugin2' from misc/pro-engineer before 'make install' to build a .so Pro-Engineer plugin." ; \
	  @@ECHO@@ ; \
	fi

install-data-local:
	@@if test -f .libs/proe-brl ; then \
		@@ECHO@@ "Installing proe-brl" ; \
		if ! test -d $(DESTDIR)$(proe_brldir) ; then \
			mkdir -p $(DESTDIR)$(proe_brldir) ; \
		fi ; \
		$(INSTALL) .libs/proe-brl $(DESTDIR)$(proe_brldir)/proe-brl ; \
	fi
	@@if test -f libproe2brl.so ; then \
		@@ECHO@@ "Installing libproe2brl.so" ; \
		if ! test -d $(DESTDIR)$(proe_brldir) ; then \
			mkdir -p $(DESTDIR)$(proe_brldir) ; \
		fi ; \
		$(INSTALL) libproe2brl.so $(DESTDIR)$(proe_brldir)/libproe2brl.so ; \
	fi

unlock:
	@@if test -x $(PROTK_UNLOCK) ; then \
		if test -f .libs/proe-brl ; then \
			$(PROTK_UNLOCK) .libs/proe-brl ; \
		else \
			@@ECHO@@ "Run 'make plugin' before running 'make unlock'" ; \
		fi ; \
	else \
		@@ECHO@@ "The ProE unlock tool does not exist as $(PROTK_UNLOCK)" ; \
		@@ECHO@@ "Set and verify PROTK_UNLOCK in misc/pro-engineer/Makefile" ; \
	fi

unlock2:
	@@if test -x $(PROTK_UNLOCK) ; then \
		if test -f libproe2brl.so ; then \
			$(PROTK_UNLOCK) libproe2brl.so ; \
		else \
			@@ECHO@@ "Run 'make plugin2' before running 'make unlock2'" ; \
		fi ; \
	else \
		@@ECHO@@ "The ProE unlock tool does not exist as $(PROTK_UNLOCK)" ; \
		@@ECHO@@ "Set and verify PROTK_UNLOCK in misc/pro-engineer/Makefile" ; \
	fi

plugin: proe-brl
	@@@@ECHO@@ "---"
	@@@@ECHO@@ "Run 'make unlock' to unlock the Pro-Engineer plugin for distribution"
	@@@@ECHO@@ "Run 'make install' to install the Pro-Engineer plugin"
	@@@@ECHO@@ "You will need to edit protk.dat to use this plugin instead of libproe2brl.so"
	@@@@ECHO@@

plugin2: libproe2brl.so
	@@@@ECHO@@ "---"
	@@@@ECHO@@ "Run 'make unlock2' to unlock the Pro-Engineer .so plugin for distribution"
	@@@@ECHO@@ "Run 'make install' to install the Pro-Engineer .so plugin"
	@@@@ECHO@@

proedir = $(BRLCAD_DATA)/pro-engineer
tmsgdir = $(BRLCAD_DATA)/pro-engineer/text/usascii/
rsrcdir = $(BRLCAD_DATA)/pro-engineer/text/usascii/resource/

proe_DATA = \
	install.doc \
	protk.dat

tmsg_DATA = usermsg.txt

rsrc_DATA = \
	proe_brl.res \
	proe_brl_error.res \
	proe_brl_gen_error.res

EXTRA_DIST = \
	$(proe_DATA) \
	$(rsrc_DATA) \
	$(tmsg_DATA) \
	mk.in \
	protk.dat.in

CLEANFILES = libproe2brl.so proe-brl

DISTCLEANFILES = mk protk.dat

MAINTAINERCLEANFILES = Makefile.in


include $(top_srcdir)/misc/Makefile.defs

@


14.9
log
@s/BRLCAD_DATA_DIR/BRLCAD_DATA/g
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.8 2005/06/24 23:48:05 brlcad Exp $#
@


14.8
log
@add Makefile.defs as an include
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.7 2005/06/12 22:19:10 brlcad Exp $#
d30 1
a30 1
proe_brldir = $(BRLCAD_DATA_DIR)/pro-engineer/$(PRO_MACHINE_TYPE)
d45 1
a45 1
# libproe2brl_sodir = $(BRLCAD_DATA_DIR)/pro-engineer/$(PRO_MACHINE_TYPE)
d111 3
a113 3
proedir = $(BRLCAD_DATA_DIR)/pro-engineer
tmsgdir = $(BRLCAD_DATA_DIR)/pro-engineer/text/usascii/
rsrcdir = $(BRLCAD_DATA_DIR)/pro-engineer/text/usascii/resource/
@


14.7
log
@install all of the data in subdirs under BRLCAD_DATA_DIR now, making the install one step closer to playing more politely with the packaging operating systems.
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.6 2005/05/12 20:54:37 brlcad Exp $#
d139 3
@


14.6
log
@typo in the am var for echo
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.5 2005/01/26 15:26:12 brlcad Exp $#
d30 1
a30 1
proe_brldir = ${prefix}/pro-engineer/$(PRO_MACHINE_TYPE)
d45 1
a45 1
# libproe2brl_sodir = ${prefix}/pro-engineer/$(PRO_MACHINE_TYPE)
d111 3
a113 3
proedir = ${prefix}/pro-engineer
tmsgdir = ${prefix}/pro-engineer/text/usascii/
rsrcdir = ${prefix}/pro-engineer/text/usascii/resource/
@


14.5
log
@get rid of the relative path and determination of PRO_ENGINEER_DIR from configure.ac and just wire the path in like everything else does.  this hopefully resolves the gentoo sandbox error.
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.4 2005/01/24 23:54:44 brlcad Exp $#
d102 1
a102 1
	@@@@ECHO# "You will need to edit protk.dat to use this plugin instead of libproe2brl.so"
@


14.4
log
@mk dll not mk lib.  separate out the build rules for proe-brl and libproe2brl.so; use plugin2 and unlock2 for the .so
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.3 2005/01/24 05:31:36 brlcad Exp $#
d30 1
a30 1
proe_brldir = @@PRO_ENGINEER_DIR@@/$(PRO_MACHINE_TYPE)
d45 1
a45 1
# libproe2brl_sodir = @@PRO_ENGINEER_DIR@@/$(PRO_MACHINE_TYPE)
d101 1
a101 1
	@@@@ECHO@@ "Run 'make install' to install the Pro-Engineer plugin into @@PRO_ENGINEER_DIR@@"
d108 1
a108 1
	@@@@ECHO@@ "Run 'make install' to install the Pro-Engineer .so plugin into @@PRO_ENGINEER_DIR@@"
d111 3
a113 3
proedir = @@PRO_ENGINEER_DIR@@
tmsgdir = @@PRO_ENGINEER_DIR@@/text/usascii/
rsrcdir = @@PRO_ENGINEER_DIR@@/text/usascii/resource/
@


14.3
log
@test using proebindir for installing instead of custom install rule
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.2 2005/01/11 05:43:00 brlcad Exp $#
d48 1
a48 1
	make -f mk lib
d54 1
d58 23
a80 13
#install-data-local:
#	@@if test -f .libs/proe-brl ; then \
#		@@ECHO@@ "Installing proe-brl" ; \
#		$(INSTALL) .libs/proe-brl $(DESTDIR)$(proebindir)/proe-brl ; \
#	fi
#	@@if test -f libproe2brl.so ; then \
#		@@ECHO@@ "Installing libproe2brl.so" ; \
#		$(INSTALL) libproe2brl.so $(DESTDIR)$(proelibdir)/libproe2brl.so ; \
#	fi

unlock: proe-brl libproe2brl.la
	@@if test -f proe-brl ; then \
		$(PROTK_UNLOCK) proe-brl ; \
d82 2
a83 1
		@@ECHO@@ "Run 'make install' before running 'make unlock'" ; \
d85 8
a92 2
	@@if test -f libproe2brl.so ; then \
		$(PROTK_UNLOCK) libproe2brl.so ; \
d94 2
a95 1
		@@ECHO@@ "Run 'make install' before running 'make unlock'" ; \
d98 1
a98 1
plugin: proe-brl libproe2brl.la
d102 1
d105 5
a109 1
unlock: plugin
@


14.2
log
@accept sf patch 1099902 - fixes gentoo sandbox build issues (where most modification of binaries requires using DESTDIR in order install where otherwise would have.
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 14.1 2004/11/16 19:42:10 morrison Exp $#
d11 1
d30 1
a33 1
proebindir = @@PRO_ENGINEER_DIR@@/$(PRO_MACHINE_TYPE)
d57 9
a65 9
install-data-local:
	@@if test -f .libs/proe-brl ; then \
		@@ECHO@@ "Installing proe-brl" ; \
		$(INSTALL) .libs/proe-brl $(DESTDIR)$(proebindir)/proe-brl ; \
	fi
	@@if test -f libproe2brl.so ; then \
		@@ECHO@@ "Installing libproe2brl.so" ; \
		$(INSTALL) libproe2brl.so $(DESTDIR)$(proelibdir)/libproe2brl.so ; \
	fi
d69 1
a69 1
		/usr/proe/bin/protk_unlock proe-brl ; \
d74 1
a74 1
		/usr/proe/bin/protk_unlock libproe2brl.so ; \
@


14.1
log
@dawn of a new revision.  it shall be numbered 14 to match release 7.  begin the convergence by adding emacs/vi local variable footer blocks to encourage consistent formatting.
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.7 2004/11/01 13:53:57 morrison Exp $#
d59 1
a59 1
		$(INSTALL) .libs/proe-brl $(proebindir)/proe-brl ; \
d63 1
a63 1
		$(INSTALL) libproe2brl.so $(proelibdir)/libproe2brl.so ; \
@


1.7
log
@revert back to making the build system use the pro-e-provided makefile.  this assumes cc, that the build has successfully make libbu, libbn, and libtcl, and that the build is occuring relative to the top_srcdir in ../.. (i.e. building from the pro-engineer dir).  the libraries are linked static so that they may be included in a 64bit release as well.
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.6 2004/10/29 13:47:31 morrison Exp $#
@


1.6
log
@AM_LDFLAGS is reportedly unused regardless -- make older automake happy
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.5 2004/10/22 06:07:26 morrison Exp $#
d4 1
a4 1
EXTRA_LTLIBRARIES = libproe2brl.la
d21 2
a22 1
#AM_LDFLAGS = $(BRLLIBS) $(SYSLIBS)
d32 1
a32 1
bindir = @@PRO_ENGINEER_DIR@@/$(PRO_MACHINE_TYPE)
d38 10
a47 5
libproe2brl_la_SOURCES = proe-brl.c
libproe2brl_la_CFLAGS = $(AM_CFLAGS)
libproe2brl_la_LDFLAGS = -multigot -rpath $(libdir) -T10000000 -B symbolic
libproe2brl_la_LIBADD = $(PTLIB_DLL) $(PDLIB_DLL) $(BRLLIBS) $(SYSLIBS) 
libdir = @@PRO_ENGINEER_DIR@@/$(PRO_MACHINE_TYPE)
d57 3
a59 2
	@@if test -f proe-brl ; then \
		$(INSTALL) .libs/proe-brl $(bindir)/proe-brl ; \
d61 3
a63 2
	@@if test -f libproe2brl.la ; then \
		$(INSTALL) .libs/libproe2brl.so $(libdir)/libproe2brl.so ; \
d67 4
a70 2
	@@if test -f $(bindir)/proe-brl ; then \
		/usr/proe/bin/protk_unlock $(bindir)/proe-brl ; \
d72 4
a75 2
	@@if test -f $(libdir)/libproe2brl.so ; then \
		/usr/proe/bin/protk_unlock $(libdir)/libproe2brl.so ; \
d105 1
d108 3
a110 1
CLEANFILES = libproe2brl.la proe-brl
@


1.5
log
@bleh, comment comment
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.4 2004/10/22 04:34:32 morrison Exp $#
d21 1
a21 1
AM_LDFLAGS = $(BRLLIBS) $(SYSLIBS)
@


1.4
log
@reorganize pro-engineer plugin build and integrate into existing build structure.  Now if you want to build the plugin, you cd to the pro-engineer dir and 'make plugin', 'make unlock', and 'make install'.
@
text
@d1 1
a1 1
## $Id: Makefile.am,v 1.3 2004/09/24 14:51:28 morrison Exp $#
@


1.3
log
@help make distcheck get a whole lot farther ..
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.2 2004/06/03 14:53:32 erikg Exp $
d3 2
a4 4
SUBDIRS = \
	resource \
	sgi_mips4 \
	text
d6 5
a10 1
stuffdir = $(prefix)/pro-engineer
d12 67
a78 1
stuff_DATA = \
d82 7
d90 6
a95 3
	install.doc \
	protk.dat \
	protk.in
d97 1
a97 2
protk.dat: protk.in Makefile.am
	sed -e "s&${prefix}&BASEDIR&" < ${top_srcdir}/misc/pro-engineer/protk.in > protk.dat
@


1.2
log
@cope with new dir layout
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.1 2004/05/20 21:53:48 morrison Exp $
d3 4
a6 1
SUBDIRS = sgi_mips4 text resource
d9 9
a17 2
stuff_DATA = install.doc protk.dat
EXTRA_DIST = install.doc protk.in
@


1.1
log
@moved pro-engineer from top level to misc/
@
text
@d1 1
a1 1
# $Id: Makefile.am,v 1.2 2004/03/18 18:25:16 erikg Exp $
d10 1
a10 1
	sed -e "s&${prefix}&BASEDIR&" < ${top_srcdir}/pro-engineer/protk.in > protk.dat
@

