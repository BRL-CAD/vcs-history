head	14.3;
access;
symbols
	stable-branch:14.1
	rel-7-8-2:14.2
	rel-7-8-0:14.2
	trimnurbs-branch:14.2.0.8
	help:14.2
	temp_tag:14.2
	bobWinPort-20051223-freeze:14.2
	postmerge-20051223-bobWinPort:14.2
	premerge-20051223-bobWinPort:14.2
	rel-7-6-6:14.2
	rel-7-6-4:14.2
	rel-7-6-2:14.2
	rel-7-6-branch:14.2.0.6
	rel-7-6-0:14.2
	rel-7-4-2:14.2
	rel-7-4-branch:14.2.0.4
	bobWinPort:14.2.0.2
	rel-7-4-0:14.2
	rel-7-2-6:14.2
	rel-7-2-4:14.1
	rel-7-2-2:14.1
	rel-7-2-0:14.1
	rel-7-0-4:14.1
	rel-7-0-2:14.1
	rel-7-0-1:14.1
	opensource-post:14.1
	opensource-pre:1.1
	rel-7-0-branch:1.1.0.2
	rel-7-0:1.1;
locks; strict;
comment	@# @;


14.3
date	2006.07.28.03.38.45;	author brlcad;	state dead;
branches;
next	14.2;

14.2
date	2005.05.12.21.21.11;	author brlcad;	state Exp;
branches;
next	14.1;

14.1
date	2004.11.16.19.42.10;	author morrison;	state Exp;
branches;
next	1.1;

1.1
date	2004.11.01.13.53.57;	author morrison;	state Exp;
branches;
next	;


desc
@@


14.3
log
@move the Pro/Engineer plugin from misc/pro-engineer to src/external/ProEngineer.  the new src/external directory is intended for all of the codes that are written to work with and link against external packages (often as a plugin to said external package)
@
text
@# File Name
MAKEFILENAME = mk

# Machine Type
PRO_MACHINE_TYPE = sgi_mips4

# Executable names
EXE     = proe-brl
EXE_DLL = libproe2brl.so

# Pro/Toolkit Source & Machine Loadpoint  (EXTERNAL USE - DEFAULT)
PROTOOL_SRC = /opt/ptc/proe2001/protoolkit
PROTOOL_SYS = $(PROTOOL_SRC)/$(PRO_MACHINE_TYPE)
PRODEV_SRC  = /opt/ptc/proe2001/prodevelop
PRODEV_SYS  = $(PRODEV_SRC)/$(PRO_MACHINE_TYPE)

# Pro/Toolkit Source & Machine Loadpoint  (PTC INTERNAL USE)
#PROTOOL_SRC = $(PTCSRC)/protoolkit
#PROTOOL_SYS = $(PTCSYS)
#PRODEV_SRC  = $(PTCSRC)/prodevelop
#PRODEV_SYS  = $(PTCSYS)

# Include File Paths
INCS = \
  -I. \
  -I$(PROTOOL_SRC)/protk_appls/includes \
  -I$(PROTOOL_SRC)/includes \
  -I$(PRODEV_SRC)/includes \
  -I../../include/brlcad \
  -I../../include

# Compiler
CC = cc -n32 -mips4 -woff 1521
# to build C++, uncomment these lines
#CC = CC -n32 -mips4

# Compiler Flags
DEFS        = -DPRO_MACHINE=23 -DPRO_OS=3
OPTS        = -r10000 -ansi -no_exceptions -O2 -OPT:Olimit=0
CFLAGS      = $(OPTS) $(DEFS) $(INCS) -DHAVE_CONFIG_H

# uncomment this if you want to ignore "multiply defined" warnings
# from the linker
#LDWOFF      = -Wl,-woff,15

# Link Flags
LDFLAGS     = -multigot -Wl,-wall $(LDWOFF) -rpath @@PRO_ENGINEER_DIR@@/../lib
DLLFLAGS    = -Wl,-hiddens_file,/dev/null -shared -T10000000 -B symbolic

# Libraries
PDLIB       = $(PRODEV_SYS)/obj/prodevelop.a
PDLIB_DLL   = $(PRODEV_SYS)/obj/prodev_dll.a
PTLIB       = $(PROTOOL_SYS)/obj/protoolkit.a
PTLIB_DLL   = $(PROTOOL_SYS)/obj/protk_dll.a
PTCLIBS     = $(PTLIB) $(PDLIB)
PTCLIBS_DLL = $(PTLIB_DLL) $(PDLIB_DLL)
BRLLIBS     = ../../src/libbu/.libs/libbu.a ../../src/libbn/.libs/libbn.a ../../src/other/libtcl/.libs/libtcl.a
SYSLIBS     = -lc -lm -lw

# Object files
OBJS = proe-brl.o

exe: $(EXE)

dll: $(EXE_DLL)

all: $(EXE) $(EXE_DLL)

$(EXE): $(OBJS) $(PTCLIBS)
	@@echo PROTOOL_SRC = $(PROTOOL_SRC)
	@@echo PROTOOL_SYS = $(PROTOOL_SYS)
	$(CC) $(LDFLAGS) -o $(EXE) $(OBJS) $(PTLIB) $(PDLIB) $(BRLLIBS) $(SYSLIBS)

$(EXE_DLL): $(OBJS) $(PTCLIBS_DLL)
	@@echo PROTOOL_SRC = $(PROTOOL_SRC)
	@@echo PROTOOL_SYS = $(PROTOOL_SYS)
	$(CC) $(LDFLAGS) $(DLLFLAGS) -o $(EXE_DLL) $(OBJS) $(PTLIB_DLL) $(PDLIB_DLL) $(BRLLIBS) $(SYSLIBS)

clean:
	rm -f $(EXE) $(OBJS)
	rm -f $(EXE_DLL) so_locations


# object dependencies

proe-brl.o:   proe-brl.c
	$(CC) $(CFLAGS) -c $?
@


14.2
log
@cannot use a brl-cad header without either installing first or defining HAVE_CONFIG_H, so do the latter
@
text
@@


14.1
log
@dawn of a new revision.  it shall be numbered 14 to match release 7.  begin the convergence by adding emacs/vi local variable footer blocks to encourage consistent formatting.
@
text
@d40 1
a40 1
CFLAGS      = $(OPTS) $(DEFS) $(INCS)
@


1.1
log
@revert back to making the build system use the pro-e-provided makefile.  this assumes cc, that the build has successfully make libbu, libbn, and libtcl, and that the build is occuring relative to the top_srcdir in ../.. (i.e. building from the pro-engineer dir).  the libraries are linked static so that they may be included in a 64bit release as well.
@
text
@@

