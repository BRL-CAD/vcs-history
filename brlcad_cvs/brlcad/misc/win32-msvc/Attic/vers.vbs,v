head	1.6;
access;
symbols
	rel-7-10-0:1.5
	rel-7-8-4:1.3
	rel-7-8-2:1.2
	rel-7-8-0:1.2
	trimnurbs-branch:1.2.0.2
	help:1.2
	temp_tag:1.2
	bobWinPort-20051223-freeze:1.1
	postmerge-20051223-bobWinPort:1.2
	premerge-20051223-bobWinPort:1.2
	rel-7-6-6:1.2
	rel-7-6-4:1.2
	rel-7-6-2:1.1
	rel-7-6-branch:1.1.0.6
	rel-7-6-0:1.1
	rel-7-4-2:1.1
	rel-7-4-branch:1.1.0.4
	bobWinPort:1.1.0.2
	rel-7-4-0:1.1;
locks; strict;
comment	@# @;


1.6
date	2007.04.17.15.03.42;	author d_rossberg;	state dead;
branches;
next	1.5;

1.5
date	2007.01.20.21.46.52;	author brlcad;	state Exp;
branches;
next	1.4;

1.4
date	2007.01.20.14.59.14;	author erikgreenwald;	state Exp;
branches;
next	1.3;

1.3
date	2006.06.30.16.43.48;	author brlcad;	state Exp;
branches;
next	1.2;

1.2
date	2005.09.15.08.09.35;	author d_rossberg;	state Exp;
branches;
next	1.1;

1.1
date	2005.07.08.14.50.38;	author d_rossberg;	state Exp;
branches
	1.1.6.1;
next	;

1.1.6.1
date	2005.11.13.13.46.10;	author brlcad;	state Exp;
branches;
next	;


desc
@@


1.6
log
@remove old version number handling for MSVC
@
text
@'                         V E R S . V B S
' BRL-CAD
'
' Copyright (c) 2005-2007 United States Government as represented by
' the U.S. Army Research Laboratory.
'
' Redistribution and use in source and binary forms, with or without
' modification, are permitted provided that the following conditions
' are met:
'
' 1. Redistributions of source code must retain the above copyright
' notice, this list of conditions and the following disclaimer.
'
' 2. Redistributions in binary form must reproduce the above
' copyright notice, this list of conditions and the following
' disclaimer in the documentation and/or other materials provided
' with the distribution.
'
' 3. The name of the author may not be used to endorse or promote
' products derived from this software without specific prior written
' permission.
'
' THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS
' OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
' WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
' ARE DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
' DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
' DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
' GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
' INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
' WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
' NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
' SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
'
'''
'
' Update the "version" file for creation of a new "vers.c" from it.
' May be run in any subdirectory of the source tree.  Output goes to
' stdout now so you'll likely need to run:
'
'   vers.bat variable_name this is a title > vers.c
'
' Optional args:
'   variable name to put version string in (default="version")
'   title
'
' Author -
'   Daniel Rossberg
'
' Source -
'   IABG mbH
'   Einsteinstr. 20, 85521 Ottobrunn, Germany
'
' @@(#)$Header: /cvsroot/brlcad/brlcad/misc/win32-msvc/vers.vbs,v 1.5 2007/01/20 21:46:52 brlcad Exp $ (BRL)


Set commandLineArguments = WScript.Arguments
Set fileSystem           = CreateObject("Scripting.FileSystemObject")
Set wshNetwork           = Wscript.CreateObject("Wscript.Network")

versionFileName          = "version"
configurationFileName    = "..\..\configure.ac"

' VARIABLE
If CommandLineArguments.Count > 0 Then
    myVariable = CommandLineArguments.Item(0)
Else
    myVariable = "version"
End If

' RELEASE
If (fileSystem.FileExists(configurationFileName)) Then
    Set configurationFileStream = fileSystem.OpenTextFile(configurationFileName)

    Do Until configurationFileStream.AtEndOfStream
        cfsLine = configurationFileStream.Readline

        if InStr(cfsLine, "MAJOR_VERSION=") > 0 Then
            myRelease = Mid(cfsLine, 15)
        ElseIf InStr(cfsLine, "MINOR_VERSION=") > 0 Then
            myRelease = myRelease + "." + Mid(cfsLine, 15)
        ElseIf InStr(cfsLine, "PATCH_VERSION=") > 0 Then
            myRelease = myRelease + "." + Mid(cfsLine, 15)
            Exit Do
        End If
    Loop

    configurationFileStream.Close
Else
    myRelease = "??.??.??"
End If

' TITLE
If commandLineArguments.Count > 1 Then
    myTitle = commandLineArguments.Item(1)

    For i = 2 to commandLineArguments.Count - 1
        myTitle = myTitle + " " + commandLineArguments.Item(i)
    Next
Else
    myTitle = "Graphics Editor (MGED)"
End If

' DATE
myDate = CStr(Date)

' VERSION
If fileSystem.FileExists(versionFileName) Then
    Set versionFileStream = fileSystem.OpenTextFile(versionFileName)
    myVersion             = CStr(versionFileStream.ReadLine + 1)
    versionFileStream.Close
Else
    myVersion   = "0"
End If

Set versionFileStream = fileSystem.CreateTextFile(versionFileName, True)
versionFileStream.WriteLine(myVersion)
versionFileStream.Close

' USER
myUser = wshNetwork.UserName

' COMPUTER
myComputer = wshNetwork.ComputerName

' DIRECTORY
Set versionFile = fileSystem.GetFile(versionFileName)
myDirectory     = Replace(versionFile.ParentFolder, "\", "/")

WScript.Echo("char " + myVariable + "[] = ""@@(#) BRL-CAD Release " + myRelease + "   " + myTitle + "\n""")
WScript.Echo("    """ + myDate + ", Compilation " + myVersion + "\n""")
WScript.Echo("    """ + myUser + "@@" + myComputer + ":" + myDirectory + "\n"";")


' Local Variables:
' mode: vb
' tab-width: 8
' vb-indentation: 4
' vb-basic-offset: 4
' indent-tabs-mode: t
' End:
' ex: shiftwidth=4 tabstop=8
@


1.5
log
@consistency on the (c), keep it simple
@
text
@d54 1
a54 1
' @@(#)$Header: /cvsroot/brlcad/brlcad/misc/win32-msvc/vers.vbs,v 1.4 2007/01/20 14:59:14 erikgreenwald Exp $ (BRL)
@


1.4
log
@update copyright to 2007
@
text
@d4 1
a4 1
' Copyright (C) 2005-2007 United States Government as represented by
d54 1
a54 1
' @@(#)$Header: /cvsroot/brlcad/brlcad/misc/win32-msvc/vers.vbs,v 1.3 2006/06/30 16:43:48 brlcad Exp $ (BRL)
@


1.3
log
@file didn't exist before 2005
@
text
@d4 1
a4 1
' Copyright (C) 2005-2006 United States Government as represented by
d54 1
a54 1
' @@(#)$Header: /cvsroot/brlcad/brlcad/misc/win32-msvc/vers.vbs,v 1.2 2005/09/15 08:09:35 d_rossberg Exp $ (BRL)
@


1.2
log
@mode is Visual Basic
@
text
@d4 1
a4 1
' Copyright (C) 2002-2005 United States Government as represented by
d54 1
a54 1
' @@(#)$Header: /cvsroot/brlcad/brlcad/misc/win32-msvc/vers.vbs,v 1.1 2005/07/08 14:50:38 d_rossberg Exp $ (BRL)
@


1.1
log
@MS Windows counterpart of vers.sh
@
text
@d4 2
a5 1
' Copyright (C) 2005 IABG mbH
d54 1
a54 1
' @@(#)$Header: /cvsroot/brlcad/brlcad/misc/win32-msvc/vers.vbs,v 14.5 2005/05/12 12:33:46 brlcad Exp $ (BRL)
d136 1
a136 1
' mode: sh
d138 2
a139 2
' sh-indentation: 4
' sh-basic-offset: 4
@


1.1.6.1
log
@merge changes from HEAD aka rel-7-6-4 to the rel-7-6-branch just in case someone peeks a gander or tries to continue/build the branch
@
text
@d4 1
a4 2
' Copyright (C) 2002-2005 United States Government as represented by
' the U.S. Army Research Laboratory.
d53 1
a53 1
' @@(#)$Header$ (BRL)
d135 1
a135 1
' mode: vb
d137 2
a138 2
' vb-indentation: 4
' vb-basic-offset: 4
@


